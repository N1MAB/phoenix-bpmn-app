(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Sm={exports:{}},kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function QA(){if(yE)return kl;yE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,s){var c=null;if(s!==void 0&&(c=""+s),o.key!==void 0&&(c=""+o.key),"key"in o){s={};for(var u in o)u!=="key"&&(s[u]=o[u])}else s=o;return o=s.ref,{$$typeof:e,type:i,key:c,ref:o!==void 0?o:null,props:s}}return kl.Fragment=t,kl.jsx=n,kl.jsxs=n,kl}var _E;function JA(){return _E||(_E=1,Sm.exports=QA()),Sm.exports}var ye=JA(),wm={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function eM(){if(bE)return Ge;bE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.iterator;function y(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function S(k,ne,V){this.props=k,this.context=ne,this.refs=w,this.updater=V||_}S.prototype.isReactComponent={},S.prototype.setState=function(k,ne){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ne,"setState")},S.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function O(){}O.prototype=S.prototype;function N(k,ne,V){this.props=k,this.context=ne,this.refs=w,this.updater=V||_}var A=N.prototype=new O;A.constructor=N,b(A,S.prototype),A.isPureReactComponent=!0;var C=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function F(k,ne,V,Y,ae,me){return V=me.ref,{$$typeof:e,type:k,key:ne,ref:V!==void 0?V:null,props:me}}function j(k,ne){return F(k.type,ne,void 0,void 0,void 0,k.props)}function Q(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function J(k){var ne={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(V){return ne[V]})}var le=/\/+/g;function ee(k,ne){return typeof k=="object"&&k!==null&&k.key!=null?J(""+k.key):ne.toString(36)}function pe(){}function we(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(pe,pe):(k.status="pending",k.then(function(ne){k.status==="pending"&&(k.status="fulfilled",k.value=ne)},function(ne){k.status==="pending"&&(k.status="rejected",k.reason=ne)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Je(k,ne,V,Y,ae){var me=typeof k;(me==="undefined"||me==="boolean")&&(k=null);var xe=!1;if(k===null)xe=!0;else switch(me){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(k.$$typeof){case e:case t:xe=!0;break;case h:return xe=k._init,Je(xe(k._payload),ne,V,Y,ae)}}if(xe)return ae=ae(k),xe=Y===""?"."+ee(k,0):Y,C(ae)?(V="",xe!=null&&(V=xe.replace(le,"$&/")+"/"),Je(ae,ne,V,"",function(x){return x})):ae!=null&&(Q(ae)&&(ae=j(ae,V+(ae.key==null||k&&k.key===ae.key?"":(""+ae.key).replace(le,"$&/")+"/")+xe)),ne.push(ae)),1;xe=0;var P=Y===""?".":Y+":";if(C(k))for(var E=0;E<k.length;E++)Y=k[E],me=P+ee(Y,E),xe+=Je(Y,ne,V,me,ae);else if(E=y(k),typeof E=="function")for(k=E.call(k),E=0;!(Y=k.next()).done;)Y=Y.value,me=P+ee(Y,E++),xe+=Je(Y,ne,V,me,ae);else if(me==="object"){if(typeof k.then=="function")return Je(we(k),ne,V,Y,ae);throw ne=String(k),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return xe}function W(k,ne,V){if(k==null)return k;var Y=[],ae=0;return Je(k,Y,"","",function(me){return ne.call(V,me,ae++)}),Y}function oe(k){if(k._status===-1){var ne=k._result;ne=ne(),ne.then(function(V){(k._status===0||k._status===-1)&&(k._status=1,k._result=V)},function(V){(k._status===0||k._status===-1)&&(k._status=2,k._result=V)}),k._status===-1&&(k._status=0,k._result=ne)}if(k._status===1)return k._result.default;throw k._result}var _e=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Ie(){}return Ge.Children={map:W,forEach:function(k,ne,V){W(k,function(){ne.apply(this,arguments)},V)},count:function(k){var ne=0;return W(k,function(){ne++}),ne},toArray:function(k){return W(k,function(ne){return ne})||[]},only:function(k){if(!Q(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ge.Component=S,Ge.Fragment=n,Ge.Profiler=o,Ge.PureComponent=N,Ge.StrictMode=i,Ge.Suspense=f,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Ge.cache=function(k){return function(){return k.apply(null,arguments)}},Ge.cloneElement=function(k,ne,V){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var Y=b({},k.props),ae=k.key,me=void 0;if(ne!=null)for(xe in ne.ref!==void 0&&(me=void 0),ne.key!==void 0&&(ae=""+ne.key),ne)!B.call(ne,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ne.ref===void 0||(Y[xe]=ne[xe]);var xe=arguments.length-2;if(xe===1)Y.children=V;else if(1<xe){for(var P=Array(xe),E=0;E<xe;E++)P[E]=arguments[E+2];Y.children=P}return F(k.type,ae,void 0,void 0,me,Y)},Ge.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:s,_context:k},k},Ge.createElement=function(k,ne,V){var Y,ae={},me=null;if(ne!=null)for(Y in ne.key!==void 0&&(me=""+ne.key),ne)B.call(ne,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ae[Y]=ne[Y]);var xe=arguments.length-2;if(xe===1)ae.children=V;else if(1<xe){for(var P=Array(xe),E=0;E<xe;E++)P[E]=arguments[E+2];ae.children=P}if(k&&k.defaultProps)for(Y in xe=k.defaultProps,xe)ae[Y]===void 0&&(ae[Y]=xe[Y]);return F(k,me,void 0,void 0,null,ae)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(k){return{$$typeof:u,render:k}},Ge.isValidElement=Q,Ge.lazy=function(k){return{$$typeof:h,_payload:{_status:-1,_result:k},_init:oe}},Ge.memo=function(k,ne){return{$$typeof:d,type:k,compare:ne===void 0?null:ne}},Ge.startTransition=function(k){var ne=D.T,V={};D.T=V;try{var Y=k(),ae=D.S;ae!==null&&ae(V,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(Ie,_e)}catch(me){_e(me)}finally{D.T=ne}},Ge.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ge.use=function(k){return D.H.use(k)},Ge.useActionState=function(k,ne,V){return D.H.useActionState(k,ne,V)},Ge.useCallback=function(k,ne){return D.H.useCallback(k,ne)},Ge.useContext=function(k){return D.H.useContext(k)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(k,ne){return D.H.useDeferredValue(k,ne)},Ge.useEffect=function(k,ne,V){var Y=D.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(k,ne)},Ge.useId=function(){return D.H.useId()},Ge.useImperativeHandle=function(k,ne,V){return D.H.useImperativeHandle(k,ne,V)},Ge.useInsertionEffect=function(k,ne){return D.H.useInsertionEffect(k,ne)},Ge.useLayoutEffect=function(k,ne){return D.H.useLayoutEffect(k,ne)},Ge.useMemo=function(k,ne){return D.H.useMemo(k,ne)},Ge.useOptimistic=function(k,ne){return D.H.useOptimistic(k,ne)},Ge.useReducer=function(k,ne,V){return D.H.useReducer(k,ne,V)},Ge.useRef=function(k){return D.H.useRef(k)},Ge.useState=function(k){return D.H.useState(k)},Ge.useSyncExternalStore=function(k,ne,V){return D.H.useSyncExternalStore(k,ne,V)},Ge.useTransition=function(){return D.H.useTransition()},Ge.version="19.1.1",Ge}var EE;function Bv(){return EE||(EE=1,wm.exports=eM()),wm.exports}var un=Bv(),Rm={exports:{}},zl={},Tm={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function tM(){return xE||(xE=1,(function(e){function t(W,oe){var _e=W.length;W.push(oe);e:for(;0<_e;){var Ie=_e-1>>>1,k=W[Ie];if(0<o(k,oe))W[Ie]=oe,W[_e]=k,_e=Ie;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var oe=W[0],_e=W.pop();if(_e!==oe){W[0]=_e;e:for(var Ie=0,k=W.length,ne=k>>>1;Ie<ne;){var V=2*(Ie+1)-1,Y=W[V],ae=V+1,me=W[ae];if(0>o(Y,_e))ae<k&&0>o(me,Y)?(W[Ie]=me,W[ae]=_e,Ie=ae):(W[Ie]=Y,W[V]=_e,Ie=V);else if(ae<k&&0>o(me,_e))W[Ie]=me,W[ae]=_e,Ie=ae;else break e}}return oe}function o(W,oe){var _e=W.sortIndex-oe.sortIndex;return _e!==0?_e:W.id-oe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var f=[],d=[],h=1,v=null,y=3,_=!1,b=!1,w=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function C(W){for(var oe=n(d);oe!==null;){if(oe.callback===null)i(d);else if(oe.startTime<=W)i(d),oe.sortIndex=oe.expirationTime,t(f,oe);else break;oe=n(d)}}function D(W){if(w=!1,C(W),!b)if(n(f)!==null)b=!0,B||(B=!0,ee());else{var oe=n(d);oe!==null&&Je(D,oe.startTime-W)}}var B=!1,F=-1,j=5,Q=-1;function J(){return S?!0:!(e.unstable_now()-Q<j)}function le(){if(S=!1,B){var W=e.unstable_now();Q=W;var oe=!0;try{e:{b=!1,w&&(w=!1,N(F),F=-1),_=!0;var _e=y;try{t:{for(C(W),v=n(f);v!==null&&!(v.expirationTime>W&&J());){var Ie=v.callback;if(typeof Ie=="function"){v.callback=null,y=v.priorityLevel;var k=Ie(v.expirationTime<=W);if(W=e.unstable_now(),typeof k=="function"){v.callback=k,C(W),oe=!0;break t}v===n(f)&&i(f),C(W)}else i(f);v=n(f)}if(v!==null)oe=!0;else{var ne=n(d);ne!==null&&Je(D,ne.startTime-W),oe=!1}}break e}finally{v=null,y=_e,_=!1}oe=void 0}}finally{oe?ee():B=!1}}}var ee;if(typeof A=="function")ee=function(){A(le)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,we=pe.port2;pe.port1.onmessage=le,ee=function(){we.postMessage(null)}}else ee=function(){O(le,0)};function Je(W,oe){F=O(function(){W(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(W){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var _e=y;y=oe;try{return W()}finally{y=_e}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _e=y;y=W;try{return oe()}finally{y=_e}},e.unstable_scheduleCallback=function(W,oe,_e){var Ie=e.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ie+_e:Ie):_e=Ie,W){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=_e+k,W={id:h++,callback:oe,priorityLevel:W,startTime:_e,expirationTime:k,sortIndex:-1},_e>Ie?(W.sortIndex=_e,t(d,W),n(f)===null&&W===n(d)&&(w?(N(F),F=-1):w=!0,Je(D,_e-Ie))):(W.sortIndex=k,t(f,W),b||_||(b=!0,B||(B=!0,ee()))),W},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(W){var oe=y;return function(){var _e=y;y=oe;try{return W.apply(this,arguments)}finally{y=_e}}}})(Cm)),Cm}var SE;function nM(){return SE||(SE=1,Tm.exports=tM()),Tm.exports}var Am={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function iM(){if(wE)return En;wE=1;var e=Bv();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function s(f,d,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:f,containerInfo:d,implementation:h}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,En.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(f,d,null,h)},En.flushSync=function(f){var d=c.T,h=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=d,i.p=h,i.d.f()}},En.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},En.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},En.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,v=u(h,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:_}):h==="script"&&i.d.X(f,{crossOrigin:v,integrity:y,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},En.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},En.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,v=u(h,d.crossOrigin);i.d.L(f,h,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},En.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},En.requestFormReset=function(f){i.d.r(f)},En.unstable_batchedUpdates=function(f,d){return f(d)},En.useFormState=function(f,d,h){return c.H.useFormState(f,d,h)},En.useFormStatus=function(){return c.H.useHostTransitionStatus()},En.version="19.1.1",En}var RE;function rM(){if(RE)return Am.exports;RE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Am.exports=iM(),Am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function aM(){if(TE)return zl;TE=1;var e=nM(),t=Bv(),n=rM();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function c(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function u(r){if(s(r)!==r)throw Error(i(188))}function f(r){var a=r.alternate;if(!a){if(a=s(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,p=a;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(p=m.return,p!==null){l=p;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return u(m),r;if(g===p)return u(m),a;g=g.sibling}throw Error(i(188))}if(l.return!==p.return)l=m,p=g;else{for(var R=!1,M=m.child;M;){if(M===l){R=!0,l=m,p=g;break}if(M===p){R=!0,p=m,l=g;break}M=M.sibling}if(!R){for(M=g.child;M;){if(M===l){R=!0,l=g,p=m;break}if(M===p){R=!0,p=g,l=m;break}M=M.sibling}if(!R)throw Error(i(189))}}if(l.alternate!==p)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function d(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=d(r),a!==null)return a;r=r.sibling}return null}var h=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function ee(r){return r===null||typeof r!="object"?null:(r=le&&r[le]||r["@@iterator"],typeof r=="function"?r:null)}var pe=Symbol.for("react.client.reference");function we(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===pe?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList";case Q:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case _:return"Portal";case A:return(r.displayName||"Context")+".Provider";case N:return(r._context.displayName||"Context")+".Consumer";case C:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return a=r.displayName||null,a!==null?a:we(r.type)||"Memo";case j:a=r._payload,r=r._init;try{return we(r(a))}catch{}}return null}var Je=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ie=[],k=-1;function ne(r){return{current:r}}function V(r){0>k||(r.current=Ie[k],Ie[k]=null,k--)}function Y(r,a){k++,Ie[k]=r.current,r.current=a}var ae=ne(null),me=ne(null),xe=ne(null),P=ne(null);function E(r,a){switch(Y(xe,a),Y(me,r),Y(ae,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?Y0(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=Y0(a),r=q0(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}V(ae),Y(ae,r)}function x(){V(ae),V(me),V(xe)}function H(r){r.memoizedState!==null&&Y(P,r);var a=ae.current,l=q0(a,r.type);a!==l&&(Y(me,r),Y(ae,l))}function U(r){me.current===r&&(V(ae),V(me)),P.current===r&&(V(P),Ol._currentValue=_e)}var te=Object.prototype.hasOwnProperty,fe=e.unstable_scheduleCallback,ge=e.unstable_cancelCallback,$e=e.unstable_shouldYield,wt=e.unstable_requestPaint,tt=e.unstable_now,Lt=e.unstable_getCurrentPriorityLevel,wn=e.unstable_ImmediatePriority,it=e.unstable_UserBlockingPriority,Dn=e.unstable_NormalPriority,yo=e.unstable_LowPriority,yn=e.unstable_IdlePriority,Oe=e.log,et=e.unstable_setDisableYieldValue,Hs=null,Gn=null;function Mr(r){if(typeof Oe=="function"&&et(r),Gn&&typeof Gn.setStrictMode=="function")try{Gn.setStrictMode(Hs,r)}catch{}}var Vn=Math.clz32?Math.clz32:j2,k2=Math.log,z2=Math.LN2;function j2(r){return r>>>=0,r===0?32:31-(k2(r)/z2|0)|0}var Vc=256,Fc=4194304;function Ma(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Yc(r,a,l){var p=r.pendingLanes;if(p===0)return 0;var m=0,g=r.suspendedLanes,R=r.pingedLanes;r=r.warmLanes;var M=p&134217727;return M!==0?(p=M&~g,p!==0?m=Ma(p):(R&=M,R!==0?m=Ma(R):l||(l=M&~r,l!==0&&(m=Ma(l))))):(M=p&~g,M!==0?m=Ma(M):R!==0?m=Ma(R):l||(l=p&~r,l!==0&&(m=Ma(l)))),m===0?0:a!==0&&a!==m&&(a&g)===0&&(g=m&-m,l=a&-a,g>=l||g===32&&(l&4194048)!==0)?a:m}function $s(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function H2(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function My(){var r=Vc;return Vc<<=1,(Vc&4194048)===0&&(Vc=256),r}function Dy(){var r=Fc;return Fc<<=1,(Fc&62914560)===0&&(Fc=4194304),r}function pd(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function Is(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function $2(r,a,l,p,m,g){var R=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var M=r.entanglements,L=r.expirationTimes,X=r.hiddenUpdates;for(l=R&~l;0<l;){var ie=31-Vn(l),se=1<<ie;M[ie]=0,L[ie]=-1;var K=X[ie];if(K!==null)for(X[ie]=null,ie=0;ie<K.length;ie++){var Z=K[ie];Z!==null&&(Z.lane&=-536870913)}l&=~se}p!==0&&Oy(r,p,0),g!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=g&~(R&~a))}function Oy(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var p=31-Vn(a);r.entangledLanes|=a,r.entanglements[p]=r.entanglements[p]|1073741824|l&4194090}function Ny(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var p=31-Vn(l),m=1<<p;m&a|r[p]&a&&(r[p]|=a),l&=~m}}function dd(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function hd(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Py(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:pE(r.type))}function I2(r,a){var l=oe.p;try{return oe.p=r,a()}finally{oe.p=l}}var Dr=Math.random().toString(36).slice(2),_n="__reactFiber$"+Dr,On="__reactProps$"+Dr,_o="__reactContainer$"+Dr,md="__reactEvents$"+Dr,U2="__reactListeners$"+Dr,G2="__reactHandles$"+Dr,By="__reactResources$"+Dr,Us="__reactMarker$"+Dr;function vd(r){delete r[_n],delete r[On],delete r[md],delete r[U2],delete r[G2]}function bo(r){var a=r[_n];if(a)return a;for(var l=r.parentNode;l;){if(a=l[_o]||l[_n]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=Z0(r);r!==null;){if(l=r[_n])return l;r=Z0(r)}return a}r=l,l=r.parentNode}return null}function Eo(r){if(r=r[_n]||r[_o]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Gs(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function xo(r){var a=r[By];return a||(a=r[By]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Jt(r){r[Us]=!0}var Ly=new Set,ky={};function Da(r,a){So(r,a),So(r+"Capture",a)}function So(r,a){for(ky[r]=a,r=0;r<a.length;r++)Ly.add(a[r])}var V2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zy={},jy={};function F2(r){return te.call(jy,r)?!0:te.call(zy,r)?!1:V2.test(r)?jy[r]=!0:(zy[r]=!0,!1)}function qc(r,a,l){if(F2(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var p=a.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function Xc(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function Qi(r,a,l,p){if(p===null)r.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+p)}}var gd,Hy;function wo(r){if(gd===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);gd=a&&a[1]||"",Hy=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gd+r+Hy}var yd=!1;function _d(r,a){if(!r||yd)return"";yd=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Z){var K=Z}Reflect.construct(r,[],se)}else{try{se.call()}catch(Z){K=Z}r.call(se.prototype)}}else{try{throw Error()}catch(Z){K=Z}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=p.DetermineComponentFrameRoot(),R=g[0],M=g[1];if(R&&M){var L=R.split(`
`),X=M.split(`
`);for(m=p=0;p<L.length&&!L[p].includes("DetermineComponentFrameRoot");)p++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(p===L.length||m===X.length)for(p=L.length-1,m=X.length-1;1<=p&&0<=m&&L[p]!==X[m];)m--;for(;1<=p&&0<=m;p--,m--)if(L[p]!==X[m]){if(p!==1||m!==1)do if(p--,m--,0>m||L[p]!==X[m]){var ie=`
`+L[p].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=p&&0<=m);break}}}finally{yd=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?wo(l):""}function Y2(r){switch(r.tag){case 26:case 27:case 5:return wo(r.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 15:return _d(r.type,!1);case 11:return _d(r.type.render,!1);case 1:return _d(r.type,!0);case 31:return wo("Activity");default:return""}}function $y(r){try{var a="";do a+=Y2(r),r=r.return;while(r);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ti(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Iy(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function q2(r){var a=Iy(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),p=""+r[a];if(!r.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(R){p=""+R,g.call(this,R)}}),Object.defineProperty(r,a,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(R){p=""+R},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Kc(r){r._valueTracker||(r._valueTracker=q2(r))}function Uy(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),p="";return r&&(p=Iy(r)?r.checked?"true":"false":r.value),r=p,r!==l?(a.setValue(r),!0):!1}function Wc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var X2=/[\n"\\]/g;function ni(r){return r.replace(X2,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function bd(r,a,l,p,m,g,R,M){r.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.type=R:r.removeAttribute("type"),a!=null?R==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+ti(a)):r.value!==""+ti(a)&&(r.value=""+ti(a)):R!=="submit"&&R!=="reset"||r.removeAttribute("value"),a!=null?Ed(r,R,ti(a)):l!=null?Ed(r,R,ti(l)):p!=null&&r.removeAttribute("value"),m==null&&g!=null&&(r.defaultChecked=!!g),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?r.name=""+ti(M):r.removeAttribute("name")}function Gy(r,a,l,p,m,g,R,M){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+ti(l):"",a=a!=null?""+ti(a):l,M||a===r.value||(r.value=a),r.defaultValue=a}p=p??m,p=typeof p!="function"&&typeof p!="symbol"&&!!p,r.checked=M?r.checked:!!p,r.defaultChecked=!!p,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(r.name=R)}function Ed(r,a,l){a==="number"&&Wc(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Ro(r,a,l,p){if(r=r.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=a.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&p&&(r[l].defaultSelected=!0)}else{for(l=""+ti(l),a=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,p&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function Vy(r,a,l){if(a!=null&&(a=""+ti(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+ti(l):""}function Fy(r,a,l,p){if(a==null){if(p!=null){if(l!=null)throw Error(i(92));if(Je(p)){if(1<p.length)throw Error(i(93));p=p[0]}l=p}l==null&&(l=""),a=l}l=ti(a),r.defaultValue=l,p=r.textContent,p===l&&p!==""&&p!==null&&(r.value=p)}function To(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var K2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yy(r,a,l){var p=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?p?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":p?r.setProperty(a,l):typeof l!="number"||l===0||K2.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function qy(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var p in l)!l.hasOwnProperty(p)||a!=null&&a.hasOwnProperty(p)||(p.indexOf("--")===0?r.setProperty(p,""):p==="float"?r.cssFloat="":r[p]="");for(var m in a)p=a[m],a.hasOwnProperty(m)&&l[m]!==p&&Yy(r,m,p)}else for(var g in a)a.hasOwnProperty(g)&&Yy(r,g,a[g])}function xd(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Z2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zc(r){return Z2.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Sd=null;function wd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Co=null,Ao=null;function Xy(r){var a=Eo(r);if(a&&(r=a.stateNode)){var l=r[On]||null;e:switch(r=a.stateNode,a.type){case"input":if(bd(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ni(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var p=l[a];if(p!==r&&p.form===r.form){var m=p[On]||null;if(!m)throw Error(i(90));bd(p,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)p=l[a],p.form===r.form&&Uy(p)}break e;case"textarea":Vy(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Ro(r,!!l.multiple,a,!1)}}}var Rd=!1;function Ky(r,a,l){if(Rd)return r(a,l);Rd=!0;try{var p=r(a);return p}finally{if(Rd=!1,(Co!==null||Ao!==null)&&(ku(),Co&&(a=Co,r=Ao,Ao=Co=null,Xy(a),r)))for(a=0;a<r.length;a++)Xy(r[a])}}function Vs(r,a){var l=r.stateNode;if(l===null)return null;var p=l[On]||null;if(p===null)return null;l=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Td=!1;if(Ji)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Td=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Td=!1}var Or=null,Cd=null,Qc=null;function Wy(){if(Qc)return Qc;var r,a=Cd,l=a.length,p,m="value"in Or?Or.value:Or.textContent,g=m.length;for(r=0;r<l&&a[r]===m[r];r++);var R=l-r;for(p=1;p<=R&&a[l-p]===m[g-p];p++);return Qc=m.slice(r,1<p?1-p:void 0)}function Jc(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function eu(){return!0}function Zy(){return!1}function Nn(r){function a(l,p,m,g,R){this._reactName=l,this._targetInst=m,this.type=p,this.nativeEvent=g,this.target=R,this.currentTarget=null;for(var M in r)r.hasOwnProperty(M)&&(l=r[M],this[M]=l?l(g):g[M]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?eu:Zy,this.isPropagationStopped=Zy,this}return h(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=eu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=eu)},persist:function(){},isPersistent:eu}),a}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tu=Nn(Oa),Ys=h({},Oa,{view:0,detail:0}),Q2=Nn(Ys),Ad,Md,qs,nu=h({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Od,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==qs&&(qs&&r.type==="mousemove"?(Ad=r.screenX-qs.screenX,Md=r.screenY-qs.screenY):Md=Ad=0,qs=r),Ad)},movementY:function(r){return"movementY"in r?r.movementY:Md}}),Qy=Nn(nu),J2=h({},nu,{dataTransfer:0}),eC=Nn(J2),tC=h({},Ys,{relatedTarget:0}),Dd=Nn(tC),nC=h({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),iC=Nn(nC),rC=h({},Oa,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),aC=Nn(rC),oC=h({},Oa,{data:0}),Jy=Nn(oC),sC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uC(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=cC[r])?!!a[r]:!1}function Od(){return uC}var fC=h({},Ys,{key:function(r){if(r.key){var a=sC[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Jc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?lC[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Od,charCode:function(r){return r.type==="keypress"?Jc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Jc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),pC=Nn(fC),dC=h({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e_=Nn(dC),hC=h({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Od}),mC=Nn(hC),vC=h({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),gC=Nn(vC),yC=h({},nu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),_C=Nn(yC),bC=h({},Oa,{newState:0,oldState:0}),EC=Nn(bC),xC=[9,13,27,32],Nd=Ji&&"CompositionEvent"in window,Xs=null;Ji&&"documentMode"in document&&(Xs=document.documentMode);var SC=Ji&&"TextEvent"in window&&!Xs,t_=Ji&&(!Nd||Xs&&8<Xs&&11>=Xs),n_=" ",i_=!1;function r_(r,a){switch(r){case"keyup":return xC.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a_(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Mo=!1;function wC(r,a){switch(r){case"compositionend":return a_(a);case"keypress":return a.which!==32?null:(i_=!0,n_);case"textInput":return r=a.data,r===n_&&i_?null:r;default:return null}}function RC(r,a){if(Mo)return r==="compositionend"||!Nd&&r_(r,a)?(r=Wy(),Qc=Cd=Or=null,Mo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return t_&&a.locale!=="ko"?null:a.data;default:return null}}var TC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o_(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!TC[r.type]:a==="textarea"}function s_(r,a,l,p){Co?Ao?Ao.push(p):Ao=[p]:Co=p,a=Uu(a,"onChange"),0<a.length&&(l=new tu("onChange","change",null,l,p),r.push({event:l,listeners:a}))}var Ks=null,Ws=null;function CC(r){I0(r,0)}function iu(r){var a=Gs(r);if(Uy(a))return r}function l_(r,a){if(r==="change")return a}var c_=!1;if(Ji){var Pd;if(Ji){var Bd="oninput"in document;if(!Bd){var u_=document.createElement("div");u_.setAttribute("oninput","return;"),Bd=typeof u_.oninput=="function"}Pd=Bd}else Pd=!1;c_=Pd&&(!document.documentMode||9<document.documentMode)}function f_(){Ks&&(Ks.detachEvent("onpropertychange",p_),Ws=Ks=null)}function p_(r){if(r.propertyName==="value"&&iu(Ws)){var a=[];s_(a,Ws,r,wd(r)),Ky(CC,a)}}function AC(r,a,l){r==="focusin"?(f_(),Ks=a,Ws=l,Ks.attachEvent("onpropertychange",p_)):r==="focusout"&&f_()}function MC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return iu(Ws)}function DC(r,a){if(r==="click")return iu(a)}function OC(r,a){if(r==="input"||r==="change")return iu(a)}function NC(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Fn=typeof Object.is=="function"?Object.is:NC;function Zs(r,a){if(Fn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),p=Object.keys(a);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var m=l[p];if(!te.call(a,m)||!Fn(r[m],a[m]))return!1}return!0}function d_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function h_(r,a){var l=d_(r);r=0;for(var p;l;){if(l.nodeType===3){if(p=r+l.textContent.length,r<=a&&p>=a)return{node:l,offset:a-r};r=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=d_(l)}}function m_(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?m_(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function v_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Wc(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=Wc(r.document)}return a}function Ld(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var PC=Ji&&"documentMode"in document&&11>=document.documentMode,Do=null,kd=null,Qs=null,zd=!1;function g_(r,a,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;zd||Do==null||Do!==Wc(p)||(p=Do,"selectionStart"in p&&Ld(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Qs&&Zs(Qs,p)||(Qs=p,p=Uu(kd,"onSelect"),0<p.length&&(a=new tu("onSelect","select",null,a,l),r.push({event:a,listeners:p}),a.target=Do)))}function Na(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var Oo={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionrun:Na("Transition","TransitionRun"),transitionstart:Na("Transition","TransitionStart"),transitioncancel:Na("Transition","TransitionCancel"),transitionend:Na("Transition","TransitionEnd")},jd={},y_={};Ji&&(y_=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Pa(r){if(jd[r])return jd[r];if(!Oo[r])return r;var a=Oo[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in y_)return jd[r]=a[l];return r}var __=Pa("animationend"),b_=Pa("animationiteration"),E_=Pa("animationstart"),BC=Pa("transitionrun"),LC=Pa("transitionstart"),kC=Pa("transitioncancel"),x_=Pa("transitionend"),S_=new Map,Hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hd.push("scrollEnd");function Si(r,a){S_.set(r,a),Da(a,[r])}var w_=new WeakMap;function ii(r,a){if(typeof r=="object"&&r!==null){var l=w_.get(r);return l!==void 0?l:(a={value:r,source:a,stack:$y(a)},w_.set(r,a),a)}return{value:r,source:a,stack:$y(a)}}var ri=[],No=0,$d=0;function ru(){for(var r=No,a=$d=No=0;a<r;){var l=ri[a];ri[a++]=null;var p=ri[a];ri[a++]=null;var m=ri[a];ri[a++]=null;var g=ri[a];if(ri[a++]=null,p!==null&&m!==null){var R=p.pending;R===null?m.next=m:(m.next=R.next,R.next=m),p.pending=m}g!==0&&R_(l,m,g)}}function au(r,a,l,p){ri[No++]=r,ri[No++]=a,ri[No++]=l,ri[No++]=p,$d|=p,r.lanes|=p,r=r.alternate,r!==null&&(r.lanes|=p)}function Id(r,a,l,p){return au(r,a,l,p),ou(r)}function Po(r,a){return au(r,null,null,a),ou(r)}function R_(r,a,l){r.lanes|=l;var p=r.alternate;p!==null&&(p.lanes|=l);for(var m=!1,g=r.return;g!==null;)g.childLanes|=l,p=g.alternate,p!==null&&(p.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(m=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,m&&a!==null&&(m=31-Vn(l),r=g.hiddenUpdates,p=r[m],p===null?r[m]=[a]:p.push(a),a.lane=l|536870912),g):null}function ou(r){if(50<Sl)throw Sl=0,qh=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Bo={};function zC(r,a,l,p){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(r,a,l,p){return new zC(r,a,l,p)}function Ud(r){return r=r.prototype,!(!r||!r.isReactComponent)}function er(r,a){var l=r.alternate;return l===null?(l=Yn(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function T_(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function su(r,a,l,p,m,g){var R=0;if(p=r,typeof r=="function")Ud(r)&&(R=1);else if(typeof r=="string")R=HA(r,l,ae.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case Q:return r=Yn(31,l,a,m),r.elementType=Q,r.lanes=g,r;case b:return Ba(l.children,m,g,a);case w:R=8,m|=24;break;case S:return r=Yn(12,l,a,m|2),r.elementType=S,r.lanes=g,r;case D:return r=Yn(13,l,a,m),r.elementType=D,r.lanes=g,r;case B:return r=Yn(19,l,a,m),r.elementType=B,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:case A:R=10;break e;case N:R=9;break e;case C:R=11;break e;case F:R=14;break e;case j:R=16,p=null;break e}R=29,l=Error(i(130,r===null?"null":typeof r,"")),p=null}return a=Yn(R,l,a,m),a.elementType=r,a.type=p,a.lanes=g,a}function Ba(r,a,l,p){return r=Yn(7,r,p,a),r.lanes=l,r}function Gd(r,a,l){return r=Yn(6,r,null,a),r.lanes=l,r}function Vd(r,a,l){return a=Yn(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Lo=[],ko=0,lu=null,cu=0,ai=[],oi=0,La=null,tr=1,nr="";function ka(r,a){Lo[ko++]=cu,Lo[ko++]=lu,lu=r,cu=a}function C_(r,a,l){ai[oi++]=tr,ai[oi++]=nr,ai[oi++]=La,La=r;var p=tr;r=nr;var m=32-Vn(p)-1;p&=~(1<<m),l+=1;var g=32-Vn(a)+m;if(30<g){var R=m-m%5;g=(p&(1<<R)-1).toString(32),p>>=R,m-=R,tr=1<<32-Vn(a)+m|l<<m|p,nr=g+r}else tr=1<<g|l<<m|p,nr=r}function Fd(r){r.return!==null&&(ka(r,1),C_(r,1,0))}function Yd(r){for(;r===lu;)lu=Lo[--ko],Lo[ko]=null,cu=Lo[--ko],Lo[ko]=null;for(;r===La;)La=ai[--oi],ai[oi]=null,nr=ai[--oi],ai[oi]=null,tr=ai[--oi],ai[oi]=null}var Rn=null,Ct=null,at=!1,za=null,Pi=!1,qd=Error(i(519));function ja(r){var a=Error(i(418,""));throw tl(ii(a,r)),qd}function A_(r){var a=r.stateNode,l=r.type,p=r.memoizedProps;switch(a[_n]=r,a[On]=p,l){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(l=0;l<Rl.length;l++)Qe(Rl[l],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Gy(a,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Kc(a);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),Fy(a,p.value,p.defaultValue,p.children),Kc(a)}l=p.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||p.suppressHydrationWarning===!0||F0(a.textContent,l)?(p.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),p.onScroll!=null&&Qe("scroll",a),p.onScrollEnd!=null&&Qe("scrollend",a),p.onClick!=null&&(a.onclick=Gu),a=!0):a=!1,a||ja(r)}function M_(r){for(Rn=r.return;Rn;)switch(Rn.tag){case 5:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:Rn=Rn.return}}function Js(r){if(r!==Rn)return!1;if(!at)return M_(r),at=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||cm(r.type,r.memoizedProps)),l=!l),l&&Ct&&ja(r),M_(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(a===0){Ct=Ri(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;r=r.nextSibling}Ct=null}}else a===27?(a=Ct,qr(r.type)?(r=dm,dm=null,Ct=r):Ct=a):Ct=Rn?Ri(r.stateNode.nextSibling):null;return!0}function el(){Ct=Rn=null,at=!1}function D_(){var r=za;return r!==null&&(Ln===null?Ln=r:Ln.push.apply(Ln,r),za=null),r}function tl(r){za===null?za=[r]:za.push(r)}var Xd=ne(null),Ha=null,ir=null;function Nr(r,a,l){Y(Xd,a._currentValue),a._currentValue=l}function rr(r){r._currentValue=Xd.current,V(Xd)}function Kd(r,a,l){for(;r!==null;){var p=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),r===l)break;r=r.return}}function Wd(r,a,l,p){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var g=m.dependencies;if(g!==null){var R=m.child;g=g.firstContext;e:for(;g!==null;){var M=g;g=m;for(var L=0;L<a.length;L++)if(M.context===a[L]){g.lanes|=l,M=g.alternate,M!==null&&(M.lanes|=l),Kd(g.return,l,r),p||(R=null);break e}g=M.next}}else if(m.tag===18){if(R=m.return,R===null)throw Error(i(341));R.lanes|=l,g=R.alternate,g!==null&&(g.lanes|=l),Kd(R,l,r),R=null}else R=m.child;if(R!==null)R.return=m;else for(R=m;R!==null;){if(R===r){R=null;break}if(m=R.sibling,m!==null){m.return=R.return,R=m;break}R=R.return}m=R}}function nl(r,a,l,p){r=null;for(var m=a,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var R=m.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var M=m.type;Fn(m.pendingProps.value,R.value)||(r!==null?r.push(M):r=[M])}}else if(m===P.current){if(R=m.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Ol):r=[Ol])}m=m.return}r!==null&&Wd(a,r,l,p),a.flags|=262144}function uu(r){for(r=r.firstContext;r!==null;){if(!Fn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function $a(r){Ha=r,ir=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function bn(r){return O_(Ha,r)}function fu(r,a){return Ha===null&&$a(r),O_(r,a)}function O_(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ir===null){if(r===null)throw Error(i(308));ir=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else ir=ir.next=a;return l}var jC=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,p){r.push(p)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},HC=e.unstable_scheduleCallback,$C=e.unstable_NormalPriority,qt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zd(){return{controller:new jC,data:new Map,refCount:0}}function il(r){r.refCount--,r.refCount===0&&HC($C,function(){r.controller.abort()})}var rl=null,Qd=0,zo=0,jo=null;function IC(r,a){if(rl===null){var l=rl=[];Qd=0,zo=em(),jo={status:"pending",value:void 0,then:function(p){l.push(p)}}}return Qd++,a.then(N_,N_),a}function N_(){if(--Qd===0&&rl!==null){jo!==null&&(jo.status="fulfilled");var r=rl;rl=null,zo=0,jo=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function UC(r,a){var l=[],p={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return r.then(function(){p.status="fulfilled",p.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(p.status="rejected",p.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),p}var P_=W.S;W.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&IC(r,a),P_!==null&&P_(r,a)};var Ia=ne(null);function Jd(){var r=Ia.current;return r!==null?r:vt.pooledCache}function pu(r,a){a===null?Y(Ia,Ia.current):Y(Ia,a.pool)}function B_(){var r=Jd();return r===null?null:{parent:qt._currentValue,pool:r}}var al=Error(i(460)),L_=Error(i(474)),du=Error(i(542)),eh={then:function(){}};function k_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function hu(){}function z_(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(hu,hu),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,H_(r),r;default:if(typeof a.status=="string")a.then(hu,hu);else{if(r=vt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(p){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=p}},function(p){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=p}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,H_(r),r}throw ol=a,al}}var ol=null;function j_(){if(ol===null)throw Error(i(459));var r=ol;return ol=null,r}function H_(r){if(r===al||r===du)throw Error(i(483))}var Pr=!1;function th(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nh(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Br(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Lr(r,a,l){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(ct&2)!==0){var m=p.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),p.pending=a,a=ou(r),R_(r,null,l),a}return au(r,p,a,l),ou(r)}function sl(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var p=a.lanes;p&=r.pendingLanes,l|=p,a.lanes=l,Ny(r,l)}}function ih(r,a){var l=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var R={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=R:g=g.next=R,l=l.next}while(l!==null);g===null?m=g=a:g=g.next=a}else m=g=a;l={baseState:p.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:p.shared,callbacks:p.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var rh=!1;function ll(){if(rh){var r=jo;if(r!==null)throw r}}function cl(r,a,l,p){rh=!1;var m=r.updateQueue;Pr=!1;var g=m.firstBaseUpdate,R=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var L=M,X=L.next;L.next=null,R===null?g=X:R.next=X,R=L;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,M=ie.lastBaseUpdate,M!==R&&(M===null?ie.firstBaseUpdate=X:M.next=X,ie.lastBaseUpdate=L))}if(g!==null){var se=m.baseState;R=0,ie=X=L=null,M=g;do{var K=M.lane&-536870913,Z=K!==M.lane;if(Z?(nt&K)===K:(p&K)===K){K!==0&&K===zo&&(rh=!0),ie!==null&&(ie=ie.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var ke=r,Ne=M;K=a;var dt=l;switch(Ne.tag){case 1:if(ke=Ne.payload,typeof ke=="function"){se=ke.call(dt,se,K);break e}se=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ne.payload,K=typeof ke=="function"?ke.call(dt,se,K):ke,K==null)break e;se=h({},se,K);break e;case 2:Pr=!0}}K=M.callback,K!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ie===null?(X=ie=Z,L=se):ie=ie.next=Z,R|=K;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;Z=M,M=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);ie===null&&(L=se),m.baseState=L,m.firstBaseUpdate=X,m.lastBaseUpdate=ie,g===null&&(m.shared.lanes=0),Gr|=R,r.lanes=R,r.memoizedState=se}}function $_(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function I_(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)$_(l[r],a)}var Ho=ne(null),mu=ne(0);function U_(r,a){r=fr,Y(mu,r),Y(Ho,a),fr=r|a.baseLanes}function ah(){Y(mu,fr),Y(Ho,Ho.current)}function oh(){fr=mu.current,V(Ho),V(mu)}var kr=0,Ve=null,ft=null,Gt=null,vu=!1,$o=!1,Ua=!1,gu=0,ul=0,Io=null,GC=0;function kt(){throw Error(i(321))}function sh(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Fn(r[l],a[l]))return!1;return!0}function lh(r,a,l,p,m,g){return kr=g,Ve=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,W.H=r===null||r.memoizedState===null?Rb:Tb,Ua=!1,g=l(p,m),Ua=!1,$o&&(g=V_(a,l,p,m)),G_(r),g}function G_(r){W.H=Su;var a=ft!==null&&ft.next!==null;if(kr=0,Gt=ft=Ve=null,vu=!1,ul=0,Io=null,a)throw Error(i(300));r===null||en||(r=r.dependencies,r!==null&&uu(r)&&(en=!0))}function V_(r,a,l,p){Ve=r;var m=0;do{if($o&&(Io=null),ul=0,$o=!1,25<=m)throw Error(i(301));if(m+=1,Gt=ft=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}W.H=WC,g=a(l,p)}while($o);return g}function VC(){var r=W.H,a=r.useState()[0];return a=typeof a.then=="function"?fl(a):a,r=r.useState()[0],(ft!==null?ft.memoizedState:null)!==r&&(Ve.flags|=1024),a}function ch(){var r=gu!==0;return gu=0,r}function uh(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function fh(r){if(vu){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}vu=!1}kr=0,Gt=ft=Ve=null,$o=!1,ul=gu=0,Io=null}function Pn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ve.memoizedState=Gt=r:Gt=Gt.next=r,Gt}function Vt(){if(ft===null){var r=Ve.alternate;r=r!==null?r.memoizedState:null}else r=ft.next;var a=Gt===null?Ve.memoizedState:Gt.next;if(a!==null)Gt=a,ft=r;else{if(r===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));ft=r,r={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Gt===null?Ve.memoizedState=Gt=r:Gt=Gt.next=r}return Gt}function ph(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(r){var a=ul;return ul+=1,Io===null&&(Io=[]),r=z_(Io,r,a),a=Ve,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,W.H=a===null||a.memoizedState===null?Rb:Tb),r}function yu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return fl(r);if(r.$$typeof===A)return bn(r)}throw Error(i(438,String(r)))}function dh(r){var a=null,l=Ve.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var p=Ve.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(a={data:p.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=ph(),Ve.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),p=0;p<r;p++)l[p]=J;return a.index++,l}function ar(r,a){return typeof a=="function"?a(r):a}function _u(r){var a=Vt();return hh(a,ft,r)}function hh(r,a,l){var p=r.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=l;var m=r.baseQueue,g=p.pending;if(g!==null){if(m!==null){var R=m.next;m.next=g.next,g.next=R}a.baseQueue=m=g,p.pending=null}if(g=r.baseState,m===null)r.memoizedState=g;else{a=m.next;var M=R=null,L=null,X=a,ie=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(nt&se)===se:(kr&se)===se){var K=X.revertLane;if(K===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===zo&&(ie=!0);else if((kr&K)===K){X=X.next,K===zo&&(ie=!0);continue}else se={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(M=L=se,R=g):L=L.next=se,Ve.lanes|=K,Gr|=K;se=X.action,Ua&&l(g,se),g=X.hasEagerState?X.eagerState:l(g,se)}else K={lane:se,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(M=L=K,R=g):L=L.next=K,Ve.lanes|=se,Gr|=se;X=X.next}while(X!==null&&X!==a);if(L===null?R=g:L.next=M,!Fn(g,r.memoizedState)&&(en=!0,ie&&(l=jo,l!==null)))throw l;r.memoizedState=g,r.baseState=R,r.baseQueue=L,p.lastRenderedState=g}return m===null&&(p.lanes=0),[r.memoizedState,p.dispatch]}function mh(r){var a=Vt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var p=l.dispatch,m=l.pending,g=a.memoizedState;if(m!==null){l.pending=null;var R=m=m.next;do g=r(g,R.action),R=R.next;while(R!==m);Fn(g,a.memoizedState)||(en=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,p]}function F_(r,a,l){var p=Ve,m=Vt(),g=at;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=a();var R=!Fn((ft||m).memoizedState,l);R&&(m.memoizedState=l,en=!0),m=m.queue;var M=X_.bind(null,p,m,r);if(pl(2048,8,M,[r]),m.getSnapshot!==a||R||Gt!==null&&Gt.memoizedState.tag&1){if(p.flags|=2048,Uo(9,bu(),q_.bind(null,p,m,l,a),null),vt===null)throw Error(i(349));g||(kr&124)!==0||Y_(p,a,l)}return l}function Y_(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Ve.updateQueue,a===null?(a=ph(),Ve.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function q_(r,a,l,p){a.value=l,a.getSnapshot=p,K_(a)&&W_(r)}function X_(r,a,l){return l(function(){K_(a)&&W_(r)})}function K_(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Fn(r,l)}catch{return!0}}function W_(r){var a=Po(r,2);a!==null&&Zn(a,r,2)}function vh(r){var a=Pn();if(typeof r=="function"){var l=r;if(r=l(),Ua){Mr(!0);try{l()}finally{Mr(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:r},a}function Z_(r,a,l,p){return r.baseState=l,hh(r,ft,typeof p=="function"?p:ar)}function FC(r,a,l,p,m){if(xu(r))throw Error(i(485));if(r=a.action,r!==null){var g={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){g.listeners.push(R)}};W.T!==null?l(!0):g.isTransition=!1,p(g),l=a.pending,l===null?(g.next=a.pending=g,Q_(a,g)):(g.next=l.next,a.pending=l.next=g)}}function Q_(r,a){var l=a.action,p=a.payload,m=r.state;if(a.isTransition){var g=W.T,R={};W.T=R;try{var M=l(m,p),L=W.S;L!==null&&L(R,M),J_(r,a,M)}catch(X){gh(r,a,X)}finally{W.T=g}}else try{g=l(m,p),J_(r,a,g)}catch(X){gh(r,a,X)}}function J_(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(p){eb(r,a,p)},function(p){return gh(r,a,p)}):eb(r,a,l)}function eb(r,a,l){a.status="fulfilled",a.value=l,tb(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,Q_(r,l)))}function gh(r,a,l){var p=r.pending;if(r.pending=null,p!==null){p=p.next;do a.status="rejected",a.reason=l,tb(a),a=a.next;while(a!==p)}r.action=null}function tb(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function nb(r,a){return a}function ib(r,a){if(at){var l=vt.formState;if(l!==null){e:{var p=Ve;if(at){if(Ct){t:{for(var m=Ct,g=Pi;m.nodeType!==8;){if(!g){m=null;break t}if(m=Ri(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Ct=Ri(m.nextSibling),p=m.data==="F!";break e}}ja(p)}p=!1}p&&(a=l[0])}}return l=Pn(),l.memoizedState=l.baseState=a,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nb,lastRenderedState:a},l.queue=p,l=xb.bind(null,Ve,p),p.dispatch=l,p=vh(!1),g=xh.bind(null,Ve,!1,p.queue),p=Pn(),m={state:a,dispatch:null,action:r,pending:null},p.queue=m,l=FC.bind(null,Ve,m,g,l),m.dispatch=l,p.memoizedState=r,[a,l,!1]}function rb(r){var a=Vt();return ab(a,ft,r)}function ab(r,a,l){if(a=hh(r,a,nb)[0],r=_u(ar)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var p=fl(a)}catch(R){throw R===al?du:R}else p=a;a=Vt();var m=a.queue,g=m.dispatch;return l!==a.memoizedState&&(Ve.flags|=2048,Uo(9,bu(),YC.bind(null,m,l),null)),[p,g,r]}function YC(r,a){r.action=a}function ob(r){var a=Vt(),l=ft;if(l!==null)return ab(a,l,r);Vt(),a=a.memoizedState,l=Vt();var p=l.queue.dispatch;return l.memoizedState=r,[a,p,!1]}function Uo(r,a,l,p){return r={tag:r,create:l,deps:p,inst:a,next:null},a=Ve.updateQueue,a===null&&(a=ph(),Ve.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(p=l.next,l.next=r,r.next=p,a.lastEffect=r),r}function bu(){return{destroy:void 0,resource:void 0}}function sb(){return Vt().memoizedState}function Eu(r,a,l,p){var m=Pn();p=p===void 0?null:p,Ve.flags|=r,m.memoizedState=Uo(1|a,bu(),l,p)}function pl(r,a,l,p){var m=Vt();p=p===void 0?null:p;var g=m.memoizedState.inst;ft!==null&&p!==null&&sh(p,ft.memoizedState.deps)?m.memoizedState=Uo(a,g,l,p):(Ve.flags|=r,m.memoizedState=Uo(1|a,g,l,p))}function lb(r,a){Eu(8390656,8,r,a)}function cb(r,a){pl(2048,8,r,a)}function ub(r,a){return pl(4,2,r,a)}function fb(r,a){return pl(4,4,r,a)}function pb(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function db(r,a,l){l=l!=null?l.concat([r]):null,pl(4,4,pb.bind(null,a,r),l)}function yh(){}function hb(r,a){var l=Vt();a=a===void 0?null:a;var p=l.memoizedState;return a!==null&&sh(a,p[1])?p[0]:(l.memoizedState=[r,a],r)}function mb(r,a){var l=Vt();a=a===void 0?null:a;var p=l.memoizedState;if(a!==null&&sh(a,p[1]))return p[0];if(p=r(),Ua){Mr(!0);try{r()}finally{Mr(!1)}}return l.memoizedState=[p,a],p}function _h(r,a,l){return l===void 0||(kr&1073741824)!==0?r.memoizedState=a:(r.memoizedState=l,r=y0(),Ve.lanes|=r,Gr|=r,l)}function vb(r,a,l,p){return Fn(l,a)?l:Ho.current!==null?(r=_h(r,l,p),Fn(r,a)||(en=!0),r):(kr&42)===0?(en=!0,r.memoizedState=l):(r=y0(),Ve.lanes|=r,Gr|=r,a)}function gb(r,a,l,p,m){var g=oe.p;oe.p=g!==0&&8>g?g:8;var R=W.T,M={};W.T=M,xh(r,!1,a,l);try{var L=m(),X=W.S;if(X!==null&&X(M,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=UC(L,p);dl(r,a,ie,Wn(r))}else dl(r,a,p,Wn(r))}catch(se){dl(r,a,{then:function(){},status:"rejected",reason:se},Wn())}finally{oe.p=g,W.T=R}}function qC(){}function bh(r,a,l,p){if(r.tag!==5)throw Error(i(476));var m=yb(r).queue;gb(r,m,a,_e,l===null?qC:function(){return _b(r),l(p)})}function yb(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:_e},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function _b(r){var a=yb(r).next.queue;dl(r,a,{},Wn())}function Eh(){return bn(Ol)}function bb(){return Vt().memoizedState}function Eb(){return Vt().memoizedState}function XC(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=Wn();r=Br(l);var p=Lr(a,r,l);p!==null&&(Zn(p,a,l),sl(p,a,l)),a={cache:Zd()},r.payload=a;return}a=a.return}}function KC(r,a,l){var p=Wn();l={lane:p,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},xu(r)?Sb(a,l):(l=Id(r,a,l,p),l!==null&&(Zn(l,r,p),wb(l,a,p)))}function xb(r,a,l){var p=Wn();dl(r,a,l,p)}function dl(r,a,l,p){var m={lane:p,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(xu(r))Sb(a,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var R=a.lastRenderedState,M=g(R,l);if(m.hasEagerState=!0,m.eagerState=M,Fn(M,R))return au(r,a,m,0),vt===null&&ru(),!1}catch{}finally{}if(l=Id(r,a,m,p),l!==null)return Zn(l,r,p),wb(l,a,p),!0}return!1}function xh(r,a,l,p){if(p={lane:2,revertLane:em(),action:p,hasEagerState:!1,eagerState:null,next:null},xu(r)){if(a)throw Error(i(479))}else a=Id(r,l,p,2),a!==null&&Zn(a,r,2)}function xu(r){var a=r.alternate;return r===Ve||a!==null&&a===Ve}function Sb(r,a){$o=vu=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function wb(r,a,l){if((l&4194048)!==0){var p=a.lanes;p&=r.pendingLanes,l|=p,a.lanes=l,Ny(r,l)}}var Su={readContext:bn,use:yu,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},Rb={readContext:bn,use:yu,useCallback:function(r,a){return Pn().memoizedState=[r,a===void 0?null:a],r},useContext:bn,useEffect:lb,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,Eu(4194308,4,pb.bind(null,a,r),l)},useLayoutEffect:function(r,a){return Eu(4194308,4,r,a)},useInsertionEffect:function(r,a){Eu(4,2,r,a)},useMemo:function(r,a){var l=Pn();a=a===void 0?null:a;var p=r();if(Ua){Mr(!0);try{r()}finally{Mr(!1)}}return l.memoizedState=[p,a],p},useReducer:function(r,a,l){var p=Pn();if(l!==void 0){var m=l(a);if(Ua){Mr(!0);try{l(a)}finally{Mr(!1)}}}else m=a;return p.memoizedState=p.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},p.queue=r,r=r.dispatch=KC.bind(null,Ve,r),[p.memoizedState,r]},useRef:function(r){var a=Pn();return r={current:r},a.memoizedState=r},useState:function(r){r=vh(r);var a=r.queue,l=xb.bind(null,Ve,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:yh,useDeferredValue:function(r,a){var l=Pn();return _h(l,r,a)},useTransition:function(){var r=vh(!1);return r=gb.bind(null,Ve,r.queue,!0,!1),Pn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var p=Ve,m=Pn();if(at){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),vt===null)throw Error(i(349));(nt&124)!==0||Y_(p,a,l)}m.memoizedState=l;var g={value:l,getSnapshot:a};return m.queue=g,lb(X_.bind(null,p,g,r),[r]),p.flags|=2048,Uo(9,bu(),q_.bind(null,p,g,l,a),null),l},useId:function(){var r=Pn(),a=vt.identifierPrefix;if(at){var l=nr,p=tr;l=(p&~(1<<32-Vn(p)-1)).toString(32)+l,a=""+a+"R"+l,l=gu++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=GC++,a=""+a+"r"+l.toString(32)+"";return r.memoizedState=a},useHostTransitionStatus:Eh,useFormState:ib,useActionState:ib,useOptimistic:function(r){var a=Pn();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=xh.bind(null,Ve,!0,l),l.dispatch=a,[r,a]},useMemoCache:dh,useCacheRefresh:function(){return Pn().memoizedState=XC.bind(null,Ve)}},Tb={readContext:bn,use:yu,useCallback:hb,useContext:bn,useEffect:cb,useImperativeHandle:db,useInsertionEffect:ub,useLayoutEffect:fb,useMemo:mb,useReducer:_u,useRef:sb,useState:function(){return _u(ar)},useDebugValue:yh,useDeferredValue:function(r,a){var l=Vt();return vb(l,ft.memoizedState,r,a)},useTransition:function(){var r=_u(ar)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:fl(r),a]},useSyncExternalStore:F_,useId:bb,useHostTransitionStatus:Eh,useFormState:rb,useActionState:rb,useOptimistic:function(r,a){var l=Vt();return Z_(l,ft,r,a)},useMemoCache:dh,useCacheRefresh:Eb},WC={readContext:bn,use:yu,useCallback:hb,useContext:bn,useEffect:cb,useImperativeHandle:db,useInsertionEffect:ub,useLayoutEffect:fb,useMemo:mb,useReducer:mh,useRef:sb,useState:function(){return mh(ar)},useDebugValue:yh,useDeferredValue:function(r,a){var l=Vt();return ft===null?_h(l,r,a):vb(l,ft.memoizedState,r,a)},useTransition:function(){var r=mh(ar)[0],a=Vt().memoizedState;return[typeof r=="boolean"?r:fl(r),a]},useSyncExternalStore:F_,useId:bb,useHostTransitionStatus:Eh,useFormState:ob,useActionState:ob,useOptimistic:function(r,a){var l=Vt();return ft!==null?Z_(l,ft,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:dh,useCacheRefresh:Eb},Go=null,hl=0;function wu(r){var a=hl;return hl+=1,Go===null&&(Go=[]),z_(Go,r,a)}function ml(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Ru(r,a){throw a.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Cb(r){var a=r._init;return a(r._payload)}function Ab(r){function a(G,$){if(r){var q=G.deletions;q===null?(G.deletions=[$],G.flags|=16):q.push($)}}function l(G,$){if(!r)return null;for(;$!==null;)a(G,$),$=$.sibling;return null}function p(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function m(G,$){return G=er(G,$),G.index=0,G.sibling=null,G}function g(G,$,q){return G.index=q,r?(q=G.alternate,q!==null?(q=q.index,q<$?(G.flags|=67108866,$):q):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function R(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function M(G,$,q,re){return $===null||$.tag!==6?($=Gd(q,G.mode,re),$.return=G,$):($=m($,q),$.return=G,$)}function L(G,$,q,re){var be=q.type;return be===b?ie(G,$,q.props.children,re,q.key):$!==null&&($.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===j&&Cb(be)===$.type)?($=m($,q.props),ml($,q),$.return=G,$):($=su(q.type,q.key,q.props,null,G.mode,re),ml($,q),$.return=G,$)}function X(G,$,q,re){return $===null||$.tag!==4||$.stateNode.containerInfo!==q.containerInfo||$.stateNode.implementation!==q.implementation?($=Vd(q,G.mode,re),$.return=G,$):($=m($,q.children||[]),$.return=G,$)}function ie(G,$,q,re,be){return $===null||$.tag!==7?($=Ba(q,G.mode,re,be),$.return=G,$):($=m($,q),$.return=G,$)}function se(G,$,q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Gd(""+$,G.mode,q),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case y:return q=su($.type,$.key,$.props,null,G.mode,q),ml(q,$),q.return=G,q;case _:return $=Vd($,G.mode,q),$.return=G,$;case j:var re=$._init;return $=re($._payload),se(G,$,q)}if(Je($)||ee($))return $=Ba($,G.mode,q,null),$.return=G,$;if(typeof $.then=="function")return se(G,wu($),q);if($.$$typeof===A)return se(G,fu(G,$),q);Ru(G,$)}return null}function K(G,$,q,re){var be=$!==null?$.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return be!==null?null:M(G,$,""+q,re);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case y:return q.key===be?L(G,$,q,re):null;case _:return q.key===be?X(G,$,q,re):null;case j:return be=q._init,q=be(q._payload),K(G,$,q,re)}if(Je(q)||ee(q))return be!==null?null:ie(G,$,q,re,null);if(typeof q.then=="function")return K(G,$,wu(q),re);if(q.$$typeof===A)return K(G,$,fu(G,q),re);Ru(G,q)}return null}function Z(G,$,q,re,be){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(q)||null,M($,G,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case y:return G=G.get(re.key===null?q:re.key)||null,L($,G,re,be);case _:return G=G.get(re.key===null?q:re.key)||null,X($,G,re,be);case j:var Ke=re._init;return re=Ke(re._payload),Z(G,$,q,re,be)}if(Je(re)||ee(re))return G=G.get(q)||null,ie($,G,re,be,null);if(typeof re.then=="function")return Z(G,$,q,wu(re),be);if(re.$$typeof===A)return Z(G,$,q,fu($,re),be);Ru($,re)}return null}function ke(G,$,q,re){for(var be=null,Ke=null,Re=$,Be=$=0,nn=null;Re!==null&&Be<q.length;Be++){Re.index>Be?(nn=Re,Re=null):nn=Re.sibling;var rt=K(G,Re,q[Be],re);if(rt===null){Re===null&&(Re=nn);break}r&&Re&&rt.alternate===null&&a(G,Re),$=g(rt,$,Be),Ke===null?be=rt:Ke.sibling=rt,Ke=rt,Re=nn}if(Be===q.length)return l(G,Re),at&&ka(G,Be),be;if(Re===null){for(;Be<q.length;Be++)Re=se(G,q[Be],re),Re!==null&&($=g(Re,$,Be),Ke===null?be=Re:Ke.sibling=Re,Ke=Re);return at&&ka(G,Be),be}for(Re=p(Re);Be<q.length;Be++)nn=Z(Re,G,Be,q[Be],re),nn!==null&&(r&&nn.alternate!==null&&Re.delete(nn.key===null?Be:nn.key),$=g(nn,$,Be),Ke===null?be=nn:Ke.sibling=nn,Ke=nn);return r&&Re.forEach(function(Qr){return a(G,Qr)}),at&&ka(G,Be),be}function Ne(G,$,q,re){if(q==null)throw Error(i(151));for(var be=null,Ke=null,Re=$,Be=$=0,nn=null,rt=q.next();Re!==null&&!rt.done;Be++,rt=q.next()){Re.index>Be?(nn=Re,Re=null):nn=Re.sibling;var Qr=K(G,Re,rt.value,re);if(Qr===null){Re===null&&(Re=nn);break}r&&Re&&Qr.alternate===null&&a(G,Re),$=g(Qr,$,Be),Ke===null?be=Qr:Ke.sibling=Qr,Ke=Qr,Re=nn}if(rt.done)return l(G,Re),at&&ka(G,Be),be;if(Re===null){for(;!rt.done;Be++,rt=q.next())rt=se(G,rt.value,re),rt!==null&&($=g(rt,$,Be),Ke===null?be=rt:Ke.sibling=rt,Ke=rt);return at&&ka(G,Be),be}for(Re=p(Re);!rt.done;Be++,rt=q.next())rt=Z(Re,G,Be,rt.value,re),rt!==null&&(r&&rt.alternate!==null&&Re.delete(rt.key===null?Be:rt.key),$=g(rt,$,Be),Ke===null?be=rt:Ke.sibling=rt,Ke=rt);return r&&Re.forEach(function(ZA){return a(G,ZA)}),at&&ka(G,Be),be}function dt(G,$,q,re){if(typeof q=="object"&&q!==null&&q.type===b&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case y:e:{for(var be=q.key;$!==null;){if($.key===be){if(be=q.type,be===b){if($.tag===7){l(G,$.sibling),re=m($,q.props.children),re.return=G,G=re;break e}}else if($.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===j&&Cb(be)===$.type){l(G,$.sibling),re=m($,q.props),ml(re,q),re.return=G,G=re;break e}l(G,$);break}else a(G,$);$=$.sibling}q.type===b?(re=Ba(q.props.children,G.mode,re,q.key),re.return=G,G=re):(re=su(q.type,q.key,q.props,null,G.mode,re),ml(re,q),re.return=G,G=re)}return R(G);case _:e:{for(be=q.key;$!==null;){if($.key===be)if($.tag===4&&$.stateNode.containerInfo===q.containerInfo&&$.stateNode.implementation===q.implementation){l(G,$.sibling),re=m($,q.children||[]),re.return=G,G=re;break e}else{l(G,$);break}else a(G,$);$=$.sibling}re=Vd(q,G.mode,re),re.return=G,G=re}return R(G);case j:return be=q._init,q=be(q._payload),dt(G,$,q,re)}if(Je(q))return ke(G,$,q,re);if(ee(q)){if(be=ee(q),typeof be!="function")throw Error(i(150));return q=be.call(q),Ne(G,$,q,re)}if(typeof q.then=="function")return dt(G,$,wu(q),re);if(q.$$typeof===A)return dt(G,$,fu(G,q),re);Ru(G,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,$!==null&&$.tag===6?(l(G,$.sibling),re=m($,q),re.return=G,G=re):(l(G,$),re=Gd(q,G.mode,re),re.return=G,G=re),R(G)):l(G,$)}return function(G,$,q,re){try{hl=0;var be=dt(G,$,q,re);return Go=null,be}catch(Re){if(Re===al||Re===du)throw Re;var Ke=Yn(29,Re,null,G.mode);return Ke.lanes=re,Ke.return=G,Ke}finally{}}}var Vo=Ab(!0),Mb=Ab(!1),si=ne(null),Bi=null;function zr(r){var a=r.alternate;Y(Xt,Xt.current&1),Y(si,r),Bi===null&&(a===null||Ho.current!==null||a.memoizedState!==null)&&(Bi=r)}function Db(r){if(r.tag===22){if(Y(Xt,Xt.current),Y(si,r),Bi===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(Bi=r)}}else jr()}function jr(){Y(Xt,Xt.current),Y(si,si.current)}function or(r){V(si),Bi===r&&(Bi=null),V(Xt)}var Xt=ne(0);function Tu(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||pm(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Sh(r,a,l,p){a=r.memoizedState,l=l(p,a),l=l==null?a:h({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var wh={enqueueSetState:function(r,a,l){r=r._reactInternals;var p=Wn(),m=Br(p);m.payload=a,l!=null&&(m.callback=l),a=Lr(r,m,p),a!==null&&(Zn(a,r,p),sl(a,r,p))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var p=Wn(),m=Br(p);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=Lr(r,m,p),a!==null&&(Zn(a,r,p),sl(a,r,p))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=Wn(),p=Br(l);p.tag=2,a!=null&&(p.callback=a),a=Lr(r,p,l),a!==null&&(Zn(a,r,l),sl(a,r,l))}};function Ob(r,a,l,p,m,g,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,g,R):a.prototype&&a.prototype.isPureReactComponent?!Zs(l,p)||!Zs(m,g):!0}function Nb(r,a,l,p){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,p),a.state!==r&&wh.enqueueReplaceState(a,a.state,null)}function Ga(r,a){var l=a;if("ref"in a){l={};for(var p in a)p!=="ref"&&(l[p]=a[p])}if(r=r.defaultProps){l===a&&(l=h({},l));for(var m in r)l[m]===void 0&&(l[m]=r[m])}return l}var Cu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Pb(r){Cu(r)}function Bb(r){console.error(r)}function Lb(r){Cu(r)}function Au(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(p){setTimeout(function(){throw p})}}function kb(r,a,l){try{var p=r.onCaughtError;p(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Rh(r,a,l){return l=Br(l),l.tag=3,l.payload={element:null},l.callback=function(){Au(r,a)},l}function zb(r){return r=Br(r),r.tag=3,r}function jb(r,a,l,p){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=p.value;r.payload=function(){return m(g)},r.callback=function(){kb(a,l,p)}}var R=l.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(r.callback=function(){kb(a,l,p),typeof m!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var M=p.stack;this.componentDidCatch(p.value,{componentStack:M!==null?M:""})})}function ZC(r,a,l,p,m){if(l.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(a=l.alternate,a!==null&&nl(a,l,m,!0),l=si.current,l!==null){switch(l.tag){case 13:return Bi===null?Kh():l.alternate===null&&At===0&&(At=3),l.flags&=-257,l.flags|=65536,l.lanes=m,p===eh?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([p]):a.add(p),Zh(r,p,m)),!1;case 22:return l.flags|=65536,p===eh?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([p])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([p]):l.add(p)),Zh(r,p,m)),!1}throw Error(i(435,l.tag))}return Zh(r,p,m),Kh(),!1}if(at)return a=si.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,p!==qd&&(r=Error(i(422),{cause:p}),tl(ii(r,l)))):(p!==qd&&(a=Error(i(423),{cause:p}),tl(ii(a,l))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,p=ii(p,l),m=Rh(r.stateNode,p,m),ih(r,m),At!==4&&(At=2)),!1;var g=Error(i(520),{cause:p});if(g=ii(g,l),xl===null?xl=[g]:xl.push(g),At!==4&&(At=2),a===null)return!0;p=ii(p,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=m&-m,l.lanes|=r,r=Rh(l.stateNode,p,r),ih(l,r),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Vr===null||!Vr.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=zb(m),jb(m,r,l,p),ih(l,m),!1}l=l.return}while(l!==null);return!1}var Hb=Error(i(461)),en=!1;function on(r,a,l,p){a.child=r===null?Mb(a,null,l,p):Vo(a,r.child,l,p)}function $b(r,a,l,p,m){l=l.render;var g=a.ref;if("ref"in p){var R={};for(var M in p)M!=="ref"&&(R[M]=p[M])}else R=p;return $a(a),p=lh(r,a,l,R,g,m),M=ch(),r!==null&&!en?(uh(r,a,m),sr(r,a,m)):(at&&M&&Fd(a),a.flags|=1,on(r,a,p,m),a.child)}function Ib(r,a,l,p,m){if(r===null){var g=l.type;return typeof g=="function"&&!Ud(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,Ub(r,a,g,p,m)):(r=su(l.type,null,p,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(g=r.child,!Ph(r,m)){var R=g.memoizedProps;if(l=l.compare,l=l!==null?l:Zs,l(R,p)&&r.ref===a.ref)return sr(r,a,m)}return a.flags|=1,r=er(g,p),r.ref=a.ref,r.return=a,a.child=r}function Ub(r,a,l,p,m){if(r!==null){var g=r.memoizedProps;if(Zs(g,p)&&r.ref===a.ref)if(en=!1,a.pendingProps=p=g,Ph(r,m))(r.flags&131072)!==0&&(en=!0);else return a.lanes=r.lanes,sr(r,a,m)}return Th(r,a,l,p,m)}function Gb(r,a,l){var p=a.pendingProps,m=p.children,g=r!==null?r.memoizedState:null;if(p.mode==="hidden"){if((a.flags&128)!==0){if(p=g!==null?g.baseLanes|l:l,r!==null){for(m=a.child=r.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;a.childLanes=g&~p}else a.childLanes=0,a.child=null;return Vb(r,a,p,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&pu(a,g!==null?g.cachePool:null),g!==null?U_(a,g):ah(),Db(a);else return a.lanes=a.childLanes=536870912,Vb(r,a,g!==null?g.baseLanes|l:l,l)}else g!==null?(pu(a,g.cachePool),U_(a,g),jr(),a.memoizedState=null):(r!==null&&pu(a,null),ah(),jr());return on(r,a,m,l),a.child}function Vb(r,a,l,p){var m=Jd();return m=m===null?null:{parent:qt._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},r!==null&&pu(a,null),ah(),Db(a),r!==null&&nl(r,a,p,!0),null}function Mu(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function Th(r,a,l,p,m){return $a(a),l=lh(r,a,l,p,void 0,m),p=ch(),r!==null&&!en?(uh(r,a,m),sr(r,a,m)):(at&&p&&Fd(a),a.flags|=1,on(r,a,l,m),a.child)}function Fb(r,a,l,p,m,g){return $a(a),a.updateQueue=null,l=V_(a,p,l,m),G_(r),p=ch(),r!==null&&!en?(uh(r,a,g),sr(r,a,g)):(at&&p&&Fd(a),a.flags|=1,on(r,a,l,g),a.child)}function Yb(r,a,l,p,m){if($a(a),a.stateNode===null){var g=Bo,R=l.contextType;typeof R=="object"&&R!==null&&(g=bn(R)),g=new l(p,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=wh,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=p,g.state=a.memoizedState,g.refs={},th(a),R=l.contextType,g.context=typeof R=="object"&&R!==null?bn(R):Bo,g.state=a.memoizedState,R=l.getDerivedStateFromProps,typeof R=="function"&&(Sh(a,l,R,p),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(R=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),R!==g.state&&wh.enqueueReplaceState(g,g.state,null),cl(a,p,g,m),ll(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),p=!0}else if(r===null){g=a.stateNode;var M=a.memoizedProps,L=Ga(l,M);g.props=L;var X=g.context,ie=l.contextType;R=Bo,typeof ie=="object"&&ie!==null&&(R=bn(ie));var se=l.getDerivedStateFromProps;ie=typeof se=="function"||typeof g.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,ie||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(M||X!==R)&&Nb(a,g,p,R),Pr=!1;var K=a.memoizedState;g.state=K,cl(a,p,g,m),ll(),X=a.memoizedState,M||K!==X||Pr?(typeof se=="function"&&(Sh(a,l,se,p),X=a.memoizedState),(L=Pr||Ob(a,l,L,p,K,X,R))?(ie||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=X),g.props=p,g.state=X,g.context=R,p=L):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{g=a.stateNode,nh(r,a),R=a.memoizedProps,ie=Ga(l,R),g.props=ie,se=a.pendingProps,K=g.context,X=l.contextType,L=Bo,typeof X=="object"&&X!==null&&(L=bn(X)),M=l.getDerivedStateFromProps,(X=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R!==se||K!==L)&&Nb(a,g,p,L),Pr=!1,K=a.memoizedState,g.state=K,cl(a,p,g,m),ll();var Z=a.memoizedState;R!==se||K!==Z||Pr||r!==null&&r.dependencies!==null&&uu(r.dependencies)?(typeof M=="function"&&(Sh(a,l,M,p),Z=a.memoizedState),(ie=Pr||Ob(a,l,ie,p,K,Z,L)||r!==null&&r.dependencies!==null&&uu(r.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(p,Z,L),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(p,Z,L)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||R===r.memoizedProps&&K===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&K===r.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Z),g.props=p,g.state=Z,g.context=L,p=ie):(typeof g.componentDidUpdate!="function"||R===r.memoizedProps&&K===r.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&K===r.memoizedState||(a.flags|=1024),p=!1)}return g=p,Mu(r,a),p=(a.flags&128)!==0,g||p?(g=a.stateNode,l=p&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,r!==null&&p?(a.child=Vo(a,r.child,null,m),a.child=Vo(a,null,l,m)):on(r,a,l,m),a.memoizedState=g.state,r=a.child):r=sr(r,a,m),r}function qb(r,a,l,p){return el(),a.flags|=256,on(r,a,l,p),a.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ah(r){return{baseLanes:r,cachePool:B_()}}function Mh(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=li),r}function Xb(r,a,l){var p=a.pendingProps,m=!1,g=(a.flags&128)!==0,R;if((R=g)||(R=r!==null&&r.memoizedState===null?!1:(Xt.current&2)!==0),R&&(m=!0,a.flags&=-129),R=(a.flags&32)!==0,a.flags&=-33,r===null){if(at){if(m?zr(a):jr(),at){var M=Ct,L;if(L=M){e:{for(L=M,M=Pi;L.nodeType!==8;){if(!M){M=null;break e}if(L=Ri(L.nextSibling),L===null){M=null;break e}}M=L}M!==null?(a.memoizedState={dehydrated:M,treeContext:La!==null?{id:tr,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},L=Yn(18,null,null,0),L.stateNode=M,L.return=a,a.child=L,Rn=a,Ct=null,L=!0):L=!1}L||ja(a)}if(M=a.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return pm(M)?a.lanes=32:a.lanes=536870912,null;or(a)}return M=p.children,p=p.fallback,m?(jr(),m=a.mode,M=Du({mode:"hidden",children:M},m),p=Ba(p,m,l,null),M.return=a,p.return=a,M.sibling=p,a.child=M,m=a.child,m.memoizedState=Ah(l),m.childLanes=Mh(r,R,l),a.memoizedState=Ch,p):(zr(a),Dh(a,M))}if(L=r.memoizedState,L!==null&&(M=L.dehydrated,M!==null)){if(g)a.flags&256?(zr(a),a.flags&=-257,a=Oh(r,a,l)):a.memoizedState!==null?(jr(),a.child=r.child,a.flags|=128,a=null):(jr(),m=p.fallback,M=a.mode,p=Du({mode:"visible",children:p.children},M),m=Ba(m,M,l,null),m.flags|=2,p.return=a,m.return=a,p.sibling=m,a.child=p,Vo(a,r.child,null,l),p=a.child,p.memoizedState=Ah(l),p.childLanes=Mh(r,R,l),a.memoizedState=Ch,a=m);else if(zr(a),pm(M)){if(R=M.nextSibling&&M.nextSibling.dataset,R)var X=R.dgst;R=X,p=Error(i(419)),p.stack="",p.digest=R,tl({value:p,source:null,stack:null}),a=Oh(r,a,l)}else if(en||nl(r,a,l,!1),R=(l&r.childLanes)!==0,en||R){if(R=vt,R!==null&&(p=l&-l,p=(p&42)!==0?1:dd(p),p=(p&(R.suspendedLanes|l))!==0?0:p,p!==0&&p!==L.retryLane))throw L.retryLane=p,Po(r,p),Zn(R,r,p),Hb;M.data==="$?"||Kh(),a=Oh(r,a,l)}else M.data==="$?"?(a.flags|=192,a.child=r.child,a=null):(r=L.treeContext,Ct=Ri(M.nextSibling),Rn=a,at=!0,za=null,Pi=!1,r!==null&&(ai[oi++]=tr,ai[oi++]=nr,ai[oi++]=La,tr=r.id,nr=r.overflow,La=a),a=Dh(a,p.children),a.flags|=4096);return a}return m?(jr(),m=p.fallback,M=a.mode,L=r.child,X=L.sibling,p=er(L,{mode:"hidden",children:p.children}),p.subtreeFlags=L.subtreeFlags&65011712,X!==null?m=er(X,m):(m=Ba(m,M,l,null),m.flags|=2),m.return=a,p.return=a,p.sibling=m,a.child=p,p=m,m=a.child,M=r.child.memoizedState,M===null?M=Ah(l):(L=M.cachePool,L!==null?(X=qt._currentValue,L=L.parent!==X?{parent:X,pool:X}:L):L=B_(),M={baseLanes:M.baseLanes|l,cachePool:L}),m.memoizedState=M,m.childLanes=Mh(r,R,l),a.memoizedState=Ch,p):(zr(a),l=r.child,r=l.sibling,l=er(l,{mode:"visible",children:p.children}),l.return=a,l.sibling=null,r!==null&&(R=a.deletions,R===null?(a.deletions=[r],a.flags|=16):R.push(r)),a.child=l,a.memoizedState=null,l)}function Dh(r,a){return a=Du({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Du(r,a){return r=Yn(22,r,null,a),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Oh(r,a,l){return Vo(a,r.child,null,l),r=Dh(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Kb(r,a,l){r.lanes|=a;var p=r.alternate;p!==null&&(p.lanes|=a),Kd(r.return,a,l)}function Nh(r,a,l,p,m){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:m}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=p,g.tail=l,g.tailMode=m)}function Wb(r,a,l){var p=a.pendingProps,m=p.revealOrder,g=p.tail;if(on(r,a,p.children,l),p=Xt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Kb(r,l,a);else if(r.tag===19)Kb(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}p&=1}switch(Y(Xt,p),m){case"forwards":for(l=a.child,m=null;l!==null;)r=l.alternate,r!==null&&Tu(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),Nh(a,!1,m,l,g);break;case"backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&Tu(r)===null){a.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}Nh(a,!0,l,null,g);break;case"together":Nh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function sr(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),Gr|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(nl(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=er(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=er(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function Ph(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&uu(r)))}function QC(r,a,l){switch(a.tag){case 3:E(a,a.stateNode.containerInfo),Nr(a,qt,r.memoizedState.cache),el();break;case 27:case 5:H(a);break;case 4:E(a,a.stateNode.containerInfo);break;case 10:Nr(a,a.type,a.memoizedProps.value);break;case 13:var p=a.memoizedState;if(p!==null)return p.dehydrated!==null?(zr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Xb(r,a,l):(zr(a),r=sr(r,a,l),r!==null?r.sibling:null);zr(a);break;case 19:var m=(r.flags&128)!==0;if(p=(l&a.childLanes)!==0,p||(nl(r,a,l,!1),p=(l&a.childLanes)!==0),m){if(p)return Wb(r,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Y(Xt,Xt.current),p)break;return null;case 22:case 23:return a.lanes=0,Gb(r,a,l);case 24:Nr(a,qt,r.memoizedState.cache)}return sr(r,a,l)}function Zb(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)en=!0;else{if(!Ph(r,l)&&(a.flags&128)===0)return en=!1,QC(r,a,l);en=(r.flags&131072)!==0}else en=!1,at&&(a.flags&1048576)!==0&&C_(a,cu,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var p=a.elementType,m=p._init;if(p=m(p._payload),a.type=p,typeof p=="function")Ud(p)?(r=Ga(p,r),a.tag=1,a=Yb(null,a,p,r,l)):(a.tag=0,a=Th(null,a,p,r,l));else{if(p!=null){if(m=p.$$typeof,m===C){a.tag=11,a=$b(null,a,p,r,l);break e}else if(m===F){a.tag=14,a=Ib(null,a,p,r,l);break e}}throw a=we(p)||p,Error(i(306,a,""))}}return a;case 0:return Th(r,a,a.type,a.pendingProps,l);case 1:return p=a.type,m=Ga(p,a.pendingProps),Yb(r,a,p,m,l);case 3:e:{if(E(a,a.stateNode.containerInfo),r===null)throw Error(i(387));p=a.pendingProps;var g=a.memoizedState;m=g.element,nh(r,a),cl(a,p,null,l);var R=a.memoizedState;if(p=R.cache,Nr(a,qt,p),p!==g.cache&&Wd(a,[qt],l,!0),ll(),p=R.element,g.isDehydrated)if(g={element:p,isDehydrated:!1,cache:R.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=qb(r,a,p,l);break e}else if(p!==m){m=ii(Error(i(424)),a),tl(m),a=qb(r,a,p,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ct=Ri(r.firstChild),Rn=a,at=!0,za=null,Pi=!0,l=Mb(a,null,p,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(el(),p===m){a=sr(r,a,l);break e}on(r,a,p,l)}a=a.child}return a;case 26:return Mu(r,a),r===null?(l=tE(a.type,null,a.pendingProps,null))?a.memoizedState=l:at||(l=a.type,r=a.pendingProps,p=Vu(xe.current).createElement(l),p[_n]=a,p[On]=r,ln(p,l,r),Jt(p),a.stateNode=p):a.memoizedState=tE(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return H(a),r===null&&at&&(p=a.stateNode=Q0(a.type,a.pendingProps,xe.current),Rn=a,Pi=!0,m=Ct,qr(a.type)?(dm=m,Ct=Ri(p.firstChild)):Ct=m),on(r,a,a.pendingProps.children,l),Mu(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&at&&((m=p=Ct)&&(p=TA(p,a.type,a.pendingProps,Pi),p!==null?(a.stateNode=p,Rn=a,Ct=Ri(p.firstChild),Pi=!1,m=!0):m=!1),m||ja(a)),H(a),m=a.type,g=a.pendingProps,R=r!==null?r.memoizedProps:null,p=g.children,cm(m,g)?p=null:R!==null&&cm(m,R)&&(a.flags|=32),a.memoizedState!==null&&(m=lh(r,a,VC,null,null,l),Ol._currentValue=m),Mu(r,a),on(r,a,p,l),a.child;case 6:return r===null&&at&&((r=l=Ct)&&(l=CA(l,a.pendingProps,Pi),l!==null?(a.stateNode=l,Rn=a,Ct=null,r=!0):r=!1),r||ja(a)),null;case 13:return Xb(r,a,l);case 4:return E(a,a.stateNode.containerInfo),p=a.pendingProps,r===null?a.child=Vo(a,null,p,l):on(r,a,p,l),a.child;case 11:return $b(r,a,a.type,a.pendingProps,l);case 7:return on(r,a,a.pendingProps,l),a.child;case 8:return on(r,a,a.pendingProps.children,l),a.child;case 12:return on(r,a,a.pendingProps.children,l),a.child;case 10:return p=a.pendingProps,Nr(a,a.type,p.value),on(r,a,p.children,l),a.child;case 9:return m=a.type._context,p=a.pendingProps.children,$a(a),m=bn(m),p=p(m),a.flags|=1,on(r,a,p,l),a.child;case 14:return Ib(r,a,a.type,a.pendingProps,l);case 15:return Ub(r,a,a.type,a.pendingProps,l);case 19:return Wb(r,a,l);case 31:return p=a.pendingProps,l=a.mode,p={mode:p.mode,children:p.children},r===null?(l=Du(p,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=er(r.child,p),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return Gb(r,a,l);case 24:return $a(a),p=bn(qt),r===null?(m=Jd(),m===null&&(m=vt,g=Zd(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),a.memoizedState={parent:p,cache:m},th(a),Nr(a,qt,m)):((r.lanes&l)!==0&&(nh(r,a),cl(a,null,null,l),ll()),m=r.memoizedState,g=a.memoizedState,m.parent!==p?(m={parent:p,cache:p},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Nr(a,qt,p)):(p=g.cache,Nr(a,qt,p),p!==m.cache&&Wd(a,[qt],l,!0))),on(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function lr(r){r.flags|=4}function Qb(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!oE(a)){if(a=si.current,a!==null&&((nt&4194048)===nt?Bi!==null:(nt&62914560)!==nt&&(nt&536870912)===0||a!==Bi))throw ol=eh,L_;r.flags|=8192}}function Ou(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Dy():536870912,r.lanes|=a,Xo|=a)}function vl(r,a){if(!at)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function Rt(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,p=0;if(a)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,p|=m.subtreeFlags&65011712,p|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,p|=m.subtreeFlags,p|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=p,r.childLanes=l,a}function JC(r,a,l){var p=a.pendingProps;switch(Yd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(a),null;case 1:return Rt(a),null;case 3:return l=a.stateNode,p=null,r!==null&&(p=r.memoizedState.cache),a.memoizedState.cache!==p&&(a.flags|=2048),rr(qt),x(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Js(a)?lr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,D_())),Rt(a),null;case 26:return l=a.memoizedState,r===null?(lr(a),l!==null?(Rt(a),Qb(a,l)):(Rt(a),a.flags&=-16777217)):l?l!==r.memoizedState?(lr(a),Rt(a),Qb(a,l)):(Rt(a),a.flags&=-16777217):(r.memoizedProps!==p&&lr(a),Rt(a),a.flags&=-16777217),null;case 27:U(a),l=xe.current;var m=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==p&&lr(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return Rt(a),null}r=ae.current,Js(a)?A_(a):(r=Q0(m,p,l),a.stateNode=r,lr(a))}return Rt(a),null;case 5:if(U(a),l=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==p&&lr(a);else{if(!p){if(a.stateNode===null)throw Error(i(166));return Rt(a),null}if(r=ae.current,Js(a))A_(a);else{switch(m=Vu(xe.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof p.is=="string"?m.createElement("select",{is:p.is}):m.createElement("select"),p.multiple?r.multiple=!0:p.size&&(r.size=p.size);break;default:r=typeof p.is=="string"?m.createElement(l,{is:p.is}):m.createElement(l)}}r[_n]=a,r[On]=p;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=r;e:switch(ln(r,l,p),l){case"button":case"input":case"select":case"textarea":r=!!p.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&lr(a)}}return Rt(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==p&&lr(a);else{if(typeof p!="string"&&a.stateNode===null)throw Error(i(166));if(r=xe.current,Js(a)){if(r=a.stateNode,l=a.memoizedProps,p=null,m=Rn,m!==null)switch(m.tag){case 27:case 5:p=m.memoizedProps}r[_n]=a,r=!!(r.nodeValue===l||p!==null&&p.suppressHydrationWarning===!0||F0(r.nodeValue,l)),r||ja(a)}else r=Vu(r).createTextNode(p),r[_n]=a,a.stateNode=r}return Rt(a),null;case 13:if(p=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Js(a),p!==null&&p.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[_n]=a}else el(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Rt(a),m=!1}else m=D_(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(or(a),a):(or(a),null)}if(or(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=p!==null,r=r!==null&&r.memoizedState!==null,l){p=a.child,m=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(m=p.alternate.memoizedState.cachePool.pool);var g=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(g=p.memoizedState.cachePool.pool),g!==m&&(p.flags|=2048)}return l!==r&&l&&(a.child.flags|=8192),Ou(a,a.updateQueue),Rt(a),null;case 4:return x(),r===null&&rm(a.stateNode.containerInfo),Rt(a),null;case 10:return rr(a.type),Rt(a),null;case 19:if(V(Xt),m=a.memoizedState,m===null)return Rt(a),null;if(p=(a.flags&128)!==0,g=m.rendering,g===null)if(p)vl(m,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(g=Tu(r),g!==null){for(a.flags|=128,vl(m,!1),r=g.updateQueue,a.updateQueue=r,Ou(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)T_(l,r),l=l.sibling;return Y(Xt,Xt.current&1|2),a.child}r=r.sibling}m.tail!==null&&tt()>Bu&&(a.flags|=128,p=!0,vl(m,!1),a.lanes=4194304)}else{if(!p)if(r=Tu(g),r!==null){if(a.flags|=128,p=!0,r=r.updateQueue,a.updateQueue=r,Ou(a,r),vl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!at)return Rt(a),null}else 2*tt()-m.renderingStartTime>Bu&&l!==536870912&&(a.flags|=128,p=!0,vl(m,!1),a.lanes=4194304);m.isBackwards?(g.sibling=a.child,a.child=g):(r=m.last,r!==null?r.sibling=g:a.child=g,m.last=g)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=tt(),a.sibling=null,r=Xt.current,Y(Xt,p?r&1|2:r&1),a):(Rt(a),null);case 22:case 23:return or(a),oh(),p=a.memoizedState!==null,r!==null?r.memoizedState!==null!==p&&(a.flags|=8192):p&&(a.flags|=8192),p?(l&536870912)!==0&&(a.flags&128)===0&&(Rt(a),a.subtreeFlags&6&&(a.flags|=8192)):Rt(a),l=a.updateQueue,l!==null&&Ou(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==l&&(a.flags|=2048),r!==null&&V(Ia),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),rr(qt),Rt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function eA(r,a){switch(Yd(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return rr(qt),x(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return U(a),null;case 13:if(or(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));el()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return V(Xt),null;case 4:return x(),null;case 10:return rr(a.type),null;case 22:case 23:return or(a),oh(),r!==null&&V(Ia),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return rr(qt),null;case 25:return null;default:return null}}function Jb(r,a){switch(Yd(a),a.tag){case 3:rr(qt),x();break;case 26:case 27:case 5:U(a);break;case 4:x();break;case 13:or(a);break;case 19:V(Xt);break;case 10:rr(a.type);break;case 22:case 23:or(a),oh(),r!==null&&V(Ia);break;case 24:rr(qt)}}function gl(r,a){try{var l=a.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var m=p.next;l=m;do{if((l.tag&r)===r){p=void 0;var g=l.create,R=l.inst;p=g(),R.destroy=p}l=l.next}while(l!==m)}}catch(M){mt(a,a.return,M)}}function Hr(r,a,l){try{var p=a.updateQueue,m=p!==null?p.lastEffect:null;if(m!==null){var g=m.next;p=g;do{if((p.tag&r)===r){var R=p.inst,M=R.destroy;if(M!==void 0){R.destroy=void 0,m=a;var L=l,X=M;try{X()}catch(ie){mt(m,L,ie)}}}p=p.next}while(p!==g)}}catch(ie){mt(a,a.return,ie)}}function e0(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{I_(a,l)}catch(p){mt(r,r.return,p)}}}function t0(r,a,l){l.props=Ga(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(p){mt(r,a,p)}}function yl(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var p=r.stateNode;break;case 30:p=r.stateNode;break;default:p=r.stateNode}typeof l=="function"?r.refCleanup=l(p):l.current=p}}catch(m){mt(r,a,m)}}function Li(r,a){var l=r.ref,p=r.refCleanup;if(l!==null)if(typeof p=="function")try{p()}catch(m){mt(r,a,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){mt(r,a,m)}else l.current=null}function n0(r){var a=r.type,l=r.memoizedProps,p=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&p.focus();break e;case"img":l.src?p.src=l.src:l.srcSet&&(p.srcset=l.srcSet)}}catch(m){mt(r,r.return,m)}}function Bh(r,a,l){try{var p=r.stateNode;EA(p,r.type,l,a),p[On]=a}catch(m){mt(r,r.return,m)}}function i0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&qr(r.type)||r.tag===4}function Lh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||i0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&qr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function kh(r,a,l){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Gu));else if(p!==4&&(p===27&&qr(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for(kh(r,a,l),r=r.sibling;r!==null;)kh(r,a,l),r=r.sibling}function Nu(r,a,l){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(p!==4&&(p===27&&qr(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Nu(r,a,l),r=r.sibling;r!==null;)Nu(r,a,l),r=r.sibling}function r0(r){var a=r.stateNode,l=r.memoizedProps;try{for(var p=r.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);ln(a,p,l),a[_n]=r,a[On]=l}catch(g){mt(r,r.return,g)}}var cr=!1,zt=!1,zh=!1,a0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function tA(r,a){if(r=r.containerInfo,sm=Wu,r=v_(r),Ld(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var m=p.anchorOffset,g=p.focusNode;p=p.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var R=0,M=-1,L=-1,X=0,ie=0,se=r,K=null;t:for(;;){for(var Z;se!==l||m!==0&&se.nodeType!==3||(M=R+m),se!==g||p!==0&&se.nodeType!==3||(L=R+p),se.nodeType===3&&(R+=se.nodeValue.length),(Z=se.firstChild)!==null;)K=se,se=Z;for(;;){if(se===r)break t;if(K===l&&++X===m&&(M=R),K===g&&++ie===p&&(L=R),(Z=se.nextSibling)!==null)break;se=K,K=se.parentNode}se=Z}l=M===-1||L===-1?null:{start:M,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(lm={focusedElem:r,selectionRange:l},Wu=!1,tn=a;tn!==null;)if(a=tn,r=a.child,(a.subtreeFlags&1024)!==0&&r!==null)r.return=a,tn=r;else for(;tn!==null;){switch(a=tn,g=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=a,m=g.memoizedProps,g=g.memoizedState,p=l.stateNode;try{var ke=Ga(l.type,m,l.elementType===l.type);r=p.getSnapshotBeforeUpdate(ke,g),p.__reactInternalSnapshotBeforeUpdate=r}catch(Ne){mt(l,l.return,Ne)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)fm(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":fm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,tn=r;break}tn=a.return}}function o0(r,a,l){var p=l.flags;switch(l.tag){case 0:case 11:case 15:$r(r,l),p&4&&gl(5,l);break;case 1:if($r(r,l),p&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(R){mt(l,l.return,R)}else{var m=Ga(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(m,a,r.__reactInternalSnapshotBeforeUpdate)}catch(R){mt(l,l.return,R)}}p&64&&e0(l),p&512&&yl(l,l.return);break;case 3:if($r(r,l),p&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{I_(r,a)}catch(R){mt(l,l.return,R)}}break;case 27:a===null&&p&4&&r0(l);case 26:case 5:$r(r,l),a===null&&p&4&&n0(l),p&512&&yl(l,l.return);break;case 12:$r(r,l);break;case 13:$r(r,l),p&4&&c0(r,l),p&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=uA.bind(null,l),AA(r,l))));break;case 22:if(p=l.memoizedState!==null||cr,!p){a=a!==null&&a.memoizedState!==null||zt,m=cr;var g=zt;cr=p,(zt=a)&&!g?Ir(r,l,(l.subtreeFlags&8772)!==0):$r(r,l),cr=m,zt=g}break;case 30:break;default:$r(r,l)}}function s0(r){var a=r.alternate;a!==null&&(r.alternate=null,s0(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&vd(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var xt=null,Bn=!1;function ur(r,a,l){for(l=l.child;l!==null;)l0(r,a,l),l=l.sibling}function l0(r,a,l){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Hs,l)}catch{}switch(l.tag){case 26:zt||Li(l,a),ur(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zt||Li(l,a);var p=xt,m=Bn;qr(l.type)&&(xt=l.stateNode,Bn=!1),ur(r,a,l),Cl(l.stateNode),xt=p,Bn=m;break;case 5:zt||Li(l,a);case 6:if(p=xt,m=Bn,xt=null,ur(r,a,l),xt=p,Bn=m,xt!==null)if(Bn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(l.stateNode)}catch(g){mt(l,a,g)}else try{xt.removeChild(l.stateNode)}catch(g){mt(l,a,g)}break;case 18:xt!==null&&(Bn?(r=xt,W0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Ll(r)):W0(xt,l.stateNode));break;case 4:p=xt,m=Bn,xt=l.stateNode.containerInfo,Bn=!0,ur(r,a,l),xt=p,Bn=m;break;case 0:case 11:case 14:case 15:zt||Hr(2,l,a),zt||Hr(4,l,a),ur(r,a,l);break;case 1:zt||(Li(l,a),p=l.stateNode,typeof p.componentWillUnmount=="function"&&t0(l,a,p)),ur(r,a,l);break;case 21:ur(r,a,l);break;case 22:zt=(p=zt)||l.memoizedState!==null,ur(r,a,l),zt=p;break;default:ur(r,a,l)}}function c0(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ll(r)}catch(l){mt(a,a.return,l)}}function nA(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new a0),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new a0),a;default:throw Error(i(435,r.tag))}}function jh(r,a){var l=nA(r);a.forEach(function(p){var m=fA.bind(null,r,p);l.has(p)||(l.add(p),p.then(m,m))})}function qn(r,a){var l=a.deletions;if(l!==null)for(var p=0;p<l.length;p++){var m=l[p],g=r,R=a,M=R;e:for(;M!==null;){switch(M.tag){case 27:if(qr(M.type)){xt=M.stateNode,Bn=!1;break e}break;case 5:xt=M.stateNode,Bn=!1;break e;case 3:case 4:xt=M.stateNode.containerInfo,Bn=!0;break e}M=M.return}if(xt===null)throw Error(i(160));l0(g,R,m),xt=null,Bn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)u0(a,r),a=a.sibling}var wi=null;function u0(r,a){var l=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:qn(a,r),Xn(r),p&4&&(Hr(3,r,r.return),gl(3,r),Hr(5,r,r.return));break;case 1:qn(a,r),Xn(r),p&512&&(zt||l===null||Li(l,l.return)),p&64&&cr&&(r=r.updateQueue,r!==null&&(p=r.callbacks,p!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?p:l.concat(p))));break;case 26:var m=wi;if(qn(a,r),Xn(r),p&512&&(zt||l===null||Li(l,l.return)),p&4){var g=l!==null?l.memoizedState:null;if(p=r.memoizedState,l===null)if(p===null)if(r.stateNode===null){e:{p=r.type,l=r.memoizedProps,m=m.ownerDocument||m;t:switch(p){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Us]||g[_n]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(p),m.head.insertBefore(g,m.querySelector("head > title"))),ln(g,p,l),g[_n]=r,Jt(g),p=g;break e;case"link":var R=rE("link","href",m).get(p+(l.href||""));if(R){for(var M=0;M<R.length;M++)if(g=R[M],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){R.splice(M,1);break t}}g=m.createElement(p),ln(g,p,l),m.head.appendChild(g);break;case"meta":if(R=rE("meta","content",m).get(p+(l.content||""))){for(M=0;M<R.length;M++)if(g=R[M],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){R.splice(M,1);break t}}g=m.createElement(p),ln(g,p,l),m.head.appendChild(g);break;default:throw Error(i(468,p))}g[_n]=r,Jt(g),p=g}r.stateNode=p}else aE(m,r.type,r.stateNode);else r.stateNode=iE(m,p,r.memoizedProps);else g!==p?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,p===null?aE(m,r.type,r.stateNode):iE(m,p,r.memoizedProps)):p===null&&r.stateNode!==null&&Bh(r,r.memoizedProps,l.memoizedProps)}break;case 27:qn(a,r),Xn(r),p&512&&(zt||l===null||Li(l,l.return)),l!==null&&p&4&&Bh(r,r.memoizedProps,l.memoizedProps);break;case 5:if(qn(a,r),Xn(r),p&512&&(zt||l===null||Li(l,l.return)),r.flags&32){m=r.stateNode;try{To(m,"")}catch(Z){mt(r,r.return,Z)}}p&4&&r.stateNode!=null&&(m=r.memoizedProps,Bh(r,m,l!==null?l.memoizedProps:m)),p&1024&&(zh=!0);break;case 6:if(qn(a,r),Xn(r),p&4){if(r.stateNode===null)throw Error(i(162));p=r.memoizedProps,l=r.stateNode;try{l.nodeValue=p}catch(Z){mt(r,r.return,Z)}}break;case 3:if(qu=null,m=wi,wi=Fu(a.containerInfo),qn(a,r),wi=m,Xn(r),p&4&&l!==null&&l.memoizedState.isDehydrated)try{Ll(a.containerInfo)}catch(Z){mt(r,r.return,Z)}zh&&(zh=!1,f0(r));break;case 4:p=wi,wi=Fu(r.stateNode.containerInfo),qn(a,r),Xn(r),wi=p;break;case 12:qn(a,r),Xn(r);break;case 13:qn(a,r),Xn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Vh=tt()),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,jh(r,p)));break;case 22:m=r.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,X=cr,ie=zt;if(cr=X||m,zt=ie||L,qn(a,r),zt=ie,cr=X,Xn(r),p&8192)e:for(a=r.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||L||cr||zt||Va(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){L=l=a;try{if(g=L.stateNode,m)R=g.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{M=L.stateNode;var se=L.memoizedProps.style,K=se!=null&&se.hasOwnProperty("display")?se.display:null;M.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Z){mt(L,L.return,Z)}}}else if(a.tag===6){if(l===null){L=a;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(Z){mt(L,L.return,Z)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}p&4&&(p=r.updateQueue,p!==null&&(l=p.retryQueue,l!==null&&(p.retryQueue=null,jh(r,l))));break;case 19:qn(a,r),Xn(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,jh(r,p)));break;case 30:break;case 21:break;default:qn(a,r),Xn(r)}}function Xn(r){var a=r.flags;if(a&2){try{for(var l,p=r.return;p!==null;){if(i0(p)){l=p;break}p=p.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,g=Lh(r);Nu(r,g,m);break;case 5:var R=l.stateNode;l.flags&32&&(To(R,""),l.flags&=-33);var M=Lh(r);Nu(r,M,R);break;case 3:case 4:var L=l.stateNode.containerInfo,X=Lh(r);kh(r,X,L);break;default:throw Error(i(161))}}catch(ie){mt(r,r.return,ie)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function f0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;f0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function $r(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)o0(r,a.alternate,a),a=a.sibling}function Va(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Hr(4,a,a.return),Va(a);break;case 1:Li(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&t0(a,a.return,l),Va(a);break;case 27:Cl(a.stateNode);case 26:case 5:Li(a,a.return),Va(a);break;case 22:a.memoizedState===null&&Va(a);break;case 30:Va(a);break;default:Va(a)}r=r.sibling}}function Ir(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var p=a.alternate,m=r,g=a,R=g.flags;switch(g.tag){case 0:case 11:case 15:Ir(m,g,l),gl(4,g);break;case 1:if(Ir(m,g,l),p=g,m=p.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){mt(p,p.return,X)}if(p=g,m=p.updateQueue,m!==null){var M=p.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)$_(L[m],M)}catch(X){mt(p,p.return,X)}}l&&R&64&&e0(g),yl(g,g.return);break;case 27:r0(g);case 26:case 5:Ir(m,g,l),l&&p===null&&R&4&&n0(g),yl(g,g.return);break;case 12:Ir(m,g,l);break;case 13:Ir(m,g,l),l&&R&4&&c0(m,g);break;case 22:g.memoizedState===null&&Ir(m,g,l),yl(g,g.return);break;case 30:break;default:Ir(m,g,l)}a=a.sibling}}function Hh(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&il(l))}function $h(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&il(r))}function ki(r,a,l,p){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)p0(r,a,l,p),a=a.sibling}function p0(r,a,l,p){var m=a.flags;switch(a.tag){case 0:case 11:case 15:ki(r,a,l,p),m&2048&&gl(9,a);break;case 1:ki(r,a,l,p);break;case 3:ki(r,a,l,p),m&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&il(r)));break;case 12:if(m&2048){ki(r,a,l,p),r=a.stateNode;try{var g=a.memoizedProps,R=g.id,M=g.onPostCommit;typeof M=="function"&&M(R,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){mt(a,a.return,L)}}else ki(r,a,l,p);break;case 13:ki(r,a,l,p);break;case 23:break;case 22:g=a.stateNode,R=a.alternate,a.memoizedState!==null?g._visibility&2?ki(r,a,l,p):_l(r,a):g._visibility&2?ki(r,a,l,p):(g._visibility|=2,Fo(r,a,l,p,(a.subtreeFlags&10256)!==0)),m&2048&&Hh(R,a);break;case 24:ki(r,a,l,p),m&2048&&$h(a.alternate,a);break;default:ki(r,a,l,p)}}function Fo(r,a,l,p,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=r,R=a,M=l,L=p,X=R.flags;switch(R.tag){case 0:case 11:case 15:Fo(g,R,M,L,m),gl(8,R);break;case 23:break;case 22:var ie=R.stateNode;R.memoizedState!==null?ie._visibility&2?Fo(g,R,M,L,m):_l(g,R):(ie._visibility|=2,Fo(g,R,M,L,m)),m&&X&2048&&Hh(R.alternate,R);break;case 24:Fo(g,R,M,L,m),m&&X&2048&&$h(R.alternate,R);break;default:Fo(g,R,M,L,m)}a=a.sibling}}function _l(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,p=a,m=p.flags;switch(p.tag){case 22:_l(l,p),m&2048&&Hh(p.alternate,p);break;case 24:_l(l,p),m&2048&&$h(p.alternate,p);break;default:_l(l,p)}a=a.sibling}}var bl=8192;function Yo(r){if(r.subtreeFlags&bl)for(r=r.child;r!==null;)d0(r),r=r.sibling}function d0(r){switch(r.tag){case 26:Yo(r),r.flags&bl&&r.memoizedState!==null&&IA(wi,r.memoizedState,r.memoizedProps);break;case 5:Yo(r);break;case 3:case 4:var a=wi;wi=Fu(r.stateNode.containerInfo),Yo(r),wi=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=bl,bl=16777216,Yo(r),bl=a):Yo(r));break;default:Yo(r)}}function h0(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function El(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var p=a[l];tn=p,v0(p,r)}h0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)m0(r),r=r.sibling}function m0(r){switch(r.tag){case 0:case 11:case 15:El(r),r.flags&2048&&Hr(9,r,r.return);break;case 3:El(r);break;case 12:El(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Pu(r)):El(r);break;default:El(r)}}function Pu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var p=a[l];tn=p,v0(p,r)}h0(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Hr(8,a,a.return),Pu(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Pu(a));break;default:Pu(a)}r=r.sibling}}function v0(r,a){for(;tn!==null;){var l=tn;switch(l.tag){case 0:case 11:case 15:Hr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var p=l.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:il(l.memoizedState.cache)}if(p=l.child,p!==null)p.return=l,tn=p;else e:for(l=r;tn!==null;){p=tn;var m=p.sibling,g=p.return;if(s0(p),p===l){tn=null;break e}if(m!==null){m.return=g,tn=m;break e}tn=g}}}var iA={getCacheForType:function(r){var a=bn(qt),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l}},rA=typeof WeakMap=="function"?WeakMap:Map,ct=0,vt=null,Ze=null,nt=0,ut=0,Kn=null,Ur=!1,qo=!1,Ih=!1,fr=0,At=0,Gr=0,Fa=0,Uh=0,li=0,Xo=0,xl=null,Ln=null,Gh=!1,Vh=0,Bu=1/0,Lu=null,Vr=null,sn=0,Fr=null,Ko=null,Wo=0,Fh=0,Yh=null,g0=null,Sl=0,qh=null;function Wn(){if((ct&2)!==0&&nt!==0)return nt&-nt;if(W.T!==null){var r=zo;return r!==0?r:em()}return Py()}function y0(){li===0&&(li=(nt&536870912)===0||at?My():536870912);var r=si.current;return r!==null&&(r.flags|=32),li}function Zn(r,a,l){(r===vt&&(ut===2||ut===9)||r.cancelPendingCommit!==null)&&(Zo(r,0),Yr(r,nt,li,!1)),Is(r,l),((ct&2)===0||r!==vt)&&(r===vt&&((ct&2)===0&&(Fa|=l),At===4&&Yr(r,nt,li,!1)),zi(r))}function _0(r,a,l){if((ct&6)!==0)throw Error(i(327));var p=!l&&(a&124)===0&&(a&r.expiredLanes)===0||$s(r,a),m=p?sA(r,a):Wh(r,a,!0),g=p;do{if(m===0){qo&&!p&&Yr(r,a,0,!1);break}else{if(l=r.current.alternate,g&&!aA(l)){m=Wh(r,a,!1),g=!1;continue}if(m===2){if(g=a,r.errorRecoveryDisabledLanes&g)var R=0;else R=r.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){a=R;e:{var M=r;m=xl;var L=M.current.memoizedState.isDehydrated;if(L&&(Zo(M,R).flags|=256),R=Wh(M,R,!1),R!==2){if(Ih&&!L){M.errorRecoveryDisabledLanes|=g,Fa|=g,m=4;break e}g=Ln,Ln=m,g!==null&&(Ln===null?Ln=g:Ln.push.apply(Ln,g))}m=R}if(g=!1,m!==2)continue}}if(m===1){Zo(r,0),Yr(r,a,0,!0);break}e:{switch(p=r,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Yr(p,a,li,!Ur);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=Vh+300-tt(),10<m)){if(Yr(p,a,li,!Ur),Yc(p,0,!0)!==0)break e;p.timeoutHandle=X0(b0.bind(null,p,l,Ln,Lu,Gh,a,li,Fa,Xo,Ur,g,2,-0,0),m);break e}b0(p,l,Ln,Lu,Gh,a,li,Fa,Xo,Ur,g,0,-0,0)}}break}while(!0);zi(r)}function b0(r,a,l,p,m,g,R,M,L,X,ie,se,K,Z){if(r.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Dl={stylesheets:null,count:0,unsuspend:$A},d0(a),se=UA(),se!==null)){r.cancelPendingCommit=se(C0.bind(null,r,a,g,l,p,m,R,M,L,ie,1,K,Z)),Yr(r,g,R,!X);return}C0(r,a,g,l,p,m,R,M,L)}function aA(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var p=0;p<l.length;p++){var m=l[p],g=m.getSnapshot;m=m.value;try{if(!Fn(g(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yr(r,a,l,p){a&=~Uh,a&=~Fa,r.suspendedLanes|=a,r.pingedLanes&=~a,p&&(r.warmLanes|=a),p=r.expirationTimes;for(var m=a;0<m;){var g=31-Vn(m),R=1<<g;p[g]=-1,m&=~R}l!==0&&Oy(r,l,a)}function ku(){return(ct&6)===0?(wl(0),!1):!0}function Xh(){if(Ze!==null){if(ut===0)var r=Ze.return;else r=Ze,ir=Ha=null,fh(r),Go=null,hl=0,r=Ze;for(;r!==null;)Jb(r.alternate,r),r=r.return;Ze=null}}function Zo(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,SA(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Xh(),vt=r,Ze=l=er(r.current,null),nt=a,ut=0,Kn=null,Ur=!1,qo=$s(r,a),Ih=!1,Xo=li=Uh=Fa=Gr=At=0,Ln=xl=null,Gh=!1,(a&8)!==0&&(a|=a&32);var p=r.entangledLanes;if(p!==0)for(r=r.entanglements,p&=a;0<p;){var m=31-Vn(p),g=1<<m;a|=r[m],p&=~g}return fr=a,ru(),l}function E0(r,a){Ve=null,W.H=Su,a===al||a===du?(a=j_(),ut=3):a===L_?(a=j_(),ut=4):ut=a===Hb?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Kn=a,Ze===null&&(At=1,Au(r,ii(a,r.current)))}function x0(){var r=W.H;return W.H=Su,r===null?Su:r}function S0(){var r=W.A;return W.A=iA,r}function Kh(){At=4,Ur||(nt&4194048)!==nt&&si.current!==null||(qo=!0),(Gr&134217727)===0&&(Fa&134217727)===0||vt===null||Yr(vt,nt,li,!1)}function Wh(r,a,l){var p=ct;ct|=2;var m=x0(),g=S0();(vt!==r||nt!==a)&&(Lu=null,Zo(r,a)),a=!1;var R=At;e:do try{if(ut!==0&&Ze!==null){var M=Ze,L=Kn;switch(ut){case 8:Xh(),R=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(a=!0);var X=ut;if(ut=0,Kn=null,Qo(r,M,L,X),l&&qo){R=0;break e}break;default:X=ut,ut=0,Kn=null,Qo(r,M,L,X)}}oA(),R=At;break}catch(ie){E0(r,ie)}while(!0);return a&&r.shellSuspendCounter++,ir=Ha=null,ct=p,W.H=m,W.A=g,Ze===null&&(vt=null,nt=0,ru()),R}function oA(){for(;Ze!==null;)w0(Ze)}function sA(r,a){var l=ct;ct|=2;var p=x0(),m=S0();vt!==r||nt!==a?(Lu=null,Bu=tt()+500,Zo(r,a)):qo=$s(r,a);e:do try{if(ut!==0&&Ze!==null){a=Ze;var g=Kn;t:switch(ut){case 1:ut=0,Kn=null,Qo(r,a,g,1);break;case 2:case 9:if(k_(g)){ut=0,Kn=null,R0(a);break}a=function(){ut!==2&&ut!==9||vt!==r||(ut=7),zi(r)},g.then(a,a);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:k_(g)?(ut=0,Kn=null,R0(a)):(ut=0,Kn=null,Qo(r,a,g,7));break;case 5:var R=null;switch(Ze.tag){case 26:R=Ze.memoizedState;case 5:case 27:var M=Ze;if(!R||oE(R)){ut=0,Kn=null;var L=M.sibling;if(L!==null)Ze=L;else{var X=M.return;X!==null?(Ze=X,zu(X)):Ze=null}break t}}ut=0,Kn=null,Qo(r,a,g,5);break;case 6:ut=0,Kn=null,Qo(r,a,g,6);break;case 8:Xh(),At=6;break e;default:throw Error(i(462))}}lA();break}catch(ie){E0(r,ie)}while(!0);return ir=Ha=null,W.H=p,W.A=m,ct=l,Ze!==null?0:(vt=null,nt=0,ru(),At)}function lA(){for(;Ze!==null&&!$e();)w0(Ze)}function w0(r){var a=Zb(r.alternate,r,fr);r.memoizedProps=r.pendingProps,a===null?zu(r):Ze=a}function R0(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=Fb(l,a,a.pendingProps,a.type,void 0,nt);break;case 11:a=Fb(l,a,a.pendingProps,a.type.render,a.ref,nt);break;case 5:fh(a);default:Jb(l,a),a=Ze=T_(a,fr),a=Zb(l,a,fr)}r.memoizedProps=r.pendingProps,a===null?zu(r):Ze=a}function Qo(r,a,l,p){ir=Ha=null,fh(a),Go=null,hl=0;var m=a.return;try{if(ZC(r,m,a,l,nt)){At=1,Au(r,ii(l,r.current)),Ze=null;return}}catch(g){if(m!==null)throw Ze=m,g;At=1,Au(r,ii(l,r.current)),Ze=null;return}a.flags&32768?(at||p===1?r=!0:qo||(nt&536870912)!==0?r=!1:(Ur=r=!0,(p===2||p===9||p===3||p===6)&&(p=si.current,p!==null&&p.tag===13&&(p.flags|=16384))),T0(a,r)):zu(a)}function zu(r){var a=r;do{if((a.flags&32768)!==0){T0(a,Ur);return}r=a.return;var l=JC(a.alternate,a,fr);if(l!==null){Ze=l;return}if(a=a.sibling,a!==null){Ze=a;return}Ze=a=r}while(a!==null);At===0&&(At=5)}function T0(r,a){do{var l=eA(r.alternate,r);if(l!==null){l.flags&=32767,Ze=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){Ze=r;return}Ze=r=l}while(r!==null);At=6,Ze=null}function C0(r,a,l,p,m,g,R,M,L){r.cancelPendingCommit=null;do ju();while(sn!==0);if((ct&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(g=a.lanes|a.childLanes,g|=$d,$2(r,l,g,R,M,L),r===vt&&(Ze=vt=null,nt=0),Ko=a,Fr=r,Wo=l,Fh=g,Yh=m,g0=p,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,pA(Dn,function(){return N0(),null})):(r.callbackNode=null,r.callbackPriority=0),p=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||p){p=W.T,W.T=null,m=oe.p,oe.p=2,R=ct,ct|=4;try{tA(r,a,l)}finally{ct=R,oe.p=m,W.T=p}}sn=1,A0(),M0(),D0()}}function A0(){if(sn===1){sn=0;var r=Fr,a=Ko,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=W.T,W.T=null;var p=oe.p;oe.p=2;var m=ct;ct|=4;try{u0(a,r);var g=lm,R=v_(r.containerInfo),M=g.focusedElem,L=g.selectionRange;if(R!==M&&M&&M.ownerDocument&&m_(M.ownerDocument.documentElement,M)){if(L!==null&&Ld(M)){var X=L.start,ie=L.end;if(ie===void 0&&(ie=X),"selectionStart"in M)M.selectionStart=X,M.selectionEnd=Math.min(ie,M.value.length);else{var se=M.ownerDocument||document,K=se&&se.defaultView||window;if(K.getSelection){var Z=K.getSelection(),ke=M.textContent.length,Ne=Math.min(L.start,ke),dt=L.end===void 0?Ne:Math.min(L.end,ke);!Z.extend&&Ne>dt&&(R=dt,dt=Ne,Ne=R);var G=h_(M,Ne),$=h_(M,dt);if(G&&$&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==$.node||Z.focusOffset!==$.offset)){var q=se.createRange();q.setStart(G.node,G.offset),Z.removeAllRanges(),Ne>dt?(Z.addRange(q),Z.extend($.node,$.offset)):(q.setEnd($.node,$.offset),Z.addRange(q))}}}}for(se=[],Z=M;Z=Z.parentNode;)Z.nodeType===1&&se.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<se.length;M++){var re=se[M];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Wu=!!sm,lm=sm=null}finally{ct=m,oe.p=p,W.T=l}}r.current=a,sn=2}}function M0(){if(sn===2){sn=0;var r=Fr,a=Ko,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=W.T,W.T=null;var p=oe.p;oe.p=2;var m=ct;ct|=4;try{o0(r,a.alternate,a)}finally{ct=m,oe.p=p,W.T=l}}sn=3}}function D0(){if(sn===4||sn===3){sn=0,wt();var r=Fr,a=Ko,l=Wo,p=g0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?sn=5:(sn=0,Ko=Fr=null,O0(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Vr=null),hd(l),a=a.stateNode,Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Hs,a,void 0,(a.current.flags&128)===128)}catch{}if(p!==null){a=W.T,m=oe.p,oe.p=2,W.T=null;try{for(var g=r.onRecoverableError,R=0;R<p.length;R++){var M=p[R];g(M.value,{componentStack:M.stack})}}finally{W.T=a,oe.p=m}}(Wo&3)!==0&&ju(),zi(r),m=r.pendingLanes,(l&4194090)!==0&&(m&42)!==0?r===qh?Sl++:(Sl=0,qh=r):Sl=0,wl(0)}}function O0(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,il(a)))}function ju(r){return A0(),M0(),D0(),N0()}function N0(){if(sn!==5)return!1;var r=Fr,a=Fh;Fh=0;var l=hd(Wo),p=W.T,m=oe.p;try{oe.p=32>l?32:l,W.T=null,l=Yh,Yh=null;var g=Fr,R=Wo;if(sn=0,Ko=Fr=null,Wo=0,(ct&6)!==0)throw Error(i(331));var M=ct;if(ct|=4,m0(g.current),p0(g,g.current,R,l),ct=M,wl(0,!1),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Hs,g)}catch{}return!0}finally{oe.p=m,W.T=p,O0(r,a)}}function P0(r,a,l){a=ii(l,a),a=Rh(r.stateNode,a,2),r=Lr(r,a,2),r!==null&&(Is(r,2),zi(r))}function mt(r,a,l){if(r.tag===3)P0(r,r,l);else for(;a!==null;){if(a.tag===3){P0(a,r,l);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vr===null||!Vr.has(p))){r=ii(l,r),l=zb(2),p=Lr(a,l,2),p!==null&&(jb(l,p,a,r),Is(p,2),zi(p));break}}a=a.return}}function Zh(r,a,l){var p=r.pingCache;if(p===null){p=r.pingCache=new rA;var m=new Set;p.set(a,m)}else m=p.get(a),m===void 0&&(m=new Set,p.set(a,m));m.has(l)||(Ih=!0,m.add(l),r=cA.bind(null,r,a,l),a.then(r,r))}function cA(r,a,l){var p=r.pingCache;p!==null&&p.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,vt===r&&(nt&l)===l&&(At===4||At===3&&(nt&62914560)===nt&&300>tt()-Vh?(ct&2)===0&&Zo(r,0):Uh|=l,Xo===nt&&(Xo=0)),zi(r)}function B0(r,a){a===0&&(a=Dy()),r=Po(r,a),r!==null&&(Is(r,a),zi(r))}function uA(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),B0(r,l)}function fA(r,a){var l=0;switch(r.tag){case 13:var p=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:p=r.stateNode;break;case 22:p=r.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(a),B0(r,l)}function pA(r,a){return fe(r,a)}var Hu=null,Jo=null,Qh=!1,$u=!1,Jh=!1,Ya=0;function zi(r){r!==Jo&&r.next===null&&(Jo===null?Hu=Jo=r:Jo=Jo.next=r),$u=!0,Qh||(Qh=!0,hA())}function wl(r,a){if(!Jh&&$u){Jh=!0;do for(var l=!1,p=Hu;p!==null;){if(r!==0){var m=p.pendingLanes;if(m===0)var g=0;else{var R=p.suspendedLanes,M=p.pingedLanes;g=(1<<31-Vn(42|r)+1)-1,g&=m&~(R&~M),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,j0(p,g))}else g=nt,g=Yc(p,p===vt?g:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(g&3)===0||$s(p,g)||(l=!0,j0(p,g));p=p.next}while(l);Jh=!1}}function dA(){L0()}function L0(){$u=Qh=!1;var r=0;Ya!==0&&(xA()&&(r=Ya),Ya=0);for(var a=tt(),l=null,p=Hu;p!==null;){var m=p.next,g=k0(p,a);g===0?(p.next=null,l===null?Hu=m:l.next=m,m===null&&(Jo=l)):(l=p,(r!==0||(g&3)!==0)&&($u=!0)),p=m}wl(r)}function k0(r,a){for(var l=r.suspendedLanes,p=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var R=31-Vn(g),M=1<<R,L=m[R];L===-1?((M&l)===0||(M&p)!==0)&&(m[R]=H2(M,a)):L<=a&&(r.expiredLanes|=M),g&=~M}if(a=vt,l=nt,l=Yc(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p=r.callbackNode,l===0||r===a&&(ut===2||ut===9)||r.cancelPendingCommit!==null)return p!==null&&p!==null&&ge(p),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||$s(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(p!==null&&ge(p),hd(l)){case 2:case 8:l=it;break;case 32:l=Dn;break;case 268435456:l=yn;break;default:l=Dn}return p=z0.bind(null,r),l=fe(l,p),r.callbackPriority=a,r.callbackNode=l,a}return p!==null&&p!==null&&ge(p),r.callbackPriority=2,r.callbackNode=null,2}function z0(r,a){if(sn!==0&&sn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(ju()&&r.callbackNode!==l)return null;var p=nt;return p=Yc(r,r===vt?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p===0?null:(_0(r,p,a),k0(r,tt()),r.callbackNode!=null&&r.callbackNode===l?z0.bind(null,r):null)}function j0(r,a){if(ju())return null;_0(r,a,!0)}function hA(){wA(function(){(ct&6)!==0?fe(wn,dA):L0()})}function em(){return Ya===0&&(Ya=My()),Ya}function H0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Zc(""+r)}function $0(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function mA(r,a,l,p,m){if(a==="submit"&&l&&l.stateNode===m){var g=H0((m[On]||null).action),R=p.submitter;R&&(a=(a=R[On]||null)?H0(a.formAction):R.getAttribute("formAction"),a!==null&&(g=a,R=null));var M=new tu("action","action",null,p,m);r.push({event:M,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Ya!==0){var L=R?$0(m,R):new FormData(m);bh(l,{pending:!0,data:L,method:m.method,action:g},null,L)}}else typeof g=="function"&&(M.preventDefault(),L=R?$0(m,R):new FormData(m),bh(l,{pending:!0,data:L,method:m.method,action:g},g,L))},currentTarget:m}]})}}for(var tm=0;tm<Hd.length;tm++){var nm=Hd[tm],vA=nm.toLowerCase(),gA=nm[0].toUpperCase()+nm.slice(1);Si(vA,"on"+gA)}Si(__,"onAnimationEnd"),Si(b_,"onAnimationIteration"),Si(E_,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(BC,"onTransitionRun"),Si(LC,"onTransitionStart"),Si(kC,"onTransitionCancel"),Si(x_,"onTransitionEnd"),So("onMouseEnter",["mouseout","mouseover"]),So("onMouseLeave",["mouseout","mouseover"]),So("onPointerEnter",["pointerout","pointerover"]),So("onPointerLeave",["pointerout","pointerover"]),Da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Da("onBeforeInput",["compositionend","keypress","textInput","paste"]),Da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function I0(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var p=r[l],m=p.event;p=p.listeners;e:{var g=void 0;if(a)for(var R=p.length-1;0<=R;R--){var M=p[R],L=M.instance,X=M.currentTarget;if(M=M.listener,L!==g&&m.isPropagationStopped())break e;g=M,m.currentTarget=X;try{g(m)}catch(ie){Cu(ie)}m.currentTarget=null,g=L}else for(R=0;R<p.length;R++){if(M=p[R],L=M.instance,X=M.currentTarget,M=M.listener,L!==g&&m.isPropagationStopped())break e;g=M,m.currentTarget=X;try{g(m)}catch(ie){Cu(ie)}m.currentTarget=null,g=L}}}}function Qe(r,a){var l=a[md];l===void 0&&(l=a[md]=new Set);var p=r+"__bubble";l.has(p)||(U0(a,r,2,!1),l.add(p))}function im(r,a,l){var p=0;a&&(p|=4),U0(l,r,p,a)}var Iu="_reactListening"+Math.random().toString(36).slice(2);function rm(r){if(!r[Iu]){r[Iu]=!0,Ly.forEach(function(l){l!=="selectionchange"&&(yA.has(l)||im(l,!1,r),im(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Iu]||(a[Iu]=!0,im("selectionchange",!1,a))}}function U0(r,a,l,p){switch(pE(a)){case 2:var m=FA;break;case 8:m=YA;break;default:m=ym}l=m.bind(null,a,l,r),m=void 0,!Td||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),p?m!==void 0?r.addEventListener(a,l,{capture:!0,passive:m}):r.addEventListener(a,l,!0):m!==void 0?r.addEventListener(a,l,{passive:m}):r.addEventListener(a,l,!1)}function am(r,a,l,p,m){var g=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var M=p.stateNode.containerInfo;if(M===m)break;if(R===4)for(R=p.return;R!==null;){var L=R.tag;if((L===3||L===4)&&R.stateNode.containerInfo===m)return;R=R.return}for(;M!==null;){if(R=bo(M),R===null)return;if(L=R.tag,L===5||L===6||L===26||L===27){p=g=R;continue e}M=M.parentNode}}p=p.return}Ky(function(){var X=g,ie=wd(l),se=[];e:{var K=S_.get(r);if(K!==void 0){var Z=tu,ke=r;switch(r){case"keypress":if(Jc(l)===0)break e;case"keydown":case"keyup":Z=pC;break;case"focusin":ke="focus",Z=Dd;break;case"focusout":ke="blur",Z=Dd;break;case"beforeblur":case"afterblur":Z=Dd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Qy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=eC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=mC;break;case __:case b_:case E_:Z=iC;break;case x_:Z=gC;break;case"scroll":case"scrollend":Z=Q2;break;case"wheel":Z=_C;break;case"copy":case"cut":case"paste":Z=aC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=e_;break;case"toggle":case"beforetoggle":Z=EC}var Ne=(a&4)!==0,dt=!Ne&&(r==="scroll"||r==="scrollend"),G=Ne?K!==null?K+"Capture":null:K;Ne=[];for(var $=X,q;$!==null;){var re=$;if(q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||q===null||G===null||(re=Vs($,G),re!=null&&Ne.push(Tl($,re,q))),dt)break;$=$.return}0<Ne.length&&(K=new Z(K,ke,null,l,ie),se.push({event:K,listeners:Ne}))}}if((a&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",K&&l!==Sd&&(ke=l.relatedTarget||l.fromElement)&&(bo(ke)||ke[_o]))break e;if((Z||K)&&(K=ie.window===ie?ie:(K=ie.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(ke=l.relatedTarget||l.toElement,Z=X,ke=ke?bo(ke):null,ke!==null&&(dt=s(ke),Ne=ke.tag,ke!==dt||Ne!==5&&Ne!==27&&Ne!==6)&&(ke=null)):(Z=null,ke=X),Z!==ke)){if(Ne=Qy,re="onMouseLeave",G="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(Ne=e_,re="onPointerLeave",G="onPointerEnter",$="pointer"),dt=Z==null?K:Gs(Z),q=ke==null?K:Gs(ke),K=new Ne(re,$+"leave",Z,l,ie),K.target=dt,K.relatedTarget=q,re=null,bo(ie)===X&&(Ne=new Ne(G,$+"enter",ke,l,ie),Ne.target=q,Ne.relatedTarget=dt,re=Ne),dt=re,Z&&ke)t:{for(Ne=Z,G=ke,$=0,q=Ne;q;q=es(q))$++;for(q=0,re=G;re;re=es(re))q++;for(;0<$-q;)Ne=es(Ne),$--;for(;0<q-$;)G=es(G),q--;for(;$--;){if(Ne===G||G!==null&&Ne===G.alternate)break t;Ne=es(Ne),G=es(G)}Ne=null}else Ne=null;Z!==null&&G0(se,K,Z,Ne,!1),ke!==null&&dt!==null&&G0(se,dt,ke,Ne,!0)}}e:{if(K=X?Gs(X):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var be=l_;else if(o_(K))if(c_)be=OC;else{be=MC;var Ke=AC}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?X&&xd(X.elementType)&&(be=l_):be=DC;if(be&&(be=be(r,X))){s_(se,be,l,ie);break e}Ke&&Ke(r,K,X),r==="focusout"&&X&&K.type==="number"&&X.memoizedProps.value!=null&&Ed(K,"number",K.value)}switch(Ke=X?Gs(X):window,r){case"focusin":(o_(Ke)||Ke.contentEditable==="true")&&(Do=Ke,kd=X,Qs=null);break;case"focusout":Qs=kd=Do=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,g_(se,l,ie);break;case"selectionchange":if(PC)break;case"keydown":case"keyup":g_(se,l,ie)}var Re;if(Nd)e:{switch(r){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Mo?r_(r,l)&&(Be="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Be="onCompositionStart");Be&&(t_&&l.locale!=="ko"&&(Mo||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Mo&&(Re=Wy()):(Or=ie,Cd="value"in Or?Or.value:Or.textContent,Mo=!0)),Ke=Uu(X,Be),0<Ke.length&&(Be=new Jy(Be,r,null,l,ie),se.push({event:Be,listeners:Ke}),Re?Be.data=Re:(Re=a_(l),Re!==null&&(Be.data=Re)))),(Re=SC?wC(r,l):RC(r,l))&&(Be=Uu(X,"onBeforeInput"),0<Be.length&&(Ke=new Jy("onBeforeInput","beforeinput",null,l,ie),se.push({event:Ke,listeners:Be}),Ke.data=Re)),mA(se,r,X,l,ie)}I0(se,a)})}function Tl(r,a,l){return{instance:r,listener:a,currentTarget:l}}function Uu(r,a){for(var l=a+"Capture",p=[];r!==null;){var m=r,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Vs(r,l),m!=null&&p.unshift(Tl(r,m,g)),m=Vs(r,a),m!=null&&p.push(Tl(r,m,g))),r.tag===3)return p;r=r.return}return[]}function es(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function G0(r,a,l,p,m){for(var g=a._reactName,R=[];l!==null&&l!==p;){var M=l,L=M.alternate,X=M.stateNode;if(M=M.tag,L!==null&&L===p)break;M!==5&&M!==26&&M!==27||X===null||(L=X,m?(X=Vs(l,g),X!=null&&R.unshift(Tl(l,X,L))):m||(X=Vs(l,g),X!=null&&R.push(Tl(l,X,L)))),l=l.return}R.length!==0&&r.push({event:a,listeners:R})}var _A=/\r\n?/g,bA=/\u0000|\uFFFD/g;function V0(r){return(typeof r=="string"?r:""+r).replace(_A,`
`).replace(bA,"")}function F0(r,a){return a=V0(a),V0(r)===a}function Gu(){}function pt(r,a,l,p,m,g){switch(l){case"children":typeof p=="string"?a==="body"||a==="textarea"&&p===""||To(r,p):(typeof p=="number"||typeof p=="bigint")&&a!=="body"&&To(r,""+p);break;case"className":Xc(r,"class",p);break;case"tabIndex":Xc(r,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Xc(r,l,p);break;case"style":qy(r,p,g);break;case"data":if(a!=="object"){Xc(r,"data",p);break}case"src":case"href":if(p===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(l);break}p=Zc(""+p),r.setAttribute(l,p);break;case"action":case"formAction":if(typeof p=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&pt(r,a,"name",m.name,m,null),pt(r,a,"formEncType",m.formEncType,m,null),pt(r,a,"formMethod",m.formMethod,m,null),pt(r,a,"formTarget",m.formTarget,m,null)):(pt(r,a,"encType",m.encType,m,null),pt(r,a,"method",m.method,m,null),pt(r,a,"target",m.target,m,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(l);break}p=Zc(""+p),r.setAttribute(l,p);break;case"onClick":p!=null&&(r.onclick=Gu);break;case"onScroll":p!=null&&Qe("scroll",r);break;case"onScrollEnd":p!=null&&Qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(l=p.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":r.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){r.removeAttribute("xlink:href");break}l=Zc(""+p),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(l,""+p):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":p===!0?r.setAttribute(l,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(l,p):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?r.setAttribute(l,p):r.removeAttribute(l);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?r.removeAttribute(l):r.setAttribute(l,p);break;case"popover":Qe("beforetoggle",r),Qe("toggle",r),qc(r,"popover",p);break;case"xlinkActuate":Qi(r,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Qi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Qi(r,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Qi(r,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Qi(r,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Qi(r,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Qi(r,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Qi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Qi(r,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":qc(r,"is",p);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=W2.get(l)||l,qc(r,l,p))}}function om(r,a,l,p,m,g){switch(l){case"style":qy(r,p,g);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(l=p.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof p=="string"?To(r,p):(typeof p=="number"||typeof p=="bigint")&&To(r,""+p);break;case"onScroll":p!=null&&Qe("scroll",r);break;case"onScrollEnd":p!=null&&Qe("scrollend",r);break;case"onClick":p!=null&&(r.onclick=Gu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ky.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),g=r[On]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(a,g,m),typeof p=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,p,m);break e}l in r?r[l]=p:p===!0?r.setAttribute(l,""):qc(r,l,p)}}}function ln(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",r),Qe("load",r);var p=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var R=l[g];if(R!=null)switch(g){case"src":p=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:pt(r,a,g,R,l,null)}}m&&pt(r,a,"srcSet",l.srcSet,l,null),p&&pt(r,a,"src",l.src,l,null);return;case"input":Qe("invalid",r);var M=g=R=m=null,L=null,X=null;for(p in l)if(l.hasOwnProperty(p)){var ie=l[p];if(ie!=null)switch(p){case"name":m=ie;break;case"type":R=ie;break;case"checked":L=ie;break;case"defaultChecked":X=ie;break;case"value":g=ie;break;case"defaultValue":M=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:pt(r,a,p,ie,l,null)}}Gy(r,g,M,L,X,R,m,!1),Kc(r);return;case"select":Qe("invalid",r),p=R=g=null;for(m in l)if(l.hasOwnProperty(m)&&(M=l[m],M!=null))switch(m){case"value":g=M;break;case"defaultValue":R=M;break;case"multiple":p=M;default:pt(r,a,m,M,l,null)}a=g,l=R,r.multiple=!!p,a!=null?Ro(r,!!p,a,!1):l!=null&&Ro(r,!!p,l,!0);return;case"textarea":Qe("invalid",r),g=m=p=null;for(R in l)if(l.hasOwnProperty(R)&&(M=l[R],M!=null))switch(R){case"value":p=M;break;case"defaultValue":m=M;break;case"children":g=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:pt(r,a,R,M,l,null)}Fy(r,p,m,g),Kc(r);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(p=l[L],p!=null))switch(L){case"selected":r.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:pt(r,a,L,p,l,null)}return;case"dialog":Qe("beforetoggle",r),Qe("toggle",r),Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":Qe("load",r);break;case"video":case"audio":for(p=0;p<Rl.length;p++)Qe(Rl[p],r);break;case"image":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"embed":case"source":case"link":Qe("error",r),Qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(p=l[X],p!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:pt(r,a,X,p,l,null)}return;default:if(xd(a)){for(ie in l)l.hasOwnProperty(ie)&&(p=l[ie],p!==void 0&&om(r,a,ie,p,l,void 0));return}}for(M in l)l.hasOwnProperty(M)&&(p=l[M],p!=null&&pt(r,a,M,p,l,null))}function EA(r,a,l,p){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,R=null,M=null,L=null,X=null,ie=null;for(Z in l){var se=l[Z];if(l.hasOwnProperty(Z)&&se!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=se;default:p.hasOwnProperty(Z)||pt(r,a,Z,null,p,se)}}for(var K in p){var Z=p[K];if(se=l[K],p.hasOwnProperty(K)&&(Z!=null||se!=null))switch(K){case"type":g=Z;break;case"name":m=Z;break;case"checked":X=Z;break;case"defaultChecked":ie=Z;break;case"value":R=Z;break;case"defaultValue":M=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:Z!==se&&pt(r,a,K,Z,p,se)}}bd(r,R,M,L,X,ie,g,m);return;case"select":Z=R=M=K=null;for(g in l)if(L=l[g],l.hasOwnProperty(g)&&L!=null)switch(g){case"value":break;case"multiple":Z=L;default:p.hasOwnProperty(g)||pt(r,a,g,null,p,L)}for(m in p)if(g=p[m],L=l[m],p.hasOwnProperty(m)&&(g!=null||L!=null))switch(m){case"value":K=g;break;case"defaultValue":M=g;break;case"multiple":R=g;default:g!==L&&pt(r,a,m,g,p,L)}a=M,l=R,p=Z,K!=null?Ro(r,!!l,K,!1):!!p!=!!l&&(a!=null?Ro(r,!!l,a,!0):Ro(r,!!l,l?[]:"",!1));return;case"textarea":Z=K=null;for(M in l)if(m=l[M],l.hasOwnProperty(M)&&m!=null&&!p.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:pt(r,a,M,null,p,m)}for(R in p)if(m=p[R],g=l[R],p.hasOwnProperty(R)&&(m!=null||g!=null))switch(R){case"value":K=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&pt(r,a,R,m,p,g)}Vy(r,K,Z);return;case"option":for(var ke in l)if(K=l[ke],l.hasOwnProperty(ke)&&K!=null&&!p.hasOwnProperty(ke))switch(ke){case"selected":r.selected=!1;break;default:pt(r,a,ke,null,p,K)}for(L in p)if(K=p[L],Z=l[L],p.hasOwnProperty(L)&&K!==Z&&(K!=null||Z!=null))switch(L){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:pt(r,a,L,K,p,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)K=l[Ne],l.hasOwnProperty(Ne)&&K!=null&&!p.hasOwnProperty(Ne)&&pt(r,a,Ne,null,p,K);for(X in p)if(K=p[X],Z=l[X],p.hasOwnProperty(X)&&K!==Z&&(K!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:pt(r,a,X,K,p,Z)}return;default:if(xd(a)){for(var dt in l)K=l[dt],l.hasOwnProperty(dt)&&K!==void 0&&!p.hasOwnProperty(dt)&&om(r,a,dt,void 0,p,K);for(ie in p)K=p[ie],Z=l[ie],!p.hasOwnProperty(ie)||K===Z||K===void 0&&Z===void 0||om(r,a,ie,K,p,Z);return}}for(var G in l)K=l[G],l.hasOwnProperty(G)&&K!=null&&!p.hasOwnProperty(G)&&pt(r,a,G,null,p,K);for(se in p)K=p[se],Z=l[se],!p.hasOwnProperty(se)||K===Z||K==null&&Z==null||pt(r,a,se,K,p,Z)}var sm=null,lm=null;function Vu(r){return r.nodeType===9?r:r.ownerDocument}function Y0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q0(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function cm(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var um=null;function xA(){var r=window.event;return r&&r.type==="popstate"?r===um?!1:(um=r,!0):(um=null,!1)}var X0=typeof setTimeout=="function"?setTimeout:void 0,SA=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,wA=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(r){return K0.resolve(null).then(r).catch(RA)}:X0;function RA(r){setTimeout(function(){throw r})}function qr(r){return r==="head"}function W0(r,a){var l=a,p=0,m=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<p&&8>p){l=p;var R=r.ownerDocument;if(l&1&&Cl(R.documentElement),l&2&&Cl(R.body),l&4)for(l=R.head,Cl(l),R=l.firstChild;R;){var M=R.nextSibling,L=R.nodeName;R[Us]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&R.rel.toLowerCase()==="stylesheet"||l.removeChild(R),R=M}}if(m===0){r.removeChild(g),Ll(a);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:p=l.charCodeAt(0)-48;else p=0;l=g}while(l);Ll(a)}function fm(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":fm(l),vd(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function TA(r,a,l,p){for(;r.nodeType===1;){var m=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!p&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(p){if(!r[Us])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=Ri(r.nextSibling),r===null)break}return null}function CA(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Ri(r.nextSibling),r===null))return null;return r}function pm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function AA(r,a){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")a();else{var p=function(){a(),l.removeEventListener("DOMContentLoaded",p)};l.addEventListener("DOMContentLoaded",p),r._reactRetry=p}}function Ri(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}var dm=null;function Z0(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}function Q0(r,a,l){switch(a=Vu(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Cl(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);vd(r)}var ci=new Map,J0=new Set;function Fu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var pr=oe.d;oe.d={f:MA,r:DA,D:OA,C:NA,L:PA,m:BA,X:kA,S:LA,M:zA};function MA(){var r=pr.f(),a=ku();return r||a}function DA(r){var a=Eo(r);a!==null&&a.tag===5&&a.type==="form"?_b(a):pr.r(r)}var ts=typeof document>"u"?null:document;function eE(r,a,l){var p=ts;if(p&&typeof a=="string"&&a){var m=ni(a);m='link[rel="'+r+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),J0.has(m)||(J0.add(m),r={rel:r,crossOrigin:l,href:a},p.querySelector(m)===null&&(a=p.createElement("link"),ln(a,"link",r),Jt(a),p.head.appendChild(a)))}}function OA(r){pr.D(r),eE("dns-prefetch",r,null)}function NA(r,a){pr.C(r,a),eE("preconnect",r,a)}function PA(r,a,l){pr.L(r,a,l);var p=ts;if(p&&r&&a){var m='link[rel="preload"][as="'+ni(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+ni(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+ni(l.imageSizes)+'"]')):m+='[href="'+ni(r)+'"]';var g=m;switch(a){case"style":g=ns(r);break;case"script":g=is(r)}ci.has(g)||(r=h({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),ci.set(g,r),p.querySelector(m)!==null||a==="style"&&p.querySelector(Al(g))||a==="script"&&p.querySelector(Ml(g))||(a=p.createElement("link"),ln(a,"link",r),Jt(a),p.head.appendChild(a)))}}function BA(r,a){pr.m(r,a);var l=ts;if(l&&r){var p=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+ni(p)+'"][href="'+ni(r)+'"]',g=m;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=is(r)}if(!ci.has(g)&&(r=h({rel:"modulepreload",href:r},a),ci.set(g,r),l.querySelector(m)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ml(g)))return}p=l.createElement("link"),ln(p,"link",r),Jt(p),l.head.appendChild(p)}}}function LA(r,a,l){pr.S(r,a,l);var p=ts;if(p&&r){var m=xo(p).hoistableStyles,g=ns(r);a=a||"default";var R=m.get(g);if(!R){var M={loading:0,preload:null};if(R=p.querySelector(Al(g)))M.loading=5;else{r=h({rel:"stylesheet",href:r,"data-precedence":a},l),(l=ci.get(g))&&hm(r,l);var L=R=p.createElement("link");Jt(L),ln(L,"link",r),L._p=new Promise(function(X,ie){L.onload=X,L.onerror=ie}),L.addEventListener("load",function(){M.loading|=1}),L.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Yu(R,a,p)}R={type:"stylesheet",instance:R,count:1,state:M},m.set(g,R)}}}function kA(r,a){pr.X(r,a);var l=ts;if(l&&r){var p=xo(l).hoistableScripts,m=is(r),g=p.get(m);g||(g=l.querySelector(Ml(m)),g||(r=h({src:r,async:!0},a),(a=ci.get(m))&&mm(r,a),g=l.createElement("script"),Jt(g),ln(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},p.set(m,g))}}function zA(r,a){pr.M(r,a);var l=ts;if(l&&r){var p=xo(l).hoistableScripts,m=is(r),g=p.get(m);g||(g=l.querySelector(Ml(m)),g||(r=h({src:r,async:!0,type:"module"},a),(a=ci.get(m))&&mm(r,a),g=l.createElement("script"),Jt(g),ln(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},p.set(m,g))}}function tE(r,a,l,p){var m=(m=xe.current)?Fu(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=ns(l.href),l=xo(m).hoistableStyles,p=l.get(a),p||(p={type:"style",instance:null,count:0,state:null},l.set(a,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=ns(l.href);var g=xo(m).hoistableStyles,R=g.get(r);if(R||(m=m.ownerDocument||m,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,R),(g=m.querySelector(Al(r)))&&!g._p&&(R.instance=g,R.state.loading=5),ci.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ci.set(r,l),g||jA(m,r,l,R.state))),a&&p===null)throw Error(i(528,""));return R}if(a&&p!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=is(l),l=xo(m).hoistableScripts,p=l.get(a),p||(p={type:"script",instance:null,count:0,state:null},l.set(a,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ns(r){return'href="'+ni(r)+'"'}function Al(r){return'link[rel="stylesheet"]['+r+"]"}function nE(r){return h({},r,{"data-precedence":r.precedence,precedence:null})}function jA(r,a,l,p){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?p.loading=1:(a=r.createElement("link"),p.preload=a,a.addEventListener("load",function(){return p.loading|=1}),a.addEventListener("error",function(){return p.loading|=2}),ln(a,"link",l),Jt(a),r.head.appendChild(a))}function is(r){return'[src="'+ni(r)+'"]'}function Ml(r){return"script[async]"+r}function iE(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var p=r.querySelector('style[data-href~="'+ni(l.href)+'"]');if(p)return a.instance=p,Jt(p),p;var m=h({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return p=(r.ownerDocument||r).createElement("style"),Jt(p),ln(p,"style",m),Yu(p,l.precedence,r),a.instance=p;case"stylesheet":m=ns(l.href);var g=r.querySelector(Al(m));if(g)return a.state.loading|=4,a.instance=g,Jt(g),g;p=nE(l),(m=ci.get(m))&&hm(p,m),g=(r.ownerDocument||r).createElement("link"),Jt(g);var R=g;return R._p=new Promise(function(M,L){R.onload=M,R.onerror=L}),ln(g,"link",p),a.state.loading|=4,Yu(g,l.precedence,r),a.instance=g;case"script":return g=is(l.src),(m=r.querySelector(Ml(g)))?(a.instance=m,Jt(m),m):(p=l,(m=ci.get(g))&&(p=h({},l),mm(p,m)),r=r.ownerDocument||r,m=r.createElement("script"),Jt(m),ln(m,"link",p),r.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(p=a.instance,a.state.loading|=4,Yu(p,l.precedence,r));return a.instance}function Yu(r,a,l){for(var p=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=p.length?p[p.length-1]:null,g=m,R=0;R<p.length;R++){var M=p[R];if(M.dataset.precedence===a)g=M;else if(g!==m)break}g?g.parentNode.insertBefore(r,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function hm(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function mm(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var qu=null;function rE(r,a,l){if(qu===null){var p=new Map,m=qu=new Map;m.set(l,p)}else m=qu,p=m.get(l),p||(p=new Map,m.set(l,p));if(p.has(r))return p;for(p.set(r,null),l=l.getElementsByTagName(r),m=0;m<l.length;m++){var g=l[m];if(!(g[Us]||g[_n]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var R=g.getAttribute(a)||"";R=r+R;var M=p.get(R);M?M.push(g):p.set(R,[g])}}return p}function aE(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function HA(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function oE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Dl=null;function $A(){}function IA(r,a,l){if(Dl===null)throw Error(i(475));var p=Dl;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=ns(l.href),g=r.querySelector(Al(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(p.count++,p=Xu.bind(p),r.then(p,p)),a.state.loading|=4,a.instance=g,Jt(g);return}g=r.ownerDocument||r,l=nE(l),(m=ci.get(m))&&hm(l,m),g=g.createElement("link"),Jt(g);var R=g;R._p=new Promise(function(M,L){R.onload=M,R.onerror=L}),ln(g,"link",l),a.instance=g}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(p.count++,a=Xu.bind(p),r.addEventListener("load",a),r.addEventListener("error",a))}}function UA(){if(Dl===null)throw Error(i(475));var r=Dl;return r.stylesheets&&r.count===0&&vm(r,r.stylesheets),0<r.count?function(a){var l=setTimeout(function(){if(r.stylesheets&&vm(r,r.stylesheets),r.unsuspend){var p=r.unsuspend;r.unsuspend=null,p()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(l)}}:null}function Xu(){if(this.count--,this.count===0){if(this.stylesheets)vm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ku=null;function vm(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ku=new Map,a.forEach(GA,r),Ku=null,Xu.call(r))}function GA(r,a){if(!(a.state.loading&4)){var l=Ku.get(r);if(l)var p=l.get(null);else{l=new Map,Ku.set(r,l);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var R=m[g];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(l.set(R.dataset.precedence,R),p=R)}p&&l.set(null,p)}m=a.instance,R=m.getAttribute("data-precedence"),g=l.get(R)||p,g===p&&l.set(null,m),l.set(R,m),this.count++,p=Xu.bind(this),m.addEventListener("load",p),m.addEventListener("error",p),g?g.parentNode.insertBefore(m,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),a.state.loading|=4}}var Ol={$$typeof:A,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function VA(r,a,l,p,m,g,R,M){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pd(0),this.hiddenUpdates=pd(null),this.identifierPrefix=p,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function sE(r,a,l,p,m,g,R,M,L,X,ie,se){return r=new VA(r,a,l,R,M,L,X,se),a=1,g===!0&&(a|=24),g=Yn(3,null,null,a),r.current=g,g.stateNode=r,a=Zd(),a.refCount++,r.pooledCache=a,a.refCount++,g.memoizedState={element:p,isDehydrated:l,cache:a},th(g),r}function lE(r){return r?(r=Bo,r):Bo}function cE(r,a,l,p,m,g){m=lE(m),p.context===null?p.context=m:p.pendingContext=m,p=Br(a),p.payload={element:l},g=g===void 0?null:g,g!==null&&(p.callback=g),l=Lr(r,p,a),l!==null&&(Zn(l,r,a),sl(l,r,a))}function uE(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function gm(r,a){uE(r,a),(r=r.alternate)&&uE(r,a)}function fE(r){if(r.tag===13){var a=Po(r,67108864);a!==null&&Zn(a,r,67108864),gm(r,67108864)}}var Wu=!0;function FA(r,a,l,p){var m=W.T;W.T=null;var g=oe.p;try{oe.p=2,ym(r,a,l,p)}finally{oe.p=g,W.T=m}}function YA(r,a,l,p){var m=W.T;W.T=null;var g=oe.p;try{oe.p=8,ym(r,a,l,p)}finally{oe.p=g,W.T=m}}function ym(r,a,l,p){if(Wu){var m=_m(p);if(m===null)am(r,a,p,Zu,l),dE(r,p);else if(XA(m,r,a,l,p))p.stopPropagation();else if(dE(r,p),a&4&&-1<qA.indexOf(r)){for(;m!==null;){var g=Eo(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var R=Ma(g.pendingLanes);if(R!==0){var M=g;for(M.pendingLanes|=2,M.entangledLanes|=2;R;){var L=1<<31-Vn(R);M.entanglements[1]|=L,R&=~L}zi(g),(ct&6)===0&&(Bu=tt()+500,wl(0))}}break;case 13:M=Po(g,2),M!==null&&Zn(M,g,2),ku(),gm(g,2)}if(g=_m(p),g===null&&am(r,a,p,Zu,l),g===m)break;m=g}m!==null&&p.stopPropagation()}else am(r,a,p,null,l)}}function _m(r){return r=wd(r),bm(r)}var Zu=null;function bm(r){if(Zu=null,r=bo(r),r!==null){var a=s(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=c(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Zu=r,null}function pE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case wn:return 2;case it:return 8;case Dn:case yo:return 32;case yn:return 268435456;default:return 32}default:return 32}}var Em=!1,Xr=null,Kr=null,Wr=null,Nl=new Map,Pl=new Map,Zr=[],qA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dE(r,a){switch(r){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Nl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(a.pointerId)}}function Bl(r,a,l,p,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:a,domEventName:l,eventSystemFlags:p,nativeEvent:g,targetContainers:[m]},a!==null&&(a=Eo(a),a!==null&&fE(a)),r):(r.eventSystemFlags|=p,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function XA(r,a,l,p,m){switch(a){case"focusin":return Xr=Bl(Xr,r,a,l,p,m),!0;case"dragenter":return Kr=Bl(Kr,r,a,l,p,m),!0;case"mouseover":return Wr=Bl(Wr,r,a,l,p,m),!0;case"pointerover":var g=m.pointerId;return Nl.set(g,Bl(Nl.get(g)||null,r,a,l,p,m)),!0;case"gotpointercapture":return g=m.pointerId,Pl.set(g,Bl(Pl.get(g)||null,r,a,l,p,m)),!0}return!1}function hE(r){var a=bo(r.target);if(a!==null){var l=s(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){r.blockedOn=a,I2(r.priority,function(){if(l.tag===13){var p=Wn();p=dd(p);var m=Po(l,p);m!==null&&Zn(m,l,p),gm(l,p)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Qu(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=_m(r.nativeEvent);if(l===null){l=r.nativeEvent;var p=new l.constructor(l.type,l);Sd=p,l.target.dispatchEvent(p),Sd=null}else return a=Eo(l),a!==null&&fE(a),r.blockedOn=l,!1;a.shift()}return!0}function mE(r,a,l){Qu(r)&&l.delete(a)}function KA(){Em=!1,Xr!==null&&Qu(Xr)&&(Xr=null),Kr!==null&&Qu(Kr)&&(Kr=null),Wr!==null&&Qu(Wr)&&(Wr=null),Nl.forEach(mE),Pl.forEach(mE)}function Ju(r,a){r.blockedOn===a&&(r.blockedOn=null,Em||(Em=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KA)))}var ef=null;function vE(r){ef!==r&&(ef=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ef===r&&(ef=null);for(var a=0;a<r.length;a+=3){var l=r[a],p=r[a+1],m=r[a+2];if(typeof p!="function"){if(bm(p||l)===null)continue;break}var g=Eo(l);g!==null&&(r.splice(a,3),a-=3,bh(g,{pending:!0,data:m,method:l.method,action:p},p,m))}}))}function Ll(r){function a(L){return Ju(L,r)}Xr!==null&&Ju(Xr,r),Kr!==null&&Ju(Kr,r),Wr!==null&&Ju(Wr,r),Nl.forEach(a),Pl.forEach(a);for(var l=0;l<Zr.length;l++){var p=Zr[l];p.blockedOn===r&&(p.blockedOn=null)}for(;0<Zr.length&&(l=Zr[0],l.blockedOn===null);)hE(l),l.blockedOn===null&&Zr.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(p=0;p<l.length;p+=3){var m=l[p],g=l[p+1],R=m[On]||null;if(typeof g=="function")R||vE(l);else if(R){var M=null;if(g&&g.hasAttribute("formAction")){if(m=g,R=g[On]||null)M=R.formAction;else if(bm(m)!==null)continue}else M=R.action;typeof M=="function"?l[p+1]=M:(l.splice(p,3),p-=3),vE(l)}}}function xm(r){this._internalRoot=r}tf.prototype.render=xm.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,p=Wn();cE(l,p,r,a,null,null)},tf.prototype.unmount=xm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;cE(r.current,2,null,r,null,null),ku(),a[_o]=null}};function tf(r){this._internalRoot=r}tf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Py();r={blockedOn:null,target:r,priority:a};for(var l=0;l<Zr.length&&a!==0&&a<Zr[l].priority;l++);Zr.splice(l,0,r),l===0&&hE(r)}};var gE=t.version;if(gE!=="19.1.1")throw Error(i(527,gE,"19.1.1"));oe.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(a),r=r!==null?d(r):null,r=r===null?null:r.stateNode,r};var WA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{Hs=nf.inject(WA),Gn=nf}catch{}}return zl.createRoot=function(r,a){if(!o(r))throw Error(i(299));var l=!1,p="",m=Pb,g=Bb,R=Lb,M=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks)),a=sE(r,1,!1,null,null,l,p,m,g,R,M,null),r[_o]=a.current,rm(r),new xm(a)},zl.hydrateRoot=function(r,a,l){if(!o(r))throw Error(i(299));var p=!1,m="",g=Pb,R=Bb,M=Lb,L=null,X=null;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(R=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks),l.formState!==void 0&&(X=l.formState)),a=sE(r,1,!0,a,l??null,p,m,g,R,M,L,X),a.context=lE(null),l=a.current,p=Wn(),p=dd(p),m=Br(p),m.callback=null,Lr(l,m,p),l=p,a.current.lanes=l,Is(a,l),zi(a),r[_o]=a.current,rm(r),new tf(a)},zl.version="19.1.1",zl}var CE;function oM(){if(CE)return Rm.exports;CE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Rm.exports=aM(),Rm.exports}var sM=oM();function ve(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function lM(e,t){return t={exports:{}},e(t,t.exports),t.exports}var cM=lM(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var o=Math.log(Math.pow(2,n))/Math.log(i),s=2;o===1/0;s*=2)o=Math.log(Math.pow(2,n/s))/Math.log(i)*s;for(var c=o-Math.floor(o),u="",s=0;s<Math.floor(o);s++){var f=Math.floor(Math.random()*i).toString(i);u=f+u}if(c){var d=Math.pow(i,c),f=Math.floor(Math.random()*d).toString(i);u=f+u}var h=parseInt(u,i);return h!==1/0&&h>=Math.pow(2,n)?t(n,i):u};t.rack=function(n,i,o){var s=function(u){var f=0;do{if(f++>10)if(o)n+=o;else throw new Error("too many ID collisions, use more bits");var d=t(n,i)}while(Object.hasOwnProperty.call(c,d));return c[d]=u,d},c=s.hats={};return s.get=function(u){return s.hats[u]},s.set=function(u,f){return s.hats[u]=f,s},s.bits=n||128,s.base=i||16,s}});function Vi(e){if(!(this instanceof Vi))return new Vi(e);e=e||[128,36,1],this._seed=e.length?cM.rack(e[0],e[1],e[2]):e}Vi.prototype.next=function(e){return this._seed(e||!0)};Vi.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Vi.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Vi.prototype.assigned=function(e){return this._seed.get(e)||!1};Vi.prototype.unclaim=function(e){delete this._seed.hats[e]};Vi.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function Lv(e){return Array.prototype.concat.apply([],e)}const dc=Object.prototype.toString,uM=Object.prototype.hasOwnProperty;function no(e){return e===void 0}function Wt(e){return e!==void 0}function ic(e){return e==null}function Ae(e){return dc.call(e)==="[object Array]"}function Zt(e){return dc.call(e)==="[object Object]"}function Te(e){return dc.call(e)==="[object Number]"}function Ft(e){const t=dc.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Hn(e){return dc.call(e)==="[object String]"}function fM(e){if(!Ae(e))throw new Error("must supply array")}function Cn(e,t){return!ic(e)&&uM.call(e,t)}function We(e,t){const n=fp(t);let i;return z(e,function(o,s){if(n(o,s))return i=o,!1}),i}function DS(e,t){const n=fp(t);let i=Ae(e)?-1:void 0;return z(e,function(o,s){if(n(o,s))return i=s,!1}),i}function je(e,t){const n=fp(t);let i=[];return z(e,function(o,s){n(o,s)&&i.push(o)}),i}function z(e,t){let n,i;if(no(e))return;const o=Ae(e)?vM:mM;for(let s in e)if(Cn(e,s)&&(n=e[s],i=t(n,o(s)),i===!1))return n}function pM(e,t){if(no(e))return[];fM(e);const n=fp(t);return e.filter(function(i,o){return!n(i,o)})}function $n(e,t,n){return z(e,function(i,o){n=t(n,i,o)}),n}function oo(e,t){return!!$n(e,function(n,i,o){return n&&t(i,o)},!0)}function fa(e,t){return!!We(e,t)}function mn(e,t){let n=[];return z(e,function(i,o){n.push(t(i,o))}),n}function Yf(e){return e&&Object.keys(e)||[]}function dM(e){return Yf(e).length}function up(e){return mn(e,t=>t)}function Ss(e,t,n={}){return t=kv(t),z(e,function(i){let o=t(i)||"_",s=n[o];s||(s=n[o]=[]),s.push(i)}),n}function OS(e,...t){e=kv(e);let n={};return z(t,o=>Ss(o,e,n)),mn(n,function(o,s){return o[0]})}const hM=OS;function Fi(e,t){t=kv(t);let n=[];return z(e,function(i,o){let s=t(i,o),c={d:s,v:i};for(var u=0;u<n.length;u++){let{d:f}=n[u];if(s<f){n.splice(u,0,c);return}}n.push(c)}),mn(n,i=>i.v)}function Ti(e){return function(t){return oo(e,function(n,i){return t[i]===n})}}function kv(e){return Ft(e)?e:t=>t[e]}function fp(e){return Ft(e)?e:t=>t===e}function mM(e){return e}function vM(e){return Number(e)}function NS(e,t){let n,i,o,s;function c(v){let y=Date.now(),_=v?0:s+t-y;if(_>0)return u(_);e.apply(o,i),f()}function u(v){n=setTimeout(c,v)}function f(){n&&clearTimeout(n),n=s=i=o=void 0}function d(){n&&c(!0),f()}function h(...v){s=Date.now(),i=v,o=this,n||u(t)}return h.flush=d,h.cancel=f,h}function An(e,t){return e.bind(t)}function I(e,...t){return Object.assign(e,...t)}function gM(e,t,n){let i=e;return z(t,function(o,s){if(typeof o!="number"&&typeof o!="string")throw new Error("illegal key type: "+typeof o+". Key should be of type number or string.");if(o==="constructor")throw new Error("illegal key: constructor");if(o==="__proto__")throw new Error("illegal key: __proto__");let c=t[s+1],u=i[o];Wt(c)&&ic(u)&&(u=i[o]=isNaN(+c)?{}:[]),no(c)?no(n)?delete i[o]:i[o]=n:i=u}),e}function Ai(e,t){let n={},i=Object(e);return z(t,function(o){o in i&&(n[o]=e[o])}),n}function qi(e,t){let n={},i=Object(e);return z(i,function(o,s){t.indexOf(s)===-1&&(n[s]=o)}),n}function yM(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const _M=Object.prototype.toString,bM=Object.prototype.hasOwnProperty;function EM(e){return e===void 0}function xM(e){return _M.call(e)==="[object Array]"}function SM(e,t){return bM.call(e,t)}function AE(e,t){let n,i;if(EM(e))return;const o=xM(e)?RM:wM;for(let s in e)if(SM(e,s)&&(n=e[s],i=t(n,o(s)),i===!1))return n}function wM(e){return e}function RM(e){return Number(e)}function fn(e,...t){const n=e.style;return AE(t,function(i){i&&AE(i,function(o,s){n[s]=o})}),e}function pn(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const TM=Object.prototype.toString;function St(e){return new la(e)}function la(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}la.prototype.add=function(e){return this.list.add(e),this};la.prototype.remove=function(e){return TM.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};la.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};la.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};la.prototype.array=function(){return Array.from(this.list)};la.prototype.has=la.prototype.contains=function(e){return this.list.contains(e)};function pp(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function ws(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var qf={},Xf,Qm,zv;function PS(){Xf=window.addEventListener?"addEventListener":"attachEvent",Qm=window.removeEventListener?"removeEventListener":"detachEvent",zv=Xf!=="addEventListener"?"on":""}var CM=qf.bind=function(e,t,n,i){return Xf||PS(),e[Xf](zv+t,n,i||!1),n},AM=qf.unbind=function(e,t,n,i){return Qm||PS(),e[Qm](zv+t,n,i||!1),n},Le=yM({__proto__:null,bind:CM,unbind:AM,default:qf},[qf]),BS=["focus","blur"];function MM(e,t,n,i,o){return BS.indexOf(n)!==-1&&(o=!0),Le.bind(e,n,function(s){var c=s.target||s.srcElement;s.delegateTarget=ws(c,t,!0),s.delegateTarget&&i.call(e,s)},o)}function DM(e,t,n,i){return BS.indexOf(t)!==-1&&(i=!0),Le.unbind(e,t,n,i)}var jn={bind:MM,unbind:DM},OM=NM,LS=!1,rf;typeof document<"u"&&(rf=document.createElement("div"),rf.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',LS=!rf.getElementsByTagName("link").length,rf=void 0);var Ht={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:LS?[1,"X<div>","</div>"]:[0,"",""]};Ht.td=Ht.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Ht.option=Ht.optgroup=[1,'<select multiple="multiple">',"</select>"];Ht.thead=Ht.tbody=Ht.colgroup=Ht.caption=Ht.tfoot=[1,"<table>","</table>"];Ht.polyline=Ht.ellipse=Ht.polygon=Ht.circle=Ht.text=Ht.line=Ht.path=Ht.rect=Ht.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function NM(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var f=t.createElement("html");return f.innerHTML=e,f.removeChild(f.lastChild)}var o=Object.prototype.hasOwnProperty.call(Ht,i)?Ht[i]:Ht._default,s=o[0],c=o[1],u=o[2],f=t.createElement("div");for(f.innerHTML=c+e+u;s--;)f=f.lastChild;if(f.firstChild==f.lastChild)return f.removeChild(f.firstChild);for(var d=t.createDocumentFragment();f.firstChild;)d.appendChild(f.removeChild(f.firstChild));return d}var ht=OM;function kS(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function ot(e,t){return t=t||document,t.querySelector(e)}function Jm(e,t){return t=t||document,t.querySelectorAll(e)}function Yi(e){e.parentNode&&e.parentNode.removeChild(e)}function PM(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function BM(e,t){return t.appendChild(PM(e,t))}function De(e,t){return BM(t,e),e}var ev=2,zS={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":ev,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":ev,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function LM(e,t){return zS[t]?e.style[t]:e.getAttributeNS(null,t)}function jS(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=zS[i];o?(o===ev&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function kM(e,t){var n=Object.keys(t),i,o;for(i=0,o;o=n[i];i++)jS(e,o,t[o])}function he(e,t,n){if(typeof t=="string")if(n!==void 0)jS(e,t,n);else return LM(e,t);else kM(e,t);return e}const zM=Object.prototype.toString;function Ye(e){return new ca(e)}function ca(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}ca.prototype.add=function(e){return this.list.add(e),this};ca.prototype.remove=function(e){return zM.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};ca.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};ca.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};ca.prototype.array=function(){return Array.from(this.list)};ca.prototype.has=ca.prototype.contains=function(e){return this.list.contains(e)};function dp(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function HS(e){return e.cloneNode(!0)}var jv={svg:"http://www.w3.org/2000/svg"},ME='<svg xmlns="'+jv.svg+'"';function jM(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(jv.svg)===-1&&(e=ME+e.substring(4)):(e=ME+">"+e+"</svg>",t=!0);var n=HM(e);if(!t)return n;for(var i=document.createDocumentFragment(),o=n.firstChild;o.firstChild;)i.appendChild(o.firstChild);return i}function HM(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Ee(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=jM(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(jv.svg,e),t&&he(n,t),n}var Mm=null;function $S(){return Mm===null&&(Mm=Ee("svg")),Mm}function DE(e,t){var n,i,o=Object.keys(t);for(n=0;i=o[n];n++)e[i]=t[i];return e}function $M(e,t,n,i,o,s){var c=$S().createSVGMatrix();switch(arguments.length){case 0:return c;case 1:return DE(c,e);case 6:return DE(c,{a:e,b:t,c:n,d:i,e:o,f:s})}}function Zl(e){return $S().createSVGTransform()}var OE=/([&<>]{1})/g,IM=/([&<>\n\r"]{1})/g,UM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Dm(e,t){function n(i,o){return UM[o]||o}return e.replace(t,n)}function IS(e,t){var n,i,o,s,c;switch(e.nodeType){case 3:t.push(Dm(e.textContent,OE));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(o=e.attributes,n=0,i=o.length;n<i;++n)s=o.item(n),t.push(" ",s.name,'="',Dm(s.value,IM),'"');if(e.hasChildNodes()){for(t.push(">"),c=e.childNodes,n=0,i=c.length;n<i;++n)IS(c.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",Dm(e.nodeValue,OE),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function GM(e){for(var t=e.firstChild,n=[];t;)IS(t,n),t=t.nextSibling;return n.join("")}function NE(e,t){return GM(e)}function $t(e){var t=e.parentNode;return t&&t.removeChild(e),e}function VM(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function FM(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(VM(e,i))}function rc(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),FM(n,t)),n.consolidate()}const YM=/^class[ {]/;function qM(e){return YM.test(e.toString())}function Hv(e){return Array.isArray(e)}function Om(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Of(...e){e.length===1&&Hv(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const XM=/constructor\s*[^(]*\(\s*([^)]*)\)/m,KM=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,WM=/\/\*([^*]*)\*\//m;function ZM(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(qM(e)?XM:KM);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const o=i.match(WM);return(o&&o[1]||i).trim()})||[]}function US(e,t){const n=t||{get:function(A,C){if(i.push(A),C===!1)return null;throw u(`No provider for "${A}"!`)}},i=[],o=this._providers=Object.create(n._providers||null),s=this._instances=Object.create(null),c=s.injector=this,u=function(A){const C=i.join(" -> ");return i.length=0,new Error(C?`${A} (Resolving: ${C})`:A)};function f(A,C){if(!o[A]&&A.includes(".")){const D=A.split(".");let B=f(D.shift());for(;D.length;)B=B[D.shift()];return B}if(Om(s,A))return s[A];if(Om(o,A)){if(i.indexOf(A)!==-1)throw i.push(A),u("Cannot resolve circular dependency!");return i.push(A),s[A]=o[A][0](o[A][1]),i.pop(),s[A]}return n.get(A,C)}function d(A,C){if(typeof C>"u"&&(C={}),typeof A!="function")if(Hv(A))A=Of(A.slice());else throw u(`Cannot invoke "${A}". Expected a function!`);const B=(A.$inject||ZM(A)).map(F=>Om(C,F)?C[F]:f(F));return{fn:A,dependencies:B}}function h(A){const{fn:C,dependencies:D}=d(A),B=Function.prototype.bind.call(C,null,...D);return new B}function v(A,C,D){const{fn:B,dependencies:F}=d(A,D);return B.apply(C,F)}function y(A){return Of(C=>A.get(C))}function _(A,C){if(C&&C.length){const D=Object.create(null),B=Object.create(null),F=[],j=[],Q=[];let J,le,ee,pe;for(let we in o)J=o[we],C.indexOf(we)!==-1&&(J[2]==="private"?(le=F.indexOf(J[3]),le===-1?(ee=J[3].createChild([],C),pe=y(ee),F.push(J[3]),j.push(ee),Q.push(pe),D[we]=[pe,we,"private",ee]):D[we]=[Q[le],we,"private",j[le]]):D[we]=[J[2],J[1]],B[we]=!0),(J[2]==="factory"||J[2]==="type")&&J[1].$scope&&C.forEach(Je=>{J[1].$scope.indexOf(Je)!==-1&&(D[we]=[J[2],J[1]],B[Je]=!0)});C.forEach(we=>{if(!B[we])throw new Error('No provider for "'+we+'". Cannot use provider from the parent!')}),A.unshift(D)}return new US(A,c)}const b={factory:v,type:h,value:function(A){return A}};function w(A,C){const D=A.__init__||[];return function(){D.forEach(B=>{typeof B=="string"?C.get(B):C.invoke(B)})}}function S(A){const C=A.__exports__;if(C){const D=A.__modules__,B=Object.keys(A).reduce((le,ee)=>(ee!=="__exports__"&&ee!=="__modules__"&&ee!=="__init__"&&ee!=="__depends__"&&(le[ee]=A[ee]),le),Object.create(null)),F=(D||[]).concat(B),j=_(F),Q=Of(function(le){return j.get(le)});C.forEach(function(le){o[le]=[Q,le,"private",j]});const J=(A.__init__||[]).slice();return J.unshift(function(){j.init()}),A=Object.assign({},A,{__init__:J}),w(A,j)}return Object.keys(A).forEach(function(D){if(D==="__init__"||D==="__depends__")return;const B=A[D];if(B[2]==="private"){o[D]=B;return}const F=B[0],j=B[1];o[D]=[b[F],QM(F,j),F]}),w(A,c)}function O(A,C){return A.indexOf(C)!==-1||(A=(C.__depends__||[]).reduce(O,A),A.indexOf(C)!==-1)?A:A.concat(C)}function N(A){const C=A.reduce(O,[]).map(S);let D=!1;return function(){D||(D=!0,C.forEach(B=>B()))}}this.get=f,this.invoke=v,this.instantiate=h,this.createChild=_,this.init=N(e)}function QM(e,t){return e!=="value"&&Hv(t)&&(t=Of(t.slice())),t}var JM=1e3;function br(e,t){var n=this;t=t||JM,e.on(["render.shape","render.connection"],t,function(i,o){var s=i.type,c=o.element,u=o.gfx,f=o.attrs;if(n.canRender(c))return s==="render.shape"?n.drawShape(u,c,f):n.drawConnection(u,c,f)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,o){if(n.canRender(o))return i.type==="render.getShapePath"?n.getShapePath(o):n.getConnectionPath(o)})}br.prototype.canRender=function(e){};br.prototype.drawShape=function(e,t){};br.prototype.drawConnection=function(e,t){};br.prototype.getShapePath=function(e){};br.prototype.getConnectionPath=function(e){};function so(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function eD(e){return["M",e.x,e.y]}function Nm(e){return["L",e.x,e.y]}function tD(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function nD(e,t){const n=e.length,i=[eD(e[0])];for(let o=1;o<n;o++){const s=e[o-1],c=e[o],u=e[o+1];if(!u||!t){i.push(Nm(c));continue}const f=Math.min(t,tv(c.x-s.x,c.y-s.y),tv(u.x-c.x,u.y-c.y));if(!f){i.push(Nm(c));continue}const d=af(c,s,f),h=af(c,s,f*.5),v=af(c,u,f),y=af(c,u,f*.5);i.push(Nm(d)),i.push(tD(h,y,v))}return i}function af(e,t,n){const i=t.x-e.x,o=t.y-e.y,s=tv(i,o),c=n/s;return{x:e.x+i*c,y:e.y+o*c}}function tv(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function hp(e,t,n){Te(t)&&(n=t,t=null),t||(t={});const i=Ee("path",t);return Te(n)&&(i.dataset.cornerRadius=String(n)),GS(i,e)}function GS(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return he(e,{d:so(nD(t,n))}),e}function mp(e){return je(e,function(t){return!We(e,function(n){return n!==t&&VS(t,n)})})}function VS(e,t){if(t){if(e===t)return t;if(e.parent)return VS(e.parent,t)}}function PE(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function lo(e,t,n){n=n||0,Ae(e)||(e=[e]),z(e,function(i,o){var s=t(i,o,n);Ae(s)&&s.length&&lo(s,t,n+1)})}function iD(e,t,n){var i=[],o=[];return lo(e,function(s,c,u){PE(i,s,t);var f=s.children;if(f&&PE(o,f,t))return f}),i}function hc(e,t){return iD(e,!t)}function rD(e,t,n){no(t)&&(t=!0),Zt(t)&&(n=t,t=!0),n=n||{};var i=jl(n.allShapes),o=jl(n.allConnections),s=jl(n.enclosedElements),c=jl(n.enclosedConnections),u=jl(n.topLevel,t&&Ss(e,function(h){return h.id}));function f(h){u[h.source.id]&&u[h.target.id]&&(u[h.id]=[h]),i[h.source.id]&&i[h.target.id]&&(c[h.id]=s[h.id]=h),o[h.id]=h}function d(h){if(s[h.id]=h,h.waypoints)c[h.id]=o[h.id]=h;else return i[h.id]=h,z(h.incoming,f),z(h.outgoing,f),h.children}return lo(e,d),{allShapes:i,allConnections:o,topLevel:u,enclosedConnections:c,enclosedElements:s}}function It(e,t){t=!!t,Ae(e)||(e=[e]);var n,i,o,s;return z(e,function(c){var u=c;c.waypoints&&!t&&(u=It(c.waypoints,!0));var f=u.x,d=u.y,h=u.height||0,v=u.width||0;(f<n||n===void 0)&&(n=f),(d<i||i===void 0)&&(i=d),(f+v>o||o===void 0)&&(o=f+v),(d+h>s||s===void 0)&&(s=d+h)}),{x:n,y:i,height:s-i,width:o-n}}function FS(e,t){var n={};return z(e,function(i){var o=i;o.waypoints&&(o=It(o)),!Te(t.y)&&o.x>t.x&&(n[i.id]=i),!Te(t.x)&&o.y>t.y&&(n[i.id]=i),o.x>t.x&&o.y>t.y&&(Te(t.width)&&Te(t.height)&&o.width+o.x<t.width+t.x&&o.height+o.y<t.height+t.y||!Te(t.width)||!Te(t.height))&&(n[i.id]=i)}),n}function YS(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function qS(e){return!!(e&&e.isFrame)}function jl(e,t){return I({},e||{},t||{})}var aD=1;function pa(e,t){br.call(this,e,aD),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}ve(pa,br);pa.prototype.canRender=function(){return!0};pa.prototype.drawShape=function(t,n,i){var o=Ee("rect");return he(o,{x:0,y:0,width:n.width||0,height:n.height||0}),qS(n)?he(o,I({},this.FRAME_STYLE,i||{})):he(o,I({},this.SHAPE_STYLE,i||{})),De(t,o),o};pa.prototype.drawConnection=function(t,n,i){var o=hp(n.waypoints,I({},this.CONNECTION_STYLE,i||{}));return De(t,o),o};pa.prototype.getShapePath=function(t){var n=t.x,i=t.y,o=t.width,s=t.height,c=[["M",n,i],["l",o,0],["l",0,s],["l",-o,0],["z"]];return so(c)};pa.prototype.getConnectionPath=function(t){var n=t.waypoints,i,o,s=[];for(i=0;o=n[i];i++)o=o.original||o,s.push([i===0?"M":"L",o.x,o.y]);return so(s)};pa.$inject=["eventBus","styles"];function oD(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,o){var s=this.style(i,o);return I(s,{class:n})},this.style=function(n,i){!Ae(n)&&!i&&(i=n,n=[]);var o=$n(n,function(s,c){return I(s,e[c]||{})},{});return i?I(o,i):o},this.computeStyle=function(n,i,o){return Ae(i)||(o=i,i=[]),t.style(i||[],I({},o,n||{}))}}const sD={__init__:["defaultRenderer"],defaultRenderer:["type",pa],styles:["type",oD]};function Nt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Ut(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function $v(e,t){return!e||!t?-1:e.indexOf(t)}function mc(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Iv(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var o=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),s=mc(e,t);return Math.abs(o/s)<=i}var lD=2;function mr(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[o,s]of Object.entries(i))if(cD(o,n))return s;return!1}function cD(e,t){const n=t[0];return oo(t,function(i){return Math.abs(n[e]-i[e])<=lD})}function BE(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function nv(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var uD=/,?([a-z]),?/gi,LE=parseFloat,Mt=Math,Jr=Mt.PI,Hi=Mt.min,$i=Mt.max,kE=Mt.pow,oa=Mt.abs,fD=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,pD=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,Kf=Array.isArray||function(e){return e instanceof Array};function Uv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ql(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Uv(e,n)&&(t[n]=Ql(e[n]));return t}function dD(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function hD(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join(""),o=t.cache=t.cache||{},s=t.count=t.count||[];return Uv(o,i)?(dD(s,i),o[i]):(s.length>=1e3&&delete o[s.shift()],s.push(i),o[i]=e(...arguments),o[i])}return t}function mD(e){if(!e)return null;var t=ps(e);if(t.arr)return Ql(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return Kf(e)&&Kf(e[0])&&(i=Ql(e)),i.length||String(e).replace(fD,function(o,s,c){var u=[],f=s.toLowerCase();for(c.replace(pD,function(d,h){h&&u.push(+h)}),f=="m"&&u.length>2&&(i.push([s,...u.splice(0,2)]),f="l",s=s=="m"?"l":"L");u.length>=n[f]&&(i.push([s,...u.splice(0,n[f])]),!!n[f]););}),i.toString=ps.toString,t.arr=Ql(i),i}function ps(e){var t=ps.ps=ps.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Uv(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function iv(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function XS(){return this.join(",").replace(uD,"$1")}function Wf(e){var t=Ql(e);return t.toString=XS,t}function zE(e,t,n,i,o,s,c,u,f){var d=1-f,h=kE(d,3),v=kE(d,2),y=f*f,_=y*f,b=h*e+v*3*f*n+d*3*f*f*o+_*c,w=h*t+v*3*f*i+d*3*f*f*s+_*u;return{x:Zf(b),y:Zf(w)}}function jE(e){var t=bD(...e);return iv(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function ea(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function vD(e,t){return e=iv(e),t=iv(t),ea(t,e.x,e.y)||ea(t,e.x2,e.y)||ea(t,e.x,e.y2)||ea(t,e.x2,e.y2)||ea(e,t.x,t.y)||ea(e,t.x2,t.y)||ea(e,t.x,t.y2)||ea(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function HE(e,t,n,i,o){var s=-3*t+9*n-9*i+3*o,c=e*s+6*t-12*n+6*i;return e*c-3*t+3*n}function $E(e,t,n,i,o,s,c,u,f){f==null&&(f=1),f=f>1?1:f<0?0:f;for(var d=f/2,h=12,v=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],y=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],_=0,b=0;b<h;b++){var w=d*v[b]+d,S=HE(w,e,n,o,c),O=HE(w,t,i,s,u),N=S*S+O*O;_+=y[b]*Mt.sqrt(N)}return d*_}function gD(e,t,n,i,o,s,c,u){if(!($i(e,n)<Hi(o,c)||Hi(e,n)>$i(o,c)||$i(t,i)<Hi(s,u)||Hi(t,i)>$i(s,u))){var f=(e*i-t*n)*(o-c)-(e-n)*(o*u-s*c),d=(e*i-t*n)*(s-u)-(t-i)*(o*u-s*c),h=(e-n)*(s-u)-(t-i)*(o-c);if(h){var v=Zf(f/h),y=Zf(d/h),_=+v.toFixed(2),b=+y.toFixed(2);if(!(_<+Hi(e,n).toFixed(2)||_>+$i(e,n).toFixed(2)||_<+Hi(o,c).toFixed(2)||_>+$i(o,c).toFixed(2)||b<+Hi(t,i).toFixed(2)||b>+$i(t,i).toFixed(2)||b<+Hi(s,u).toFixed(2)||b>+$i(s,u).toFixed(2)))return{x:v,y}}}}function Zf(e){return Math.round(e*1e11)/1e11}function yD(e,t,n){var i=jE(e),o=jE(t);if(!vD(i,o))return[];for(var s=$E(...e),c=$E(...t),u=IE(e)?1:~~(s/5)||1,f=IE(t)?1:~~(c/5)||1,d=[],h=[],v={},y=[],_=0;_<u+1;_++){var b=zE(...e,_/u);d.push({x:b.x,y:b.y,t:_/u})}for(_=0;_<f+1;_++)b=zE(...t,_/f),h.push({x:b.x,y:b.y,t:_/f});for(_=0;_<u;_++)for(var w=0;w<f;w++){var S=d[_],O=d[_+1],N=h[w],A=h[w+1],C=oa(O.x-S.x)<.01?"y":"x",D=oa(A.x-N.x)<.01?"y":"x",B=gD(S.x,S.y,O.x,O.y,N.x,N.y,A.x,A.y),F;if(B){if(F=B.x.toFixed(9)+"#"+B.y.toFixed(9),v[F])continue;v[F]=!0;var j=S.t+oa((B[C]-S[C])/(O[C]-S[C]))*(O.t-S.t),Q=N.t+oa((B[D]-N[D])/(A[D]-N[D]))*(A.t-N.t);j>=0&&j<=1&&Q>=0&&Q<=1&&y.push({x:B.x,y:B.y,t1:j,t2:Q})}}return y}function KS(e,t,n){e=GE(e),t=GE(t);for(var i,o,s,c,u,f,d,h,v,y,_=n?0:[],b=0,w=e.length;b<w;b++){var S=e[b];if(S[0]=="M")i=u=S[1],o=f=S[2];else{S[0]=="C"?(v=[i,o,...S.slice(1)],i=v[6],o=v[7]):(v=[i,o,i,o,u,f,u,f],i=u,o=f);for(var O=0,N=t.length;O<N;O++){var A=t[O];if(A[0]=="M")s=d=A[1],c=h=A[2];else{A[0]=="C"?(y=[s,c,...A.slice(1)],s=y[6],c=y[7]):(y=[s,c,s,c,d,h,d,h],s=d,c=h);var C=yD(v,y);{for(var D=0,B=C.length;D<B;D++)C[D].segment1=b,C[D].segment2=O,C[D].bez1=v,C[D].bez2=y;_=_.concat(C)}}}}}return _}function _D(e){var t=ps(e);if(t.abs)return Wf(t.abs);if((!Kf(e)||!Kf(e&&e[0]))&&(e=mD(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,o=0,s=0,c=0,u=0,f;e[0][0]=="M"&&(i=+e[0][1],o=+e[0][2],s=i,c=o,u++,n[0]=["M",i,o]);for(var d,h,v=u,y=e.length;v<y;v++){if(n.push(d=[]),h=e[v],f=h[0],f!=f.toUpperCase())switch(d[0]=f.toUpperCase(),d[0]){case"A":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+h[6]+i,d[7]=+h[7]+o;break;case"V":d[1]=+h[1]+o;break;case"H":d[1]=+h[1]+i;break;case"M":s=+h[1]+i,c=+h[2]+o;default:for(var _=1,b=h.length;_<b;_++)d[_]=+h[_]+(_%2?i:o)}else for(var w=0,S=h.length;w<S;w++)d[w]=h[w];switch(f=f.toUpperCase(),d[0]){case"Z":i=+s,o=+c;break;case"H":i=d[1];break;case"V":o=d[1];break;case"M":s=d[d.length-2],c=d[d.length-1];default:i=d[d.length-2],o=d[d.length-1]}}return n.toString=XS,t.abs=Wf(n),n}function IE(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function of(e,t,n,i){return[e,t,n,i,n,i]}function UE(e,t,n,i,o,s){var c=.3333333333333333,u=2/3;return[c*e+u*n,c*t+u*i,c*o+u*n,c*s+u*i,o,s]}function WS(e,t,n,i,o,s,c,u,f,d){var h=Jr*120/180,v=Jr/180*(+o||0),y=[],_,b=hD(function(P,E,x){var H=P*Mt.cos(x)-E*Mt.sin(x),U=P*Mt.sin(x)+E*Mt.cos(x);return{x:H,y:U}});if(d)F=d[0],j=d[1],D=d[2],B=d[3];else{_=b(e,t,-v),e=_.x,t=_.y,_=b(u,f,-v),u=_.x,f=_.y;var w=(e-u)/2,S=(t-f)/2,O=w*w/(n*n)+S*S/(i*i);O>1&&(O=Mt.sqrt(O),n=O*n,i=O*i);var N=n*n,A=i*i,C=(s==c?-1:1)*Mt.sqrt(oa((N*A-N*S*S-A*w*w)/(N*S*S+A*w*w))),D=C*n*S/i+(e+u)/2,B=C*-i*w/n+(t+f)/2,F=Mt.asin(((t-B)/i).toFixed(9)),j=Mt.asin(((f-B)/i).toFixed(9));F=e<D?Jr-F:F,j=u<D?Jr-j:j,F<0&&(F=Jr*2+F),j<0&&(j=Jr*2+j),c&&F>j&&(F=F-Jr*2),!c&&j>F&&(j=j-Jr*2)}var Q=j-F;if(oa(Q)>h){var J=j,le=u,ee=f;j=F+h*(c&&j>F?1:-1),u=D+n*Mt.cos(j),f=B+i*Mt.sin(j),y=WS(u,f,n,i,o,0,c,le,ee,[j,J,D,B])}Q=j-F;var pe=Mt.cos(F),we=Mt.sin(F),Je=Mt.cos(j),W=Mt.sin(j),oe=Mt.tan(Q/4),_e=4/3*n*oe,Ie=4/3*i*oe,k=[e,t],ne=[e+_e*we,t-Ie*pe],V=[u+_e*W,f-Ie*Je],Y=[u,f];if(ne[0]=2*k[0]-ne[0],ne[1]=2*k[1]-ne[1],d)return[ne,V,Y].concat(y);y=[ne,V,Y].concat(y).join().split(",");for(var ae=[],me=0,xe=y.length;me<xe;me++)ae[me]=me%2?b(y[me-1],y[me],v).y:b(y[me],y[me+1],v).x;return ae}function bD(e,t,n,i,o,s,c,u){for(var f=[],d=[[],[]],h,v,y,_,b,w,S,O,N=0;N<2;++N){if(N==0?(v=6*e-12*n+6*o,h=-3*e+9*n-9*o+3*c,y=3*n-3*e):(v=6*t-12*i+6*s,h=-3*t+9*i-9*s+3*u,y=3*i-3*t),oa(h)<1e-12){if(oa(v)<1e-12)continue;_=-y/v,0<_&&_<1&&f.push(_);continue}S=v*v-4*y*h,O=Mt.sqrt(S),!(S<0)&&(b=(-v+O)/(2*h),0<b&&b<1&&f.push(b),w=(-v-O)/(2*h),0<w&&w<1&&f.push(w))}for(var A=f.length,C=A,D;A--;)_=f[A],D=1-_,d[0][A]=D*D*D*e+3*D*D*_*n+3*D*_*_*o+_*_*_*c,d[1][A]=D*D*D*t+3*D*D*_*i+3*D*_*_*s+_*_*_*u;return d[0][C]=e,d[1][C]=t,d[0][C+1]=c,d[1][C+1]=u,d[0].length=d[1].length=C+2,{x0:Hi(...d[0]),y0:Hi(...d[1]),x1:$i(...d[0]),y1:$i(...d[1])}}function GE(e){var t=ps(e);if(t.curve)return Wf(t.curve);for(var n=_D(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=function(_,b,w){var S,O;if(!_)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(_[0]in{T:1,Q:1})&&(b.qx=b.qy=null),_[0]){case"M":b.X=_[1],b.Y=_[2];break;case"A":_=["C",...WS(b.x,b.y,..._.slice(1))];break;case"S":w=="C"||w=="S"?(S=b.x*2-b.bx,O=b.y*2-b.by):(S=b.x,O=b.y),_=["C",S,O,..._.slice(1)];break;case"T":w=="Q"||w=="T"?(b.qx=b.x*2-b.qx,b.qy=b.y*2-b.qy):(b.qx=b.x,b.qy=b.y),_=["C",...UE(b.x,b.y,b.qx,b.qy,_[1],_[2])];break;case"Q":b.qx=_[1],b.qy=_[2],_=["C",...UE(b.x,b.y,_[1],_[2],_[3],_[4])];break;case"L":_=["C",...of(b.x,b.y,_[1],_[2])];break;case"H":_=["C",...of(b.x,b.y,_[1],b.y)];break;case"V":_=["C",...of(b.x,b.y,b.x,_[1])];break;case"Z":_=["C",...of(b.x,b.y,b.X,b.Y)];break}return _},s=function(_,b){if(_[b].length>7){_[b].shift();for(var w=_[b];w.length;)c[b]="A",_.splice(b++,0,["C",...w.splice(0,6)]);_.splice(b,1),h=n.length}},c=[],u="",f="",d=0,h=n.length;d<h;d++){n[d]&&(u=n[d][0]),u!="C"&&(c[d]=u,d&&(f=c[d-1])),n[d]=o(n[d],i,f),c[d]!="A"&&u=="C"&&(c[d]="C"),s(n,d);var v=n[d],y=v.length;i.x=v[y-2],i.y=v[y-1],i.bx=LE(v[y-4])||i.x,i.by=LE(v[y-3])||i.y}return t.curve=Wf(n),n}function st(e){return Zt(e)&&Cn(e,"waypoints")}function Xe(e){return Zt(e)&&Cn(e,"labelTarget")}function ZS(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function gr(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Se(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function vp(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function ED(e){return gr({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function xD(e){for(var t=e.waypoints,n=t.reduce(function(d,h,v){var y=t[v-1];if(y){var _=d[d.length-1],b=_&&_.endLength||0,w=RD(y,h);d.push({start:y,end:h,startLength:b,endLength:b+w,length:w})}return d},[]),i=n.reduce(function(d,h){return d+h.length},0),o=i/2,s=0,c=n[s];c.endLength<o;)c=n[++s];var u=(o-c.startLength)/c.length,f={x:c.start.x+(c.end.x-c.start.x)*u,y:c.start.y+(c.end.y-c.start.y)*u};return f}function Ce(e){return st(e)?xD(e):ED(e)}function vn(e,t,n){n=n||0,Zt(n)||(n={x:n,y:n});var i=Se(e),o=Se(t),s=i.bottom+n.y<=o.top,c=i.left-n.x>=o.right,u=i.top-n.y>=o.bottom,f=i.right+n.x<=o.left,d=s?"top":u?"bottom":null,h=f?"left":c?"right":null;return h&&d?d+"-"+h:h||d||"intersect"}function rv(e,t,n){var i=SD(e,t);return i.length===1||i.length===2&&mc(i[0],i[1])<1?gr(i[0]):i.length>1?(i=Fi(i,function(o){var s=Math.floor(o.t2*100)||1;return s=100-s,s=(s<10?"0":"")+s,o.segment2+"#"+s}),gr(i[n?0:i.length-1])):null}function SD(e,t){return KS(e,t)}function wD(e){e=e.slice();for(var t=0,n,i,o;e[t];)n=e[t],i=e[t-1],o=e[t+1],mc(n,o)===0||Iv(i,o,n)?e.splice(t,1):t++;return e}function RD(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Nf(e,t){return Math.round(e*t)/t}function VE(e){return Te(e)?e+"px":e}function TD(e){for(;e.parent;)e=e.parent;return e}function CD(e){e=I({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),fn(n,{position:"relative",overflow:"hidden",width:VE(e.width),height:VE(e.height)}),t.appendChild(n),n}function QS(e,t,n){const i=Ee("g");Ye(i).add(t);const o=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[o]||null),i}const AD="base",JS=0,MD=1,DD={shape:["x","y","width","height"],connection:["waypoints"]};function Me(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}Me.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];Me.prototype._init=function(e){const t=this._eventBus,n=this._container=CD(e),i=this._svg=Ee("svg");he(i,{width:"100%",height:"100%"}),pn(i,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,s=>{this.focus()}),i.addEventListener("focusin",()=>{this._setFocused(!0)}),i.addEventListener("focusout",()=>{this._setFocused(!1)}),De(n,i);const o=this._viewport=QS(i,"viewport");e.deferUpdate&&(this._viewboxChanged=NS(An(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:o})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};Me.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};Me.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))};Me.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=YS(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};Me.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)};Me.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()};Me.prototype.isFocused=function(){return this._focused};Me.prototype.getDefaultLayer=function(){return this.getLayer(AD,JS)};Me.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};Me.prototype._getChildIndex=function(e){return $n(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};Me.prototype._createLayer=function(e,t){typeof t>"u"&&(t=MD);const n=this._getChildIndex(t);return{group:QS(this._viewport,"layer-"+e,n),index:t,visible:!0}};Me.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,o=t.index;if(t.visible)return i;const s=this._getChildIndex(o);return n.insertBefore(i,n.childNodes[s]||null),t.visible=!0,i};Me.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&($t(n),t.visible=!1),n};Me.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],$t(t.group))};Me.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};Me.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(TD(e))||{}).rootElement:void 0};Me.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};Me.prototype._findPlaneForRoot=function(e){return We(this._planes,function(t){return t.rootElement===e})};Me.prototype.getContainer=function(){return this._container};Me.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(z([i.gfx,i.secondaryGfx],function(o){o&&(n?(e.markers.add(t),Ye(o).add(t)):(e.markers.delete(t),Ye(o).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};Me.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};Me.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};Me.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};Me.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};Me.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};Me.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,JS);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};Me.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};Me.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};Me.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};Me.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};Me.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};Me.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=DD[e];if(!oo(n,function(o){return typeof t[o]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};Me.prototype._setParent=function(e,t,n){Ut(t.children,e,n),e.parent=t};Me.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const o=this._eventBus,s=this._graphicsFactory;this._ensureValid(e,t),o.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const c=s.create(e,t,i);return this._elementRegistry.add(t,c),s.update(e,t,c),o.fire(e+".added",{element:t,gfx:c}),t};Me.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};Me.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};Me.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,o=this._eventBus;if(e=n.get(e.id||e),!!e)return o.fire(t+".remove",{element:e}),i.remove(e),Nt(e.parent&&e.parent.children,e),e.parent=null,o.fire(t+".removed",{element:e}),n.remove(e),e};Me.prototype.removeShape=function(e){return this._removeElement(e,"shape")};Me.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};Me.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};Me.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};Me.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};Me.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,o,s,c,u,f,d;if(e)this._changeViewbox(function(){u=Math.min(n.width/e.width,n.height/e.height);const h=this._svg.createSVGMatrix().scale(u).translate(-e.x,-e.y);rc(t,h)});else return s=this._rootElement?this.getActiveLayer():null,i=s&&s.getBBox()||{},c=rc(t),o=c?c.matrix:$M(),u=Nf(o.a,1e3),f=Nf(-o.e||0,1e3),d=Nf(-o.f||0,1e3),e=this._cachedViewbox={x:f?f/u:0,y:d?d/u:0,width:n.width/u,height:n.height/u,scale:u,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};Me.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=I({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),ew(t,n)}),{x:n.e,y:n.f}};Me.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const o=It(e),s=Se(o),c=this.viewbox(),u=this.zoom();let f,d;c.y+=t.top/u,c.x+=t.left/u,c.width-=(t.right+t.left)/u,c.height-=(t.bottom+t.top)/u;const h=Se(c);if(!(o.width<c.width&&o.height<c.height))f=o.x-c.x,d=o.y-c.y;else{const y=Math.max(0,s.right-h.right),_=Math.min(0,s.left-h.left),b=Math.max(0,s.bottom-h.bottom),w=Math.min(0,s.top-h.top);f=y||_,d=b||w}this.scroll({dx:-f*u,dy:-d*u})};Me.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Nf(i.a,1e3)};function ew(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Me.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let o,s;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?s={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(o=Math.min(1,n.width/i.width,n.height/i.height),s={x:i.x+(e?i.width/2-n.width/o/2:0),y:i.y+(e?i.height/2-n.height/o/2:0),width:n.width/o,height:n.height/o}),this.viewbox(s),this.viewbox(!1).scale};Me.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,o=n.createSVGMatrix(),s=n.createSVGPoint();let c,u,f,d,h;f=i.getCTM();const v=f.a;return t?(c=I(s,t),u=c.matrixTransform(f.inverse()),d=o.translate(u.x,u.y).scale(1/v*e).translate(-u.x,-u.y),h=f.multiply(d)):h=o.scale(e),ew(this._viewport,h),h};Me.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};Me.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,o=n.y*t.scale-t.y*t.scale,s=n.width*t.scale,c=n.height*t.scale;return{x:i,y:o,width:s,height:c}};Me.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var ds="data-element-id";function Qn(e){this._elements={},this._eventBus=e}Qn.$inject=["eventBus"];Qn.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),he(t,ds,i),n&&he(n,ds,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};Qn.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(he(i.gfx,ds,""),i.secondaryGfx&&he(i.secondaryGfx,ds,""),delete t[n])};Qn.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};Qn.prototype.updateGraphics=function(e,t,n){var i=e.id||e,o=this._elements[i];return n?o.secondaryGfx=t:o.gfx=t,t&&he(t,ds,i),t};Qn.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&he(e,ds);var n=this._elements[t];return n&&n.element};Qn.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};Qn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],s=t[o],c=s.element,u=s.gfx;if(e(c,u))return c}};Qn.prototype.getAll=function(){return this.filter(function(e){return e})};Qn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],o=i.element,s=i.gfx;return e(o,s)})};Qn.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};Qn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function OD(e,t,n,i){var o=n.inverse;return Object.defineProperty(e,"remove",{value:function(s){var c=this.indexOf(s);return c!==-1&&(this.splice(c,1),t.unset(s,o,i)),s}}),Object.defineProperty(e,"contains",{value:function(s){return this.indexOf(s)!==-1}}),Object.defineProperty(e,"add",{value:function(s,c){var u=this.indexOf(s);if(typeof c>"u"){if(u!==-1)return;c=this.length}u!==-1&&this.splice(u,1),this.splice(c,0,s),u===-1&&t.set(s,o,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function ND(e){return e.__refs_collection===!0}function PD(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function tw(e,t,n){var i=OD(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(o){e.set(o,t.inverse,n)})}function BD(e,t,n){var i=t.inverse,o=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return o},set:function(s){if(s!==o){var c=o;o=null,c&&e.unset(c,i,n),o=s,e.set(o,i,n)}}})}function mi(e,t){if(!(this instanceof mi))return new mi(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}mi.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?tw(this,t,e):BD(this,t,e)};mi.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return ND(n)||tw(this,t,e),n};mi.prototype.ensureBound=function(e,t){PD(e,t)||this.bind(e,t)};mi.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};mi.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Gv=new mi({name:"children",enumerable:!0,collection:!0},{name:"parent"}),nw=new mi({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),FE=new mi({name:"attachers",collection:!0},{name:"host"}),iw=new mi({name:"outgoing",collection:!0},{name:"source"}),rw=new mi({name:"incoming",collection:!0},{name:"target"});function Rs(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Gv.bind(this,"parent"),nw.bind(this,"labels"),iw.bind(this,"outgoing"),rw.bind(this,"incoming")}function vc(){Rs.call(this),Gv.bind(this,"children"),FE.bind(this,"host"),FE.bind(this,"attachers")}ve(vc,Rs);function aw(){Rs.call(this),Gv.bind(this,"children")}ve(aw,vc);function ow(){vc.call(this),nw.bind(this,"labelTarget")}ve(ow,vc);function sw(){Rs.call(this),iw.bind(this,"source"),rw.bind(this,"target")}ve(sw,Rs);var LD={connection:sw,shape:vc,label:ow,root:aw};function kD(e,t){var n=LD[e];if(!n)throw new Error("unknown type: <"+e+">");return I(new n,t)}function zD(e){return e instanceof Rs}function Er(){this._uid=12}Er.prototype.createRoot=function(e){return this.create("root",e)};Er.prototype.createLabel=function(e){return this.create("label",e)};Er.prototype.createShape=function(e){return this.create("shape",e)};Er.prototype.createConnection=function(e){return this.create("connection",e)};Er.prototype.create=function(e,t){return t=I({},t||{}),t.id||(t.id=e+"_"+this._uid++),kD(e,t)};var Qf="__fn",lw=1e3,jD=Array.prototype.slice;function In(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}In.prototype.on=function(e,t,n,i){if(e=Ae(e)?e:[e],Ft(t)&&(i=n,n=t,t=lw),!Te(t))throw new Error("priority must be a number");var o=n;i&&(o=An(n,i),o[Qf]=n[Qf]||n);var s=this;e.forEach(function(c){s._addListener(c,{priority:t,callback:o,next:null})})};In.prototype.once=function(e,t,n,i){var o=this;if(Ft(t)&&(i=n,n=t,t=lw),!Te(t))throw new Error("priority must be a number");function s(){s.__isTomb=!0;var c=n.apply(i,arguments);return o.off(e,s),c}s[Qf]=n,this.on(e,t,s)};In.prototype.off=function(e,t){e=Ae(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};In.prototype.createEvent=function(e){var t=new gc;return t.init(e),t};In.prototype.fire=function(e,t){var n,i,o,s;if(s=jD.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof gc?n=t:n=this.createEvent(t),s[0]=n;var c=n.type;e!==c&&(n.type=e);try{o=this._invokeListeners(n,s,i)}finally{e!==c&&(n.type=c)}return o===void 0&&n.defaultPrevented&&(o=!1),o}};In.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};In.prototype._destroy=function(){this._listeners={}};In.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};In.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=HD(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(o){if(!this.handleError(o))throw console.error("unhandled error in event listener",o),o}return i};In.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};In.prototype._getListeners=function(e){return this._listeners[e]};In.prototype._setListeners=function(e,t){this._listeners[e]=t};In.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,o,s;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,s=n.callback,(s===t||s[Qf]===t)&&(o?o.next=i:this._setListeners(e,i)),o=n,n=i};function gc(){}gc.prototype.stopPropagation=function(){this.cancelBubble=!0};gc.prototype.preventDefault=function(){this.defaultPrevented=!0};gc.prototype.init=function(e){I(this,e||{})};function HD(e,t){return e.apply(null,t)}function to(e){return e.childNodes[0]}function $D(e){return e.parentNode.childNodes[1]}function Pf(e,t,n,i,o){var s=Zl();s.setTranslate(t,n);var c=Zl();c.setRotate(i||0,0,0);var u=Zl();u.setScale(1,1),rc(e,[s,c,u])}function rn(e,t,n){var i=Zl();i.setTranslate(t,n),rc(e,i)}function cw(e,t){var n=Zl();n.setRotate(t,0,0),rc(e,n)}function Jn(e,t){this._eventBus=e,this._elementRegistry=t}Jn.$inject=["eventBus","elementRegistry"];Jn.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=$D(t),n||(n=Ee("g"),Ye(n).add("djs-children"),De(t.parentNode,n))):n=t,n};Jn.prototype._clear=function(e){var t=to(e);return pp(t),t};Jn.prototype._createContainer=function(e,t,n,i){var o=Ee("g");Ye(o).add("djs-group"),typeof n<"u"?uw(o,t,t.childNodes[n]):De(t,o);var s=Ee("g");Ye(s).add("djs-element"),Ye(s).add("djs-"+e),i&&Ye(s).add("djs-frame"),De(o,s);var c=Ee("g");return Ye(c).add("djs-visual"),De(s,c),s};Jn.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,qS(t))};Jn.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=$n(e,function(o,s){return s.parent&&(o[s.parent.id]=s.parent),o},{}),z(i,function(o){var s=o.children;if(s){var c=t._getChildrenContainer(o);z(s.slice().reverse(),function(u){var f=n.getGraphics(u);uw(f.parentNode,c)})}})};Jn.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};Jn.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};Jn.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};Jn.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};Jn.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),rn(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?he(n,"display","none"):he(n,"display","block")}};Jn.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);$t(t.parentNode)};function uw(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const ID={__depends__:[sD],__init__:["canvas"],canvas:["type",Me],elementRegistry:["type",Qn],elementFactory:["type",Er],eventBus:["type",In],graphicsFactory:["type",Jn]};function UD(e){var t=new US(e);return t.init(),t}function GD(e){e=e||{};var t={config:["value",e]},n=[t,ID].concat(e.modules||[]);return UD(n)}function da(e,t){this._injector=t||GD(e),this.get("eventBus").fire("diagram.init")}da.prototype.get=function(e,t){return this._injector.get(e,t)};da.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};da.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};da.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Vv(){}Vv.prototype.get=function(e){return this.$model.properties.get(this,e)};Vv.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function fw(e,t){this.model=e,this.properties=t}fw.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Vv.prototype);z(e.properties,function(c){!c.isMany&&c.default!==void 0&&(i[c.name]=c.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var o=e.ns.name;function s(c){n.define(this,"$type",{value:o,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),z(c,An(function(u,f){this.set(f,u)},this))}return s.prototype=i,s.hasType=i.$instanceOf=this.model.hasType,n.defineModel(s,t),n.defineDescriptor(s,e),s};var VD={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},pw={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Fv(e,t){var n=pw[e];return n?n(t):t}function av(e){return!!VD[e]}function dw(e){return!!pw[e]}function dn(e,t){var n=e.split(/:/),i,o;if(n.length===1)i=e,o=t;else if(n.length===2)i=n[1],o=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(o?o+":":"")+i,{name:e,prefix:o,localName:i}}function ei(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}ei.prototype.build=function(){return Ai(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};ei.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};ei.prototype.replaceProperty=function(e,t,n){var i=e.ns,o=this.properties,s=this.propertiesByName,c=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var u=o.indexOf(e);if(u===-1)throw new Error("property <"+i.name+"> not found in property list");o.splice(u,1),this.addProperty(t,n?void 0:u,c),s[i.name]=s[i.localName]=t};ei.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,o=t.split("#"),s=dn(o[0],i),c=dn(o[1],s.prefix).name,u=this.propertiesByName[c];if(u)this.replaceProperty(u,e,n);else throw new Error("refined property <"+c+"> not found");delete e.redefines};ei.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};ei.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};ei.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};ei.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};ei.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};ei.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};ei.prototype.hasProperty=function(e){return this.propertiesByName[e]};ei.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,o=e.name;o in n||(z(e.properties,An(function(s){s=I({},s,{name:s.ns.localName,inherited:t}),Object.defineProperty(s,"definedBy",{value:e});var c=s.replaces,u=s.redefines;c||u?this.redefineProperty(s,c||u,c):(s.isBody&&this.setBodyProperty(s),s.isId&&this.setIdProperty(s),this.addProperty(s))},this)),i.push(e),n[o]=e)};function ha(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,z(e,An(this.registerPackage,this))}ha.prototype.getPackage=function(e){return this.packageMap[e]};ha.prototype.getPackages=function(){return this.packages};ha.prototype.registerPackage=function(e){e=I({},e);var t=this.packageMap;YE(t,e,"prefix"),YE(t,e,"uri"),z(e.types,An(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};ha.prototype.registerType=function(e,t){e=I({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:I(e.meta||{})});var n=dn(e.name,t.prefix),i=n.name,o={};z(e.properties,An(function(s){var c=dn(s.name,n.prefix),u=c.name;av(s.type)||(s.type=dn(s.type,c.prefix).name),I(s,{ns:c,name:u}),o[u]=s},this)),I(e,{ns:n,name:i,propertiesByName:o}),z(e.extends,An(function(s){var c=dn(s,n.prefix),u=this.typeMap[c.name];u.traits=u.traits||[],u.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};ha.prototype.mapTypes=function(e,t,n){var i=av(e.name)?{name:e.name}:this.typeMap[e.name],o=this;function s(f,d){var h=dn(f,av(f)?"":e.prefix);o.mapTypes(h,t,d)}function c(f){return s(f,!0)}function u(f){return s(f,!1)}if(!i)throw new Error("unknown type <"+e.name+">");z(i.superClass,n?c:u),t(i,!n),z(i.traits,c)};ha.prototype.getEffectiveDescriptor=function(e){var t=dn(e),n=new ei(t);this.mapTypes(t,function(o,s){n.addTrait(o,s)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};ha.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function YE(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function co(e){this.model=e}co.prototype.set=function(e,t,n){if(!Hn(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),o=i&&i.name;FD(n)?i?delete e[o]:delete e.$attrs[ov(t)]:i?o in e?e[o]=n:hw(e,i,n):e.$attrs[ov(t)]=n};co.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[ov(t)];var i=n.name;return!e[i]&&n.isMany&&hw(e,n,[]),e[i]};co.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=I({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};co.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};co.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};co.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const o=n.config.strict;if(typeof o<"u"){const s=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(o)throw s;typeof console<"u"&&console.warn(s)}return null};function FD(e){return typeof e>"u"}function hw(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function ov(e){return e.replace(/^:/,"")}function vi(e,t={}){this.properties=new co(this),this.factory=new fw(this,this.properties),this.registry=new ha(e,this.properties),this.typeCache={},this.config=t}vi.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};vi.prototype.getType=function(e){var t=this.typeCache,n=Hn(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};vi.prototype.createAny=function(e,t,n){var i=dn(e),o={$type:e,$instanceOf:function(c){return c===this.$type},get:function(c){return this[c]},set:function(c,u){gM(this,[c],u)}},s={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(o,s),this.properties.defineModel(o,this),this.properties.define(o,"get",{enumerable:!1,writable:!0}),this.properties.define(o,"set",{enumerable:!1,writable:!0}),this.properties.define(o,"$parent",{enumerable:!1,writable:!0}),this.properties.define(o,"$instanceOf",{enumerable:!1,writable:!0}),z(n,function(c,u){Zt(c)&&c.value!==void 0?o[c.name]=c.value:o[u]=c}),o};vi.prototype.getPackage=function(e){return this.registry.getPackage(e)};vi.prototype.getPackages=function(){return this.registry.getPackages()};vi.prototype.getElementDescriptor=function(e){return e.$descriptor};vi.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};vi.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};vi.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var qE=String.fromCharCode,YD=Object.prototype.hasOwnProperty,qD=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Jl={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Jl).forEach(function(e){Jl[e.toUpperCase()]=Jl[e]});function XD(e,t,n,i){return i?YD.call(Jl,i)?Jl[i]:"&"+i+";":qE(t||parseInt(n,16))}function qa(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(qD,XD):e}var XE="non-whitespace outside of root node";function rs(e){return new Error(e)}function KE(e){return"missing namespace for prefix <"+e+">"}function sf(e){return{get:e,enumerable:!0}}function KD(e){var t={},n;for(n in e)t[n]=e[n];return t}function sv(e){return e+"$uri"}function WD(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[sv(i)]=n;return t}function WE(){return{line:0,column:0}}function ZD(e){throw e}function mw(e){if(!this)return new mw(e);var t=e&&e.proxy,n,i,o,s,c=ZD,u,f,d,h,v=WE,y=!1,_=!1,b=null,w=!1,S;function O(C){C instanceof Error||(C=rs(C)),b=C,c(C,v)}function N(C){u&&(C instanceof Error||(C=rs(C)),u(C,v))}this.on=function(C,D){if(typeof D!="function")throw rs("required args <name, cb>");switch(C){case"openTag":i=D;break;case"text":n=D;break;case"closeTag":o=D;break;case"error":c=D;break;case"warn":u=D;break;case"cdata":s=D;break;case"attention":h=D;break;case"question":d=D;break;case"comment":f=D;break;default:throw rs("unsupported event: "+C)}return this},this.ns=function(C){if(typeof C>"u"&&(C={}),typeof C!="object")throw rs("required args <nsMap={}>");var D={},B;for(B in C)D[B]=C[B];return _=!0,S=D,this},this.parse=function(C){if(typeof C!="string")throw rs("required args <xml=string>");return b=null,A(C),v=WE,w=!1,b},this.stop=function(){w=!0};function A(C){var D=_?[]:null,B=_?WD(S):null,F,j=[],Q=0,J=!1,le=!1,ee=0,pe=0,we,Je,W,oe,_e,Ie,k,ne,V,Y="",ae=0,me;function xe(){if(me!==null)return me;var E,x,H,U=_&&B.xmlns,te=_&&y?[]:null,fe=ae,ge=Y,$e=ge.length,wt,tt,Lt,wn,it,Dn={},yo={},yn,Oe,et;e:for(;fe<$e;fe++)if(yn=!1,Oe=ge.charCodeAt(fe),!(Oe===32||Oe<14&&Oe>8)){for((Oe<65||Oe>122||Oe>90&&Oe<97)&&Oe!==95&&Oe!==58&&(N("illegal first char attribute name"),yn=!0),et=fe+1;et<$e;et++)if(Oe=ge.charCodeAt(et),!(Oe>96&&Oe<123||Oe>64&&Oe<91||Oe>47&&Oe<59||Oe===46||Oe===45||Oe===95)){if(Oe===32||Oe<14&&Oe>8){N("missing attribute value"),fe=et;continue e}if(Oe===61)break;N("illegal attribute name char"),yn=!0}if(it=ge.substring(fe,et),it==="xmlns:xmlns"&&(N("illegal declaration of xmlns"),yn=!0),Oe=ge.charCodeAt(et+1),Oe===34)et=ge.indexOf('"',fe=et+2),et===-1&&(et=ge.indexOf("'",fe),et!==-1&&(N("attribute value quote missmatch"),yn=!0));else if(Oe===39)et=ge.indexOf("'",fe=et+2),et===-1&&(et=ge.indexOf('"',fe),et!==-1&&(N("attribute value quote missmatch"),yn=!0));else for(N("missing attribute value quotes"),yn=!0,et=et+1;et<$e&&(Oe=ge.charCodeAt(et+1),!(Oe===32||Oe<14&&Oe>8));et++);for(et===-1&&(N("missing closing quotes"),et=$e,yn=!0),yn||(Lt=ge.substring(fe,et)),fe=et;et+1<$e&&(Oe=ge.charCodeAt(et+1),!(Oe===32||Oe<14&&Oe>8));et++)fe===et&&(N("illegal character after attribute end"),yn=!0);if(fe=et+1,yn)continue e;if(it in yo){N("attribute <"+it+"> already defined");continue}if(yo[it]=!0,!_){Dn[it]=Lt;continue}if(y){if(tt=it==="xmlns"?"xmlns":it.charCodeAt(0)===120&&it.substr(0,6)==="xmlns:"?it.substr(6):null,tt!==null){if(E=qa(Lt),x=sv(tt),wn=S[E],!wn){if(tt==="xmlns"||x in B&&B[x]!==E)do wn="ns"+Q++;while(typeof B[wn]<"u");else wn=tt;S[E]=wn}B[tt]!==wn&&(wt||(B=KD(B),wt=!0),B[tt]=wn,tt==="xmlns"&&(B[sv(wn)]=E,U=wn),B[x]=E),Dn[it]=Lt;continue}te.push(it,Lt);continue}if(Oe=it.indexOf(":"),Oe===-1){Dn[it]=Lt;continue}if(!(H=B[it.substring(0,Oe)])){N(KE(it.substring(0,Oe)));continue}it=U===H?it.substr(Oe+1):H+it.substr(Oe),Dn[it]=Lt}if(y)for(fe=0,$e=te.length;fe<$e;fe++){if(it=te[fe++],Lt=te[fe],Oe=it.indexOf(":"),Oe!==-1){if(!(H=B[it.substring(0,Oe)])){N(KE(it.substring(0,Oe)));continue}it=U===H?it.substr(Oe+1):H+it.substr(Oe)}Dn[it]=Lt}return me=Dn}function P(){for(var E=/(\r\n|\r|\n)/g,x=0,H=0,U=0,te=pe,fe,ge;ee>=U&&(fe=E.exec(C),!(!fe||(te=fe[0].length+fe.index,te>ee)));)x+=1,U=te;return ee==-1?(H=te,ge=C.substring(pe)):pe===0?ge=C.substring(pe,ee):(H=ee-U,ge=pe==-1?C.substring(ee):C.substring(ee,pe+1)),{data:ge,line:x,column:H}}for(v=P,t&&(V=Object.create({},{name:sf(function(){return k}),originalName:sf(function(){return ne}),attrs:sf(xe),ns:sf(function(){return B})}));pe!==-1;){if(C.charCodeAt(pe)===60?ee=pe:ee=C.indexOf("<",pe),ee===-1){if(j.length)return O("unexpected end of file");if(pe===0)return O("missing start tag");pe<C.length&&C.substring(pe).trim()&&N(XE);return}if(pe!==ee){if(j.length){if(n&&(n(C.substring(pe,ee),qa,v),w))return}else if(C.substring(pe,ee).trim()&&(N(XE),w))return}if(oe=C.charCodeAt(ee+1),oe===33){if(W=C.charCodeAt(ee+2),W===91&&C.substr(ee+3,6)==="CDATA["){if(pe=C.indexOf("]]>",ee),pe===-1)return O("unclosed cdata");if(s&&(s(C.substring(ee+9,pe),v),w))return;pe+=3;continue}if(W===45&&C.charCodeAt(ee+3)===45){if(pe=C.indexOf("-->",ee),pe===-1)return O("unclosed comment");if(f&&(f(C.substring(ee+4,pe),qa,v),w))return;pe+=3;continue}}if(oe===63){if(pe=C.indexOf("?>",ee),pe===-1)return O("unclosed question");if(d&&(d(C.substring(ee,pe+2),v),w))return;pe+=2;continue}for(we=ee+1;;we++){if(_e=C.charCodeAt(we),isNaN(_e))return pe=-1,O("unclosed tag");if(_e===34)W=C.indexOf('"',we+1),we=W!==-1?W:we;else if(_e===39)W=C.indexOf("'",we+1),we=W!==-1?W:we;else if(_e===62){pe=we;break}}if(oe===33){if(h&&(h(C.substring(ee,pe+1),qa,v),w))return;pe+=1;continue}if(me={},oe===47){if(J=!1,le=!0,!j.length)return O("missing open tag");if(we=k=j.pop(),W=ee+2+we.length,C.substring(ee+2,W)!==we)return O("closing tag mismatch");for(;W<pe;W++)if(oe=C.charCodeAt(W),!(oe===32||oe>8&&oe<14))return O("close tag")}else{if(C.charCodeAt(pe-1)===47?(we=k=C.substring(ee+1,pe-1),J=!0,le=!0):(we=k=C.substring(ee+1,pe),J=!0,le=!1),!(oe>96&&oe<123||oe>64&&oe<91||oe===95||oe===58))return O("illegal first char nodeName");for(W=1,Je=we.length;W<Je;W++)if(oe=we.charCodeAt(W),!(oe>96&&oe<123||oe>64&&oe<91||oe>47&&oe<59||oe===45||oe===95||oe==46)){if(oe===32||oe<14&&oe>8){k=we.substring(0,W),me=null;break}return O("invalid nodeName")}le||j.push(k)}if(_){if(F=B,J&&(le||D.push(F),me===null&&(y=we.indexOf("xmlns",W)!==-1)&&(ae=W,Y=we,xe(),y=!1)),ne=k,oe=k.indexOf(":"),oe!==-1){if(Ie=B[k.substring(0,oe)],!Ie)return O("missing namespace on <"+ne+">");k=k.substr(oe+1)}else Ie=B.xmlns;Ie&&(k=Ie+":"+k)}if(J&&(ae=W,Y=we,i&&(t?i(V,qa,le,v):i(k,xe,qa,le,v),w)))return;if(le){if(o&&(o(t?V:k,qa,J,v),w))return;_&&(J?B=F:B=D.pop())}pe+=1}}}function vw(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var lv={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},gw="property";function yw(e){return e.xml&&e.xml.serialize}function QD(e){const t=yw(e);return t!==gw&&(t||null)}function JD(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _w(e,t){return vw(t)?e.prefix+":"+JD(e.localName):e.name}function eO(e,t){var n=e.name,i=e.localName,o=t&&t.xml&&t.xml.typePrefix;return o&&i.indexOf(o)===0?e.prefix+":"+i.slice(o.length):n}function tO(e,t,n){const i=dn(e,t.xmlns),o=`${t[i.prefix]||i.prefix}:${i.localName}`,s=dn(o);var c=n.getPackage(s.prefix);return eO(s,c)}function ua(e){return new Error(e)}function yr(e){return e.$descriptor}function nO(e){I(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw ua("expected element");var n=this.elementsById,i=yr(t),o=i.idProperty,s;if(o&&(s=t.get(o.name),s)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(s))throw new Error("illegal ID <"+s+">");if(n[s])throw ua("duplicate ID <"+s+">");n[s]=t}},this.addWarning=function(t){this.warnings.push(t)}}function yc(){}yc.prototype.handleEnd=function(){};yc.prototype.handleText=function(){};yc.prototype.handleNode=function(){};function Yv(){}Yv.prototype=Object.create(yc.prototype);Yv.prototype.handleNode=function(){return this};function Ts(){}Ts.prototype=Object.create(yc.prototype);Ts.prototype.handleText=function(e){this.body=(this.body||"")+e};function _c(e,t){this.property=e,this.context=t}_c.prototype=Object.create(Ts.prototype);_c.prototype.handleNode=function(e){if(this.element)throw ua("expected no sub nodes");return this.element=this.createReference(e),this};_c.prototype.handleEnd=function(){this.element.id=this.body};_c.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function qv(e,t){this.element=t,this.propertyDesc=e}qv.prototype=Object.create(Ts.prototype);qv.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Fv(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function gp(){}gp.prototype=Object.create(Ts.prototype);gp.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function xn(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}xn.prototype=Object.create(gp.prototype);xn.prototype.addReference=function(e){this.context.addReference(e)};xn.prototype.handleText=function(e){var t=this.element,n=yr(t),i=n.bodyProperty;if(!i)throw ua("unexpected body text <"+e+">");Ts.prototype.handleText.call(this,e)};xn.prototype.handleEnd=function(){var e=this.body,t=this.element,n=yr(t),i=n.bodyProperty;i&&e!==void 0&&(e=Fv(i.type,e),t.set(i.name,e))};xn.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=yr(n),o=this.context,s=new n({}),c=this.model,u;return z(t,function(f,d){var h=i.propertiesByName[d],v;h&&h.isReference?h.isMany?(v=f.split(" "),z(v,function(y){o.addReference({element:s,property:h.ns.name,id:y})})):o.addReference({element:s,property:h.ns.name,id:f}):(h?f=Fv(h.type,f):d==="xmlns"?d=":"+d:(u=dn(d,i.ns.prefix),c.getPackage(u.prefix)&&o.addWarning({message:"unknown attribute <"+d+">",element:s,property:d,value:f})),s.set(d,f))}),s};xn.prototype.getPropertyForNode=function(e){var t=e.name,n=dn(t),i=this.type,o=this.model,s=yr(i),c=n.name,u=s.propertiesByName[c];if(u&&!u.isAttr){const d=QD(u);if(d){const h=e.attributes[d];if(h){const v=tO(h,e.ns,o),y=o.getType(v);return I({},u,{effectiveType:yr(y).name})}}return u}var f=o.getPackage(n.prefix);if(f){const d=_w(n,f),h=o.getType(d);if(u=We(s.properties,function(v){return!v.isVirtual&&!v.isReference&&!v.isAttribute&&h.hasType(v.type)}),u)return I({},u,{effectiveType:yr(h).name})}else if(u=We(s.properties,function(d){return!d.isReference&&!d.isAttribute&&d.type==="Element"}),u)return u;throw ua("unrecognized element <"+n.name+">")};xn.prototype.toString=function(){return"ElementDescriptor["+yr(this.type).name+"]"};xn.prototype.valueHandler=function(e,t){return new qv(e,t)};xn.prototype.referenceHandler=function(e){return new _c(e,this.context)};xn.prototype.handler=function(e){return e==="Element"?new hs(this.model,e,this.context):new xn(this.model,e,this.context)};xn.prototype.handleChild=function(e){var t,n,i,o;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,dw(n))return this.valueHandler(t,i);t.isReference?o=this.referenceHandler(t).handleNode(e):o=this.handler(n).handleNode(e);var s=o.element;return s!==void 0&&(t.isMany?i.get(t.name).push(s):i.set(t.name,s),t.isReference?(I(s,{element:i}),this.context.addReference(s)):s.$parent=i),o};function Xv(e,t,n){xn.call(this,e,t,n)}Xv.prototype=Object.create(xn.prototype);Xv.prototype.createElement=function(e){var t=e.name,n=dn(t),i=this.model,o=this.type,s=i.getPackage(n.prefix),c=s&&_w(n,s)||t;if(!o.hasType(c))throw ua("unexpected element <"+e.originalName+">");return xn.prototype.createElement.call(this,e)};function hs(e,t,n){this.model=e,this.context=n}hs.prototype=Object.create(gp.prototype);hs.prototype.createElement=function(e){var t=e.name,n=dn(t),i=n.prefix,o=e.ns[i+"$uri"],s=e.attributes;return this.model.createAny(t,o,s)};hs.prototype.handleChild=function(e){var t=new hs(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,o;return i!==void 0&&(o=n.$children=n.$children||[],o.push(i),i.$parent=n),t};hs.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Kv(e){e instanceof vi&&(e={model:e}),I(this,{lax:!1},e)}Kv.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof xn?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var o=this.model,s=this.lax,c=new nO(I({},t,{rootHandler:i})),u=new mw({proxy:!0}),f=iO();i.context=c,f.push(i);function d(D,B,F){var j=B(),Q=j.line,J=j.column,le=j.data;le.charAt(0)==="<"&&le.indexOf(" ")!==-1&&(le=le.slice(0,le.indexOf(" "))+">");var ee="unparsable content "+(le?le+" ":"")+`detected
	line: `+Q+`
	column: `+J+`
	nested error: `+D.message;if(F)return c.addWarning({message:ee,error:D}),!0;throw ua(ee)}function h(D,B){return d(D,B,!0)}function v(){var D=c.elementsById,B=c.references,F,j;for(F=0;j=B[F];F++){var Q=j.element,J=D[j.id],le=yr(Q).propertiesByName[j.property];if(J||c.addWarning({message:"unresolved reference <"+j.id+">",element:j.element,property:j.property,value:j.id}),le.isMany){var ee=Q.get(le.name),pe=ee.indexOf(j);pe===-1&&(pe=ee.length),J?ee[pe]=J:ee.splice(pe,1)}else Q.set(le.name,J)}}function y(){f.pop().handleEnd()}var _=/^<\?xml /i,b=/ encoding="([^"]+)"/i,w=/^utf-8$/i;function S(D){if(_.test(D)){var B=b.exec(D),F=B&&B[1];!F||w.test(F)||c.addWarning({message:"unsupported document encoding <"+F+">, falling back to UTF-8"})}}function O(D,B){var F=f.peek();try{f.push(F.handleNode(D))}catch(j){d(j,B,s)&&f.push(new Yv)}}function N(D,B){try{f.peek().handleText(D)}catch(F){h(F,B)}}function A(D,B){D.trim()&&N(D,B)}var C=o.getPackages().reduce(function(D,B){return D[B.uri]=B.prefix,D},Object.entries(lv).reduce(function(D,[B,F]){return D[F]=B,D},o.config&&o.config.nsMap||{}));return u.ns(C).on("openTag",function(D,B,F,j){var Q=D.attrs||{},J=Object.keys(Q).reduce(function(ee,pe){var we=B(Q[pe]);return ee[pe]=we,ee},{}),le={name:D.name,originalName:D.originalName,attributes:J,ns:D.ns};O(le,j)}).on("question",S).on("closeTag",y).on("cdata",N).on("text",function(D,B,F){A(B(D),F)}).on("error",d).on("warn",h),new Promise(function(D,B){var F;try{u.parse(e),v()}catch(ee){F=ee}var j=i.element;!F&&!j&&(F=ua("failed to parse document as <"+i.type.$descriptor.name+">"));var Q=c.warnings,J=c.references,le=c.elementsById;return F?(F.warnings=Q,B(F)):D({rootElement:j,elementsById:le,references:J,warnings:Q})})};Kv.prototype.handler=function(e){return new Xv(this.model,e)};function iO(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var rO=`<?xml version="1.0" encoding="UTF-8"?>
`,aO=/<|>|'|"|&|\n\r|\n/g,bw=/<|>|&/g;function Xi(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}Xi.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e};Xi.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]};Xi.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)};Xi.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)};Xi.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)};Xi.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t};Xi.prototype.getNSKey=function(e){return e.prefix!==void 0?e.uri+"|"+e.prefix:e.uri};Xi.prototype.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);this.used[n]=this.byUri(t),this.parent&&this.parent.logUsed(e)};Xi.prototype.getUsed=function(e){var t=[].concat(this.wellknown,this.custom);return t.filter(n=>{var i=this.getNSKey(n);return this.used[i]})};function oO(e){return e.charAt(0).toLowerCase()+e.slice(1)}function sO(e,t){return vw(t)?oO(e):e}function Ew(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function xw(e){return Hn(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function lO(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function cO(e,t){return t.isGeneric?I({localName:t.ns.localName},e):I({localName:sO(t.ns.localName,t.$pkg)},e)}function uO(e,t){return I({localName:t.ns.localName},e)}function fO(e){var t=e.$descriptor;return je(t.properties,function(n){var i=n.name;if(n.isVirtual||!Cn(e,i))return!1;var o=e[i];return o===n.default||o===null?!1:n.isMany?o.length:!0})}var pO={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},dO={"<":"lt",">":"gt","&":"amp"};function Sw(e,t,n){return e=Hn(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function hO(e){return Sw(e,aO,pO)}function mO(e){return Sw(e,bw,dO)}function vO(e){return je(e,function(t){return t.isAttr})}function gO(e){return je(e,function(t){return!t.isAttr})}function Wv(e){this.tagName=e}Wv.prototype.build=function(e){return this.element=e,this};Wv.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function io(){}io.prototype.serializeValue=io.prototype.serializeTo=function(e){e.append(this.escape?mO(this.value):this.value)};io.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(bw)!==-1&&(this.escape=!0),this};function Zv(e){this.tagName=e}Ew(Zv,io);Zv.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function gt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}gt.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,o,s=t.isGeneric;return s?i=this.parseGenericNsAttributes(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),s?this.parseGenericContainments(e):(o=fO(e),this.parseAttributes(vO(o)),this.parseContainments(gO(o))),this.parseGenericAttributes(e,i),this};gt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return cO(t,e)};gt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return uO(t,e)};gt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};gt.prototype.nsAttributeName=function(e){var t;if(Hn(e)?t=dn(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:I({localName:t.localName},n)};gt.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,n])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,n)).map(([t,n])=>({name:t,value:n}))};gt.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push(new io().build({type:"String"},t));var n=e.$children;n&&z(n,i=>{this.body.push(new gt(this).build(i))})};gt.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,o=dn(t),s;if(o.prefix==="xmlns"&&(s={prefix:o.localName,uri:n}),!o.prefix&&o.localName==="xmlns"&&(s={uri:n}),!s)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(s,!0,!0);else{var c=this.logNamespaceUsed(s,!0);this.getNamespaces().logUsed(c)}};gt.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=[];return z(n,function(o,s){var c=t.parseNsAttribute(e,s,o);c&&i.push(c)}),i};gt.prototype.parseGenericAttributes=function(e,t){var n=this;z(t,function(i){try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(o){typeof console<"u"&&console.warn(`missing namespace information for <${i.name}=${i.value}> on`,e,o)}})};gt.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;z(e,function(o){var s=i.get(o.name),c=o.isReference,u=o.isMany;if(u||(s=[s]),o.isBody)n.push(new io().build(o,s[0]));else if(dw(o.type))z(s,function(d){n.push(new Zv(t.addTagName(t.nsPropertyTagName(o))).build(o,d))});else if(c)z(s,function(d){n.push(new Wv(t.addTagName(t.nsPropertyTagName(o))).build(d))});else{var f=yw(o);z(s,function(d){var h;f?f===gw?h=new gt(t,o):h=new yp(t,o,f):h=new gt(t),n.push(h.build(d))})}})};gt.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new Xi(i):t=i),t};gt.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),o=e.uri,s=e.prefix,c=i.byUri(o);return(!c||n)&&i.add(e,t),i.mapPrefix(s,o),e};gt.prototype.logNamespaceUsed=function(e,t){var n=this.getNamespaces(t),i=e.prefix,o=e.uri,s,c,u;if(!i&&!o)return{localName:e.localName};if(u=n.defaultUriByPrefix(i),o=o||u||n.uriByPrefix(i),!o)throw new Error("no namespace uri given for prefix <"+i+">");if(e=n.byUri(o),!e&&!i&&(e=this.logNamespace({uri:o},u===o,!0)),!e){for(s=i,c=1;n.uriByPrefix(s);)s=i+"_"+c++;e=this.logNamespace({prefix:s,uri:o},u===o)}return i&&n.mapPrefix(i,o),e};gt.prototype.parseAttributes=function(e){var t=this,n=this.element;z(e,function(i){var o=n.get(i.name);if(i.isReference)if(!i.isMany)o=o.id;else{var s=[];z(o,function(c){s.push(c.id)}),o=s.join(" ")}t.addAttribute(t.nsAttributeName(i),o)})};gt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),xw(e)};gt.prototype.addAttribute=function(e,t){var n=this.attrs;Hn(t)&&(t=hO(t));var i=DS(n,function(s){return s.name.localName===e.localName&&s.name.uri===e.uri&&s.name.prefix===e.prefix}),o={name:e,value:t};i!==-1?n.splice(i,1,o):n.push(o)};gt.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=lO(n).concat(t)),z(t,function(i){e.append(" ").append(xw(i.name)).append('="').append(i.value).append('"')})};gt.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==io;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),z(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function yp(e,t,n){gt.call(this,e,t),this.serialization=n}Ew(yp,gt);yp.prototype.parseNsAttributes=function(e){var t=gt.prototype.parseNsAttributes.call(this,e).filter(c=>c.name!==this.serialization),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var o=e.$model.getPackage(i.uri),s=o.xml&&o.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(i.prefix?i.prefix+":":"")+s+n.ns.localName),t};yp.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function yO(){this.value="",this.write=function(e){this.value+=e}}function _O(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function bO(e){e=I({format:!1,preamble:!0},e||{});function t(n,i){var o=i||new yO,s=new _O(o,e.format);e.preamble&&s.append(rO);var c=new gt,u=n.$model;if(c.getNamespaces().mapDefaultPrefixes(EO(u)),c.build(n).serializeTo(s),!i)return o.value}return{toXML:t}}function EO(e){const t=e.config&&e.config.nsMap||{},n={};for(const i in lv)n[i]=lv[i];for(const i in t){const o=t[i];n[o]=i}for(const i of e.getPackages())n[i.prefix]=i.uri;return n}function _p(e,t){vi.call(this,e,t)}_p.prototype=Object.create(vi.prototype);_p.prototype.fromXML=function(e,t,n){Hn(t)||(n=t,t="bpmn:Definitions");var i=new Kv(I({model:this,lax:!0},n)),o=i.handler(t);return i.fromXML(e,o)};_p.prototype.toXML=function(e,t){var n=new bO(t);return new Promise(function(i,o){try{var s=n.toXML(e);return i({xml:s})}catch(c){return o(c)}})};var xO="BPMN20",SO="http://www.omg.org/spec/BPMN/20100524/MODEL",wO="bpmn",RO=[],TO=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],CO=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],AO={tagAlias:"lowerCase",typePrefix:"t"},MO={name:xO,uri:SO,prefix:wO,associations:RO,types:TO,enumerations:CO,xml:AO},DO="BPMNDI",OO="http://www.omg.org/spec/BPMN/20100524/DI",NO="bpmndi",PO=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],BO=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],LO=[],kO={name:DO,uri:OO,prefix:NO,types:PO,enumerations:BO,associations:LO},zO="DC",jO="http://www.omg.org/spec/DD/20100524/DC",HO="dc",$O=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],IO=[],UO={name:zO,uri:jO,prefix:HO,types:$O,associations:IO},GO="DI",VO="http://www.omg.org/spec/DD/20100524/DI",FO="di",YO=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],qO=[],XO={tagAlias:"lowerCase"},KO={name:GO,uri:VO,prefix:FO,types:YO,associations:qO,xml:XO},WO="bpmn.io colors for BPMN",ZO="http://bpmn.io/schema/bpmn/biocolor/1.0",QO="bioc",JO=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],eN=[],tN=[],nN={name:WO,uri:ZO,prefix:QO,types:JO,enumerations:eN,associations:tN},iN="BPMN in Color",rN="http://www.omg.org/spec/BPMN/non-normative/color/1.0",aN="color",oN=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],sN=[],lN=[],cN={name:iN,uri:rN,prefix:aN,types:oN,enumerations:sN,associations:lN};const uN={bpmn:MO,bpmndi:kO,dc:UO,di:KO,bioc:nN,color:cN};function fN(e,t){const n=I({},uN,e);return new _p(n,t)}function cn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var pN="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function ww(e){Cn(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(pN)}})}function Tn(e,t){return e.$instanceOf(t)}function dN(e){return We(e.rootElements,function(t){return Tn(t,"bpmn:Process")||Tn(t,"bpmn:Collaboration")})}function hN(e){var t={},n=[],i={};function o(V,Y){return function(ae){V(ae,Y)}}function s(V){t[V.id]=V}function c(V){return t[V.id]}function u(V,Y){var ae=V.gfx;if(ae)throw new Error(`already rendered ${cn(V)}`);return e.element(V,i[V.id],Y)}function f(V,Y){return e.root(V,i[V.id],Y)}function d(V,Y){try{var ae=i[V.id]&&u(V,Y);return s(V),ae}catch(me){h(me.message,{element:V,error:me}),console.error(`failed to import ${cn(V)}`,me)}}function h(V,Y){e.error(V,Y)}var v=this.registerDi=function(Y){var ae=Y.bpmnElement;ae?i[ae.id]?h(`multiple DI elements defined for ${cn(ae)}`,{element:ae}):(i[ae.id]=Y,ww(ae)):h(`no bpmnElement referenced in ${cn(Y)}`,{element:Y})};function y(V){_(V.plane)}function _(V){v(V),z(V.planeElement,b)}function b(V){v(V)}this.handleDefinitions=function(Y,ae){var me=Y.diagrams;if(ae&&me.indexOf(ae)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!ae&&me&&me.length&&(ae=me[0]),!ae)throw new Error("no diagram to display");i={},y(ae);var xe=ae.plane;if(!xe)throw new Error(`no plane for ${cn(ae)}`);var P=xe.bpmnElement;if(!P)if(P=dN(Y),P)h(`correcting missing bpmnElement on ${cn(xe)} to ${cn(P)}`),xe.bpmnElement=P,v(xe);else throw new Error("no process or collaboration to display");var E=f(P,xe);if(Tn(P,"bpmn:Process")||Tn(P,"bpmn:SubProcess"))S(P,E);else if(Tn(P,"bpmn:Collaboration"))k(P,E),O(Y.rootElements,E);else throw new Error(`unsupported bpmnElement for ${cn(xe)}: ${cn(P)}`);w(n)};var w=this.handleDeferred=function(){for(var Y;n.length;)Y=n.shift(),Y()};function S(V,Y){oe(V,Y),Q(V.ioSpecification,Y),j(V.artifacts,Y),s(V)}function O(V,Y){var ae=je(V,function(me){return!c(me)&&Tn(me,"bpmn:Process")&&me.laneSets});ae.forEach(o(S,Y))}function N(V,Y){d(V,Y)}function A(V,Y){z(V,o(N,Y))}function C(V,Y){d(V,Y)}function D(V,Y){d(V,Y)}function B(V,Y){d(V,Y)}function F(V,Y){d(V,Y)}function j(V,Y){z(V,function(ae){Tn(ae,"bpmn:Association")?n.push(function(){F(ae,Y)}):F(ae,Y)})}function Q(V,Y){V&&(z(V.dataInputs,o(D,Y)),z(V.dataOutputs,o(B,Y)))}var J=this.handleSubProcess=function(Y,ae){oe(Y,ae),j(Y.artifacts,ae)};function le(V,Y){var ae=d(V,Y);Tn(V,"bpmn:SubProcess")&&J(V,ae||Y),Tn(V,"bpmn:Activity")&&Q(V.ioSpecification,Y),n.push(function(){z(V.dataInputAssociations,o(C,Y)),z(V.dataOutputAssociations,o(C,Y))})}function ee(V,Y){d(V,Y)}function pe(V,Y){d(V,Y)}function we(V,Y){n.push(function(){var ae=d(V,Y);V.childLaneSet&&Je(V.childLaneSet,ae||Y),ne(V)})}function Je(V,Y){z(V.lanes,o(we,Y))}function W(V,Y){z(V,o(Je,Y))}function oe(V,Y){_e(V.flowElements,Y),V.laneSets&&W(V.laneSets,Y)}function _e(V,Y){z(V,function(ae){Tn(ae,"bpmn:SequenceFlow")?n.push(function(){ee(ae,Y)}):Tn(ae,"bpmn:BoundaryEvent")?n.unshift(function(){le(ae,Y)}):Tn(ae,"bpmn:FlowNode")?le(ae,Y):Tn(ae,"bpmn:DataObject")||(Tn(ae,"bpmn:DataStoreReference")||Tn(ae,"bpmn:DataObjectReference")?pe(ae,Y):h(`unrecognized flowElement ${cn(ae)} in context ${cn(Y&&Y.businessObject)}`,{element:ae,context:Y}))})}function Ie(V,Y){var ae=d(V,Y),me=V.processRef;me&&S(me,ae||Y)}function k(V,Y){z(V.participants,o(Ie,Y)),n.push(function(){A(V.messageFlows,Y)}),j(V.artifacts,Y)}function ne(V){z(V.flowNodeRef,function(Y){var ae=Y.get("lanes");ae&&ae.push(V)})}}function T(e,t){var n=ue(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function He(e,t){return fa(t,function(n){return T(e,n)})}function ue(e){return e&&e.businessObject||e}function qe(e){return e&&e.di}function mN(e,t,n){var i,o,s,c,u=[];function f(d,h){var v={root:function(w,S){return i.add(w,S)},element:function(w,S,O){return i.add(w,S,O)},error:function(w,S){u.push({message:w,context:S})}},y=new hN(v);h=h||d.diagrams&&d.diagrams[0];var _=vN(d,h);if(!_)throw new Error("no diagram to display");z(_,function(w){y.handleDefinitions(d,w)});var b=h.plane.bpmnElement.id;s.setRootElement(s.findRoot(b+"_plane")||s.findRoot(b))}return new Promise(function(d,h){try{return i=e.get("bpmnImporter"),o=e.get("eventBus"),s=e.get("canvas"),o.fire("import.render.start",{definitions:t}),f(t,n),o.fire("import.render.complete",{error:c,warnings:u}),d({warnings:u})}catch(v){return v.warnings=u,h(v)}})}function vN(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!T(n,"bpmn:Process")&&!T(n,"bpmn:Collaboration")&&(i=gN(n));var o;T(i,"bpmn:Collaboration")?o=i:o=We(e.rootElements,function(d){if(T(d,"bpmn:Collaboration"))return We(d.participants,function(h){return h.processRef===i})});var s=[i];o&&(s=mn(o.participants,function(d){return d.processRef}),s.push(o));var c=Rw(s),u=[t],f=[n];return z(e.diagrams,function(d){if(d.plane){var h=d.plane.bpmnElement;c.indexOf(h)!==-1&&f.indexOf(h)===-1&&(u.push(d),f.push(h))}}),u}}function Rw(e){var t=[];return z(e,function(n){n&&(t.push(n),t=t.concat(Rw(n.flowElements)))}),t}function gN(e){for(var t=e;t;){if(T(t,"bpmn:Process"))return t;t=t.$parent}}var yN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Tw=yN,Cw={verticalAlign:"middle"},Aw={color:"#404040"},_N={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},bN={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},EN={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},xN='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+Tw+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Ii;function SN(){Ii=ht(xN),fn(Ii,_N),fn(ot("svg",Ii),Cw),fn(ot(".backdrop",Ii),bN),fn(ot(".notice",Ii),EN),fn(ot(".link",Ii),Aw,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function wN(){Ii||(SN(),jn.bind(Ii,".backdrop","click",function(e){document.body.removeChild(Ii)})),document.body.appendChild(Ii)}function _t(e){e=I({},TN,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e),AN(this._container)}ve(_t,da);_t.prototype.importXML=async function(t,n){const i=this;function o(c){return i.get("eventBus").createEvent(c)}let s=[];try{t=this._emit("import.parse.start",{xml:t})||t;let c;try{c=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(y){throw this._emit("import.parse.complete",{error:y}),y}let u=c.rootElement;const f=c.references,d=c.warnings,h=c.elementsById;s=s.concat(d),u=this._emit("import.parse.complete",o({error:null,definitions:u,elementsById:h,references:f,warnings:s}))||u;const v=await this.importDefinitions(u,n);return s=s.concat(v.warnings),this._emit("import.done",{error:null,warnings:s}),{warnings:s}}catch(c){let u=c;throw s=s.concat(u.warnings||[]),Bf(u,s),u=RN(u),this._emit("import.done",{error:u,warnings:u.warnings}),u}};_t.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};_t.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const s=new Error("no XML imported");throw Bf(s,[]),s}if(typeof t=="string"&&(i=CN(n,t),!i)){const s=new Error("BPMNDiagram <"+t+"> not found");throw Bf(s,[]),s}try{this.clear()}catch(s){throw Bf(s,[]),s}const{warnings:o}=await mN(this,n,i);return{warnings:o}};_t.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,o;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,o=(await this._moddle.toXML(n,t)).xml,o=this._emit("saveXML.serialized",{xml:o})||o}catch(c){i=c}const s=i?{error:i}:{xml:o};if(this._emit("saveXML.done",s),i)throw i;return s};_t.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),o=i.getActiveLayer(),s=ot(":scope > defs",i._svg),c=NE(o),u=s?"<defs>"+NE(s)+"</defs>":"",f=o.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+f.width+'" height="'+f.height+'" viewBox="'+f.x+" "+f.y+" "+f.width+" "+f.height+'" version="1.1">'+u+c+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};_t.prototype._setDefinitions=function(e){this._definitions=e};_t.prototype.getModules=function(){return this._modules};_t.prototype.clear=function(){this.getDefinitions()&&da.prototype.clear.call(this)};_t.prototype.destroy=function(){da.prototype.destroy.call(this),Yi(this._container)};_t.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};_t.prototype.off=function(e,t){this.get("eventBus").off(e,t)};_t.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=ot(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};_t.prototype.getDefinitions=function(){return this._definitions};_t.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};_t.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),o=n.additionalModules||[],s=[{bpmnjs:["value",this],moddle:["value",t]}],c=[].concat(s,i,o),u=I(qi(n,["additionalModules"]),{canvas:I({},n.canvas,{container:e}),modules:c});da.call(this,u),n&&n.container&&this.attachTo(n.container)};_t.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};_t.prototype._createContainer=function(e){const t=ht('<div class="bjs-container"></div>');return fn(t,{width:ZE(e.width),height:ZE(e.height),position:e.position}),t};_t.prototype._createModdle=function(e){const t=I({},this._moddleExtensions,e.moddleExtensions);return new fN(t)};_t.prototype._modules=[];function Bf(e,t){return e.warnings=t,e}function RN(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const TN={width:"100%",height:"100%",position:"relative"};function ZE(e){return e+(Te(e)?"px":"")}function CN(e,t){return t&&We(e.diagrams,function(n){return n.id===t})||null}function AN(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Tw+"</a>",i=ht(n);fn(ot("svg",i),Cw),fn(i,Aw,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),Le.bind(i,"click",function(o){wN(),o.preventDefault()})}function bc(e){_t.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}ve(bc,_t);bc.prototype._createModdle=function(e){var t=_t.prototype._createModdle.call(this,e);return t.ids=new Vi([32,36,1]),t};bc.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,o;i.clear();for(o in t)i.claim(o,t[o])};function Ue(e,t){return T(e,"bpmn:CallActivity")?!1:T(e,"bpmn:SubProcess")?(t=t||qe(e),t&&T(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):T(e,"bpmn:Participant")?!!ue(e).processRef:!0}function Yt(e){if(!(!T(e,"bpmn:Participant")&&!T(e,"bpmn:Lane"))){var t=qe(e).isHorizontal;return t===void 0?!0:t}}function MN(e){return e&&ue(e).isInterrupting!==!1}function hn(e){return e&&!!ue(e).triggeredByEvent}function Cs(e,t){var n=ue(e).eventDefinitions;return fa(n,function(i){return T(i,t)})}function DN(e){return Cs(e,"bpmn:ErrorEventDefinition")}function ON(e){return Cs(e,"bpmn:EscalationEventDefinition")}function NN(e){return Cs(e,"bpmn:CompensateEventDefinition")}var ac={width:90,height:20},QE=15;function ro(e){return T(e,"bpmn:Event")||T(e,"bpmn:Gateway")||T(e,"bpmn:DataStoreReference")||T(e,"bpmn:DataObjectReference")||T(e,"bpmn:DataInput")||T(e,"bpmn:DataOutput")||T(e,"bpmn:SequenceFlow")||T(e,"bpmn:MessageFlow")||T(e,"bpmn:Group")}function bp(e){return Xe(e.label)}function PN(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],o=BN(e),s=Math.atan((i.y-n.y)/(i.x-n.x)),c=o.x,u=o.y;return Math.abs(s)<Math.PI/2?u-=QE:c+=QE,{x:c,y:u}}function BN(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Qv(e){return e.waypoints?PN(e.waypoints):T(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+ac.height/2}:{x:e.x+e.width/2,y:e.y+e.height+ac.height/2}}function LN(e,t){var n,i,o,s=e.label;return s&&s.bounds?(o=s.bounds,i={width:Math.max(ac.width,o.width),height:o.height},n={x:o.x+o.width/2,y:o.y+o.height/2}):(n=Qv(t),i=ac),I({x:n.x-i.width/2,y:n.y-i.height/2},i)}function Mw(e){if(T(e,"bpmn:FlowElement")||T(e,"bpmn:Participant")||T(e,"bpmn:Lane")||T(e,"bpmn:SequenceFlow")||T(e,"bpmn:MessageFlow")||T(e,"bpmn:DataInput")||T(e,"bpmn:DataOutput"))return"name";if(T(e,"bpmn:TextAnnotation"))return"text";if(T(e,"bpmn:Group"))return"categoryValueRef"}function kN(e){var t=e.categoryValueRef;return t&&t.value||""}function Mi(e){var t=e.businessObject,n=Mw(t);if(n)return n==="categoryValueRef"?kN(t):t[n]||""}function zN(e,t){var n=e.businessObject,i=Mw(n);if(i)if(i==="categoryValueRef"){if(!n[i])return e;n[i].value=t}else n[i]=t;return e}var cv="hsl(225, 10%, 15%)",jN="white";function ji(e,t){return fa(e.eventDefinitions,function(n){return n.$type===t})}function HN(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function $N(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function ze(e,t,n){var i=qe(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||jN}function de(e,t,n){var i=qe(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||cv}function Hl(e,t,n,i){var o=qe(e),s=o.get("label");return i||s&&s.get("color:color")||t||de(e,n)}function IN(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,o=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return so(o)}function UN(e,t){var n=e.x,i=e.y,o=e.width,s=e.height,c=[["M",n+t,i],["l",o-t*2,0],["a",t,t,0,0,1,t,t],["l",0,s-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-o,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-s],["a",t,t,0,0,1,t,-t],["z"]];return so(c)}function GN(e){var t=e.width,n=e.height,i=e.x,o=e.y,s=t/2,c=n/2,u=[["M",i+s,o],["l",s,c],["l",-s,c],["l",-s,-c],["z"]];return so(u)}function VN(e){var t=e.x,n=e.y,i=e.width,o=e.height,s=[["M",t,n],["l",i,0],["l",0,o],["l",-i,0],["z"]];return so(s)}function $l(e,t={}){return{width:ui(e,t),height:zn(e,t)}}function ui(e,t={}){return Cn(t,"width")?t.width:e.width}function zn(e,t={}){return Cn(t,"height")?t.height:e.height}var FN=new Vi,YN=10,lf=3,qN=1.5,Lf=10,as=.95,XN=1,KN=.25;function uo(e,t,n,i,o,s,c){br.call(this,t,c);var u=e&&e.defaultFillColor,f=e&&e.defaultStrokeColor,d=e&&e.defaultLabelColor;function h(P){return n.computeStyle(P,{strokeLinecap:"round",strokeLinejoin:"round",stroke:cv,strokeWidth:2,fill:"white"})}function v(P){return n.computeStyle(P,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:cv,strokeWidth:2})}function y(P,E){var{ref:x={x:0,y:0},scale:H=1,element:U,parentGfx:te=o._svg}=E,fe=Ee("marker",{id:P,viewBox:"0 0 20 20",refX:x.x,refY:x.y,markerWidth:20*H,markerHeight:20*H,orient:"auto"});De(fe,U);var ge=ot(":scope > defs",te);ge||(ge=Ee("defs"),De(te,ge)),De(ge,fe)}function _(P,E,x,H){var U=FN.nextPrefixed("marker-");return b(P,U,E,x,H),"url(#"+U+")"}function b(P,E,x,H,U){if(x==="sequenceflow-end"){var te=Ee("path",{d:"M 1 5 L 11 10 L 1 15 Z",...h({fill:U,stroke:U,strokeWidth:1})});y(E,{element:te,ref:{x:11,y:10},scale:.5,parentGfx:P})}if(x==="messageflow-start"){var fe=Ee("circle",{cx:6,cy:6,r:3.5,...h({fill:H,stroke:U,strokeWidth:1,strokeDasharray:[1e4,1]})});y(E,{element:fe,ref:{x:6,y:6},parentGfx:P})}if(x==="messageflow-end"){var ge=Ee("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...h({fill:H,stroke:U,strokeWidth:1,strokeDasharray:[1e4,1]})});y(E,{element:ge,ref:{x:8.5,y:5},parentGfx:P})}if(x==="association-start"){var $e=Ee("path",{d:"M 11 5 L 1 10 L 11 15",...v({fill:"none",stroke:U,strokeWidth:1.5,strokeDasharray:[1e4,1]})});y(E,{element:$e,ref:{x:1,y:10},scale:.5,parentGfx:P})}if(x==="association-end"){var wt=Ee("path",{d:"M 1 5 L 11 10 L 1 15",...v({fill:"none",stroke:U,strokeWidth:1.5,strokeDasharray:[1e4,1]})});y(E,{element:wt,ref:{x:11,y:10},scale:.5,parentGfx:P})}if(x==="conditional-flow-marker"){var tt=Ee("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...h({fill:H,stroke:U})});y(E,{element:tt,ref:{x:-1,y:10},scale:.5,parentGfx:P})}if(x==="conditional-default-flow-marker"){var Lt=Ee("path",{d:"M 6 4 L 10 16",...h({stroke:U,fill:"none"})});y(E,{element:Lt,ref:{x:0,y:10},scale:.5,parentGfx:P})}}function w(P,E,x,H,U={}){Zt(H)&&(U=H,H=0),H=H||0,U=h(U);var te=E/2,fe=x/2,ge=Ee("circle",{cx:te,cy:fe,r:Math.round((E+x)/4-H),...U});return De(P,ge),ge}function S(P,E,x,H,U,te){Zt(U)&&(te=U,U=0),U=U||0,te=h(te);var fe=Ee("rect",{x:U,y:U,width:E-U*2,height:x-U*2,rx:H,ry:H,...te});return De(P,fe),fe}function O(P,E,x,H){var U=E/2,te=x/2,fe=[{x:U,y:0},{x:E,y:te},{x:U,y:x},{x:0,y:te}],ge=fe.map(function(wt){return wt.x+","+wt.y}).join(" ");H=h(H);var $e=Ee("polygon",{...H,points:ge});return De(P,$e),$e}function N(P,E,x,H){x=v(x);var U=hp(E,x,H);return De(P,U),U}function A(P,E,x){return N(P,E,x,5)}function C(P,E,x){x=v(x);var H=Ee("path",{...x,d:E});return De(P,H),H}function D(P,E,x,H){return C(E,x,I({"data-marker":P},H))}function B(P){return xe[P]}function F(P){return function(E,x,H){return B(P)(E,x,H)}}var j={"bpmn:MessageEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.235,my:.315}}),te=H?de(E,f,x.stroke):ze(E,u,x.fill),fe=H?ze(E,u,x.fill):de(E,f,x.stroke),ge=C(P,U,{fill:te,stroke:fe,strokeWidth:1});return ge},"bpmn:TimerEventDefinition":function(P,E,x={}){var H=x.width||E.width,U=x.height||E.height,te=x.width?1:2,fe=w(P,H,U,.2*U,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:te}),ge=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:H,containerHeight:U,position:{mx:.5,my:.5}});C(P,ge,{stroke:de(E,f,x.stroke),strokeWidth:te});for(var $e=0;$e<12;$e++){var wt=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:H,containerHeight:U,position:{mx:.5,my:.5}}),tt=H/2,Lt=U/2;C(P,wt,{strokeWidth:1,stroke:de(E,f,x.stroke),transform:"rotate("+$e*30+","+Lt+","+tt+")"})}return fe},"bpmn:EscalationEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.5,my:.2}}),te=H?de(E,f,x.stroke):ze(E,u,x.fill);return C(P,U,{fill:te,stroke:de(E,f,x.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(P,E,x={}){var H=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.5,my:.222}});return C(P,H,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.57,my:.263}}),te=H?de(E,f,x.stroke):ze(E,u,x.fill);return C(P,U,{fill:te,stroke:de(E,f,x.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.2,my:.722}}),te=H?de(E,f,x.stroke):ze(E,u,x.fill);return C(P,U,{fill:te,stroke:de(E,f,x.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.638,my:-.055}}),te=H?de(E,f,x.stroke):"none",fe=C(P,U,{fill:te,stroke:de(E,f,x.stroke),strokeWidth:1});return cw(fe,45),fe},"bpmn:CompensateEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.22,my:.5}}),te=H?de(E,f,x.stroke):ze(E,u,x.fill);return C(P,U,{fill:te,stroke:de(E,f,x.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.5,my:.2}}),te=H?de(E,f,x.stroke):ze(E,u,x.fill);return C(P,U,{strokeWidth:1,fill:te,stroke:de(E,f,x.stroke)})},"bpmn:MultipleEventDefinition":function(P,E,x={},H){var U=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.211,my:.36}}),te=H?de(E,f,x.stroke):ze(E,u,x.fill);return C(P,U,{fill:te,stroke:de(E,f,x.stroke),strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(P,E,x={}){var H=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:x.width||E.width,containerHeight:x.height||E.height,position:{mx:.458,my:.194}});return C(P,H,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(P,E,x={}){var H=w(P,E.width,E.height,8,{fill:de(E,f,x.stroke),stroke:de(E,f,x.stroke),strokeWidth:4});return H}};function Q(P,E,x={},H){var U=ue(P),te=HN(U),fe=H||P;return U.get("eventDefinitions")&&U.get("eventDefinitions").length>1?U.get("parallelMultiple")?j["bpmn:ParallelMultipleEventDefinition"](E,fe,x,te):j["bpmn:MultipleEventDefinition"](E,fe,x,te):ji(U,"bpmn:MessageEventDefinition")?j["bpmn:MessageEventDefinition"](E,fe,x,te):ji(U,"bpmn:TimerEventDefinition")?j["bpmn:TimerEventDefinition"](E,fe,x,te):ji(U,"bpmn:ConditionalEventDefinition")?j["bpmn:ConditionalEventDefinition"](E,fe,x,te):ji(U,"bpmn:SignalEventDefinition")?j["bpmn:SignalEventDefinition"](E,fe,x,te):ji(U,"bpmn:EscalationEventDefinition")?j["bpmn:EscalationEventDefinition"](E,fe,x,te):ji(U,"bpmn:LinkEventDefinition")?j["bpmn:LinkEventDefinition"](E,fe,x,te):ji(U,"bpmn:ErrorEventDefinition")?j["bpmn:ErrorEventDefinition"](E,fe,x,te):ji(U,"bpmn:CancelEventDefinition")?j["bpmn:CancelEventDefinition"](E,fe,x,te):ji(U,"bpmn:CompensateEventDefinition")?j["bpmn:CompensateEventDefinition"](E,fe,x,te):ji(U,"bpmn:TerminateEventDefinition")?j["bpmn:TerminateEventDefinition"](E,fe,x,te):null}var J={ParticipantMultiplicityMarker:function(P,E,x={}){var H=ui(E,x),U=zn(E,x),te=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:H,containerHeight:U,position:{mx:(H/2-6)/H,my:(U-15)/U}});D("participant-multiplicity",P,te,{strokeWidth:2,fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)})},SubProcessMarker:function(P,E,x={}){var H=S(P,14,14,0,{strokeWidth:1,fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)});rn(H,E.width/2-7.5,E.height-20);var U=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2-7.5)/E.width,my:(E.height-20)/E.height}});D("sub-process",P,U,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)})},ParallelMarker:function(P,E,x){var H=ui(E,x),U=zn(E,x),te=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:H,containerHeight:U,position:{mx:(H/2+x.parallel)/H,my:(U-20)/U}});D("parallel",P,te,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)})},SequentialMarker:function(P,E,x){var H=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+x.seq)/E.width,my:(E.height-19)/E.height}});D("sequential",P,H,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)})},CompensationMarker:function(P,E,x){var H=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+x.compensation)/E.width,my:(E.height-13)/E.height}});D("compensation",P,H,{strokeWidth:1,fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)})},LoopMarker:function(P,E,x){var H=ui(E,x),U=zn(E,x),te=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:H,containerHeight:U,position:{mx:(H/2+x.loop)/H,my:(U-7)/U}});D("loop",P,te,{strokeWidth:1.5,fill:"none",stroke:de(E,f,x.stroke),strokeMiterlimit:.5})},AdhocMarker:function(P,E,x){var H=ui(E,x),U=zn(E,x),te=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:H,containerHeight:U,position:{mx:(H/2+x.adhoc)/H,my:(U-15)/U}});D("adhoc",P,te,{strokeWidth:1,fill:de(E,f,x.stroke),stroke:de(E,f,x.stroke)})}};function le(P,E,x,H){J[P](E,x,H)}function ee(P,E,x=[],H={}){H={fill:H.fill,stroke:H.stroke,width:ui(E,H),height:zn(E,H)};var U=ue(E),te=x.includes("SubProcessMarker");te?H={...H,seq:-21,parallel:-22,compensation:-25,loop:-18,adhoc:10}:H={...H,seq:-5,parallel:-6,compensation:-7,loop:0,adhoc:-8},U.get("isForCompensation")&&x.push("CompensationMarker"),T(U,"bpmn:AdHocSubProcess")&&(x.push("AdhocMarker"),te||I(H,{compensation:H.compensation-18}));var fe=U.get("loopCharacteristics"),ge=fe&&fe.get("isSequential");fe&&(I(H,{compensation:H.compensation-18}),x.includes("AdhocMarker")&&I(H,{seq:-23,loop:-18,parallel:-24}),ge===void 0&&x.push("LoopMarker"),ge===!1&&x.push("ParallelMarker"),ge===!0&&x.push("SequentialMarker")),x.includes("CompensationMarker")&&x.length===1&&I(H,{compensation:-8}),z(x,function($e){le($e,P,E,H)})}function pe(P,E,x={}){x=I({size:{width:100}},x);var H=s.createText(E||"",x);return Ye(H).add("djs-label"),De(P,H),H}function we(P,E,x,H={}){var U=ue(E),te=$l({x:E.x,y:E.y,width:E.width,height:E.height},H);return pe(P,U.name,{align:x,box:te,padding:7,style:{fill:Hl(E,d,f,H.stroke)}})}function Je(P,E,x={}){var H={width:90,height:30,x:E.width/2+E.x,y:E.height/2+E.y};return pe(P,Mi(E),{box:H,fitBox:!0,style:I({},s.getExternalStyle(),{fill:Hl(E,d,f,x.stroke)})})}function W(P,E,x,H={}){var U=Yt(x),te=pe(P,E,{box:{height:30,width:U?zn(x,H):ui(x,H)},align:"center-middle",style:{fill:Hl(x,d,f,H.stroke)}});if(U){var fe=-1*zn(x,H);Pf(te,0,-fe,270)}}function oe(P,E,x={}){var{width:H,height:U}=$l(E,x);return S(P,H,U,Lf,{...x,fill:ze(E,u,x.fill),fillOpacity:as,stroke:de(E,f,x.stroke)})}function _e(P,E,x={}){var H=ue(E),U=ze(E,u,x.fill),te=de(E,f,x.stroke);return(H.get("associationDirection")==="One"||H.get("associationDirection")==="Both")&&(x.markerEnd=_(P,"association-end",U,te)),H.get("associationDirection")==="Both"&&(x.markerStart=_(P,"association-start",U,te)),x=Fe(x,["markerStart","markerEnd"]),A(P,E.waypoints,{...x,stroke:te,strokeDasharray:"0, 5"})}function Ie(P,E,x={}){var H=ze(E,u,x.fill),U=de(E,f,x.stroke),te=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.474,my:.296}}),fe=C(P,te,{fill:H,fillOpacity:as,stroke:U}),ge=ue(E);if($N(ge)){var $e=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.33,my:(E.height-18)/E.height}});C(P,$e,{strokeWidth:2,fill:H,stroke:U})}return fe}function k(P,E,x={}){return w(P,E.width,E.height,{fillOpacity:as,...x,fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)})}function ne(P,E,x={}){return O(P,E.width,E.height,{fill:ze(E,u,x.fill),fillOpacity:as,stroke:de(E,f,x.stroke)})}function V(P,E,x={}){var H=S(P,ui(E,x),zn(E,x),0,{fill:ze(E,u,x.fill),fillOpacity:x.fillOpacity||as,stroke:de(E,f,x.stroke),strokeWidth:1.5}),U=ue(E);if(T(U,"bpmn:Lane")){var te=U.get("name");W(P,te,E,x)}return H}function Y(P,E,x={}){var H=oe(P,E,x),U=Ue(E);if(hn(E)&&(he(H,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),!U)){var te=ue(E).flowElements||[],fe=te.filter(ge=>T(ge,"bpmn:StartEvent"));fe.length===1&&ae(fe[0],P,x,E)}return we(P,E,U?"center-top":"center-middle",x),U?ee(P,E,void 0,x):ee(P,E,["SubProcessMarker"],x),H}function ae(P,E,x,H){var U=22,te={fill:ze(H,u,x.fill),stroke:de(H,f,x.stroke),width:U,height:U},fe=ue(P).isInterrupting,ge=fe?0:3,$e=fe?1:1.2,wt=20,tt=(U-wt)/2,Lt="translate("+tt+","+tt+")";w(E,wt,wt,{fill:te.fill,stroke:te.stroke,strokeWidth:$e,strokeDasharray:ge,transform:Lt}),Q(P,E,te,H)}function me(P,E,x={}){var H=oe(P,E,x);return we(P,E,"center-middle",x),ee(P,E,void 0,x),H}var xe=this.handlers={"bpmn:AdHocSubProcess":function(P,E,x={}){return Ue(E)?x=Fe(x,["fill","stroke","width","height"]):x=Fe(x,["fill","stroke"]),Y(P,E,x)},"bpmn:Association":function(P,E,x={}){return x=Fe(x,["fill","stroke"]),_e(P,E,x)},"bpmn:BoundaryEvent":function(P,E,x={}){var{renderIcon:H=!0}=x;x=Fe(x,["fill","stroke"]);var U=ue(E),te=U.get("cancelActivity");x={strokeWidth:1.5,fill:ze(E,u,x.fill),fillOpacity:XN,stroke:de(E,f,x.stroke)},te||(x.strokeDasharray="6");var fe=k(P,E,x);return w(P,E.width,E.height,lf,{...x,fill:"none"}),H&&Q(E,P,x),fe},"bpmn:BusinessRuleTask":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=me(P,E,x),U=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),te=C(P,U);he(te,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1});var fe=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),ge=C(P,fe);return he(ge,{fill:de(E,f,x.stroke),stroke:de(E,f,x.stroke),strokeWidth:1}),H},"bpmn:CallActivity":function(P,E,x={}){return x=Fe(x,["fill","stroke"]),Y(P,E,{strokeWidth:5,...x})},"bpmn:ComplexGateway":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ne(P,E,x),U=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:E.width,containerHeight:E.height,position:{mx:.46,my:.26}});return C(P,U,{fill:de(E,f,x.stroke),stroke:de(E,f,x.stroke),strokeWidth:1}),H},"bpmn:DataInput":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=i.getRawPath("DATA_ARROW"),U=Ie(P,E,x);return C(P,H,{fill:"none",stroke:de(E,f,x.stroke),strokeWidth:1}),U},"bpmn:DataInputAssociation":function(P,E,x={}){return x=Fe(x,["fill","stroke"]),_e(P,E,{...x,markerEnd:_(P,"association-end",ze(E,u,x.fill),de(E,f,x.stroke))})},"bpmn:DataObject":function(P,E,x={}){return x=Fe(x,["fill","stroke"]),Ie(P,E,x)},"bpmn:DataObjectReference":F("bpmn:DataObject"),"bpmn:DataOutput":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=i.getRawPath("DATA_ARROW"),U=Ie(P,E,x);return C(P,H,{strokeWidth:1,fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke)}),U},"bpmn:DataOutputAssociation":function(P,E,x={}){return x=Fe(x,["fill","stroke"]),_e(P,E,{...x,markerEnd:_(P,"association-end",ze(E,u,x.fill),de(E,f,x.stroke))})},"bpmn:DataStoreReference":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:0,my:.133}});return C(P,H,{fill:ze(E,u,x.fill),fillOpacity:as,stroke:de(E,f,x.stroke),strokeWidth:2})},"bpmn:EndEvent":function(P,E,x={}){var{renderIcon:H=!0}=x;x=Fe(x,["fill","stroke"]);var U=k(P,E,{...x,strokeWidth:4});return H&&Q(E,P,x),U},"bpmn:EventBasedGateway":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ue(E),U=ne(P,E,x);w(P,E.width,E.height,E.height*.2,{fill:ze(E,"none",x.fill),stroke:de(E,f,x.stroke),strokeWidth:1});var te=H.get("eventGatewayType"),fe=!!H.get("instantiate");function ge(){var wt=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:E.width,containerHeight:E.height,position:{mx:.36,my:.44}});C(P,wt,{fill:"none",stroke:de(E,f,x.stroke),strokeWidth:2})}if(te==="Parallel"){var $e=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:E.width,containerHeight:E.height,position:{mx:.474,my:.296}});C(P,$e,{fill:"none",stroke:de(E,f,x.stroke),strokeWidth:1})}else te==="Exclusive"&&(fe||w(P,E.width,E.height,E.height*.26,{fill:"none",stroke:de(E,f,x.stroke),strokeWidth:1}),ge());return U},"bpmn:ExclusiveGateway":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ne(P,E,x),U=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:E.width,containerHeight:E.height,position:{mx:.32,my:.3}}),te=qe(E);return te.get("isMarkerVisible")&&C(P,U,{fill:de(E,f,x.stroke),stroke:de(E,f,x.stroke),strokeWidth:1}),H},"bpmn:Gateway":function(P,E,x={}){return x=Fe(x,["fill","stroke"]),ne(P,E,x)},"bpmn:Group":function(P,E,x={}){return x=Fe(x,["fill","stroke","width","height"]),S(P,E.width,E.height,Lf,{stroke:de(E,f,x.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:ui(E,x),height:zn(E,x)})},"bpmn:InclusiveGateway":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ne(P,E,x);return w(P,E.width,E.height,E.height*.24,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:2.5}),H},"bpmn:IntermediateEvent":function(P,E,x={}){var{renderIcon:H=!0}=x;x=Fe(x,["fill","stroke"]);var U=k(P,E,{...x,strokeWidth:1.5});return w(P,E.width,E.height,lf,{fill:"none",stroke:de(E,f,x.stroke),strokeWidth:1.5}),H&&Q(E,P,x),U},"bpmn:IntermediateCatchEvent":F("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":F("bpmn:IntermediateEvent"),"bpmn:Lane":function(P,E,x={}){return x=Fe(x,["fill","stroke","width","height"]),V(P,E,{...x,fillOpacity:KN})},"bpmn:ManualTask":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=me(P,E,x),U=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return C(P,U,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:.5}),H},"bpmn:MessageFlow":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ue(E),U=qe(E),te=ze(E,u,x.fill),fe=de(E,f,x.stroke),ge=A(P,E.waypoints,{markerEnd:_(P,"messageflow-end",te,fe),markerStart:_(P,"messageflow-start",te,fe),stroke:fe,strokeDasharray:"10, 11",strokeWidth:1.5});if(H.get("messageRef")){var $e=ge.getPointAtLength(ge.getTotalLength()/2),wt=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:$e.x,y:$e.y}}),tt={strokeWidth:1};U.get("messageVisibleKind")==="initiating"?(tt.fill=te,tt.stroke=fe):(tt.fill=fe,tt.stroke=te);var Lt=C(P,wt,tt),wn=H.get("messageRef"),it=wn.get("name"),Dn=pe(P,it,{align:"center-top",fitBox:!0,style:{fill:fe}}),yo=Lt.getBBox(),yn=Dn.getBBox(),Oe=$e.x-yn.width/2,et=$e.y+yo.height/2+YN;Pf(Dn,Oe,et,0)}return ge},"bpmn:ParallelGateway":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ne(P,E,x),U=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:E.width,containerHeight:E.height,position:{mx:.46,my:.2}});return C(P,U,{fill:de(E,f,x.stroke),stroke:de(E,f,x.stroke),strokeWidth:1}),H},"bpmn:Participant":function(P,E,x={}){x=Fe(x,["fill","stroke","width","height"]);var H=V(P,E,x),U=Ue(E),te=Yt(E),fe=ue(E),ge=fe.get("name");if(U){var $e=te?[{x:30,y:0},{x:30,y:zn(E,x)}]:[{x:0,y:30},{x:ui(E,x),y:30}];N(P,$e,{stroke:de(E,f,x.stroke),strokeWidth:qN}),W(P,ge,E,x)}else{var wt=$l(E,x);te||(wt.height=ui(E,x),wt.width=zn(E,x));var tt=pe(P,ge,{box:wt,align:"center-middle",style:{fill:Hl(E,d,f,x.stroke)}});if(!te){var Lt=-1*zn(E,x);Pf(tt,0,-Lt,270)}}return fe.get("participantMultiplicity")&&le("ParticipantMultiplicityMarker",P,E,x),H},"bpmn:ReceiveTask":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ue(E),U=me(P,E,x),te;return H.get("instantiate")?(w(P,28,28,20*.22,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1}),te=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):te=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),C(P,te,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1}),U},"bpmn:ScriptTask":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=me(P,E,x),U=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return C(P,U,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1}),H},"bpmn:SendTask":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=me(P,E,x),U=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return C(P,U,{fill:de(E,f,x.stroke),stroke:ze(E,u,x.fill),strokeWidth:1}),H},"bpmn:SequenceFlow":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=ze(E,u,x.fill),U=de(E,f,x.stroke),te=A(P,E.waypoints,{markerEnd:_(P,"sequenceflow-end",H,U),stroke:U}),fe=ue(E),{source:ge}=E;if(ge){var $e=ue(ge);fe.get("conditionExpression")&&T($e,"bpmn:Activity")&&he(te,{markerStart:_(P,"conditional-flow-marker",H,U)}),$e.get("default")&&(T($e,"bpmn:Gateway")||T($e,"bpmn:Activity"))&&$e.get("default")===fe&&he(te,{markerStart:_(P,"conditional-default-flow-marker",H,U)})}return te},"bpmn:ServiceTask":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=me(P,E,x);w(P,10,10,{fill:ze(E,u,x.fill),stroke:"none",transform:"translate(6, 6)"});var U=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});C(P,U,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1}),w(P,10,10,{fill:ze(E,u,x.fill),stroke:"none",transform:"translate(11, 10)"});var te=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return C(P,te,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:1}),H},"bpmn:StartEvent":function(P,E,x={}){var{renderIcon:H=!0}=x;x=Fe(x,["fill","stroke"]);var U=ue(E);U.get("isInterrupting")||(x={...x,strokeDasharray:"6"});var te=k(P,E,x);return H&&Q(E,P,x),te},"bpmn:SubProcess":function(P,E,x={}){return Ue(E)?x=Fe(x,["fill","stroke","width","height"]):x=Fe(x,["fill","stroke"]),Y(P,E,x)},"bpmn:Task":function(P,E,x={}){return x=Fe(x,["fill","stroke"]),me(P,E,x)},"bpmn:TextAnnotation":function(P,E,x={}){x=Fe(x,["fill","stroke","width","height"]);var{width:H,height:U}=$l(E,x),te=S(P,H,U,0,0,{fill:"none",stroke:"none"}),fe=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:H,containerHeight:U,position:{mx:0,my:0}});C(P,fe,{stroke:de(E,f,x.stroke)});var ge=ue(E),$e=ge.get("text")||"";return pe(P,$e,{align:"left-top",box:$l(E,x),padding:7,style:{fill:Hl(E,d,f,x.stroke)}}),te},"bpmn:Transaction":function(P,E,x={}){Ue(E)?x=Fe(x,["fill","stroke","width","height"]):x=Fe(x,["fill","stroke"]);var H=Y(P,E,{strokeWidth:1.5,...x}),U=n.style(["no-fill","no-events"],{stroke:de(E,f,x.stroke),strokeWidth:1.5}),te=Ue(E);return te||(x={}),S(P,ui(E,x),zn(E,x),Lf-lf,lf,U),H},"bpmn:UserTask":function(P,E,x={}){x=Fe(x,["fill","stroke"]);var H=me(P,E,x),U=15,te=12,fe=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:U,y:te}});C(P,fe,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:.5});var ge=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:U,y:te}});C(P,ge,{fill:ze(E,u,x.fill),stroke:de(E,f,x.stroke),strokeWidth:.5});var $e=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:U,y:te}});return C(P,$e,{fill:de(E,f,x.stroke),stroke:de(E,f,x.stroke),strokeWidth:.5}),H},label:function(P,E,x={}){return Je(P,E,x)}};this._drawPath=C,this._renderer=B}ve(uo,br);uo.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];uo.prototype.canRender=function(e){return T(e,"bpmn:BaseElement")};uo.prototype.drawShape=function(e,t,n={}){var{type:i}=t,o=this._renderer(i);return o(e,t,n)};uo.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,o=this._renderer(i);return o(e,t,n)};uo.prototype.getShapePath=function(e){return T(e,"bpmn:Event")?IN(e):T(e,"bpmn:Activity")?UN(e,Lf):T(e,"bpmn:Gateway")?GN(e):VN(e)};function Fe(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var WN=0,ZN={width:150,height:50};function QN(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function JN(e){return Zt(e)?I({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function e3(e,t){t.textContent=e;var n;try{var i,o=e==="";return t.textContent=o?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},o&&(i.width=0),i}catch(s){return console.log(s),{width:0,height:0}}}function t3(e,t,n){for(var i=e.shift(),o=i,s;;){if(s=e3(o,n),s.width=o?s.width:0,o===" "||o===""||s.width<Math.round(t)||o.length<2)return n3(e,o,i,s);o=r3(o,s.width,t)}}function n3(e,t,n,i){if(t.length<n.length){var o=n.slice(t.length).trim();e.unshift(o)}return{width:i.width,height:i.height,text:t}}var JE="";function i3(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,o=[],s=0;if(n.length>1)for(;i=n.shift();)if(i.length+s<t)o.push(i),s+=i.length;else{(i==="-"||i===JE)&&o.pop();break}var c=o[o.length-1];return c&&c===JE&&(o[o.length-1]="-"),o.join("")}function r3(e,t,n){var i=Math.max(e.length*(n/t),1),o=i3(e,i);return o||(o=e.slice(0,Math.max(Math.round(i-1),1))),o}function a3(){var e=document.getElementById("helper-svg");return e||(e=Ee("svg"),he(e,{id:"helper-svg"}),fn(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function Ep(e){this._config=I({},{size:ZN,padding:WN,style:{},align:"center-top"},e||{})}Ep.prototype.createText=function(e,t){return this.layoutText(e,t).element};Ep.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Ep.prototype.layoutText=function(e,t){var n=I({},this._config.size,t.box),i=I({},this._config.style,t.style),o=QN(t.align||this._config.align),s=JN(t.padding!==void 0?t.padding:this._config.padding),c=t.fitBox||!1,u=o3(i),f=e.split(/\u00AD?\r?\n/),d=[],h=n.width-s.left-s.right,v=Ee("text");he(v,{x:0,y:0}),he(v,i);var y=a3();for(De(y,v);f.length;)d.push(t3(f,h,v));o.vertical==="middle"&&(s.top=s.bottom=0);var _=$n(d,function(N,A,C){return N+(u||A.height)},0)+s.top+s.bottom,b=$n(d,function(N,A,C){return A.width>N?A.width:N},0),w=s.top;o.vertical==="middle"&&(w+=(n.height-_)/2),w-=(u||d[0].height)/4;var S=Ee("text");he(S,i),z(d,function(N){var A;switch(w+=u||N.height,o.horizontal){case"left":A=s.left;break;case"right":A=(c?b:h)-s.right-N.width;break;default:A=Math.max(((c?b:h)-N.width)/2+s.left,0)}var C=Ee("tspan");he(C,{x:A,y:w}),C.textContent=N.text,De(S,C)}),$t(v);var O={width:b,height:_};return{dimensions:O,element:S}};function o3(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var s3=12,l3=1.2,c3=30;function Dw(e){var t=I({fontFamily:"Arial, sans-serif",fontSize:s3,fontWeight:"normal",lineHeight:l3},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=I({},t,{fontSize:n},e&&e.externalStyle||{}),o=new Ep({style:t});this.getExternalLabelBounds=function(s,c){var u=o.getDimensions(c,{box:{width:90,height:30},style:i});return{x:Math.round(s.x+s.width/2-u.width/2),y:Math.round(s.y),width:Math.ceil(u.width),height:Math.ceil(u.height)}},this.getTextAnnotationBounds=function(s,c){var u=o.getDimensions(c,{box:s,style:t,align:"left-top",padding:5});return{x:s.x,y:s.y,width:s.width,height:Math.max(c3,Math.round(u.height))}},this.createText=function(s,c){return o.createText(s,c||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Dw.$inject=["config.textRenderer"];function u3(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],o,s;n.abspos?(o=n.abspos.x,s=n.abspos.y):(o=n.containerWidth*n.position.mx,s=n.containerHeight*n.position.my);var c={};if(n.position){for(var u=n.containerHeight/i.height*n.yScaleFactor,f=n.containerWidth/i.width*n.xScaleFactor,d=0;d<i.heightElements.length;d++)c["y"+d]=i.heightElements[d]*u;for(var h=0;h<i.widthElements.length;h++)c["x"+h]=i.widthElements[h]*f}var v=h3(i.d,{mx:o,my:s,e:c});return v}}var f3=/\{([^{}]+)\}/g,p3=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function d3(e,t,n){var i=n;return t.replace(p3,function(o,s,c,u,f){s=s||u,i&&(s in i&&(i=i[s]),typeof i=="function"&&f&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function h3(e,t){return String(e).replace(f3,function(n,i){return d3(n,i,t)})}const m3={__init__:["bpmnRenderer"],bpmnRenderer:["type",uo],textRenderer:["type",Dw],pathMap:["type",u3]};function v3(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const xp={translate:["value",v3]};function kf(e,t,n){return I({id:e.id,type:e.$type,businessObject:e,di:t},n)}function g3(e,t,n){var i=e.waypoint;return!i||i.length<2?[Ce(t),Ce(n)]:i.map(function(o){return{x:o.x,y:o.y}})}function Ow(e,t,n){return new Error(`element ${cn(t)} referenced by ${cn(e)}#${n} not yet drawn`)}function xr(e,t,n,i,o){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=o}xr.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];xr.prototype.add=function(e,t,n){var i,o,s;if(T(t,"bpmndi:BPMNPlane")){var c=T(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(kf(e,t,c)),this._canvas.addRootElement(i)}else if(T(t,"bpmndi:BPMNShape")){var u=!Ue(e,t),f=_3(e);o=n&&(n.hidden||n.collapsed);var d=t.bounds;i=this._elementFactory.createShape(kf(e,t,{collapsed:u,hidden:o,x:Math.round(d.x),y:Math.round(d.y),width:Math.round(d.width),height:Math.round(d.height),isFrame:f})),T(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),T(e,"bpmn:Lane")&&(s=0),T(e,"bpmn:DataStoreReference")&&(y3(n,Ce(d))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,s)}else if(T(t,"bpmndi:BPMNEdge")){var h=this._getSource(e),v=this._getTarget(e);o=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(kf(e,t,{hidden:o,source:h,target:v,waypoints:g3(t,h,v)})),T(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,s)}else throw new Error(`unknown di ${cn(t)} for element ${cn(e)}`);return ro(e)&&Mi(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};xr.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${cn(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),o=i&&i.attachers;if(!i)throw Ow(e,n,"attachedToRef");t.host=i,o||(i.attachers=o=[]),o.indexOf(t)===-1&&o.push(t)};xr.prototype.addLabel=function(e,t,n){var i,o,s;return i=LN(t,n),o=Mi(n),o&&(i=this._textRenderer.getExternalLabelBounds(i,o)),s=this._elementFactory.createLabel(kf(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Mi(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(s,n.parent)};xr.prototype._getConnectedElement=function(e,t){var n,i,o=e.$type;if(i=e[t+"Ref"],t==="source"&&o==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&o==="bpmn:DataOutputAssociation"||t==="target"&&o==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?Ow(e,i,t+"Ref"):new Error(`${cn(e)}#${t} Ref not specified`)};xr.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};xr.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};xr.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function y3(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function _3(e){return T(e,"bpmn:Group")}const b3={__depends__:[xp],bpmnImporter:["type",xr]},E3={__depends__:[m3,b3]};function Ec(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Ec.prototype.next=function(){return this._prefix+ ++this._counter};var x3=new Ec("ov"),S3=500;function Qt(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=x3,this._overlayDefaults=I({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=w3(n.getContainer()),this._init()}Qt.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Qt.prototype.get=function(e){if(Hn(e)&&(e={id:e}),Hn(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?je(t.overlays,Ti({type:e.type})):t.overlays.slice():[]}else return e.type?je(this._overlays,Ti({type:e.type})):e.id?this._overlays[e.id]:null};Qt.prototype.add=function(e,t,n){if(Zt(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=I({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Qt.prototype.remove=function(e){var t=this.get(e)||[];Ae(t)||(t=[t]);var n=this;z(t,function(i){var o=n._getOverlayContainer(i.element,!0);if(i&&(Yi(i.html),Yi(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),o){var s=o.overlays.indexOf(i);s!==-1&&o.overlays.splice(s,1)}})};Qt.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Qt.prototype.show=function(){Sp(this._overlayRoot)};Qt.prototype.hide=function(){Sp(this._overlayRoot,!1)};Qt.prototype.clear=function(){this._overlays={},this._overlayContainers=[],pp(this._overlayRoot)};Qt.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,o=t.y;if(t.waypoints){var s=It(t);i=s.x,o=s.y}Nw(n,i,o),pn(e.html,"data-container-id",t.id)};Qt.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,o=t.left,s=t.top;if(t.right!==void 0){var c;i.waypoints?c=It(i).width:c=i.width,o=t.right*-1+c}if(t.bottom!==void 0){var u;i.waypoints?u=It(i).height:u=i.height,s=t.bottom*-1+u}Nw(n,o||0,s||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Qt.prototype._createOverlayContainer=function(e){var t=ht('<div class="djs-overlays" />');fn(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Qt.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Pw(this._overlayRoot,n)};Qt.prototype._getOverlayContainer=function(e,t){var n=We(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Qt.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,o,s;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Hn(i)&&(i=ht(i)),s=this._getOverlayContainer(n),o=ht('<div class="djs-overlay" data-overlay-id="'+t+'">'),fn(o,{position:"absolute"}),o.appendChild(i),e.type&&St(o).add("djs-overlay-"+e.type);var c=this._canvas.findRoot(n),u=this._canvas.getRootElement();Sp(o,c===u),e.htmlContainer=o,s.overlays.push(e),s.html.appendChild(o),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Qt.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),o=n&&n.minZoom,s=n&&n.maxZoom,c=e.htmlContainer,u=this._canvas.getRootElement(),f=!0;(i!==u||n&&(Wt(o)&&o>t.scale||Wt(s)&&s<t.scale))&&(f=!1),Sp(c,f),this._updateOverlayScale(e,t)};Qt.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,o,s=e.htmlContainer,c,u="";n!==!0&&(n===!1?(i=1,o=1):(i=n.min,o=n.max),Wt(i)&&t.scale<i&&(c=(1/t.scale||1)*i),Wt(o)&&t.scale>o&&(c=(1/t.scale||1)*o)),Wt(c)&&(u="scale("+c+","+c+")"),Pw(s,u)};Qt.prototype._updateOverlaysVisibilty=function(e){var t=this;z(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Qt.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var o=i.element,s=t.get({element:o});z(s,function(f){t.remove(f.id)});var c=t._getOverlayContainer(o);if(c){Yi(c.html);var u=t._overlayContainers.indexOf(c);u!==-1&&t._overlayContainers.splice(u,1)}}),e.on("element.changed",S3,function(i){var o=i.element,s=t._getOverlayContainer(o,!0);s&&(z(s.overlays,function(c){t._updateOverlay(c)}),t._updateOverlayContainer(s))}),e.on("element.marker.update",function(i){var o=t._getOverlayContainer(i.element,!0);o&&St(o.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function w3(e){var t=ht('<div class="djs-overlay-container" />');return fn(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function Nw(e,t,n){fn(e,{left:t+"px",top:n+"px"})}function Sp(e,t){e.style.display=t===!1?"none":""}function Pw(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const wp={__init__:["overlays"],overlays:["type",Qt]};function Bw(e,t,n,i){e.on("element.changed",function(o){var s=o.element;(s.parent||s===t.getRootElement())&&(o.gfx=n.getGraphics(s)),o.gfx&&e.fire(YS(s)+".changed",o)}),e.on("elements.changed",function(o){var s=o.elements;s.forEach(function(c){e.fire("element.changed",{element:c})}),i.updateContainments(s)}),e.on("shape.changed",function(o){i.update("shape",o.element,o.gfx)}),e.on("connection.changed",function(o){i.update("connection",o.element,o.gfx)})}Bw.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Jv={__init__:["changeSupport"],changeSupport:["type",Bw]};var R3=1e3;function ce(e){this._eventBus=e}ce.$inject=["eventBus"];function T3(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}ce.prototype.on=function(e,t,n,i,o,s){if((Ft(t)||Te(t))&&(s=o,o=i,i=n,n=t,t=null),Ft(n)&&(s=o,o=i,i=n,n=R3),Zt(o)&&(s=o,o=!1),!Ft(i))throw new Error("handlerFn must be a function");Ae(e)||(e=[e]);var c=this._eventBus;z(e,function(u){var f=["commandStack",u,t].filter(function(d){return d}).join(".");c.on(f,n,o?T3(i,s):i,s)})};ce.prototype.canExecute=Sr("canExecute");ce.prototype.preExecute=Sr("preExecute");ce.prototype.preExecuted=Sr("preExecuted");ce.prototype.execute=Sr("execute");ce.prototype.executed=Sr("executed");ce.prototype.postExecute=Sr("postExecute");ce.prototype.postExecuted=Sr("postExecuted");ce.prototype.revert=Sr("revert");ce.prototype.reverted=Sr("reverted");function Sr(e){return function(n,i,o,s,c){(Ft(n)||Te(n))&&(c=s,s=o,o=i,i=n,n=null),this.on(n,e,i,o,s,c)}}function eg(e,t){t.invoke(ce,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}ve(eg,ce);eg.$inject=["canvas","injector"];const C3={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",eg]};function oc(e){return CSS.escape(e)}var A3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Lw(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return A3[t]})}var kw="_plane";function ex(e){var t=e.id;return M3(t)}function hr(e){var t=e.id;return T(e,"bpmn:SubProcess")?zw(t):t}function Xa(e){return zw(e)}function zf(e){var t=qe(e);return T(t,"bpmndi:BPMNPlane")}function zw(e){return e+kw}function M3(e){return e.replace(new RegExp(kw+"$"),"")}var D3="bjs-breadcrumbs-shown";function jw(e,t,n){var i=ht('<ul class="bjs-breadcrumbs"></ul>'),o=n.getContainer(),s=St(o);o.appendChild(i);var c=[];e.on("element.changed",function(f){var d=f.element,h=ue(d),v=We(c,function(y){return y===h});v&&u()});function u(f){f&&(c=O3(f));var d=c.flatMap(function(v){var y=n.findRoot(hr(v))||n.findRoot(v.id);if(!y&&T(v,"bpmn:Process")){var _=t.find(function(S){var O=ue(S);return O&&O.get("processRef")===v});y=_&&n.findRoot(_.id)}if(!y)return[];var b=Lw(v.name||v.id),w=ht('<li><span class="bjs-crumb"><a title="'+b+'">'+b+"</a></span></li>");return w.addEventListener("click",function(){n.setRootElement(y)}),w});i.innerHTML="";var h=d.length>1;s.toggle(D3,h),d.forEach(function(v){i.appendChild(v)})}e.on("root.set",function(f){u(f.element)})}jw.$inject=["eventBus","elementRegistry","canvas"];function O3(e){for(var t=ue(e),n=[],i=t;i;i=i.$parent)(T(i,"bpmn:SubProcess")||T(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function Hw(e,t){var n=null,i=new N3;e.on("root.set",function(o){var s=o.element,c=t.viewbox(),u=i.get(s);if(i.set(n,{x:c.x,y:c.y,zoom:c.scale}),n=s,!(!T(s,"bpmn:SubProcess")&&!u)){u=u||{x:0,y:0,zoom:1};var f=(c.x-u.x)*c.scale,d=(c.y-u.y)*c.scale;(f!==0||d!==0)&&t.scroll({dx:f,dy:d}),u.zoom!==c.scale&&t.zoom(u.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}Hw.$inject=["eventBus","canvas"];function N3(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var tx={x:180,y:160};function fo(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,o){n._handleImport(o.definitions)})}fo.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};fo.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(s){var c=s.bpmnElement;if(c){var u=c.$parent;T(c,"bpmn:SubProcess")&&!s.isExpanded&&n.push(c),B3(c,e)&&i.push({diElement:s,parent:u})}});var o=[];return n.forEach(function(s){if(!t._processToDiagramMap[s.id]){var c=t._createDiagram(s);t._processToDiagramMap[s.id]=c,o.push(c)}}),i.forEach(function(s){for(var c=s.diElement,u=s.parent;u&&n.indexOf(u)===-1;)u=u.$parent;if(u){var f=t._processToDiagramMap[u.id];t._moveToDiPlane(c,f.plane)}}),o};fo.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=P3(e),i={x:n.x-tx.x,y:n.y-tx.y};t.forEach(function(o){o.waypoint?o.waypoint.forEach(function(s){s.x=s.x-i.x,s.y=s.y-i.y}):o.bounds&&(o.bounds.x=o.bounds.x-i.x,o.bounds.y=o.bounds.y-i.y)})};fo.prototype._moveToDiPlane=function(e,t){var n=$w(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};fo.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};fo.$inject=["eventBus","moddle"];function $w(e){return T(e,"bpmndi:BPMNDiagram")?e:$w(e.$parent)}function P3(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=Se(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),vp(t)}function B3(e,t){var n=e.$parent;return!(!T(n,"bpmn:SubProcess")||n===t.bpmnElement||He(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var cf=250,L3='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',k3="bjs-drilldown-empty";function ma(e,t,n,i,o){ce.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=o;var s=this;this.executed("shape.toggleCollapse",cf,function(c){var u=c.shape;s._canDrillDown(u)?s._addOverlay(u):s._removeOverlay(u)},!0),this.reverted("shape.toggleCollapse",cf,function(c){var u=c.shape;s._canDrillDown(u)?s._addOverlay(u):s._removeOverlay(u)},!0),this.executed(["shape.create","shape.move","shape.delete"],cf,function(c){var u=c.oldParent,f=c.newParent||c.parent,d=c.shape;s._canDrillDown(d)&&s._addOverlay(d),s._updateDrilldownOverlay(u),s._updateDrilldownOverlay(f),s._updateDrilldownOverlay(d)},!0),this.reverted(["shape.create","shape.move","shape.delete"],cf,function(c){var u=c.oldParent,f=c.newParent||c.parent,d=c.shape;s._canDrillDown(d)&&s._addOverlay(d),s._updateDrilldownOverlay(u),s._updateDrilldownOverlay(f),s._updateDrilldownOverlay(d)},!0),t.on("import.render.complete",function(){n.filter(function(c){return s._canDrillDown(c)}).map(function(c){s._addOverlay(c)})})}ve(ma,ce);ma.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};ma.prototype._canDrillDown=function(e){var t=this._canvas;return T(e,"bpmn:SubProcess")&&t.findRoot(hr(e))};ma.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=ue(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var o=n&&n.get("flowElements")&&n.get("flowElements").length;St(i.html).toggle(k3,!o)}};ma.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=ue(e),o=n.get({element:e,type:"drilldown"});o.length&&this._removeOverlay(e);var s=ht('<button type="button" class="bjs-drilldown">'+L3+"</button>"),c=i.get("name")||i.get("id"),u=this._translate("Open {element}",{element:c});s.setAttribute("title",u),s.addEventListener("click",function(){t.setRootElement(t.findRoot(hr(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:s}),this._updateOverlayVisibility(e)};ma.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};ma.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const z3={__depends__:[wp,Jv,C3],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",jw],drilldownCentering:["type",Hw],drilldownOverlayBehavior:["type",ma],subprocessCompatibility:["type",fo]};function nx(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function As(e){return e.originalEvent||e.srcEvent}function Pm(e){nx(e),nx(As(e))}function ao(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Iw(){return/mac/i.test(navigator.platform)}function Uw(e,t){return(As(e)||e).button===t}function va(e){return Uw(e,0)}function j3(e){return Uw(e,1)}function sc(e){var t=As(e)||e;return va(e)?Iw()?t.metaKey:t.ctrlKey:!1}function Jf(e){var t=As(e)||e;return va(e)&&t.shiftKey}function H3(e){return!0}function uf(e){return va(e)||j3(e)}var ix=500;function Gw(e,t,n){var i=this;function o(j,Q,J){if(!u(j,Q)){var le,ee,pe;J?ee=t.getGraphics(J):(le=Q.delegateTarget||Q.target,le&&(ee=le,J=t.get(ee))),!(!ee||!J)&&(pe=e.fire(j,{element:J,gfx:ee,originalEvent:Q}),pe===!1&&(Q.stopPropagation(),Q.preventDefault()))}}var s={};function c(j){return s[j]}function u(j,Q){var J=d[j]||va;return!J(Q)}var f={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},d={"element.contextmenu":H3,"element.mousedown":uf,"element.mouseup":uf,"element.click":uf,"element.dblclick":uf};function h(j,Q,J){var le=f[j];if(!le)throw new Error("unmapped DOM event name <"+j+">");return o(le,Q,J)}var v="svg, .djs-element";function y(j,Q,J,le){var ee=s[J]=function(pe){o(J,pe)};le&&(d[J]=le),ee.$delegate=jn.bind(j,v,Q,ee)}function _(j,Q,J){var le=c(J);le&&jn.unbind(j,Q,le.$delegate)}function b(j){z(f,function(Q,J){y(j,J,Q)})}function w(j){z(f,function(Q,J){_(j,J,Q)})}e.on("canvas.destroy",function(j){w(j.svg)}),e.on("canvas.init",function(j){b(j.svg)}),e.on(["shape.added","connection.added"],function(j){var Q=j.element,J=j.gfx;e.fire("interactionEvents.createHit",{element:Q,gfx:J})}),e.on(["shape.changed","connection.changed"],ix,function(j){var Q=j.element,J=j.gfx;e.fire("interactionEvents.updateHit",{element:Q,gfx:J})}),e.on("interactionEvents.createHit",ix,function(j){var Q=j.element,J=j.gfx;i.createDefaultHit(Q,J)}),e.on("interactionEvents.updateHit",function(j){var Q=j.element,J=j.gfx;i.updateDefaultHit(Q,J)});var S=D("djs-hit djs-hit-stroke"),O=D("djs-hit djs-hit-click-stroke"),N=D("djs-hit djs-hit-all"),A=D("djs-hit djs-hit-no-move"),C={all:N,"click-stroke":O,stroke:S,"no-move":A};function D(j,Q){return Q=I({stroke:"white",strokeWidth:15},Q||{}),n.cls(j,["no-fill","no-border"],Q)}function B(j,Q){var J=C[Q];if(!J)throw new Error("invalid hit type <"+Q+">");return he(j,J),j}function F(j,Q){De(j,Q)}this.removeHits=function(j){var Q=Jm(".djs-hit",j);z(Q,$t)},this.createDefaultHit=function(j,Q){var J=j.waypoints,le=j.isFrame,ee;return J?this.createWaypointsHit(Q,J):(ee=le?"stroke":"all",this.createBoxHit(Q,ee,{width:j.width,height:j.height}))},this.createWaypointsHit=function(j,Q){var J=hp(Q);return B(J,"stroke"),F(j,J),J},this.createBoxHit=function(j,Q,J){J=I({x:0,y:0},J);var le=Ee("rect");return B(le,Q),he(le,J),F(j,le),le},this.updateDefaultHit=function(j,Q){var J=ot(".djs-hit",Q);if(J)return j.waypoints?GS(J,j.waypoints):he(J,{width:j.width,height:j.height}),J},this.fire=o,this.triggerMouseEvent=h,this.mouseHandler=c,this.registerEvent=y,this.unregisterEvent=_}Gw.$inject=["eventBus","elementRegistry","styles"];const Rp={__init__:["interactionEvents"],interactionEvents:["type",Gw]};function Ms(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var o=i.element;n.deselect(o)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Ms.$inject=["eventBus","canvas"];Ms.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Ms.prototype.get=function(){return this._selectedElements};Ms.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Ms.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();Ae(e)||(e=e?[e]:[]);var o=this._canvas,s=o.getRootElement();e=e.filter(function(c){var u=o.findRoot(c);return s===u}),t?z(e,function(c){n.indexOf(c)===-1&&n.push(c)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var rx="hover",ax="selected";function Vw(e,t){this._canvas=e;function n(o,s){e.addMarker(o,s)}function i(o,s){e.removeMarker(o,s)}t.on("element.hover",function(o){n(o.element,rx)}),t.on("element.out",function(o){i(o.element,rx)}),t.on("selection.changed",function(o){function s(d){i(d,ax)}function c(d){n(d,ax)}var u=o.oldSelection,f=o.newSelection;z(u,function(d){f.indexOf(d)===-1&&s(d)}),z(f,function(d){u.indexOf(d)===-1&&c(d)})})}Vw.$inject=["canvas","eventBus"];function Fw(e,t,n,i){e.on("create.end",500,function(o){var s=o.context,c=s.canExecute,u=s.elements,f=s.hints||{},d=f.autoSelect;if(c){if(d===!1)return;Ae(d)?t.select(d):t.select(u.filter($3))}}),e.on("connect.end",500,function(o){var s=o.context,c=s.connection;c&&t.select(c)}),e.on("shape.move.end",500,function(o){var s=o.previousSelection||[],c=i.get(o.context.shape.id),u=We(s,function(f){return c.id===f.id});u||t.select(c)}),e.on("element.click",function(o){if(va(o)){var s=o.element;s===n.getRootElement()&&(s=null);var c=t.isSelected(s),u=t.get().length>1,f=Jf(o);if(c&&u)return f?t.deselect(s):t.select(s);c?t.deselect(s):t.select(s,f)}})}Fw.$inject=["eventBus","selection","canvas","elementRegistry"];function $3(e){return!e.hidden}const Di={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Rp],selection:["type",Ms],selectionVisuals:["type",Vw],selectionBehavior:["type",Fw]};function ga(e){_t.call(this,e)}ve(ga,_t);ga.prototype._modules=[E3,z3,wp,Di,xp];ga.prototype._moddleExtensions={};var I3=["c","C"],U3=["v","V"],G3=["y","Y"],Yw=["z","Z"];function V3(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function hi(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Kt(e,t){return e=Ae(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function tg(e){return e.shiftKey}function F3(e){return hi(e)&&Kt(I3,e)}function Y3(e){return hi(e)&&Kt(U3,e)}function q3(e){return hi(e)&&!tg(e)&&Kt(Yw,e)}function X3(e){return hi(e)&&(Kt(G3,e)||Kt(Yw,e)&&tg(e))}var Tp="keyboard.keydown",K3="keyboard.keyup",W3=1e3,qw="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function Sn(e,t){var n=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(qw));var i=e&&e.bind!==!1;t.on("canvas.init",function(o){n._target=o.svg,i&&n.bind(),n._fire("init")})}Sn.$inject=["config.keyboard","eventBus"];Sn.prototype._keydownHandler=function(e){this._keyHandler(e,Tp)};Sn.prototype._keyupHandler=function(e){this._keyHandler(e,K3)};Sn.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||Tp,i),n&&e.preventDefault()}};Sn.prototype._isEventIgnored=function(e){return!1};Sn.prototype.bind=function(e){e&&console.error("unsupported argument <node>",new Error(qw)),this.unbind(),e=this._node=this._target,Le.bind(e,"keydown",this._keydownHandler),Le.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Sn.prototype.getBinding=function(){return this._node};Sn.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),Le.unbind(e,"keydown",this._keydownHandler),Le.unbind(e,"keyup",this._keyupHandler)),this._node=null};Sn.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Sn.prototype.addListener=function(e,t,n){Ft(e)&&(n=t,t=e,e=W3),this._eventBus.on(n||Tp,e,t)};Sn.prototype.removeListener=function(e,t){this._eventBus.off(t||Tp,e)};Sn.prototype.hasModifier=V3;Sn.prototype.isCmd=hi;Sn.prototype.isShift=tg;Sn.prototype.isKey=Kt;var Z3=500;function Ds(e,t){var n=this;e.on("editorActions.init",Z3,function(i){var o=i.editorActions;n.registerBindings(t,o)})}Ds.$inject=["eventBus","keyboard"];Ds.prototype.registerBindings=function(e,t){function n(i,o){t.isRegistered(i)&&e.addListener(o)}n("undo",function(i){var o=i.keyEvent;if(q3(o))return t.trigger("undo"),!0}),n("redo",function(i){var o=i.keyEvent;if(X3(o))return t.trigger("redo"),!0}),n("copy",function(i){var o=i.keyEvent;if(F3(o))return t.trigger("copy"),!0}),n("paste",function(i){var o=i.keyEvent;if(Y3(o))return t.trigger("paste"),!0}),n("stepZoom",function(i){var o=i.keyEvent;if(Kt(["+","Add","="],o)&&hi(o))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var o=i.keyEvent;if(Kt(["-","Subtract"],o)&&hi(o))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var o=i.keyEvent;if(Kt("0",o)&&hi(o))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var o=i.keyEvent;if(Kt(["Backspace","Delete","Del"],o))return t.trigger("removeSelection"),!0})};const ng={__init__:["keyboard","keyboardBindings"],keyboard:["type",Sn],keyboardBindings:["type",Ds]};var Q3={moveSpeed:50,moveSpeedAccelerated:200};function Xw(e,t,n){var i=this;this._config=I({},Q3,e||{}),t.addListener(o);function o(s){var c=s.keyEvent,u=i._config;if(t.isCmd(c)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],c)){var f=t.isShift(c)?u.moveSpeedAccelerated:u.moveSpeed,d;switch(c.key){case"ArrowLeft":case"Left":d="left";break;case"ArrowUp":case"Up":d="up";break;case"ArrowRight":case"Right":d="right";break;case"ArrowDown":case"Down":d="down";break}return i.moveCanvas({speed:f,direction:d}),!0}}this.moveCanvas=function(s){var c=0,u=0,f=s.speed,d=f/Math.min(Math.sqrt(n.viewbox().scale),1);switch(s.direction){case"left":c=d;break;case"up":u=d;break;case"right":c=-d;break;case"down":u=-d;break}n.scroll({dx:c,dy:u})}}Xw.$inject=["config.keyboardMove","keyboard","canvas"];const Kw={__depends__:[ng],__init__:["keyboardMove"],keyboardMove:["type",Xw]};var J3=/^djs-cursor-.*$/;function Cp(e){var t=St(document.body);t.removeMatching(J3),e&&t.add("djs-cursor-"+e)}function Ww(){Cp(null)}var e5=5e3;function Zw(e,t){t=t||"element.click";function n(){return!1}return e.once(t,e5,n),function(){e.off(t,n)}}function ec(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Ci(e,t){return{x:e.x-t.x,y:e.y-t.y}}var t5=15;function Qw(e,t){var n;function i(u){return c(u.originalEvent)}e.on("canvas.focus.changed",function(u){u.focused?e.on("element.mousedown",500,i):e.off("element.mousedown",i)});function o(u){var f=n.start,d=n.button,h=ao(u),v=Ci(h,f);if(!n.dragging&&n5(v)>t5&&(n.dragging=!0,d===0&&Zw(e),Cp("grab")),n.dragging){var y=n.last||n.start;v=Ci(h,y),t.scroll({dx:v.x,dy:v.y}),n.last=h}u.preventDefault()}function s(u){Le.unbind(document,"mousemove",o),Le.unbind(document,"mouseup",s),n=null,Ww()}function c(u){if(!ws(u.target,".djs-draggable")){var f=u.button;if(!(f>=2||u.ctrlKey||u.shiftKey||u.altKey))return n={button:f,start:ao(u)},Le.bind(document,"mousemove",o),Le.bind(document,"mouseup",s),!0}}this.isActive=function(){return!!n}}Qw.$inject=["eventBus","canvas"];function n5(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const Jw={__init__:["moveCanvas"],moveCanvas:["type",Qw]};function uv(e){return Math.log(e)/Math.log(10)}function eR(e,t){var n=uv(e.min),i=uv(e.max),o=Math.abs(n)+Math.abs(i);return o/t}function i5(e,t){return Math.max(e.min,Math.min(e.max,t))}var r5=Math.sign||function(e){return e>=0?1:-1},ig={min:.2,max:4},tR=10,a5=.1,o5=.75;function Ki(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=An(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||o5;var i=this;t.on("canvas.focus.changed",function(o){i._init(o.focused&&e.enabled!==!1)})}Ki.$inject=["config.zoomScroll","eventBus","canvas"];Ki.prototype.scroll=function(t){this._canvas.scroll(t)};Ki.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Ki.prototype.zoom=function(t,n){var i=eR(ig,tR*2);this._totalDelta+=t,Math.abs(this._totalDelta)>a5&&(this._zoom(t,n,i),this._totalDelta=0)};Ki.prototype._handleWheel=function(t){if(this._canvas.isFocused()){var n=this._container;t.preventDefault();var i=t.ctrlKey||Iw()&&t.metaKey,o=t.shiftKey,s=-1*this._scale,c;if(i?s*=t.deltaMode===0?.02:.32:s*=t.deltaMode===0?1:16,i){var u=n.getBoundingClientRect(),f={x:t.clientX-u.left,y:t.clientY-u.top};c=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*r5(t.deltaY)*s,this.zoom(c,f)}else o?c={dx:s*t.deltaY,dy:0}:c={dx:s*t.deltaX,dy:s*t.deltaY},this.scroll(c)}};Ki.prototype.stepZoom=function(t,n){var i=eR(ig,tR);this._zoom(t,n,i)};Ki.prototype._zoom=function(e,t,n){var i=this._canvas,o=e>0?1:-1,s=uv(i.zoom()),c=Math.round(s/n)*n;c+=n*o;var u=Math.pow(10,c);i.zoom(i5(ig,u),t)};Ki.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,o=this._enabled;return typeof t>"u"&&(t=!o),o!==t&&Le[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};Ki.prototype._init=function(e){this.toggle(e)};const nR={__init__:["zoomScroll"],zoomScroll:["type",Ki]};function lc(e){ga.call(this,e)}ve(lc,ga);lc.prototype._navigationModules=[Kw,Jw,nR];lc.prototype._modules=[].concat(ga.prototype._modules,lc.prototype._navigationModules);function Bm(e){return e&&e[e.length-1]}function ox(e){return e.y}function sx(e){return e.x}var s5={left:sx,center:sx,right:function(e){return e.x+e.width},top:ox,middle:ox,bottom:function(e){return e.y+e.height}};function Os(e,t){this._modeling=e,this._rules=t}Os.$inject=["modeling","rules"];Os.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};Os.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Os.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,o=n.dimension,s={},c={},u=!1,f,d,h;function v(y,_){return Math.round((y[i]+_[i]+_[o])/2)}if(this._isType(e,["left","top"]))s[e]=t[0][i];else if(this._isType(e,["right","bottom"]))h=Bm(t),s[e]=h[i]+h[o];else if(this._isType(e,["center","middle"])){if(z(t,function(y){var _=y[i]+Math.round(y[o]/2);c[_]?c[_].elements.push(y):c[_]={elements:[y],center:_}}),f=Fi(c,function(y){return y.elements.length>1&&(u=!0),y.elements.length}),u)return s[e]=Bm(f).center,s;d=t[0],t=Fi(t,function(y){return y[i]+y[o]}),h=Bm(t),s[e]=v(d,h)}return s};Os.prototype.trigger=function(e,t){var n=this._modeling,i,o=je(e,function(f){return!(f.waypoints||f.host||f.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:o}),Ae(i)&&(o=i),!(o.length<2||!i)){var s=s5[t],c=Fi(o,s),u=this._alignmentPosition(t,c);n.alignElements(c,u)}};const l5={__init__:["alignElements"],alignElements:["type",Os]},c5=new Ec;function Ns(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}Ns.$inject=["eventBus"];Ns.prototype.schedule=function(e,t=c5.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};Ns.prototype._schedule=function(e,t){const n=u5();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(o){n.reject(o)}}catch(o){console.error("Scheduler#_schedule execution failed",o)}}),promise:n.promise}};Ns.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};Ns.prototype._cancel=function(e){clearTimeout(e.executionId)};function u5(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const f5={scheduler:["type",Ns]};var p5="djs-element-hidden",ff=".entry",d5=1e3,lx=8,h5=300;function Bt(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=i,this._current=null,this._init()}Bt.$inject=["canvas","elementRegistry","eventBus","scheduler"];Bt.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var o=i.target,s=Ae(o)?o:[o],c=s.filter(function(f){return n.includes(f)});if(c.length){e.close();var u=s.filter(function(f){return e._elementRegistry.get(f.id)});u.length&&e._updateAndOpen(u.length>1?u:u[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,i=e._current,o=Ae(i.target)?i.target:[i.target];o.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};Bt.prototype._createContainer=function(){var e=ht('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};Bt.prototype.registerProvider=function(e,t){t||(t=e,e=d5),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};Bt.prototype.getEntries=function(e){var t=this._getProviders(),n=Ae(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return z(t,function(o){if(Ft(o[n])){var s=o[n](e);Ft(s)?i=s(i):z(s,function(c,u){i[u]=c})}}),i};Bt.prototype.trigger=function(e,t,n){var i=this,o,s,c=t.delegateTarget||t.target;if(!c)return t.preventDefault();if(o=pn(c,"data-action"),s=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(o,"hover",s,n)},h5);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(o,e,s,n)};Bt.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var o=this._current.target,s=this._current.entries,c=s[e];if(c){var u=c.action;if(this._eventBus.fire("contextPad.trigger",{entry:c,event:n})!==!1){if(Ft(u)){if(t==="click")return u(n,o,i)}else if(u[t])return u[t](n,o,i);n.preventDefault()}}}};Bt.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};Bt.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Bt.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),i;z(t,function(o,s){var c=o.group||"default",u=ht(o.html||'<div class="entry" draggable="true"></div>'),f;pn(u,"data-action",s),f=ot("[data-group="+oc(c)+"]",n),f||(f=ht('<div class="group"></div>'),pn(f,"data-group",c),n.appendChild(f)),f.appendChild(u),o.className&&m5(u,o.className),o.title&&pn(u,"title",o.title),o.imageUrl&&(i=ht("<img>"),pn(i,"src",o.imageUrl),i.style.width="100%",i.style.height="100%",u.appendChild(i))}),St(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};Bt.prototype._createHtml=function(e){var t=this,n=ht('<div class="djs-context-pad"></div>');return jn.bind(n,ff,"click",function(i){t.trigger("click",i)}),jn.bind(n,ff,"dragstart",function(i){t.trigger("dragstart",i)}),jn.bind(n,ff,"mouseover",function(i){t.trigger("mouseover",i)}),jn.bind(n,ff,"mouseout",function(i){t.trigger("mouseout",i)}),Le.bind(n,"mousedown",function(i){i.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};Bt.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&g5(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};Bt.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};Bt.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return Ae(e)!==Ae(n)?!1:Ae(e)?e.length===n.length&&oo(e,function(i){return n.includes(i)}):n===e};Bt.prototype.isShown=function(){return this.isOpen()&&St(this._current.html).has("open")};Bt.prototype.show=function(){this.isOpen()&&(St(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};Bt.prototype.hide=function(){this.isOpen()&&(St(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};Bt.prototype._getPosition=function(e){if(!Ae(e)&&st(e)){var t=this._canvas.viewbox(),n=v5(e),i=n.x*t.scale-t.x*t.scale,o=n.y*t.scale-t.y*t.scale;return{left:i+lx*this._canvas.zoom(),top:o}}var s=this._canvas.getContainer(),c=s.getBoundingClientRect(),u=this._getTargetBounds(e);return{left:u.right-c.left+lx*this._canvas.zoom(),top:u.top-c.top}};Bt.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(i){i in n&&(t.style[i]=n[i]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};Bt.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,i=Ae(n)?n:[n],o=i.some(function(s){return t._canvas.hasMarker(s,p5)});o?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};Bt.prototype._getTargetBounds=function(e){var t=this,n=Ae(e)?e:[e],i=n.map(function(o){return t._canvas.getGraphics(o)});return i.reduce(function(o,s){const c=s.getBoundingClientRect();return o.top=Math.min(o.top,c.top),o.right=Math.max(o.right,c.right),o.bottom=Math.max(o.bottom,c.bottom),o.left=Math.min(o.left,c.left),o.x=o.left,o.y=o.top,o.width=o.right-o.left,o.height=o.bottom-o.top,o},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function m5(e,t){var n=St(e);t=Ae(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function v5(e){return e.waypoints[e.waypoints.length-1]}function g5(e,t){return e=Ae(e)?e:[e],t=Ae(t)?t:[t],e.length===t.length&&oo(e,function(n){return t.includes(n)})}const iR={__depends__:[Rp,f5,wp],contextPad:["type",Bt]};var Ap,yt,rR,Qa,cx,aR,oR,sR,rg,fv,pv,cc={},lR=[],y5=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Mp=Array.isArray;function vr(e,t){for(var n in t)e[n]=t[n];return e}function ag(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function cR(e,t,n){var i,o,s,c={};for(s in t)s=="key"?i=t[s]:s=="ref"?o=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?Ap.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return jf(e,c,i,o,null)}function jf(e,t,n,i,o){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++rR,__i:-1,__u:0};return o==null&&yt.vnode!=null&&yt.vnode(s),s}function Dp(e){return e.children}function Hf(e,t){this.props=e,this.context=t}function ms(e,t){if(t==null)return e.__?ms(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ms(e):null}function uR(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return uR(e)}}function ux(e){(!e.__d&&(e.__d=!0)&&Qa.push(e)&&!ep.__r++||cx!=yt.debounceRendering)&&((cx=yt.debounceRendering)||aR)(ep)}function ep(){for(var e,t,n,i,o,s,c,u=1;Qa.length;)Qa.length>u&&Qa.sort(oR),e=Qa.shift(),u=Qa.length,e.__d&&(n=void 0,o=(i=(t=e).__v).__e,s=[],c=[],t.__P&&((n=vr({},i)).__v=i.__v+1,yt.vnode&&yt.vnode(n),og(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,s,o??ms(i),!!(32&i.__u),c),n.__v=i.__v,n.__.__k[n.__i]=n,dR(s,n,c),n.__e!=o&&uR(n)));ep.__r=0}function fR(e,t,n,i,o,s,c,u,f,d,h){var v,y,_,b,w,S,O,N=i&&i.__k||lR,A=t.length;for(f=_5(n,t,N,f,A),v=0;v<A;v++)(_=n.__k[v])!=null&&(y=_.__i==-1?cc:N[_.__i]||cc,_.__i=v,S=og(e,_,y,o,s,c,u,f,d,h),b=_.__e,_.ref&&y.ref!=_.ref&&(y.ref&&sg(y.ref,null,_),h.push(_.ref,_.__c||b,_)),w==null&&b!=null&&(w=b),(O=!!(4&_.__u))||y.__k===_.__k?f=pR(_,f,e,O):typeof _.type=="function"&&S!==void 0?f=S:b&&(f=b.nextSibling),_.__u&=-7);return n.__e=w,f}function _5(e,t,n,i,o){var s,c,u,f,d,h=n.length,v=h,y=0;for(e.__k=new Array(o),s=0;s<o;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(f=s+y,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?jf(null,c,null,null,null):Mp(c)?jf(Dp,{children:c},null,null,null):c.constructor==null&&c.__b>0?jf(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,u=null,(d=c.__i=b5(c,n,f,v))!=-1&&(v--,(u=n[d])&&(u.__u|=2)),u==null||u.__v==null?(d==-1&&(o>h?y--:o<h&&y++),typeof c.type!="function"&&(c.__u|=4)):d!=f&&(d==f-1?y--:d==f+1?y++:(d>f?y--:y++,c.__u|=4))):e.__k[s]=null;if(v)for(s=0;s<h;s++)(u=n[s])!=null&&(2&u.__u)==0&&(u.__e==i&&(i=ms(u)),mR(u,u));return i}function pR(e,t,n,i){var o,s;if(typeof e.type=="function"){for(o=e.__k,s=0;o&&s<o.length;s++)o[s]&&(o[s].__=e,t=pR(o[s],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=ms(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function b5(e,t,n,i){var o,s,c,u=e.key,f=e.type,d=t[n],h=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||h&&u==d.key&&f==d.type)return n;if(i>(h?1:0)){for(o=n-1,s=n+1;o>=0||s<t.length;)if((d=t[c=o>=0?o--:s++])!=null&&(2&d.__u)==0&&u==d.key&&f==d.type)return c}return-1}function fx(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||y5.test(t)?n:n+"px"}function pf(e,t,n,i,o){var s,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||fx(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||fx(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(sR,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i?n.u=i.u:(n.u=rg,e.addEventListener(t,s?pv:fv,s)):e.removeEventListener(t,s?pv:fv,s);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function px(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=rg++;else if(t.t<n.u)return;return n(yt.event?yt.event(t):t)}}}function og(e,t,n,i,o,s,c,u,f,d){var h,v,y,_,b,w,S,O,N,A,C,D,B,F,j,Q,J,le=t.type;if(t.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),s=[u=t.__e=n.__e]),(h=yt.__b)&&h(t);e:if(typeof le=="function")try{if(O=t.props,N="prototype"in le&&le.prototype.render,A=(h=le.contextType)&&i[h.__c],C=h?A?A.props.value:h.__:i,n.__c?S=(v=t.__c=n.__c).__=v.__E:(N?t.__c=v=new le(O,C):(t.__c=v=new Hf(O,C),v.constructor=le,v.render=x5),A&&A.sub(v),v.props=O,v.state||(v.state={}),v.context=C,v.__n=i,y=v.__d=!0,v.__h=[],v._sb=[]),N&&v.__s==null&&(v.__s=v.state),N&&le.getDerivedStateFromProps!=null&&(v.__s==v.state&&(v.__s=vr({},v.__s)),vr(v.__s,le.getDerivedStateFromProps(O,v.__s))),_=v.props,b=v.state,v.__v=t,y)N&&le.getDerivedStateFromProps==null&&v.componentWillMount!=null&&v.componentWillMount(),N&&v.componentDidMount!=null&&v.__h.push(v.componentDidMount);else{if(N&&le.getDerivedStateFromProps==null&&O!==_&&v.componentWillReceiveProps!=null&&v.componentWillReceiveProps(O,C),!v.__e&&v.shouldComponentUpdate!=null&&v.shouldComponentUpdate(O,v.__s,C)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(v.props=O,v.state=v.__s,v.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(ee){ee&&(ee.__=t)}),D=0;D<v._sb.length;D++)v.__h.push(v._sb[D]);v._sb=[],v.__h.length&&c.push(v);break e}v.componentWillUpdate!=null&&v.componentWillUpdate(O,v.__s,C),N&&v.componentDidUpdate!=null&&v.__h.push(function(){v.componentDidUpdate(_,b,w)})}if(v.context=C,v.props=O,v.__P=e,v.__e=!1,B=yt.__r,F=0,N){for(v.state=v.__s,v.__d=!1,B&&B(t),h=v.render(v.props,v.state,v.context),j=0;j<v._sb.length;j++)v.__h.push(v._sb[j]);v._sb=[]}else do v.__d=!1,B&&B(t),h=v.render(v.props,v.state,v.context),v.state=v.__s;while(v.__d&&++F<25);v.state=v.__s,v.getChildContext!=null&&(i=vr(vr({},i),v.getChildContext())),N&&!y&&v.getSnapshotBeforeUpdate!=null&&(w=v.getSnapshotBeforeUpdate(_,b)),Q=h,h!=null&&h.type===Dp&&h.key==null&&(Q=hR(h.props.children)),u=fR(e,Mp(Q)?Q:[Q],t,n,i,o,s,c,u,f,d),v.base=t.__e,t.__u&=-161,v.__h.length&&c.push(v),S&&(v.__E=v.__=null)}catch(ee){if(t.__v=null,f||s!=null)if(ee.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;s[s.indexOf(u)]=null,t.__e=u}else{for(J=s.length;J--;)ag(s[J]);dv(t)}else t.__e=n.__e,t.__k=n.__k,ee.then||dv(t);yt.__e(ee,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=E5(n.__e,t,n,i,o,s,c,f,d);return(h=yt.diffed)&&h(t),128&t.__u?void 0:u}function dv(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(dv)}function dR(e,t,n){for(var i=0;i<n.length;i++)sg(n[i],n[++i],n[++i]);yt.__c&&yt.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){yt.__e(s,o.__v)}})}function hR(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Mp(e)?e.map(hR):vr({},e)}function E5(e,t,n,i,o,s,c,u,f){var d,h,v,y,_,b,w,S=n.props,O=t.props,N=t.type;if(N=="svg"?o="http://www.w3.org/2000/svg":N=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(d=0;d<s.length;d++)if((_=s[d])&&"setAttribute"in _==!!N&&(N?_.localName==N:_.nodeType==3)){e=_,s[d]=null;break}}if(e==null){if(N==null)return document.createTextNode(O);e=document.createElementNS(o,N,O.is&&O),u&&(yt.__m&&yt.__m(t,s),u=!1),s=null}if(N==null)S===O||u&&e.data==O||(e.data=O);else{if(s=s&&Ap.call(e.childNodes),S=n.props||cc,!u&&s!=null)for(S={},d=0;d<e.attributes.length;d++)S[(_=e.attributes[d]).name]=_.value;for(d in S)if(_=S[d],d!="children"){if(d=="dangerouslySetInnerHTML")v=_;else if(!(d in O)){if(d=="value"&&"defaultValue"in O||d=="checked"&&"defaultChecked"in O)continue;pf(e,d,null,_,o)}}for(d in O)_=O[d],d=="children"?y=_:d=="dangerouslySetInnerHTML"?h=_:d=="value"?b=_:d=="checked"?w=_:u&&typeof _!="function"||S[d]===_||pf(e,d,_,S[d],o);if(h)u||v&&(h.__html==v.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(v&&(e.innerHTML=""),fR(t.type=="template"?e.content:e,Mp(y)?y:[y],t,n,i,N=="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,c,s?s[0]:n.__k&&ms(n,0),u,f),s!=null)for(d=s.length;d--;)ag(s[d]);u||(d="value",N=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[d]||N=="progress"&&!b||N=="option"&&b!=S[d])&&pf(e,d,b,S[d],o),d="checked",w!=null&&w!=e[d]&&pf(e,d,w,S[d],o))}return e}function sg(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(o){yt.__e(o,n)}}function mR(e,t,n){var i,o;if(yt.unmount&&yt.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||sg(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){yt.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&mR(i[o],t,n||typeof e.type!="function");n||ag(e.__e),e.__c=e.__=e.__e=void 0}function x5(e,t,n){return this.constructor(e,n)}function vR(e,t,n){var i,o,s,c;t==document&&(t=document.documentElement),yt.__&&yt.__(e,t),o=(i=!1)?null:t.__k,s=[],c=[],og(t,e=t.__k=cR(Dp,null,[e]),o||cc,cc,t.namespaceURI,o?null:t.firstChild?Ap.call(t.childNodes):null,s,o?o.__e:t.firstChild,i,c),dR(s,e,c)}Ap=lR.slice,yt={__e:function(e,t,n,i){for(var o,s,c;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),c=o.__d),c)return o.__E=o}catch(u){e=u}throw e}},rR=0,Hf.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=vr({},this.state),typeof e=="function"&&(e=e(vr({},n),this.props)),e&&vr(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ux(this))},Hf.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ux(this))},Hf.prototype.render=Dp,Qa=[],aR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,oR=function(e,t){return e.__v.__b-t.__v.__b},ep.__r=0,sR=/(PointerCapture)$|Capture$/i,rg=0,fv=px(!1),pv=px(!0);var gR=function(e,t,n,i){var o;t[0]=0;for(var s=1;s<t.length;s++){var c=t[s++],u=t[s]?(t[0]|=c?1:2,n[t[s++]]):t[++s];c===3?i[0]=u:c===4?i[1]=Object.assign(i[1]||{},u):c===5?(i[1]=i[1]||{})[t[++s]]=u:c===6?i[1][t[++s]]+=u+"":c?(o=e.apply(u,gR(e,u,n,["",null])),i.push(o),u[0]?t[0]|=2:(t[s-2]=0,t[s]=o)):i.push(u)}return i},dx=new Map;function S5(e){var t=dx.get(this);return t||(t=new Map,dx.set(this,t)),(t=gR(this,t.get(e)||(t.set(e,t=(function(n){for(var i,o,s=1,c="",u="",f=[0],d=function(y){s===1&&(y||(c=c.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?f.push(0,y,c):s===3&&(y||c)?(f.push(3,y,c),s=2):s===2&&c==="..."&&y?f.push(4,y,0):s===2&&c&&!y?f.push(5,0,!0,c):s>=5&&((c||!y&&s===5)&&(f.push(s,0,c,o),s=6),y&&(f.push(s,y,0,o),s=6)),c=""},h=0;h<n.length;h++){h&&(s===1&&d(),d(h));for(var v=0;v<n[h].length;v++)i=n[h][v],s===1?i==="<"?(d(),f=[f],s=3):c+=i:s===4?c==="--"&&i===">"?(s=1,c=""):c=i+c[0]:u?i===u?u="":c+=i:i==='"'||i==="'"?u=i:i===">"?(d(),s=1):s&&(i==="="?(s=5,o=c,c=""):i==="/"&&(s<5||n[h][v+1]===">")?(d(),s===3&&(f=f[0]),s=f,(f=f[0]).push(2,0,s),s=0):i===" "||i==="	"||i===`
`||i==="\r"?(d(),s=2):c+=i),s===3&&c==="!--"&&(s=4,f=f[0])}return d(),f})(e)),t),arguments,[])).length>1?t:t[0]}var Tt=S5.bind(cR),vs,Dt,Lm,hx,uc=0,yR=[],jt=yt,mx=jt.__b,vx=jt.__r,gx=jt.diffed,yx=jt.__c,_x=jt.unmount,bx=jt.__;function Op(e,t){jt.__h&&jt.__h(Dt,e,uc||t),uc=0;var n=Dt.__H||(Dt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function km(e){return uc=1,w5(bR,e)}function w5(e,t,n){var i=Op(vs++,2);if(i.t=e,!i.__c&&(i.__=[bR(void 0,t),function(u){var f=i.__N?i.__N[0]:i.__[0],d=i.t(f,u);f!==d&&(i.__N=[d,i.__[1]],i.__c.setState({}))}],i.__c=Dt,!Dt.__f)){var o=function(u,f,d){if(!i.__c.__H)return!0;var h=i.__c.__H.__.filter(function(y){return!!y.__c});if(h.every(function(y){return!y.__N}))return!s||s.call(this,u,f,d);var v=i.__c.props!==u;return h.forEach(function(y){if(y.__N){var _=y.__[0];y.__=y.__N,y.__N=void 0,_!==y.__[0]&&(v=!0)}}),s&&s.call(this,u,f,d)||v};Dt.__f=!0;var s=Dt.shouldComponentUpdate,c=Dt.componentWillUpdate;Dt.componentWillUpdate=function(u,f,d){if(this.__e){var h=s;s=void 0,o(u,f,d),s=h}c&&c.call(this,u,f,d)},Dt.shouldComponentUpdate=o}return i.__N||i.__}function hv(e,t){var n=Op(vs++,3);!jt.__s&&lg(n.__H,t)&&(n.__=e,n.u=t,Dt.__H.__h.push(n))}function mv(e,t){var n=Op(vs++,4);!jt.__s&&lg(n.__H,t)&&(n.__=e,n.u=t,Dt.__h.push(n))}function _R(e){return uc=5,gs(function(){return{current:e}},[])}function gs(e,t){var n=Op(vs++,7);return lg(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Il(e,t){return uc=8,gs(function(){return e},t)}function R5(){for(var e;e=yR.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach($f),e.__H.__h.forEach(vv),e.__H.__h=[]}catch(t){e.__H.__h=[],jt.__e(t,e.__v)}}jt.__b=function(e){Dt=null,mx&&mx(e)},jt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),bx&&bx(e,t)},jt.__r=function(e){vx&&vx(e),vs=0;var t=(Dt=e.__c).__H;t&&(Lm===Dt?(t.__h=[],Dt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach($f),t.__h.forEach(vv),t.__h=[],vs=0)),Lm=Dt},jt.diffed=function(e){gx&&gx(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(yR.push(t)!==1&&hx===jt.requestAnimationFrame||((hx=jt.requestAnimationFrame)||T5)(R5)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Lm=Dt=null},jt.__c=function(e,t){t.some(function(n){try{n.__h.forEach($f),n.__h=n.__h.filter(function(i){return!i.__||vv(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],jt.__e(i,n.__v)}}),yx&&yx(e,t)},jt.unmount=function(e){_x&&_x(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{$f(i)}catch(o){t=o}}),n.__H=void 0,t&&jt.__e(t,n.__v))};var Ex=typeof requestAnimationFrame=="function";function T5(e){var t,n=function(){clearTimeout(i),Ex&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);Ex&&(t=requestAnimationFrame(n))}function $f(e){var t=Dt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Dt=t}function vv(e){var t=Dt;e.__c=e.__(),Dt=t}function lg(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function bR(e,t){return typeof t=="function"?t(e):t}function ER(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=ER(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function tp(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=ER(e))&&(i&&(i+=" "),i+=t);return i}function C5(e){const{headerEntries:t,onSelect:n,selectedEntry:i,setSelectedEntry:o,title:s}=e,c=gs(()=>A5(t),[t]);return Tt`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${s}>${s}</h3>
      ${c.map(u=>Tt`
        <ul key=${u.id} class="djs-popup-header-group" data-header-group=${u.id}>

          ${u.entries.map(f=>Tt`
            <li key=${f.id}>
              <${f.action?"button":"span"}
                class=${M5(f,f===i)}
                onClick=${d=>f.action&&n(d,f)}
                title=${f.title||f.label}
                data-id=${f.id}
                onMouseEnter=${()=>f.action&&o(f)}
                onMouseLeave=${()=>f.action&&o(null)}
                onFocus=${()=>f.action&&o(f)}
                onBlur=${()=>f.action&&o(null)}
              >
                ${f.imageUrl&&Tt`<img class="djs-popup-entry-icon" src=${f.imageUrl} alt="" />`||f.imageHtml&&Tt`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:f.imageHtml}} />`}
                ${f.label?Tt`
                  <span class="djs-popup-label">${f.label}</span>
                `:null}
              </${f.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function A5(e){return e.reduce((t,n)=>{const i=n.group||"default",o=t.find(s=>s.id===i);return o?o.entries.push(n):t.push({id:i,entries:[n]}),t},[])}function M5(e,t){return tp("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function D5(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:o,onAction:s}=e;return Tt`
    <li
      class=${tp("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${s}
      onFocus=${i}
      onBlur=${o}
      onMouseEnter=${i}
      onMouseLeave=${o}
      onDragStart=${c=>s(c,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${tp("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&Tt`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&Tt`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?Tt`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Tt`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Tt`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${c=>c.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function O5(e){const{selectedEntry:t,setSelectedEntry:n,entries:i,...o}=e,s=_R(),c=gs(()=>N5(i),[i]);return mv(()=>{const u=s.current;if(!u)return;const f=u.querySelector(".selected");f&&P5(f)},[t]),Tt`
    <div class="djs-popup-results" ref=${s}>
      ${c.map(u=>Tt`
        ${u.name&&Tt`
          <div key=${u.id} class="entry-header" title=${u.name}>
            ${u.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${u.id}>
          ${u.entries.map(f=>Tt`
            <${D5}
              key=${f.id}
              entry=${f}
              selected=${f===t}
              onMouseEnter=${()=>n(f)}
              onMouseLeave=${()=>n(null)}
              ...${o}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function N5(e){const t=[],n=s=>t.find(c=>s.id===c.id),i=s=>!!n(s),o=s=>typeof s=="string"?{id:s}:s;return e.forEach(s=>{const c=s.group?o(s.group):{id:"default"};i(c)?n(c).entries.push(s):t.push({...c,entries:[s]})}),t}function P5(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function B5(e){const{onClose:t,onSelect:n,className:i,headerEntries:o,position:s,title:c,width:u,scale:f,search:d,emptyPlaceholder:h,searchFn:v,entries:y,onOpened:_,onClosed:b}=e,w=gs(()=>Wt(d)?y.length>5:!1,[d,y]),[S,O]=km(""),N=Il((ee,pe)=>{if(!w)return ee;if(!pe.trim())return ee.filter(({rank:Je=0})=>Je>=0);const we=ee.filter(({searchable:Je})=>Je!==!1);return v(we,pe,{keys:["label","search","description"]}).map(({item:Je})=>Je)},[w]),[A,C]=km(N(y,S)),[D,B]=km(A[0]),F=Il(ee=>{B(ee[0]),C(ee)},[D,C,B]);hv(()=>{F(N(y,S))},[S,y]);const j=Il(ee=>{let we=A.indexOf(D)+ee;we<0&&(we=A.length-1),we>=A.length&&(we=0),B(A[we])},[A,D,B]),Q=Il(ee=>{if(ee.key==="Enter"&&D)return n(ee,D);if(ee.key==="ArrowUp")return j(-1),ee.preventDefault();if(ee.key==="ArrowDown")return j(1),ee.preventDefault()},[n,D,j]),J=Il(ee=>{kS(ee.target,"input")&&O(()=>ee.target.value)},[O]);hv(()=>(_(),()=>{b()}),[]);const le=gs(()=>c||o.length>0,[c,o]);return Tt`
    <${xx}
      onClose=${t}
      onKeyup=${J}
      onKeydown=${Q}
      className=${i}
      position=${s}
      width=${u}
      scale=${f}
    >
      ${le&&Tt`
        <${C5}
          headerEntries=${o}
          onSelect=${n}
          selectedEntry=${D}
          setSelectedEntry=${B}
          title=${c}
        />
      `}
      ${y.length>0&&Tt`
        <div class="djs-popup-body">

          ${w&&Tt`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${c}" />
          </div>
          `}

          <${O5}
            entries=${A}
            selectedEntry=${D}
            setSelectedEntry=${B}
            onAction=${n}
          />
        </div>
      `}
    ${h&&A.length===0&&Tt`
      <div class="djs-popup-no-results">${Ft(h)?h(S):h}</div>
    `}
    </${xx}>
  `}function xx(e){const{onClose:t,onKeydown:n,onKeyup:i,className:o,children:s,position:c}=e,u=_R();return mv(()=>{if(typeof c!="function")return;const f=u.current,d=c(f);f.style.left=`${d.x}px`,f.style.top=`${d.y}px`},[u.current,c]),mv(()=>{const f=u.current;if(!f)return;(f.querySelector("input")||f).focus()},[]),hv(()=>{const f=h=>{if(h.key==="Escape")return h.preventDefault(),t()},d=h=>{if(!ws(h.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",f),document.body.addEventListener("click",d),()=>{document.documentElement.removeEventListener("keydown",f),document.body.removeEventListener("click",d)}},[]),Tt`
    <div
      class=${tp("djs-popup",o)}
      style=${L5(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${u}
      tabIndex="-1"
    >
      ${s}
    </div>
  `}function L5(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var k5="data-id",xR=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],z5=1e3;function bt(e,t,n,i){this._eventBus=t,this._canvas=n,this._search=i,this._current=null;var o=Wt(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:o},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",s=>{const c=this.isOpen()&&this._current.target;s.element===c&&this.refresh()})}bt.$inject=["config.popupMenu","eventBus","canvas","search"];bt.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:i,emptyPlaceholder:o,options:s}=this._current,c=Object.entries(n).map(([y,_])=>({id:y,..._})),u=Object.entries(i).map(([y,_])=>({id:y,..._})),f=e&&(y=>this._ensureVisible(y,e)),d=this._updateScale(this._current.container);vR(Tt`
      <${B5}
        onClose=${y=>this.close(y)}
        onSelect=${(y,_,b)=>this.trigger(y,_,b)}
        position=${f}
        className=${t}
        entries=${c}
        headerEntries=${u}
        emptyPlaceholder=${o}
        scale=${d}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...s}}
      />
    `,this._current.container)};bt.prototype.open=function(e,t,n,i){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:o,headerEntries:s,emptyPlaceholder:c}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:o,headerEntries:s,emptyPlaceholder:c,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()};bt.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:i,emptyPlaceholder:o}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:i,emptyPlaceholder:o},this._emit("refresh"),this._render()};bt.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const i=this._getEntries(e,n),o=this._getHeaderEntries(e,n),s=this._getEmptyPlaceholder(n);return{entries:i,headerEntries:o,emptyPlaceholder:s,empty:!(Object.keys(i).length||Object.keys(o).length)}};bt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)};bt.prototype.reset=function(){const e=this._current.container;vR(null,e),Yi(e)};bt.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};bt.prototype._onOpened=function(){this._emit("opened")};bt.prototype._onClosed=function(){this._emit("closed")};bt.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=ht(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i};bt.prototype._bindAutoClose=function(){this._eventBus.once(xR,this.close,this)};bt.prototype._unbindAutoClose=function(){this._eventBus.off(xR,this.close,this)};bt.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,i,o=e;return t!==!0&&(t===!1?(n=1,i=1):(n=t.min,i=t.max),Wt(n)&&e<n&&(o=n),Wt(i)&&e>i&&(o=i)),o};bt.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),o={},s=t.x,c=t.y;return t.x+i.width>n.width&&(o.x=!0),t.y+i.height>n.height&&(o.y=!0),o.x&&o.y?(s=t.x-i.width,c=t.y-i.height):o.x?(s=t.x-i.width,c=t.y):o.y&&t.y<i.height?(s=t.x,c=10):o.y&&(s=t.x,c=t.y-i.height),t.y<n.top&&(c=t.y+i.height),{x:s,y:c}};bt.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};bt.prototype.registerProvider=function(e,t,n){n||(n=t,t=z5),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};bt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};bt.prototype._getEntries=function(e,t){var n={};return z(t,function(i){if(!i.getPopupMenuEntries){z(i.getEntries(e),function(s){var c=s.id;if(!c)throw new Error("entry ID is missing");n[c]=qi(s,["id"])});return}var o=i.getPopupMenuEntries(e);Ft(o)?n=o(n):z(o,function(s,c){n[c]=s})}),n};bt.prototype._getHeaderEntries=function(e,t){var n={};return z(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;z(i.getHeaderEntries(e),function(s){var c=s.id;if(!c)throw new Error("entry ID is missing");n[c]=qi(s,["id"])});return}var o=i.getPopupMenuHeaderEntries(e);Ft(o)?n=o(n):z(o,function(s,c){n[c]=s})}),n};bt.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>Ft(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};bt.prototype.isOpen=function(){return!!this._current};bt.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let o=ws(e.delegateTarget||e.target,".entry",!0),s=pn(o,k5);t={id:s,...this._getEntry(s)}}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(Ft(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}};bt.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};function j5(e,t,n){const{keys:i}=n;if(t=t.trim().toLowerCase(),!t)throw new Error("<pattern> must not be empty");const o=t.trim().toLowerCase().split(/\s+/);return e.flatMap(s=>{const c=H5(s,o,i);return c?{item:s,tokens:c}:[]}).sort($5(i))}function H5(e,t,n){const{matchedWords:i,tokens:o}=n.reduce((s,c)=>{const u=e[c],{tokens:f,matchedWords:d}=Ae(u)?u.reduce((h,v)=>{const{tokens:y,matchedWords:_}=Rx(v,t);return{tokens:[...h.tokens,y],matchedWords:{...h.matchedWords,..._}}},{matchedWords:{},tokens:[]}):Rx(u,t);return{tokens:{...s.tokens,[c]:f},matchedWords:{...s.matchedWords,...d}}},{matchedWords:{},tokens:{}});return Object.keys(i).length!==t.length?null:o}function $5(e){return(t,n)=>{let i=0,o=1;for(const s of e){const c=I5(t.tokens[s],n.tokens[s]);if(c!==0){i+=c*o,o*=.9;continue}const u=U5(t.item[s],n.item[s]);if(u!==0){i+=u*o,o*=.9;continue}}return i}}function I5(e,t){return Sx(t)-Sx(e)}function Sx(e){return e.reduce((t,n)=>t+SR(n),0)}function SR(e){if(Ae(e))return Math.max(...e.map(SR));const t=Math.log(e.value.length);return e.match?(e.start?e.end?131.9:7.87:e.wordStart?2.19:1)*t:-.07*t}function wx(e=""){return Ae(e)?e.join(", "):e}function U5(e,t){return wx(e).localeCompare(wx(t))}function Rx(e,t){if(!e)return{tokens:[],matchedWords:{}};const n=[],i={},o=t.map(G5),s=[`(?<all>${o.join("\\s+")})`,...o].join("|"),c=new RegExp(s,"ig");let u,f=0;for(;u=c.exec(e);){const[d]=u,h=u.index,v=u.index+d.length,y=h===0,_=v===e.length,b=!!u.groups.all,w=y||/\s/.test(e.charAt(h-1)),S=_||/\s/.test(e.charAt(v));u.index>f&&n.push({value:e.slice(f,u.index),index:f}),n.push({value:d,index:u.index,match:!0,wordStart:w,wordEnd:S,start:y,end:_,all:b});const O=b?t:[d];for(const N of O)i[N.toLowerCase()]=!0;f=u.index+d.length}return f<e.length&&n.push({value:e.slice(f),index:f}),{tokens:n,matchedWords:i}}function G5(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}const wR={search:["value",j5]},cg={__depends__:[wR],__init__:["popupMenu"],popupMenu:["type",bt]};var RR={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},V5=900;function Ps(e,t,n,i){e.registerProvider(V5,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}Ps.$inject=["contextPad","popupMenu","translate","canvas"];Ps.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&I(t,this._getEntries(e)),t};Ps.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Ps.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${RR.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);I(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}};Ps.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),o={x:i.left,y:i.bottom+t};return o};var F5=["left","center","right","top","middle","bottom"];function xc(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}xc.$inject=["popupMenu","alignElements","translate","rules"];xc.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&I(t,this._getEntries(e)),t};xc.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};xc.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,o={};return z(F5,function(s){o["align-elements-"+s]={group:"align",title:n("Align elements "+s),className:"bjs-align-elements-menu-entry",imageHtml:RR[s],action:function(){t.trigger(e,s),i.close()}}}),o};function gi(e){ce.call(this,e),this.init()}gi.$inject=["eventBus"];ve(gi,ce);gi.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(o){i.canExecute(o,t,function(s,c,u){return n(s)},!0)})};gi.prototype.init=function(){};function Np(e){gi.call(this,e)}Np.$inject=["eventBus"];ve(Np,gi);Np.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=je(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=mp(n),n.length<2?!1:n})};const Y5={__depends__:[l5,iR,cg],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Ps],alignElementsMenuProvider:["type",xc],bpmnAlignElements:["type",Np]};var q5=10,TR=50,X5=250;function ug(e,t,n,i){for(var o;o=K5(e,n,t);)n=i(t,n,o);return n}function fg(e){return function(t,n,i){var o={x:n.x,y:n.y};return["x","y"].forEach(function(s){var c=e[s];if(c){var u=s==="x"?"width":"height",f=c.margin,d=c.minDistance;f<0?o[s]=Math.min(i[s]+f-t[u]/2,n[s]-d+f):o[s]=Math.max(i[s]+i[u]+f+t[u]/2,n[s]+d+f)}}),o}}function K5(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},o=Z5(e);return We(o,function(s){if(s===n)return!1;var c=vn(s,i,q5);return c==="intersect"})}function W5(e,t){t||(t={});function n(b){return b.source===e?1:-1}var i=t.defaultDistance||TR,o=t.direction||"e",s=t.filter,c=t.getWeight||n,u=t.maxDistance||X5,f=t.reference||"start";s||(s=eP);function d(b,w){return o==="n"?f==="start"?Se(b).top-Se(w).bottom:f==="center"?Se(b).top-Ce(w).y:Se(b).top-Se(w).top:o==="w"?f==="start"?Se(b).left-Se(w).right:f==="center"?Se(b).left-Ce(w).x:Se(b).left-Se(w).left:o==="s"?f==="start"?Se(w).top-Se(b).bottom:f==="center"?Ce(w).y-Se(b).bottom:Se(w).bottom-Se(b).bottom:f==="start"?Se(w).left-Se(b).right:f==="center"?Ce(w).x-Se(b).right:Se(w).right-Se(b).right}var h=e.incoming.filter(s).map(function(b){var w=c(b),S=w<0?d(b.source,e):d(e,b.source);return{id:b.source.id,distance:S,weight:w}}),v=e.outgoing.filter(s).map(function(b){var w=c(b),S=w>0?d(e,b.target):d(b.target,e);return{id:b.target.id,distance:S,weight:w}}),y=h.concat(v).reduce(function(b,w){return b[w.id+"__weight_"+w.weight]=w,b},{}),_=$n(y,function(b,w){var S=w.distance,O=w.weight;return S<0||S>u||(b[String(S)]||(b[String(S)]=0),b[String(S)]+=1*O,(!b.distance||b[b.distance]<b[String(S)])&&(b.distance=S)),b},{});return _.distance||i}function Z5(e){var t=zm(e);return e.host&&(t=t.concat(zm(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(zm(i))},[]))),t}function zm(e){return J5(e).concat(Q5(e))}function Q5(e){return e.incoming.map(function(t){return t.source})}function J5(e){return e.outgoing.map(function(t){return t.target})}function eP(){return!0}var tP=100;function CR(e,t,n){e.on("autoPlace",tP,function(i){var o=i.shape,s=i.source;return nP(s,o)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,o,s){e.fire("autoPlace.start",{source:i,shape:o});var c=e.fire("autoPlace",{source:i,shape:o}),u=t.appendShape(i,o,c,i.parent,s);return e.fire("autoPlace.end",{source:i,shape:u}),u}}CR.$inject=["eventBus","modeling","canvas"];function nP(e,t,n){n||(n={});var i=n.defaultDistance||TR,o=Ce(e),s=Se(e);return{x:s.right+i+t.width/2,y:o.y}}function AR(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}AR.$inject=["eventBus","selection"];const iP={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",CR],autoPlaceSelectionBehavior:["type",AR]};function ys(e,t){for(Hn(t)&&(t=[t]);e=e.parent;)if(He(e,t))return e;return null}function MR(e,t){var n=ys(e,"bpmn:Process");if(n)return!0;var i=["bpmn:Participant","bpmn:Lane"];if(n=ys(e,i),n)return Yt(n);if(He(e,i))return Yt(e);var o;for(o=ue(e);o&&!T(o,"bpmn:Process");o=o.$parent);if(!t)return!0;var s=t.find(function(c){var u=ue(c);return u&&u.get("processRef")===o});return s?Yt(s):!0}function DR(e,t,n){var i=MR(e,n);if(T(t,"bpmn:TextAnnotation"))return aP(e,t,i);if(He(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return oP(e,t,i);if(T(t,"bpmn:FlowNode"))return rP(e,t,i)}function rP(e,t,n){var i=Se(e),o=Ce(e),s=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},c=W5(e,{filter:function(_){return T(_,"bpmn:SequenceFlow")},direction:s.directionHint}),u=30,f=s.minDistance,d=s.baseOrientation;T(e,"bpmn:BoundaryEvent")&&(d=vn(e,e.host,-25),d.indexOf(s.boundaryOrientation)!==-1&&(u*=-1));var h=n?{x:i.right+c+t.width/2,y:o.y+Tx(d,f,s)}:{x:o.x+Tx(d,f,s),y:i.bottom+c+t.height/2},v={margin:u,minDistance:f},y=n?{y:v}:{x:v};return ug(e,t,h,fg(y))}function Tx(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function aP(e,t,n){var i=Se(e),o=n?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2};st(e)&&(o=Ce(e),n?(o.x+=100,o.y-=50):(o.x+=100,o.y+=50));var s={margin:n?-30:30,minDistance:20},c=n?{y:s}:{x:s};return ug(e,t,o,fg(c))}function oP(e,t,n){var i=Se(e),o=n?{x:i.right-10+t.width/2,y:i.bottom+40+t.width/2}:{x:i.left-40-t.width/2,y:i.bottom-10+t.height/2},s={margin:30,minDistance:30},c=n?{x:s}:{y:s};return ug(e,t,o,fg(c))}function OR(e,t){e.on("autoPlace",function(n){var i=n.shape,o=n.source;return DR(o,i,t)})}OR.$inject=["eventBus","elementRegistry"];const pg={__depends__:[iP],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",OR]};function wr(e,t,n,i){ce.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var o=this;this.postExecuted(["shape.create"],function(s){var c=s.context,u=c.hints||{},f=c.shape,d=c.parent||c.newParent;u.autoResize!==!1&&o._expand([f],d)}),this.postExecuted(["elements.move"],function(s){var c=s.context,u=Lv(up(c.closure.topLevel)),f=c.hints,d=f?f.autoResize:!0;if(d!==!1){var h=Ss(u,function(v){return v.parent.id});z(h,function(v,y){Ae(d)&&(v=v.filter(function(_){return We(d,Ti({id:_.id}))})),o._expand(v,y)})}}),this.postExecuted(["shape.toggleCollapse"],function(s){var c=s.context,u=c.hints,f=c.shape;u&&u.autoResize===!1||f.collapsed||o._expand(f.children||[],f)}),this.postExecuted(["shape.resize"],function(s){var c=s.context,u=c.hints,f=c.shape,d=f.parent;u&&u.autoResize===!1||d&&o._expand([f],d)})}wr.$inject=["eventBus","elementRegistry","modeling","rules"];ve(wr,ce);wr.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),o=Se(It(e)),s=Se(t),c={};return o.top-s.top<i.top&&(c.top=o.top-n.top),o.left-s.left<i.left&&(c.left=o.left-n.left),s.right-o.right<i.right&&(c.right=o.right+n.right),s.bottom-o.bottom<i.bottom&&(c.bottom=o.bottom+n.bottom),vp(I({},s,c))};wr.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(sP(i,t)){var o=lP(Ai(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:o});var s=t.parent;s&&this._expand([t],s)}}};wr.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};wr.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};wr.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function sP(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function lP(e,t){var n="";return e=Se(e),t=Se(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function Pp(e){e.invoke(wr,this)}Pp.$inject=["injector"];ve(Pp,wr);Pp.prototype.resize=function(e,t,n){T(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function Sc(e){gi.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}Sc.$inject=["eventBus"];ve(Sc,gi);Sc.prototype.canResize=function(e,t){return!1};function Bp(e,t){Sc.call(this,e),this._modeling=t}ve(Bp,Sc);Bp.$inject=["eventBus","modeling"];Bp.prototype.canResize=function(e,t){if(T(t.di,"bpmndi:BPMNPlane")||!T(t,"bpmn:Participant")&&!T(t,"bpmn:Lane")&&!T(t,"bpmn:SubProcess"))return!1;var n=!0;return z(e,function(i){if(T(i,"bpmn:Lane")||Xe(i)){n=!1;return}}),n};const cP={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Pp],bpmnAutoResizeProvider:["type",Bp]};var Cx=1500;function NR(e,t,n){var i=this,o=n.get("dragging",!1);function s(c){if(!c.hover){var u=c.originalEvent,f=i._findTargetGfx(u),d=f&&e.get(f);f&&d&&(c.stopPropagation(),o.hover({element:d,gfx:f}),o.move(u))}}o&&t.on("drag.start",function(c){t.once("drag.move",Cx,function(u){s(u)})}),(function(){var c,u;t.on("element.hover",function(f){c=f.gfx,u=f.element}),t.on("element.hover",Cx,function(f){u&&t.fire("element.out",{element:u,gfx:c})}),t.on("element.out",function(){c=null,u=null})})(),this._findTargetGfx=function(c){var u,f;if(c instanceof MouseEvent)return u=ao(c),f=document.elementFromPoint(u.x,u.y),uP(f)}}NR.$inject=["elementRegistry","eventBus","injector"];function uP(e){return ws(e,"svg, .djs-element",!0)}const fP={__init__:["hoverFix"],hoverFix:["type",NR]};var os=Math.round,Ax="djs-drag-active";function Ka(e){e.preventDefault()}function pP(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function dP(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function PR(e,t,n,i){var o={threshold:5,trapClick:!0},s;function c(A){var C=t.viewbox(),D=t._container.getBoundingClientRect();return{x:C.x+(A.x-D.left)/C.scale,y:C.y+(A.y-D.top)/C.scale}}function u(A,C){C=C||s;var D=e.createEvent(I({},C.payload,C.data,{isTouch:C.isTouch}));return e.fire("drag."+A,D)===!1?!1:e.fire(C.prefix+"."+A,D)}function f(A){var C=A.filter(function(D){return i.get(D.id)});C.length&&n.select(C)}function d(A,C){var D=s.payload,B=s.displacement,F=s.globalStart,j=ao(A),Q=Ci(j,F),J=s.localStart,le=c(j),ee=Ci(le,J);if(!s.active&&(C||dP(Q)>s.threshold)){if(I(D,{x:os(J.x+B.x),y:os(J.y+B.y),dx:0,dy:0},{originalEvent:A}),u("start")===!1)return S();s.active=!0,s.keepSelection||(D.previousSelection=n.get(),n.select(null)),s.cursor&&Cp(s.cursor),t.addMarker(t.getRootElement(),Ax)}Pm(A),s.active&&(I(D,{x:os(le.x+B.x),y:os(le.y+B.y),dx:os(ee.x),dy:os(ee.y)},{originalEvent:A}),u("move"))}function h(A){var C,D=!0;s.active&&(A&&(s.payload.originalEvent=A,Pm(A)),D=u("end")),D===!1&&u("rejected"),C=O(D!==!0),u("ended",C)}function v(A){Kt("Escape",A)&&(Ka(A),S())}function y(A){var C;s.active&&(C=Zw(e),setTimeout(C,400),Ka(A)),h(A)}function _(A){d(A)}function b(A){var C=s.payload;C.hoverGfx=A.gfx,C.hover=A.element,u("hover")}function w(A){u("out");var C=s.payload;C.hoverGfx=null,C.hover=null}function S(A){var C;if(s){var D=s.active;D&&u("cancel"),C=O(A),D&&u("canceled",C)}}function O(A){var C,D;u("cleanup"),Ww(),s.trapClick?D=y:D=h,Le.unbind(document,"mousemove",d),Le.unbind(document,"dragstart",Ka),Le.unbind(document,"selectstart",Ka),Le.unbind(document,"mousedown",D,!0),Le.unbind(document,"mouseup",D,!0),Le.unbind(document,"keyup",v),Le.unbind(document,"touchstart",_,!0),Le.unbind(document,"touchcancel",S,!0),Le.unbind(document,"touchmove",d,!0),Le.unbind(document,"touchend",h,!0),e.off("element.hover",b),e.off("element.out",w),t.removeMarker(t.getRootElement(),Ax);var B=s.payload.previousSelection;return A!==!1&&B&&!n.get().length&&f(B),C=s,s=null,C}function N(A,C,D,B){s&&S(!1),typeof C=="string"&&(B=D,D=C,C=null),B=I({},o,B||{});var F=B.data||{},j,Q,J,le,ee;B.trapClick?le=y:le=h,A?(j=As(A)||A,Q=ao(A),Pm(A),j.type==="dragstart"&&Ka(j)):(j=null,Q={x:0,y:0}),J=c(Q),C||(C=J),ee=pP(j),s=I({prefix:D,data:F,payload:{},globalStart:Q,displacement:Ci(C,J),localStart:J,isTouch:ee},B),B.manual||(ee?(Le.bind(document,"touchstart",_,!0),Le.bind(document,"touchcancel",S,!0),Le.bind(document,"touchmove",d,!0),Le.bind(document,"touchend",h,!0)):(Le.bind(document,"mousemove",d),Le.bind(document,"dragstart",Ka),Le.bind(document,"selectstart",Ka),Le.bind(document,"mousedown",le,!0),Le.bind(document,"mouseup",le,!0)),Le.bind(document,"keyup",v),e.on("element.hover",b),e.on("element.out",w)),u("init"),B.autoActivate&&d(A,!0)}e.on("diagram.destroy",S),this.init=N,this.move=d,this.hover=b,this.out=w,this.end=h,this.cancel=S,this.context=function(){return s},this.setOptions=function(A){I(o,A)}}PR.$inject=["eventBus","canvas","selection","elementRegistry"];const Rr={__depends__:[fP,Di],dragging:["type",PR]};function Bs(e,t,n){this._canvas=n,this._opts=I({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(o){var s=i._toBorderPoint(o);i.startScroll(s)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}Bs.$inject=["config.autoScroll","eventBus","canvas"];Bs.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,o=t.getContainer().getBoundingClientRect(),s=[e.x,e.y,o.width-e.x,o.height-e.y];this.stopScroll();for(var c=0,u=0,f=0;f<4;f++)hP(s[f],n.scrollThresholdOut[f],n.scrollThresholdIn[f])&&(f===0?c=n.scrollStep:f==1?u=n.scrollStep:f==2?c=-n.scrollStep:f==3&&(u=-n.scrollStep));(c!==0||u!==0)&&(t.scroll({dx:c,dy:u}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function hP(e,t,n){return t<e&&e<n}Bs.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Bs.prototype.setOptions=function(e){this._opts=I({},this._opts,e)};Bs.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=ao(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const mP={__depends__:[Rr],__init__:["autoScroll"],autoScroll:["type",Bs]};function dg(e){this._commandStack=e.get("commandStack",!1)}dg.$inject=["injector"];dg.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const Wi={__init__:["rules"],rules:["type",dg]};var df=Math.round,vP=Math.max;function gP(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function yP(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var BR=10;function _P(e,t){var n,i;for(n=0;i=e[n];n++)if(mc(i,t)<=BR)return{point:e[n],bendpoint:!0,index:n};return null}function bP(e,t){var n=KS(gP(t,BR),yP(e)),i=n[0],o=n[n.length-1],s;return i?i!==o?i.segment2!==o.segment2?(s=vP(i.segment2,o.segment2)-1,{point:e[s],bendpoint:!0,index:s}):{point:{x:df(i.x+o.x)/2,y:df(i.y+o.y)/2},index:i.segment2}:{point:{x:df(i.x),y:df(i.y)},index:i.segment2}:null}function gv(e,t){return _P(e,t)||bP(e,t)}function LR(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Mx(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function EP(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function xP(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],o=i[0].n*t[0]+i[1].n*t[1],s=i[0].lambda*t[0]+i[1].lambda*t[1];return-o/s}function hg(e,t){var n=t[0],i=t[1],o={x:i.x-n.x,y:i.y-n.y},s=xP([n.x,n.y],[o.x,o.y],[e.x,e.y]);return{x:n.x+s*o.x,y:n.y+s*o.y}}function kR(e,t){var n=hg(e,t),i={x:n.x-e.x,y:n.y-e.y};return LR(i)}function np(e,t){return LR({x:e.x-t.x,y:e.y-t.y})}var zR="djs-bendpoint",jR="djs-segment-dragger";function SP(e,t){var n=ao(t),i=e._container.getBoundingClientRect(),o;o={x:i.left,y:i.top};var s=e.viewbox();return{x:s.x+(n.x-o.x)/s.scale,y:s.y+(n.y-o.y)/s.scale}}function yv(e,t,n){var i=SP(e,n),o=gv(t,i);return o}function _v(e,t){var n=Ee("g");Ye(n).add(zR),De(e,n);var i=Ee("circle");he(i,{cx:0,cy:0,r:4}),Ye(i).add("djs-visual"),De(n,i);var o=Ee("circle");return he(o,{cx:0,cy:0,r:10}),Ye(o).add("djs-hit"),De(n,o),t&&Ye(n).add(t),n}function wP(e,t,n,i){var o=Ee("g");De(e,o);var s=18,c=6,u=11,f=TP(t,n,i),d=c+u,h=Ee("rect");he(h,{x:-s/2,y:-c/2,width:s,height:c}),Ye(h).add("djs-visual"),De(o,h);var v=Ee("rect");return he(v,{x:-f/2,y:-d/2,width:f,height:d}),Ye(v).add("djs-hit"),De(o,v),cw(o,i==="v"?90:0),o}function HR(e,t,n){var i=Ee("g"),o=nv(t,n),s=mr(t,n);return De(e,i),wP(i,t,n,s),Ye(i).add(jR),Ye(i).add(s==="h"?"horizontal":"vertical"),rn(i,o.x,o.y),i}function bv(e){return Math.abs(Math.round(e*2/3))}function RP(e,t){var n=CP(e,t);return hg(e,n)}function TP(e,t,n){var i=t.x-e.x,o=t.y-e.y;return bv(n==="h"?i:o)}function CP(e,t){for(var n=t.waypoints,i=1/0,o,s=0;s<n.length-1;s++){var c=n[s],u=n[s+1],f=kR(e,[c,u]);f<i&&(i=f,o=s)}return[n[o],n[o+1]]}function $R(e,t,n,i,o){function s(A,C,D){var B=A.index,F=A.point,j,Q,J,le,ee,pe;return B<=0||A.bendpoint?!1:(j=C[B-1],Q=C[B],J=nv(j,Q),le=mr(j,Q),ee=Math.abs(F.x-J.x),pe=Math.abs(F.y-J.y),le&&ee<=D&&pe<=D)}function c(A,C){var D=A.waypoints,B,F,j,Q;return C.index<=0||C.bendpoint||(B={start:D[C.index-1],end:D[C.index]},F=mr(B.start,B.end),!F)?null:(F==="h"?j=B.end.x-B.start.x:j=B.end.y-B.start.y,Q=bv(j)/2,Q)}function u(A,C){var D=C.waypoints,B=yv(t,D,A),F;if(B)return F=c(C,B),s(B,D,F)?o.start(A,C,B.index):i.start(A,C,B.index,!B.bendpoint),!0}function f(A,C,D){Le.bind(A,C,function(B){n.triggerMouseEvent(C,B,D),B.stopPropagation()})}function d(A,C){var D=t.getLayer("overlays"),B=ot('.djs-bendpoints[data-element-id="'+oc(A.id)+'"]',D);return!B&&C&&(B=Ee("g"),he(B,{"data-element-id":A.id}),Ye(B).add("djs-bendpoints"),De(D,B),f(B,"mousedown",A),f(B,"click",A),f(B,"dblclick",A)),B}function h(A,C){return ot('.djs-segment-dragger[data-segment-idx="'+A+'"]',C)}function v(A,C){C.waypoints.forEach(function(D,B){var F=_v(A);De(A,F),rn(F,D.x,D.y)}),_v(A,"floating")}function y(A,C){for(var D=C.waypoints,B,F,j,Q=1;Q<D.length;Q++)B=D[Q-1],F=D[Q],mr(B,F)&&(j=HR(A,B,F),he(j,{"data-segment-idx":Q}),f(j,"mousemove",C))}function _(A){z(Jm("."+zR,A),function(C){$t(C)})}function b(A){z(Jm("."+jR,A),function(C){$t(C)})}function w(A){var C=d(A);return C||(C=d(A,!0),v(C,A),y(C,A)),C}function S(A){var C=d(A);C&&(b(C),_(C),y(C,A),v(C,A))}function O(A,C){var D=ot(".floating",A),B=C.point;D&&rn(D,B.x,B.y)}function N(A,C,D){var B=h(C.index,A),F=D[C.index-1],j=D[C.index],Q=C.point,J=nv(F,j),le=mr(F,j),ee,pe;B&&(ee=AP(B),pe={x:Q.x-J.x,y:Q.y-J.y},le==="v"&&(pe={x:pe.y,y:pe.x}),rn(ee,pe.x,pe.y))}e.on("connection.changed",function(A){S(A.element)}),e.on("connection.remove",function(A){var C=d(A.element);C&&$t(C)}),e.on("element.marker.update",function(A){var C=A.element,D;C.waypoints&&(D=w(C),A.add?Ye(D).add(A.marker):Ye(D).remove(A.marker))}),e.on("element.mousemove",function(A){var C=A.element,D=C.waypoints,B,F;if(D){if(B=d(C,!0),F=yv(t,D,A.originalEvent),!F)return;O(B,F),F.bendpoint||N(B,F,D)}}),e.on("element.mousedown",function(A){if(va(A)){var C=A.originalEvent,D=A.element;if(D.waypoints)return u(C,D)}}),e.on("selection.changed",function(A){var C=A.newSelection,D=C[0];D&&D.waypoints&&w(D)}),e.on("element.hover",function(A){var C=A.element;C.waypoints&&(w(C),n.registerEvent(A.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(A){n.unregisterEvent(A.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(A){var C=A.element,D=A.newId;if(C.waypoints){var B=d(C);B&&he(B,{"data-element-id":D})}}),this.addHandles=w,this.updateHandles=S,this.getBendpointsContainer=d,this.getSegmentDragger=h}$R.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function AP(e){return ot(".djs-visual",e)}var Dx=Math.round,Wa="reconnectStart",Za="reconnectEnd",Ul="updateWaypoints";function mg(e,t,n,i,o,s){this._injector=e,this.start=function(c,u,f,d){var h=n.getGraphics(u),v=u.source,y=u.target,_=u.waypoints,b;!d&&f===0?b=Wa:!d&&f===_.length-1?b=Za:b=Ul;var w=b===Ul?"connection.updateWaypoints":"connection.reconnect",S=o.allowed(w,{connection:u,source:v,target:y});S===!1&&(S=o.allowed(w,{connection:u,source:y,target:v})),S!==!1&&i.init(c,"bendpoint.move",{data:{connection:u,connectionGfx:h,context:{allowed:S,bendpointIndex:f,connection:u,source:v,target:y,insert:d,type:b}}})},t.on("bendpoint.move.hover",function(c){var u=c.context,f=u.connection,d=f.source,h=f.target,v=c.hover,y=u.type;u.hover=v;var _;if(v){var b=y===Ul?"connection.updateWaypoints":"connection.reconnect";if(_=u.allowed=o.allowed(b,{connection:f,source:y===Wa?v:d,target:y===Za?v:h}),_){u.source=y===Wa?v:d,u.target=y===Za?v:h;return}_===!1&&(_=u.allowed=o.allowed(b,{connection:f,source:y===Za?v:h,target:y===Wa?v:d})),_&&(u.source=y===Za?v:h,u.target=y===Wa?v:d)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(c){var u=c.context,f=u.type;u.hover=null,u.source=null,u.target=null,f!==Ul&&(u.allowed=!1)}),t.on("bendpoint.move.end",function(c){var u=c.context,f=u.allowed,d=u.bendpointIndex,h=u.connection,v=u.insert,y=h.waypoints.slice(),_=u.source,b=u.target,w=u.type,S=u.hints||{},O={x:Dx(c.x),y:Dx(c.y)};if(!f)return!1;w===Ul?(v?y.splice(d,0,O):y[d]=O,S.bendpointMove={insert:v,bendpointIndex:d},y=this.cropWaypoints(h,y),s.updateWaypoints(h,wD(y),S)):(w===Wa?(S.docking="source",ip(u)&&(S.docking="target",S.newWaypoints=y.reverse())):w===Za&&(S.docking="target",ip(u)&&(S.docking="source",S.newWaypoints=y.reverse())),s.reconnect(h,_,b,O,S))},this)}mg.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];mg.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function ip(e){var t=e.hover,n=e.source,i=e.target,o=e.type;if(o===Wa)return t&&i&&t===i&&n!==i;if(o===Za)return t&&n&&t===n&&n!==i}var MP="reconnectStart",DP="reconnectEnd",Ox="updateWaypoints",Gl="connect-ok",hf="connect-not-ok",Nx="connect-hover",Px="djs-updating",Bx="djs-dragging",Lx=1100;function IR(e,t,n,i){this._injector=t;var o=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(s){var c=s.context,u=c.bendpointIndex,f=c.connection,d=c.insert,h=f.waypoints,v=h.slice();c.waypoints=h,d&&v.splice(u,0,{x:s.x,y:s.y}),f.waypoints=v;var y=c.draggerGfx=_v(i.getLayer("overlays"));Ye(y).add("djs-dragging"),i.addMarker(f,Bx),i.addMarker(f,Px)}),n.on("bendpoint.move.hover",function(s){var c=s.context,u=c.allowed,f=c.hover,d=c.type;if(f){if(i.addMarker(f,Nx),d===Ox)return;u?(i.removeMarker(f,hf),i.addMarker(f,Gl)):u===!1&&(i.removeMarker(f,Gl),i.addMarker(f,hf))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Lx,function(s){var c=s.context,u=c.hover,f=c.target;u&&(i.removeMarker(u,Nx),i.removeMarker(u,f?Gl:hf))}),n.on("bendpoint.move.move",function(s){var c=s.context,u=c.allowed,f=c.bendpointIndex,d=c.draggerGfx,h=c.hover,v=c.type,y=c.connection,_=y.source,b=y.target,w=y.waypoints.slice(),S={x:s.x,y:s.y},O=c.hints||{},N={};o&&(O.connectionStart&&(N.connectionStart=O.connectionStart),O.connectionEnd&&(N.connectionEnd=O.connectionEnd),v===MP?ip(c)?(N.connectionEnd=N.connectionEnd||S,N.source=b,N.target=h||_,w=w.reverse()):(N.connectionStart=N.connectionStart||S,N.source=h||_,N.target=b):v===DP?ip(c)?(N.connectionStart=N.connectionStart||S,N.source=h||b,N.target=_,w=w.reverse()):(N.connectionEnd=N.connectionEnd||S,N.source=_,N.target=h||b):(N.noCropping=!0,N.noLayout=!0,w[f]=S),v===Ox&&(w=e.cropWaypoints(y,w)),N.waypoints=w,o.drawPreview(c,u,N)),rn(d,s.x,s.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Lx,function(s){var c=s.context,u=c.connection,f=c.draggerGfx,d=c.hover,h=c.target,v=c.waypoints;u.waypoints=v,$t(f),i.removeMarker(u,Px),i.removeMarker(u,Bx),d&&(i.removeMarker(d,Gl),i.removeMarker(d,h?Gl:hf)),o&&o.cleanUp(c)})}IR.$inject=["bendpointMove","injector","eventBus","canvas"];var kx="connect-hover",zx="djs-updating";function jx(e,t,n){return vg(e,t,e[t]+n)}function vg(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function OP(e,t,n,i){var o=Math.max(t[i],n[i]),s=Math.min(t[i],n[i]),c=20,u=Math.min(Math.max(s+c,e[i]),o-c);return vg(t,i,u)}function UR(e){return e==="x"?"y":"x"}function Hx(e,t,n){var i,o;return e.original?e.original:(i=Ce(t),o=UR(n),vg(e,o,i[o]))}function GR(e,t,n,i,o,s){var c=e.get("connectionDocking",!1);this.start=function(v,y,_){var b,w=n.getGraphics(y),S=_-1,O=_,N=y.waypoints,A=N[S],C=N[O],D=yv(n,N,v),B,F,j;B=mr(A,C),B&&(F=B==="v"?"x":"y",S===0&&(A=Hx(A,y.source,F)),O===N.length-1&&(C=Hx(C,y.target,F)),D?j=D.point:j={x:(A.x+C.x)/2,y:(A.y+C.y)/2},b={connection:y,segmentStartIndex:S,segmentEndIndex:O,segmentStart:A,segmentEnd:C,axis:F,dragPosition:j},i.init(v,j,"connectionSegment.move",{cursor:F==="x"?"resize-ew":"resize-ns",data:{connection:y,connectionGfx:w,context:b}}))};function u(v,y){if(!c)return y;var _=v.waypoints,b;return v.waypoints=y,b=c.getCroppedWaypoints(v),v.waypoints=_,b}function f(v){o.update("connection",v.connection,v.connectionGfx)}function d(v,y,_){var b=v.newWaypoints,w=v.segmentStartIndex+y,S=b[w],O=v.segmentEndIndex+y,N=b[O],A=UR(v.axis),C=OP(_,S,N,A);rn(v.draggerGfx,C.x,C.y)}function h(v,y){var _=0,b=v.filter(function(w,S){return Iv(v[S-1],v[S+1],w)?(_=S<=y?_-1:_,!1):!0});return{waypoints:b,segmentOffset:_}}t.on("connectionSegment.move.start",function(v){var y=v.context,_=v.connection,b=n.getLayer("overlays");y.originalWaypoints=_.waypoints.slice(),y.draggerGfx=HR(b,y.segmentStart,y.segmentEnd),Ye(y.draggerGfx).add("djs-dragging"),n.addMarker(_,zx)}),t.on("connectionSegment.move.move",function(v){var y=v.context,_=y.connection,b=y.segmentStartIndex,w=y.segmentEndIndex,S=y.segmentStart,O=y.segmentEnd,N=y.axis,A=y.originalWaypoints.slice(),C=jx(S,N,v["d"+N]),D=jx(O,N,v["d"+N]),B=A.length,F=0;A[b]=C,A[w]=D;var j,Q;b<2&&(j=vn(_.source,C),b===1?j==="intersect"&&(A.shift(),A[0]=C,F--):j!=="intersect"&&(A.unshift(S),F++)),w>B-3&&(Q=vn(_.target,D),w===B-2?Q==="intersect"&&(A.pop(),A[A.length-1]=D):Q!=="intersect"&&A.push(O)),y.newWaypoints=_.waypoints=u(_,A),d(y,F,v),y.newSegmentStartIndex=b+F,f(v)}),t.on("connectionSegment.move.hover",function(v){v.context.hover=v.hover,n.addMarker(v.hover,kx)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(v){var y=v.context.hover;y&&n.removeMarker(y,kx)}),t.on("connectionSegment.move.cleanup",function(v){var y=v.context,_=y.connection;y.draggerGfx&&$t(y.draggerGfx),n.removeMarker(_,zx)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(v){var y=v.context,_=y.connection;_.waypoints=y.originalWaypoints,f(v)}),t.on("connectionSegment.move.end",function(v){var y=v.context,_=y.connection,b=y.newWaypoints,w=y.newSegmentStartIndex;b=b.map(function(D){return{original:D.original,x:Math.round(D.x),y:Math.round(D.y)}});var S=h(b,w),O=S.waypoints,N=u(_,O),A=S.segmentOffset,C={segmentMove:{segmentStartIndex:y.segmentStartIndex,newSegmentStartIndex:w+A}};s.updateWaypoints(_,N,C)})}GR.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var NP=Math.abs,$x=Math.round;function PP(e,t,n){n=n===void 0?10:n;var i,o;for(i=0;i<t.length;i++)if(o=t[i],NP(o-e)<=n)return o}function VR(e){return{x:e.x,y:e.y}}function FR(e){return{x:e.x+e.width,y:e.y+e.height}}function di(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:$x(e.x+e.width/2),y:$x(e.y+e.height/2)}}function _s(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function Ot(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,o=e[t],s=e.snapped=e.snapped||{};return n===!1?s[t]=!1:(s[t]=!0,i=n-o,e[t]+=i,e["d"+t]+=i),o}function YR(e){return e.children||[]}var BP=Math.abs,Ix=Math.round,jm=10;function qR(e){function t(s,c){if(Ae(s)){for(var u=s.length;u--;)if(BP(s[u]-c)<=jm)return s[u]}else{s=+s;var f=c%s;if(f<jm)return c-f;if(f>s-jm)return c-f+s}return c}function n(s,c){if(s.waypoints)return RP(c,s);if(s.width)return{x:Ix(s.width/2+s.x),y:Ix(s.height/2+s.y)}}function i(s){var c=s.context,u=c.snapPoints,f=c.connection,d=f.waypoints,h=c.segmentStart,v=c.segmentStartIndex,y=c.segmentEnd,_=c.segmentEndIndex,b=c.axis;if(u)return u;var w=[d[v-1],h,y,d[_+1]];return v<2&&w.unshift(n(f.source,s)),_>d.length-3&&w.unshift(n(f.target,s)),c.snapPoints=u={horizontal:[],vertical:[]},z(w,function(S){S&&(S=S.original||S,b==="y"&&u.horizontal.push(S.y),b==="x"&&u.vertical.push(S.x))}),u}e.on("connectionSegment.move.move",1500,function(s){var c=i(s),u=s.x,f=s.y,d,h;if(c){d=t(c.vertical,u),h=t(c.horizontal,f);var v=u-d,y=f-h;I(s,{dx:s.dx-v,dy:s.dy-y,x:d,y:h}),(v||c.vertical.indexOf(u)!==-1)&&Ot(s,"x",d),(y||c.horizontal.indexOf(f)!==-1)&&Ot(s,"y",h)}});function o(s){var c=s.snapPoints,u=s.connection.waypoints,f=s.bendpointIndex;if(c)return c;var d=[u[f-1],u[f+1]];return s.snapPoints=c={horizontal:[],vertical:[]},z(d,function(h){h&&(h=h.original||h,c.horizontal.push(h.y),c.vertical.push(h.x))}),c}e.on(["connect.hover","connect.move","connect.end"],1500,function(s){var c=s.context,u=c.hover,f=u&&n(u,s);!st(u)||!f||!f.x||!f.y||(Ot(s,"x",f.x),Ot(s,"y",f.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(s){var c=s.context,u=o(c),f=c.hover,d=f&&n(f,s),h=s.x,v=s.y,y,_;if(u){y=t(d?u.vertical.concat([d.x]):u.vertical,h),_=t(d?u.horizontal.concat([d.y]):u.horizontal,v);var b=h-y,w=v-_;I(s,{dx:s.dx-b,dy:s.dy-w,x:s.x-b,y:s.y-w}),(b||u.vertical.indexOf(h)!==-1)&&Ot(s,"x",y),(w||u.horizontal.indexOf(v)!==-1)&&Ot(s,"y",_)}})}qR.$inject=["eventBus"];const LP={__depends__:[Rr,Wi],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",$R],bendpointMove:["type",mg],bendpointMovePreview:["type",IR],connectionSegmentMove:["type",GR],bendpointSnapping:["type",qR]};function XR(e,t,n,i){function o(c,u){return i.allowed("connection.create",{source:c,target:u})}function s(c,u){return o(u,c)}e.on("connect.hover",function(c){var u=c.context,f=u.start,d=c.hover,h;if(u.hover=d,h=u.canExecute=o(f,d),!ic(h)){if(h!==!1){u.source=f,u.target=d;return}h=u.canExecute=s(f,d),!ic(h)&&h!==!1&&(u.source=d,u.target=f)}}),e.on(["connect.out","connect.cleanup"],function(c){var u=c.context;u.hover=null,u.source=null,u.target=null,u.canExecute=!1}),e.on("connect.end",function(c){var u=c.context,f=u.canExecute,d=u.connectionStart,h={x:c.x,y:c.y},v=u.source,y=u.target;if(!f)return!1;var _=null,b={connectionStart:Ev(u)?h:d,connectionEnd:Ev(u)?d:h};Zt(f)&&(_=f),u.connection=n.connect(v,y,_,b)}),this.start=function(c,u,f,d){Zt(f)||(d=f,f=Ce(u)),t.init(c,"connect",{autoActivate:d,data:{shape:u,context:{start:u,connectionStart:f}}})}}XR.$inject=["eventBus","dragging","modeling","rules"];function Ev(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var kP=1100,zP=900,Ux="connect-ok",Gx="connect-not-ok";function KR(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(o){var s=o.context,c=s.canExecute,u=s.hover,f=s.source,d=s.start,h=s.startPosition,v=s.target,y=s.connectionStart||h,_=s.connectionEnd||{x:o.x,y:o.y},b=y,w=_;Ev(s)&&(b=_,w=y),i.drawPreview(s,c,{source:f||d,target:v||u,connectionStart:b,connectionEnd:w})}),t.on("connect.hover",zP,function(o){var s=o.context,c=o.hover,u=s.canExecute;u!==null&&n.addMarker(c,u?Ux:Gx)}),t.on(["connect.out","connect.cleanup"],kP,function(o){var s=o.hover;s&&(n.removeMarker(s,Ux),n.removeMarker(s,Gx))}),i&&t.on("connect.cleanup",function(o){i.cleanUp(o.context)})}KR.$inject=["injector","eventBus","canvas"];const gg={__depends__:[Di,Wi,Rr],__init__:["connectPreview"],connect:["type",XR],connectPreview:["type",KR]};var jP="djs-dragger";function Tr(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Tr.$inject=["injector","canvas","graphicsFactory","elementFactory"];Tr.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,o=e.getConnection,s=n.source,c=n.target,u=n.waypoints,f=n.connectionStart,d=n.connectionEnd,h=n.noLayout,v=n.noCropping,y=n.noNoop,_,b=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),dp(i),o||(o=e.getConnection=HP(function(w,S,O){return b.getConnection(w,S,O)})),t&&(_=o(t,s,c)),!_){!y&&this.drawNoopPreview(i,n);return}_.waypoints=u||[],this._layouter&&!h&&(_.waypoints=this._layouter.layoutConnection(_,{source:s,target:c,connectionStart:f,connectionEnd:d,waypoints:n.waypoints||_.waypoints})),(!_.waypoints||!_.waypoints.length)&&(_.waypoints=[s?Ce(s):f,c?Ce(c):d]),this._connectionDocking&&(s||c)&&!v&&(_.waypoints=this._connectionDocking.getCroppedWaypoints(_,s,c)),this._graphicsFactory.drawConnection(i,_,{stroke:"var(--element-dragger-color)"})};Tr.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,o=t.connectionStart||Ce(n),s=t.connectionEnd||Ce(i),c=this.cropWaypoints(o,s,n,i),u=this.createNoopConnection(c[0],c[1]);De(e,u)};Tr.prototype.cropWaypoints=function(e,t,n,i){var o=this._graphicsFactory,s=n&&o.getShapePath(n),c=i&&o.getShapePath(i),u=o.getConnectionPath({waypoints:[e,t]});return e=n&&rv(s,u,!0)||e,t=i&&rv(c,u,!1)||t,[e,t]};Tr.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&$t(e.connectionPreviewGfx)};Tr.prototype.getConnection=function(e){var t=$P(e);return this._elementFactory.createConnection(t)};Tr.prototype.createConnectionPreviewGfx=function(){var e=Ee("g");return he(e,{pointerEvents:"none"}),Ye(e).add(jP),De(this._canvas.getActiveLayer(),e),e};Tr.prototype.createNoopConnection=function(e,t){return hp([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function HP(e){var t={};return function(n){var i=JSON.stringify(n),o=t[i];return o||(o=t[i]=e.apply(null,arguments)),o}}function $P(e){return Zt(e)?e:{}}const IP={__init__:["connectionPreview"],connectionPreview:["type",Tr]},UP=new Ec("ps");var GP=["marker-start","marker-mid","marker-end"],VP=["circle","ellipse","line","path","polygon","polyline","path","rect"];function ya(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i}ya.$inject=["elementRegistry","eventBus","canvas","styles"];ya.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};ya.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};ya.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var o=HS(n),s=n.getBoundingClientRect();return this._cloneMarkers(to(o),i),he(o,this._styles.cls(i,[],{x:s.top,y:s.left})),De(t,o),he(o,"data-preview-support-element-id",e.id),o};ya.prototype.addFrame=function(e,t){var n=Ee("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return De(t,n),he(n,"data-preview-support-element-id",e.id),n};ya.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var i=this;e.childNodes&&e.childNodes.forEach(o=>{i._cloneMarkers(o,t,n)}),XP(e)&&GP.forEach(function(o){if(he(e,o)){var s=FP(e,o,i._canvas.getContainer());s&&i._cloneMarker(n,e,s,o,t)}})};ya.prototype._cloneMarker=function(e,t,n,i,o="djs-dragger"){var s=[n.id,o,UP.next()].join("-"),c=ot("marker#"+n.id,e);e=e||this._canvas._svg;var u=c||HS(n);u.id=s,Ye(u).add(o);var f=ot(":scope > defs",e);f||(f=Ee("defs"),De(e,f)),De(f,u);var d=qP(u.id);he(t,i,d)};function FP(e,t,n){var i=YP(he(e,t));return ot("marker#"+i,n||document)}function YP(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function qP(e){return"url(#"+e+")"}function XP(e){return VP.indexOf(e.nodeName)!==-1}const Ls={__init__:["previewSupport"],previewSupport:["type",ya]},mf="complex-preview";class WR{constructor(t,n,i){this._canvas=t,this._graphicsFactory=n,this._previewSupport=i,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:i=[],removed:o=[],resized:s=[]}=t,c=this._canvas.getLayer(mf);n.filter(u=>!KP(u)).forEach(u=>{let f;st(u)?(f=this._graphicsFactory._createContainer("connection",Ee("g")),this._graphicsFactory.drawConnection(to(f),u)):(f=this._graphicsFactory._createContainer("shape",Ee("g")),this._graphicsFactory.drawShape(to(f),u),rn(f,u.x,u.y)),this._previewSupport.addDragger(u,c,f)}),i.forEach(({element:u,delta:f})=>{this._previewSupport.addDragger(u,c,void 0,"djs-dragging"),this._canvas.addMarker(u,"djs-element-hidden"),this._markers.push([u,"djs-element-hidden"]);const d=this._previewSupport.addDragger(u,c);st(u)?rn(d,f.x,f.y):rn(d,u.x+f.x,u.y+f.y)}),o.forEach(u=>{this._previewSupport.addDragger(u,c,void 0,"djs-dragging"),this._canvas.addMarker(u,"djs-element-hidden"),this._markers.push([u,"djs-element-hidden"])}),s.forEach(({shape:u,bounds:f})=>{this._canvas.addMarker(u,"djs-hidden"),this._markers.push([u,"djs-hidden"]),this._previewSupport.addDragger(u,c,void 0,"djs-dragging");const d=this._graphicsFactory._createContainer("shape",Ee("g"));this._graphicsFactory.drawShape(to(d),u,{width:f.width,height:f.height}),rn(d,f.x,f.y),this._previewSupport.addDragger(u,c,d)})}cleanUp(){dp(this._canvas.getLayer(mf)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(mf)}hide(){this._canvas.hideLayer(mf)}}WR.$inject=["canvas","graphicsFactory","previewSupport"];function KP(e){return e.hidden}const WP={__depends__:[Ls],__init__:["complexPreview"],complexPreview:["type",WR]};var yg=["top","bottom","left","right"],vf=10;function _g(e,t){ce.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(o){var s=o.context,c=s.connection,u=c.source,f=c.target,d=s.hints||{};d.createElementsBehavior!==!1&&(n(u),n(f))}),this.postExecuted(["label.create"],function(o){var s=o.context,c=s.shape,u=s.hints||{};u.createElementsBehavior!==!1&&n(c.labelTarget)}),this.postExecuted(["elements.create"],function(o){var s=o.context,c=s.elements,u=s.hints||{};u.createElementsBehavior!==!1&&c.forEach(function(f){n(f)})});function n(o){if(bp(o)&&!st(o)){var s=JP(o);s&&i(o,s)}}function i(o,s){var c=Ce(o),u=o.label,f=Ce(u);if(u.parent){var d=Se(o),h;switch(s){case"top":h={x:c.x,y:d.top-vf-u.height/2};break;case"left":h={x:d.left-vf-u.width/2,y:c.y};break;case"bottom":h={x:c.x,y:d.bottom+vf+u.height/2};break;case"right":h={x:d.right+vf+u.width/2,y:c.y};break}var v=Ci(h,f);t.moveShape(u,v)}}}ve(_g,ce);_g.$inject=["eventBus","modeling"];function ZP(e){var t=e.host,n=Ce(e),i=vn(n,t),o;i.indexOf("-")>=0?o=i.split("-"):o=[i];var s=yg.filter(function(c){return o.indexOf(c)===-1});return s}function QP(e){var t=Ce(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return ZR(t,i)});return n}function JP(e){var t=Ce(e.label),n=Ce(e),i=ZR(n,t);if(eB(i)){var o=QP(e);if(e.host){var s=ZP(e);o=o.concat(s)}var c=yg.filter(function(u){return o.indexOf(u)===-1});if(c.indexOf(i)===-1)return c[0]}}function ZR(e,t){return vn(t,e,5)}function eB(e){return yg.indexOf(e)!==-1}function bg(e){ce.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,i=t.shape;t.position||(T(i,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-i.height/2}:t.position={x:n.x+n.width+80+i.width/2,y:n.y+n.height/2})},!0)}ve(bg,ce);bg.$inject=["eventBus"];function Eg(e,t){e.invoke(ce,this),this.postExecute("shape.move",function(n){var i=n.newParent,o=n.shape,s=je(o.incoming.concat(o.outgoing),function(c){return T(c,"bpmn:Association")});z(s,function(c){t.moveConnection(c,{x:0,y:0},i)})},!0)}ve(Eg,ce);Eg.$inject=["injector","modeling"];var Vx=500;function Lp(e,t){t.invoke(ce,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",Vx,function(i){var o=i.elements;o=o.filter(function(s){var c=s.host;return Fx(s,c)}),o.length===1&&o.map(function(s){return o.indexOf(s)}).forEach(function(s){var c=o[s];i.elements[s]=n._replaceShape(o[s],c)})},!0),this.preExecute("elements.move",Vx,function(i){var o=i.shapes,s=i.newHost;if(o.length===1){var c=o[0];Fx(c,s)&&(i.shapes=[n._replaceShape(c,s)])}},!0)}Lp.$inject=["bpmnReplace","injector"];ve(Lp,ce);Lp.prototype._replaceShape=function(e,t){var n=tB(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function tB(e){var t=ue(e),n=t.eventDefinitions;return n&&n[0]}function Fx(e,t){return!Xe(e)&&He(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function xg(e,t){ce.call(this,e);function n(i){return je(i.attachers,function(o){return T(o,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var o=i.context.source,s=i.context.target,c=n(s);T(o,"bpmn:EventBasedGateway")&&T(s,"bpmn:ReceiveTask")&&c.length>0&&t.removeElements(c)}),this.postExecute("connection.reconnect",function(i){var o=i.context.oldSource,s=i.context.newSource;T(o,"bpmn:Gateway")&&T(s,"bpmn:EventBasedGateway")&&z(s.outgoing,function(c){var u=c.target,f=n(u);T(u,"bpmn:ReceiveTask")&&f.length>0&&t.removeElements(f)})})}xg.$inject=["eventBus","modeling"];ve(xg,ce);function Sg(e,t,n){ce.call(this,e),this.preExecute("shape.replace",u,!0),this.postExecuted("shape.replace",f,!0),this.preExecute("connection.create",o,!0),this.postExecuted("connection.delete",i,!0),this.postExecuted("connection.reconnect",s,!0),this.postExecuted("element.updateProperties",c,!0);function i(S){const O=S.source,N=S.target;ss(O)&&Vl(N)&&h(N)}function o(S){const O=S.connection,N=S.source,A=S.target;ss(N)&&gf(A)&&(d(A),y(N,[O]))}function s(S){const O=S.newTarget,N=S.oldSource,A=S.oldTarget;if(A!==O){const C=N;Vl(A)&&h(A),ss(C)&&gf(O)&&d(O)}}function c(S){const{element:O}=S;Vl(O)?(v(O),_(O)):gf(O)&&b(O)}function u(S){const{newData:O,oldShape:N}=S;if(ss(S.oldShape)&&O.eventDefinitionType!=="bpmn:CompensateEventDefinition"||O.type!=="bpmn:BoundaryEvent"){const A=N.outgoing.find(({target:C})=>Vl(C));A&&A.target&&(S._connectionTarget=A.target)}else if(!ss(S.oldShape)&&O.eventDefinitionType==="bpmn:CompensateEventDefinition"&&O.type==="bpmn:BoundaryEvent"){const A=N.outgoing.find(({target:C})=>gf(C));A&&A.target&&(S._connectionTarget=A.target),w(N)}}function f(S){const{_connectionTarget:O,newShape:N}=S;O&&t.connect(N,O)}function d(S){t.updateProperties(S,{isForCompensation:!0})}function h(S){t.updateProperties(S,{isForCompensation:void 0})}function v(S){for(const O of S.incoming)n.canConnect(O.source,S)||t.removeConnection(O);for(const O of S.outgoing)n.canConnect(S,O.target)||t.removeConnection(O)}function y(S,O){S.outgoing.filter(C=>T(C,"bpmn:Association")).filter(C=>Vl(C.target)&&!O.includes(C)).forEach(C=>t.removeConnection(C))}function _(S){const O=S.attachers.slice();O.length&&t.removeElements(O)}function b(S){const O=S.incoming.filter(N=>ss(N.source));t.removeElements(O)}function w(S){const O=S.outgoing.filter(N=>T(N,"bpmn:SequenceFlow"));t.removeElements(O)}}ve(Sg,ce);Sg.$inject=["eventBus","modeling","bpmnRules"];function Vl(e){const t=ue(e);return t&&t.get("isForCompensation")}function ss(e){return e&&T(e,"bpmn:BoundaryEvent")&&Cs(e,"bpmn:CompensateEventDefinition")}function gf(e){return e&&T(e,"bpmn:Activity")&&!hn(e)}function wg(e){e.invoke(ce,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,o=n.shape;T(i,"bpmn:Lane")&&!T(o,"bpmn:Lane")&&(n.parent=ys(i,"bpmn:Participant"))})}wg.$inject=["injector"];ve(wg,ce);function Rg(e,t){ce.call(this,e),this.preExecute("shape.create",function(n){var i=n.context,o=i.shape;if(T(o,"bpmn:DataObjectReference")&&o.type!=="label"){var s=t.create("bpmn:DataObject");o.businessObject.dataObjectRef=s}})}Rg.$inject=["eventBus","bpmnFactory"];ve(Rg,ce);var xv=20,Sv=20,QR=30,yf=2e3;function Tg(e,t,n){ce.call(this,t),t.on(["create.start","shape.move.start"],yf,function(o){var s=o.context,c=s.shape,u=e.getRootElement();if(!(!T(c,"bpmn:Participant")||!T(u,"bpmn:Process")||!u.children.length)){var f=u.children.filter(function(v){return!T(v,"bpmn:Group")&&!Xe(v)&&!st(v)});if(f.length){var d=It(f),h=nB(c,d);I(c,h),s.createConstraints=iB(c,d)}}}),t.on("create.start",yf,function(o){var s=o.context,c=s.shape,u=e.getRootElement(),f=e.getGraphics(u);function d(h){h.element=u,h.gfx=f}T(c,"bpmn:Participant")&&T(u,"bpmn:Process")&&(t.on("element.hover",yf,d),t.once("create.cleanup",function(){t.off("element.hover",d)}))});function i(){var o=e.getRootElement();return T(o,"bpmn:Collaboration")?o:n.makeCollaboration()}this.preExecute("elements.create",yf,function(o){var s=o.elements,c=o.parent,u=rB(s),f;u&&T(c,"bpmn:Process")&&(o.parent=i(),f=o.hints=o.hints||{},f.participant=u,f.process=c,f.processRef=ue(u).get("processRef"))},!0),this.preExecute("shape.create",function(o){var s=o.parent,c=o.shape;T(c,"bpmn:Participant")&&T(s,"bpmn:Process")&&(o.parent=i(),o.process=s,o.processRef=ue(c).get("processRef"))},!0),this.execute("shape.create",function(o){var s=o.hints||{},c=o.process||s.process,u=o.shape,f=s.participant;c&&(!f||u===f)&&ue(u).set("processRef",ue(c))},!0),this.revert("shape.create",function(o){var s=o.hints||{},c=o.process||s.process,u=o.processRef||s.processRef,f=o.shape,d=s.participant;c&&(!d||f===d)&&ue(f).set("processRef",u)},!0),this.postExecute("shape.create",function(o){var s=o.hints||{},c=o.process||o.hints.process,u=o.shape,f=s.participant;if(c){var d=c.children.slice();f?u===f&&n.moveElements(d,{x:0,y:0},f):n.moveElements(d,{x:0,y:0},u)}},!0)}Tg.$inject=["canvas","eventBus","modeling"];ve(Tg,ce);function nB(e,t){t={width:t.width+xv*2+QR,height:t.height+Sv*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function iB(e,t){return t=Se(t),{bottom:t.top+e.height/2-Sv,left:t.right-e.width/2+xv,top:t.bottom-e.height/2+Sv,right:t.left+e.width/2-xv-QR}}function rB(e){return We(e,function(t){return T(t,"bpmn:Participant")})}var Yx="__targetRef_placeholder";function Cg(e,t){ce.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],qx(s)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],qx(s));function n(c,u,f){var d=c.get("dataInputAssociations");return We(d,function(h){return h!==f&&h.targetRef===u})}function i(c,u){var f=c.get("properties"),d=We(f,function(h){return h.name===Yx});return!d&&u&&(d=t.create("bpmn:Property",{name:Yx}),Ut(f,d)),d}function o(c,u){var f=i(c);f&&(n(c,f,u)||Nt(c.get("properties"),f))}function s(c){var u=c.context,f=u.connection,d=f.businessObject,h=f.target,v=h&&h.businessObject,y=u.newTarget,_=y&&y.businessObject,b=u.oldTarget||u.target,w=b&&b.businessObject,S=f.businessObject,O;w&&w!==v&&o(w,d),_&&_!==v&&o(_,d),v?(O=i(v,!0),S.targetRef=O):S.targetRef=null}}Cg.$inject=["eventBus","bpmnFactory"];ve(Cg,ce);function qx(e){return function(t){var n=t.context,i=n.connection;if(T(i,"bpmn:DataInputAssociation"))return e(t)}}function kp(e){this._bpmnUpdater=e}kp.$inject=["bpmnUpdater"];kp.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,o=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,o),[]};kp.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,o=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,o),[]};function Ag(e,t,n,i){ce.call(this,i),t.registerHandler("dataStore.updateContainment",kp);function o(){return n.filter(function(u){return T(u,"bpmn:Participant")&&ue(u).processRef})[0]}function s(u){return u.children.filter(function(f){return T(f,"bpmn:DataStoreReference")&&!f.labelTarget})}function c(u,f){var d=u.businessObject||u;if(f=f||o(),f){var h=f.businessObject||f;t.execute("dataStore.updateContainment",{dataStoreBo:d,dataStoreDi:qe(u),newSemanticParent:h.processRef||h,newDiParent:qe(f)})}}this.preExecute("shape.create",function(u){var f=u.context,d=f.shape;T(d,"bpmn:DataStoreReference")&&d.type!=="label"&&(f.hints||(f.hints={}),f.hints.autoResize=!1)}),this.preExecute("elements.move",function(u){var f=u.context,d=f.shapes,h=d.filter(function(v){return T(v,"bpmn:DataStoreReference")});h.length&&(f.hints||(f.hints={}),f.hints.autoResize=d.filter(function(v){return!T(v,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(u){var f=u.context,d=f.shape,h=d.parent;T(d,"bpmn:DataStoreReference")&&d.type!=="label"&&T(h,"bpmn:Collaboration")&&c(d)}),this.postExecute("shape.move",function(u){var f=u.context,d=f.shape,h=f.oldParent,v=d.parent;if(!T(h,"bpmn:Collaboration")&&T(d,"bpmn:DataStoreReference")&&d.type!=="label"&&T(v,"bpmn:Collaboration")){var y=T(h,"bpmn:Participant")?h:oB(h,"bpmn:Participant");c(d,y)}}),this.postExecute("shape.delete",function(u){var f=u.context,d=f.shape,h=e.getRootElement();He(d,["bpmn:Participant","bpmn:SubProcess"])&&T(h,"bpmn:Collaboration")&&s(h).filter(function(v){return aB(v,d)}).forEach(function(v){c(v)})}),this.postExecute("canvas.updateRoot",function(u){var f=u.context,d=f.oldRoot,h=f.newRoot,v=s(d);v.forEach(function(y){T(h,"bpmn:Process")&&c(y,h)})})}Ag.$inject=["canvas","commandStack","elementRegistry","eventBus"];ve(Ag,ce);function aB(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function oB(e,t){for(;e.parent;){if(T(e.parent,t))return e.parent;e=e.parent}}var rp=Math.max,ap=Math.min,sB=20;function JR(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function lB(e,t,n){var i=n.x,o=n.y,s={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(s.y=e.y+o,s.height=e.height-o):t.indexOf("s")!==-1&&(s.height=e.height+o),t.indexOf("e")!==-1?s.width=e.width+i:t.indexOf("w")!==-1&&(s.x=e.x+i,s.width=e.width-i),s}function cB(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function _f(e,t,n){var i=t[e],o=n.min&&n.min[e],s=n.max&&n.max[e];return Te(o)&&(i=(/top|left/.test(e)?ap:rp)(i,o)),Te(s)&&(i=(/top|left/.test(e)?rp:ap)(i,s)),i}function uB(e,t){if(!t)return e;var n=Se(e);return vp({top:_f("top",n,t),right:_f("right",n,t),bottom:_f("bottom",n,t),left:_f("left",n,t)})}function fB(e,t,n,i){var o=Se(t),s={top:/n/.test(e)?o.bottom-n.height:o.top,left:/w/.test(e)?o.right-n.width:o.left,bottom:/s/.test(e)?o.top+n.height:o.bottom,right:/e/.test(e)?o.left+n.width:o.right},c=i?Se(i):s,u={top:ap(s.top,c.top),left:ap(s.left,c.left),bottom:rp(s.bottom,c.bottom),right:rp(s.right,c.right)};return vp(u)}function Fl(e,t){return typeof e<"u"?e:sB}function pB(e,t){var n,i,o,s;return typeof t=="object"?(n=Fl(t.left),i=Fl(t.right),o=Fl(t.top),s=Fl(t.bottom)):n=i=o=s=Fl(t),{x:e.x-n,y:e.y-o,width:e.width+n+i,height:e.height+o+s}}function dB(e){return!(e.waypoints||e.type==="label")}function eT(e,t){var n;if(e.length===void 0?n=je(e.children,dB):n=e,n.length)return pB(It(n),t)}var ta=Math.abs;function hB(e,t){return JR(Se(t),Se(e))}var mB=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],fi=30;function zp(e,t){return t=t||[],e.children.filter(function(n){T(n,"bpmn:Lane")&&(zp(n,t),t.push(n))}),t}function _a(e){return e.children.filter(function(t){return T(t,"bpmn:Lane")})}function pi(e){return ys(e,mB)||e}function vB(e,t){var n=pi(e),i=T(n,"bpmn:Process")?[]:[n],o=zp(n,i),s=Se(e),c=Se(t),u=hB(e,t),f=[],d=Yt(e);return o.forEach(function(h){if(h!==e){var v=d?0:u.top,y=d?u.right:0,_=d?0:u.bottom,b=d?u.left:0,w=Se(h);u.top&&(ta(w.bottom-s.top)<10&&(_=c.top-w.bottom),ta(w.top-s.top)<5&&(v=c.top-w.top)),u.left&&(ta(w.right-s.left)<10&&(y=c.left-w.right),ta(w.left-s.left)<5&&(b=c.left-w.left)),u.bottom&&(ta(w.top-s.bottom)<10&&(v=c.bottom-w.top),ta(w.bottom-s.bottom)<5&&(_=c.bottom-w.bottom)),u.right&&(ta(w.left-s.right)<10&&(b=c.right-w.left),ta(w.right-s.right)<5&&(y=c.right-w.right)),(v||y||_||b)&&f.push({shape:h,newBounds:cB(h,{top:v,right:y,bottom:_,left:b})})}}),f}var gB=500;function Mg(e,t){ce.call(this,e);function n(i,o){var s=Yt(i),c=_a(o),u=[],f=[],d=[],h=[];if(lo(c,function(S){return s?S.y>i.y?f.push(S):u.push(S):S.x>i.x?h.push(S):d.push(S),S.children}),!!c.length){var v;s?f.length&&u.length?v=i.height/2:v=i.height:h.length&&d.length?v=i.width/2:v=i.width;var y,_,b,w;u.length&&(y=t.calculateAdjustments(u,"y",v,i.y-10),t.makeSpace(y.movingShapes,y.resizingShapes,{x:0,y:v},"s")),f.length&&(_=t.calculateAdjustments(f,"y",-v,i.y+i.height+10),t.makeSpace(_.movingShapes,_.resizingShapes,{x:0,y:-v},"n")),d.length&&(b=t.calculateAdjustments(d,"x",v,i.x-10),t.makeSpace(b.movingShapes,b.resizingShapes,{x:v,y:0},"e")),h.length&&(w=t.calculateAdjustments(h,"x",-v,i.x+i.width+10),t.makeSpace(w.movingShapes,w.resizingShapes,{x:-v,y:0},"w"))}}this.postExecuted("shape.delete",gB,function(i){var o=i.context,s=o.hints,c=o.shape,u=o.oldParent;T(c,"bpmn:Lane")&&(s&&s.nested||n(c,u))})}Mg.$inject=["eventBus","spaceTool"];ve(Mg,ce);var Xx=500;function jp(e,t){t.invoke(ce,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",Xx,function(i){var o=i.elements;o.filter(function(s){var c=s.host;return Kx(s,c)}).map(function(s){return o.indexOf(s)}).forEach(function(s){i.elements[s]=n._replaceShape(o[s])})},!0),this.preExecute("elements.move",Xx,function(i){var o=i.shapes,s=i.newHost;o.forEach(function(c,u){var f=c.host;Kx(c,_B(o,f)?f:s)&&(o[u]=n._replaceShape(c))})},!0)}jp.$inject=["bpmnReplace","injector"];ve(jp,ce);jp.prototype._replaceShape=function(e){var t=yB(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function yB(e){var t=ue(e),n=t.eventDefinitions;return n&&n[0]}function Kx(e,t){return!Xe(e)&&T(e,"bpmn:BoundaryEvent")&&!t}function _B(e,t){return e.indexOf(t)!==-1}function Dg(e,t,n){ce.call(this,e);function i(o,s,c){var u=s.waypoints,f,d,h,v,y,_,b,w=o.outgoing.slice(),S=o.incoming.slice(),O;Te(c.width)?O=Ce(c):O=c;var N=gv(u,O);if(N){if(f=u.slice(0,N.index),d=u.slice(N.index+(N.bendpoint?1:0)),!f.length||!d.length)return;h=N.bendpoint?u[N.index]:O,(f.length===1||!Wx(o,f[f.length-1]))&&f.push(Zx(h)),(d.length===1||!Wx(o,d[0]))&&d.unshift(Zx(h))}v=s.source,y=s.target,t.canConnect(v,o,s)&&(n.reconnectEnd(s,o,f||O),_=s),t.canConnect(o,y,s)&&(_?b=n.connect(o,y,{type:s.type,waypoints:d}):(n.reconnectStart(s,o,d||O),b=s));var A=[].concat(_&&je(S,function(C){return C.source===_.source})||[],b&&je(w,function(C){return C.target===b.target})||[]);A.length&&n.removeElements(A)}this.preExecute("elements.move",function(o){var s=o.newParent,c=o.shapes,u=o.delta,f=c[0];if(!(!f||!s)){s&&s.waypoints&&(o.newParent=s=s.parent);var d=Ce(f),h={x:d.x+u.x,y:d.y+u.y},v=We(s.children,function(y){var _=t.canInsert(c,y);return _&&gv(y.waypoints,h)});v&&(o.targetFlow=v,o.position=h)}},!0),this.postExecuted("elements.move",function(o){var s=o.shapes,c=o.targetFlow,u=o.position;c&&i(s[0],c,u)},!0),this.preExecute("shape.create",function(o){var s=o.parent,c=o.shape;t.canInsert(c,s)&&(o.targetFlow=s,o.parent=s.parent)},!0),this.postExecuted("shape.create",function(o){var s=o.shape,c=o.targetFlow,u=o.position;c&&i(s,c,u)},!0)}ve(Dg,ce);Dg.$inject=["eventBus","bpmnRules","modeling"];function Wx(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function Zx(e){return I({},e)}function Og(e,t){ce.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,o=i.connection,s=i.source,c=i.target,u=i.hints;if(!(u&&u.createElementsBehavior===!1)&&ls(o)){var f=[];T(s,"bpmn:EventBasedGateway")?f=c.incoming.filter(d=>d!==o&&ls(d)):f=c.incoming.filter(d=>d!==o&&ls(d)&&T(d.source,"bpmn:EventBasedGateway")),f.forEach(function(d){t.removeConnection(d)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,o=i.newShape;if(T(o,"bpmn:EventBasedGateway")){var s=o.outgoing.filter(ls).reduce(function(c,u){return c.includes(u.target)?c:c.concat(u.target)},[]);s.forEach(function(c){c.incoming.filter(ls).forEach(function(u){const f=c.incoming.filter(ls).filter(function(d){return d.source===o});(u.source!==o||f.length>1)&&t.removeConnection(u)})})}})}Og.$inject=["eventBus","modeling"];ve(Og,ce);function ls(e){return T(e,"bpmn:SequenceFlow")}var bf=1500,Qx=2e3;function tT(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],bf,function(i){var o=i.context,s=o.shape||i.shape,c=i.hover;T(c,"bpmn:Lane")&&!He(s,["bpmn:Lane","bpmn:Participant"])&&(i.hover=pi(c),i.hoverGfx=e.getGraphics(i.hover));var u=n.getRootElement();c!==u&&(s.labelTarget||He(s,["bpmn:Group","bpmn:TextAnnotation"]))&&(i.hover=u,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],bf,function(i){var o=i.hover;T(o,"bpmn:Lane")&&(i.hover=pi(o)||o,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],bf,function(i){var o=i.context,s=i.hover,c=o.type;T(s,"bpmn:Lane")&&/reconnect/.test(c)&&(i.hover=pi(s)||s,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],bf,function(i){var o=i.context,s=o.start;T(s,"bpmn:Lane")&&(o.start=pi(s)||s)}),t.on("shape.move.start",Qx,function(i){var o=i.shape;T(o,"bpmn:Lane")&&(i.shape=pi(o)||o)}),t.on("spaceTool.move",Qx,function(i){var o=i.hover;o&&T(o,"bpmn:Lane")&&(i.hover=pi(o))})}tT.$inject=["elementRegistry","eventBus","canvas"];function bB(e){return e.create("bpmn:Category")}function EB(e){return e.create("bpmn:CategoryValue")}function xB(e,t,n){return Ut(t.get("categoryValue"),e),e.$parent=t,Ut(n.get("rootElements"),t),t.$parent=n,e}function SB(e){var t=e.$parent;return t&&(Nt(t.get("categoryValue"),e),e.$parent=null),e}function wB(e){var t=e.$parent;return t&&(Nt(t.get("rootElements"),e),e.$parent=null),e}var Jx=770;function Ng(e,t,n,i,o,s){o.invoke(ce,this);function c(){return n.filter(function(b){return T(b,"bpmn:Group")})}function u(b,w){return b.some(function(S){var O=ue(S),N=O.categoryValueRef&&O.categoryValueRef.$parent;return N===w})}function f(b,w){return b.some(function(S){var O=ue(S);return O.categoryValueRef===w})}function d(b,w,S){var O=c().filter(function(N){return N.businessObject!==S});w&&!u(O,w)&&wB(w),b&&!f(O,b)&&SB(b)}function h(b,w){return xB(b,w,t.getDefinitions())}function v(b,w){var S=ue(b),O=S.categoryValueRef;O||(O=S.categoryValueRef=w.categoryValue=w.categoryValue||EB(e));var N=O.$parent;N||(N=O.$parent=w.category=w.category||bB(e)),h(O,N,t.getDefinitions())}function y(b,w){var S=w.category,O=w.categoryValue,N=ue(b);O?(N.categoryValueRef=null,d(O,S,N)):d(null,N.categoryValueRef.$parent,N)}this.execute("label.create",function(b){var w=b.context,S=w.labelTarget;T(S,"bpmn:Group")&&v(S,w)}),this.revert("label.create",function(b){var w=b.context,S=w.labelTarget;T(S,"bpmn:Group")&&y(S,w)}),this.execute("shape.delete",function(b){var w=b.context,S=w.shape,O=ue(S);if(!(!T(S,"bpmn:Group")||S.labelTarget)){var N=w.categoryValue=O.categoryValueRef,A;N&&(A=w.category=N.$parent,d(N,A,O),O.categoryValueRef=null)}}),this.reverted("shape.delete",function(b){var w=b.context,S=w.shape;if(!(!T(S,"bpmn:Group")||S.labelTarget)){var O=w.category,N=w.categoryValue,A=ue(S);N&&(A.categoryValueRef=N,h(N,O))}}),this.execute("shape.create",function(b){var w=b.context,S=w.shape;!T(S,"bpmn:Group")||S.labelTarget||ue(S).categoryValueRef&&v(S,w)}),this.reverted("shape.create",function(b){var w=b.context,S=w.shape;!T(S,"bpmn:Group")||S.labelTarget||ue(S).categoryValueRef&&y(S,w)});function _(b,w){var S=e.create(b.$type);return s.copyElement(b,S,null,w)}i.on("copyPaste.copyElement",Jx,function(b){var w=b.descriptor,S=b.element;if(!(!T(S,"bpmn:Group")||S.labelTarget)){var O=ue(S);if(O.categoryValueRef){var N=O.categoryValueRef;w.categoryValue=_(N,!0),N.$parent&&(w.category=_(N.$parent,!0))}}}),i.on("copyPaste.pasteElement",Jx,function(b){var w=b.descriptor,S=w.businessObject,O=w.categoryValue,N=w.category;O&&(O=S.categoryValueRef=_(O)),N&&(O.$parent=_(N)),delete w.category,delete w.categoryValue})}Ng.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];ve(Ng,ce);function wv(e,t,n,i){var o,s,c,u,f;return o=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),o==0?null:(s=e.y-n.y,c=e.x-n.x,f=(i.x-n.x)*s-(i.y-n.y)*c,u=f/o,{x:Math.round(e.x+u*(t.x-e.x)),y:Math.round(e.y+u*(t.y-e.y))})}function nT(e){function t(i,o,s){var c={x:s.x,y:s.y-50},u={x:s.x-50,y:s.y},f=wv(i,o,s,c),d=wv(i,o,s,u),h;f&&d?e1(f,s)>e1(d,s)?h=d:h=f:h=f||d,i.original=h}function n(i){var o=i.waypoints;t(o[0],o[1],Ce(i.source)),t(o[o.length-1],o[o.length-2],Ce(i.target))}e.on("bpmnElement.added",function(i){var o=i.element;o.waypoints&&n(o)})}nT.$inject=["eventBus"];function e1(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pg(e){ce.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,o=ue(i),s=qe(i);if(He(o,t)){var c=s.get("isHorizontal");c===void 0&&(c=!0),s.set("isHorizontal",c)}})}Pg.$inject=["eventBus"];ve(Pg,ce);var iT=Math.sqrt,rT=Math.min,RB=Math.max,t1=Math.abs;function n1(e){return Math.pow(e,2)}function Yl(e,t){return iT(n1(e.x-t.x)+n1(e.y-t.y))}function TB(e,t){var n=0,i,o,s,c,u,f,d,h,v,y,_;for(n=0;n<t.length-1;n++){if(i=t[n],o=t[n+1],r1(i,o)?d=[i]:(s=Yl(e,i),c=Yl(e,o),f=rT(s,c),d=CB(i,o,e,f)),d.length<1)throw new Error("expected between [1, 2] circle -> line intersections");d.length===1&&(h={type:"bendpoint",position:d[0],segmentIndex:n,bendpointIndex:r1(i,d[0])?n:n+1}),d.length===2&&(u=MB(d[0],d[1]),h={type:"segment",position:u,segmentIndex:n,relativeLocation:Yl(i,u)/Yl(i,o)}),v=Yl(h.position,e),(!_||y>v)&&(_=h,y=v)}return _}function CB(e,t,n,i){var o=t.x-e.x,s=t.y-e.y,c=n.x-e.x,u=n.y-e.y,f=o*o+s*s,d=o*c+s*u,h=c*c+u*u-i*i,v=d/f,y=h/f,_=v*v-y;if(_<0&&_>-1e-6&&(_=0),_<0)return[];var b=iT(_),w=-v+b,S=-v-b,O={x:e.x-o*w,y:e.y-s*w};if(_===0)return[O];var N={x:e.x-o*S,y:e.y-s*S};return[O,N].filter(function(A){return AB(A,e,t)})}function AB(e,t,n){return i1(e.x,t.x,n.x)&&i1(e.y,t.y,n.y)}function i1(e,t,n){return e>=rT(t,n)-op&&e<=RB(t,n)+op}function MB(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var op=.1;function r1(e,t){return t1(e.x-t.x)<=op&&t1(e.y-t.y)<=op}function DB(e,t,n,i){var o=n.segmentIndex,s=t.length-e.length;if(i.segmentMove){var c=i.segmentMove.segmentStartIndex,u=i.segmentMove.newSegmentStartIndex;return o===c?u:o>=u?o+s<u?u:o+s:o}if(i.bendpointMove){var f=i.bendpointMove.insert,d=i.bendpointMove.bendpointIndex,h;if(s===0)return o;if(o>=d&&(h=f?o+1:o-1),o<d&&(h=o,f&&n.type!=="bendpoint"&&d-1===o)){var v=oT(t,d);v<n.relativeLocation&&h++}return h}return s===0?o:i.connectionStart&&o===0?0:i.connectionEnd&&o===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function aT(e,t,n,i){var o=0,s=0,c={point:e,delta:{x:0,y:0}},u=TB(e,n),f=u.segmentIndex,d=DB(n,t,u,i);if(d<0||d>t.length-2||d===null)return c;var h=a1(n,f),v=a1(t,d),y=u.position,_=NB(h,y),b=OB(h,v);if(u.type==="bendpoint"){var w=t.length-n.length,S=u.bendpointIndex,O=n[S];if(t.indexOf(O)!==-1)return c;if(w===0){var N=t[S];return o=N.x-u.position.x,s=N.y-u.position.y,{delta:{x:o,y:s},point:{x:e.x+o,y:e.y+s}}}w<0&&S!==0&&S<n.length-1&&(_=oT(n,S))}var A={x:(v[1].x-v[0].x)*_+v[0].x,y:(v[1].y-v[0].y)*_+v[0].y},C=EP({x:e.x-y.x,y:e.y-y.y},b);return o=A.x+C.x-e.x,s=A.y+C.y-e.y,{point:gr(A),delta:gr({x:o,y:s})}}function oT(e,t){var n=np(e[t-1],e[t]),i=np(e[t],e[t+1]),o=n/(n+i);return o}function OB(e,t){var n=Mx(e),i=Mx(t);return i-n}function a1(e,t){return[e[t],e[t+1]]}function NB(e,t){var n=np(e[0],e[1]),i=np(e[0],t);return n===0?0:i/n}function PB(e,t,n,i){var o=Ce(e);return aT(o,t,n,i).delta}function wc(e,t,n){var i=ec(t),o=ec(n),s=Ci(e,i),c={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)};return gr({x:o.x+c.x,y:o.y+c.y})}function o1(e,t,n){var i=ec(e),o=ec(t),s=ec(n),c=Ci(e,i),u=Ci(i,o),f=BB(i,t,n);if(f)return f;var d={x:u.x*(n.width/t.width),y:u.y*(n.height/t.height)},h={x:s.x+d.x,y:s.y+d.y};return gr({x:h.x+c.x-e.x,y:h.y+c.y-e.y})}function BB(e,t,n){var i=Se(t),o=Se(n);if(LB(i,o))return null;var s=vn(t,e),c,u,f;if(s==="top")c={x:0,y:o.bottom-i.bottom};else if(s==="bottom")c={x:0,y:o.top-i.top};else if(s==="right")c={x:o.left-i.left,y:0};else if(s==="left")c={x:o.right-i.right,y:0};else return null;return u={x:e.x+c.x,y:e.y+c.y},f=vn(n,u),f!==s?null:c}function LB(e,t){return kB(e,t)||zB(e,t)}function kB(e,t){return e.right!==t.right&&e.left!==t.left}function zB(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var s1="name",l1="text";function Bg(e,t,n,i){ce.call(this,e),this.postExecute("element.updateProperties",o),this.postExecute("element.updateModdleProperties",c=>{ue(c.context.element)===c.context.moddleElement&&o(c)});function o(c){var u=c.context,f=u.element,d=u.properties;if(s1 in d&&t.updateLabel(f,d[s1]),l1 in d&&T(f,"bpmn:TextAnnotation")){var h=i.getTextAnnotationBounds({x:f.x,y:f.y,width:f.width,height:f.height},d[l1]||"");t.updateLabel(f,d.text,h)}}this.postExecute(["shape.create","connection.create"],function(c){var u=c.context,f=u.hints||{};if(f.createElementsBehavior!==!1){var d=u.shape||u.connection;Xe(d)||!ro(d)||Mi(d)&&t.updateLabel(d,Mi(d))}}),this.postExecute("shape.delete",function(c){var u=c.context,f=u.labelTarget,d=u.hints||{};f&&d.unsetLabel!==!1&&t.updateLabel(f,null,null,{removeShape:!1})});function s(c){var u=c.context,f=u.connection,d=f.label,h=I({},u.hints),v=u.newWaypoints||f.waypoints,y=u.oldWaypoints;return typeof h.startChanged>"u"&&(h.startChanged=!!h.connectionStart),typeof h.endChanged>"u"&&(h.endChanged=!!h.connectionEnd),PB(d,v,y,h)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(c){var u=c.context,f=u.hints||{};if(f.labelBehavior!==!1){var d=u.connection,h=d.label,v;!h||!h.parent||(v=s(c),t.moveShape(h,v))}}),this.postExecute(["shape.replace"],function(c){var u=c.context,f=u.newShape,d=u.oldShape,h=ue(f);h&&ro(h)&&d.label&&f.label&&(f.label.x=d.label.x,f.label.y=d.label.y)}),this.postExecute("shape.resize",function(c){var u=c.context,f=u.shape,d=u.newBounds,h=u.oldBounds;if(bp(f)){var v=f.label,y=Ce(v),_=$B(h),b=HB(y,_),w=jB(b,h,d);t.moveShape(v,w)}})}ve(Bg,ce);Bg.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function jB(e,t,n){var i=wc(e,t,n);return gr(Ci(i,e))}function HB(e,t){if(t.length){var n=IB(e,t);return hg(e,n)}}function $B(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function IB(e,t){var n=t.map(function(o){return{line:o,distance:kR(e,o)}}),i=Fi(n,"distance");return i[0].line}function UB(e,t,n,i){return aT(e,t,n,i).point}function Lg(e,t){ce.call(this,e);function n(i,o){var s=i.context,c=s.connection,u=I({},s.hints),f=s.newWaypoints||c.waypoints,d=s.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),UB(o,f,d,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var o=i.context,s=o.connection,c=s.outgoing,u=s.incoming;u.forEach(function(f){var d=f.waypoints[f.waypoints.length-1],h=n(i,d),v=[].concat(f.waypoints.slice(0,-1),[h]);t.updateWaypoints(f,v)}),c.forEach(function(f){var d=f.waypoints[0],h=n(i,d),v=[].concat([h],f.waypoints.slice(1));t.updateWaypoints(f,v)})}),this.postExecute(["connection.move"],function(i){var o=i.context,s=o.connection,c=s.outgoing,u=s.incoming,f=o.delta;u.forEach(function(d){var h=d.waypoints[d.waypoints.length-1],v={x:h.x+f.x,y:h.y+f.y},y=[].concat(d.waypoints.slice(0,-1),[v]);t.updateWaypoints(d,y)}),c.forEach(function(d){var h=d.waypoints[0],v={x:h.x+f.x,y:h.y+f.y},y=[].concat([v],d.waypoints.slice(1));t.updateWaypoints(d,y)})})}ve(Lg,ce);Lg.$inject=["eventBus","modeling"];function Hp(e,t,n){var i=Ip(e),o=lT(i,t),s=i[0];return o.length?o[o.length-1]:wc(s.original||s,n,t)}function $p(e,t,n){var i=Ip(e),o=lT(i,t),s=i[i.length-1];return o.length?o[0]:wc(s.original||s,n,t)}function kg(e,t,n){var i=Ip(e),o=sT(t,n),s=i[0];return wc(s.original||s,o,t)}function zg(e,t,n){var i=Ip(e),o=sT(t,n),s=i[i.length-1];return wc(s.original||s,o,t)}function sT(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Ip(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function lT(e,t){var n=mn(e,VB);return je(n,function(i){return GB(i,t)})}function GB(e,t){return vn(t,e,1)==="intersect"}function VB(e){return e.original||e}function jg(e,t){ce.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,o=n.newShape;if(FB(i,o)){var s=YB(i);s.incoming.forEach(function(c){var u=$p(c,o,i);t.reconnectEnd(c,o,u)}),s.outgoing.forEach(function(c){var u=Hp(c,o,i);t.reconnectStart(c,o,u)})}},!0)}jg.$inject=["eventBus","modeling"];ve(jg,ce);function FB(e,t){return T(e,"bpmn:Participant")&&Ue(e)&&T(t,"bpmn:Participant")&&!Ue(t)}function YB(e){var t=hc([e],!1),n=[],i=[];return t.forEach(function(o){o!==e&&(o.incoming.forEach(function(s){T(s,"bpmn:MessageFlow")&&n.push(s)}),o.outgoing.forEach(function(s){T(s,"bpmn:MessageFlow")&&i.push(s)}))},[]),{incoming:n,outgoing:i}}const qB=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function cT(e){const t=ue(e);if(!T(t,"bpmn:BoundaryEvent")&&!(T(t,"bpmn:StartEvent")&&hn(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:qB.some(i=>T(n[0],i))}function uT(e){return T(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function Hg(e,t){e.invoke(ce,this),this.postExecuted("shape.replace",function(n){const i=n.context.oldShape,o=n.context.newShape,s=n.context.hints;if(!cT(o))return;const c=uT(o);if(s.targetElement&&s.targetElement[c]!==void 0)return;const f=ue(i).get(c),d=ue(o).get(c);f!==d&&t.updateProperties(o,{[c]:f})})}Hg.$inject=["injector","modeling"];ve(Hg,ce);function $g(e,t){ce.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,o=qe(i),s=o&&o.get("label"),c=s&&s.get("bounds");c&&t.updateModdleProperties(i,s,{bounds:void 0})},!0)}ve($g,ce);$g.$inject=["eventBus","modeling"];function Ig(e,t,n){ce.call(this,e),this.preExecute("shape.delete",function(i){var o=i.context.shape;if(!(o.incoming.length!==1||o.outgoing.length!==1)){var s=o.incoming[0],c=o.outgoing[0];if(!(!T(s,"bpmn:SequenceFlow")||!T(c,"bpmn:SequenceFlow"))&&t.canConnect(s.source,c.target,s)){var u=XB(s.waypoints,c.waypoints);n.reconnectEnd(s,c.target,u)}}})}ve(Ig,ce);Ig.$inject=["eventBus","bpmnRules","modeling"];function cs(e){return e.original||e}function XB(e,t){var n=wv(cs(e[e.length-2]),cs(e[e.length-1]),cs(t[1]),cs(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[cs(e[0]),cs(t[t.length-1])]}function Ug(e,t){ce.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,o=i.parent;T(i,"bpmn:Participant")&&(n.collaborationRoot=o)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;if(i&&!i.businessObject.participants.length){var o=t.makeProcess(),s=i.children.slice();t.moveElements(s,{x:0,y:0},o)}},!0)}Ug.$inject=["eventBus","modeling"];ve(Ug,ce);function Gg(e,t,n,i){ce.call(this,e);var o=i.get("dragging",!1);function s(f){var d=f.source,h=f.target,v=f.parent;if(v){var y,_;T(f,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(d,h)||(_=!0),n.canConnectMessageFlow(d,h)&&(y="bpmn:MessageFlow")),T(f,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(d,h)||(_=!0),n.canConnectSequenceFlow(d,h)&&(y="bpmn:SequenceFlow")),_&&t.removeConnection(f),y&&t.connect(d,h,{type:y,waypoints:f.waypoints.slice()})}}function c(f){var d=f.context,h=d.connection,v=d.newSource||h.source,y=d.newTarget||h.target,_,b;_=n.canConnect(v,y),!(!_||_.type===h.type)&&(b=t.connect(v,y,{type:_.type,associationDirection:_.associationDirection,waypoints:h.waypoints.slice()}),h.parent&&t.removeConnection(h),d.connection=b,o&&u(h,b))}function u(f,d){var h=o.context(),v=h&&h.payload.previousSelection,y;!v||!v.length||(y=v.indexOf(f),y!==-1&&v.splice(y,1,d))}this.postExecuted("elements.move",function(f){var d=f.closure,h=d.allConnections;z(h,s)},!0),this.preExecute("connection.reconnect",c),this.postExecuted("element.updateProperties",function(f){var d=f.context,h=d.properties,v=d.element,y=v.businessObject,_;h.default&&(_=We(v.outgoing,Ti({id:v.businessObject.default.id})),_&&t.updateProperties(_,{conditionExpression:void 0})),h.conditionExpression&&y.sourceRef.default===y&&t.updateProperties(v.source,{default:void 0})})}ve(Gg,ce);Gg.$inject=["eventBus","modeling","bpmnRules","injector"];function Up(e,t,n,i,o,s){i.invoke(ce,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=s,this.postExecuted(["elements.create"],500,function(c){var u=c.context,f=u.parent,d=u.elements,h=$n(d,function(v,y){var _=t.canReplace([y],y.host||y.parent||f);return _?v.concat(_.replacements):v},[]);h.length&&this._replaceElements(d,h)},this),this.postExecuted(["elements.move"],500,function(c){var u=c.context,f=u.newParent,d=u.newHost,h=[];z(u.closure.topLevel,function(y){hn(y)?h=h.concat(y.children):h=h.concat(y)}),h.length===1&&d&&(f=d);var v=t.canReplace(h,f);v&&this._replaceElements(h,v.replacements,d)},this),this.postExecute(["shape.replace"],1500,function(c){var u=c.context,f=u.oldShape,d=u.newShape,h=f.attachers,v;h&&h.length&&(v=t.canReplace(h,d),this._replaceElements(h,v.replacements))},this),this.postExecuted(["shape.replace"],1500,function(c){var u=c.context,f=u.oldShape,d=u.newShape;o.unclaimId(f.businessObject.id,f.businessObject),o.updateProperties(d,{id:f.id})})}ve(Up,ce);Up.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,o=this._selection;z(t,function(s){var c={type:s.newElementType},u=n.get(s.oldElementId),f=e.indexOf(u);e[f]=i.replaceElement(u,c,{select:!1})}),t&&o.select(e)};Up.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var KB=1500,WB={width:140,height:120},Vg={width:300,height:60},Fg={width:60,height:300},If={width:300,height:150},Uf={width:150,height:300},fT={width:140,height:120},pT={width:50,height:30};function dT(e){e.on("resize.start",KB,function(t){var n=t.context,i=n.shape,o=n.direction,s=n.balanced;(T(i,"bpmn:Lane")||T(i,"bpmn:Participant"))&&(n.resizeConstraints=t4(i,o,s)),T(i,"bpmn:SubProcess")&&Ue(i)&&(n.minDimensions=fT),T(i,"bpmn:TextAnnotation")&&(n.minDimensions=pT)})}dT.$inject=["eventBus"];var na=Math.abs,ZB=Math.min,QB=Math.max;function hT(e,t,n,i){var o=e[t];e[t]=o===void 0?n:i(n,o)}function us(e,t,n){return hT(e,t,n,ZB)}function fs(e,t,n){return hT(e,t,n,QB)}var JB={top:20,left:50,right:20,bottom:20},e4={top:50,left:20,right:20,bottom:20};function t4(e,t,n){var i=pi(e),o=!0,s=!0,c=zp(i,[i]),u=Se(e),f={},d={},h=Yt(e),v=h?Vg:Fg;/n/.test(t)?d.top=u.bottom-v.height:/e/.test(t)?d.right=u.left+v.width:/s/.test(t)?d.bottom=u.top+v.height:/w/.test(t)&&(d.left=u.right-v.width),c.forEach(function(b){var w=Se(b);h?(w.top<u.top-10&&(o=!1),w.bottom>u.bottom+10&&(s=!1)):(w.left<u.left-10&&(o=!1),w.right>u.right+10&&(s=!1)),/n/.test(t)&&(n&&na(u.top-w.bottom)<10&&fs(f,"top",w.top+v.height),na(u.top-w.top)<5&&us(d,"top",w.bottom-v.height)),/e/.test(t)&&(n&&na(u.right-w.left)<10&&us(f,"right",w.right-v.width),na(u.right-w.right)<5&&fs(d,"right",w.left+v.width)),/s/.test(t)&&(n&&na(u.bottom-w.top)<10&&us(f,"bottom",w.bottom-v.height),na(u.bottom-w.bottom)<5&&fs(d,"bottom",w.top+v.height)),/w/.test(t)&&(n&&na(u.left-w.right)<10&&fs(f,"left",w.left+v.width),na(u.left-w.left)<5&&us(d,"left",w.right-v.width))});var y=i.children.filter(function(b){return!b.hidden&&!b.waypoints&&(T(b,"bpmn:FlowElement")||T(b,"bpmn:Artifact"))}),_=h?JB:e4;return y.forEach(function(b){var w=Se(b);/n/.test(t)&&(!h||o)&&us(d,"top",w.top-_.top),/e/.test(t)&&(h||s)&&fs(d,"right",w.right+_.right),/s/.test(t)&&(!h||s)&&fs(d,"bottom",w.bottom+_.bottom),/w/.test(t)&&(h||o)&&us(d,"left",w.left-_.left)}),{min:d,max:f}}var c1=1001;function mT(e,t){e.on("resize.start",c1+500,function(n){var i=n.context,o=i.shape;(T(o,"bpmn:Lane")||T(o,"bpmn:Participant"))&&(i.balanced=!sc(n))}),e.on("resize.end",c1,function(n){var i=n.context,o=i.shape,s=i.canExecute,c=i.newBounds;if(T(o,"bpmn:Lane")||T(o,"bpmn:Participant"))return s&&(c=ZS(c),t.resizeLane(o,c,i.balanced)),!1})}mT.$inject=["eventBus","modeling"];var n4=500;function Yg(e,t,n,i,o){n.invoke(ce,this);function s(h){return He(h,["bpmn:ReceiveTask","bpmn:SendTask"])||i4(h,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function c(h){var v=e.getDefinitions(),y=v.get("rootElements");return!!We(y,Ti({id:h.id}))}function u(h){if(T(h,"bpmn:ErrorEventDefinition"))return"errorRef";if(T(h,"bpmn:EscalationEventDefinition"))return"escalationRef";if(T(h,"bpmn:MessageEventDefinition"))return"messageRef";if(T(h,"bpmn:SignalEventDefinition"))return"signalRef"}function f(h){if(He(h,["bpmn:ReceiveTask","bpmn:SendTask"]))return h.get("messageRef");var v=h.get("eventDefinitions"),y=v[0];return y.get(u(y))}function d(h,v){if(He(h,["bpmn:ReceiveTask","bpmn:SendTask"]))return h.set("messageRef",v);var y=h.get("eventDefinitions"),_=y[0];return _.set(u(_),v)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(h){var v=h.shape||h.element;if(s(v)){var y=ue(v),_=f(y),b;_&&!c(_)&&(b=e.getDefinitions().get("rootElements"),Ut(b,_),h.addedRootElement=_)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(h){var v=h.addedRootElement;if(v){var y=e.getDefinitions().get("rootElements");Nt(y,v)}},!0),t.on("copyPaste.copyElement",function(h){var v=h.descriptor,y=h.element;if(!(y.labelTarget||!s(y))){var _=ue(y),b=f(_);b&&(v.referencedRootElement=b)}}),t.on("copyPaste.pasteElement",n4,function(h){var v=h.descriptor,y=v.businessObject,_=v.referencedRootElement;_&&(c(_)||(_=i.copyElement(_,o.create(_.$type))),d(y,_),delete v.referencedRootElement)})}Yg.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];ve(Yg,ce);function i4(e,t){return Ae(t)||(t=[t]),fa(t,function(n){return Cs(e,n)})}var vT=Math.max;function gT(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,o=t.start,s={};return z(n,function(c){var u=c.id;T(c,"bpmn:Participant")&&(s[u]=a4(c,i,o)),T(c,"bpmn:Lane")&&(s[u]=Yt(c)?Vg:Fg),T(c,"bpmn:SubProcess")&&Ue(c)&&(s[u]=fT),T(c,"bpmn:TextAnnotation")&&(s[u]=pT),T(c,"bpmn:Group")&&(s[u]=WB)}),s})}gT.$inject=["eventBus"];function r4(e){return e==="x"}function a4(e,t,n){var i=Yt(e);if(!l4(e))return i?If:Uf;var o=r4(t),s={};return o?i?s=If:s={width:s4(e,n,o),height:Uf.height}:i?s={width:If.width,height:o4(e,n,o)}:s=Uf,s}function o4(e,t,n){var i;return i=c4(e,t,n),vT(If.height,i)}function s4(e,t,n){var i;return i=u4(e,t,n),vT(Uf.width,i)}function l4(e){return!!_a(e).length}function c4(e,t,n){var i=_a(e),o;return o=qg(i,t,n),e.height-o.height+Vg.height}function u4(e,t,n){var i=_a(e),o;return o=qg(i,t,n),e.width-o.width+Fg.width}function qg(e,t,n){var i,o,s;for(i=0;i<e.length;i++)if(o=e[i],!n&&t>=o.y&&t<=o.y+o.height||n&&t>=o.x&&t<=o.x+o.width)return s=_a(o),s.length?qg(s,t,n):o}var u1=400,f4=600,f1={x:180,y:160};function ba(e,t,n,i,o,s,c){ce.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=o,this._bpmnjs=s,this._elementRegistry=c;var u=this;function f(v){return T(v,"bpmn:SubProcess")&&!Ue(v)}function d(v){var y=v.shape,_=v.newRootElement,b=ue(y);_=u._addDiagram(_||b),v.newRootElement=e.addRootElement(_)}function h(v){var y=v.shape,_=ue(y);u._removeDiagram(_);var b=v.newRootElement=c.get(hr(_));e.removeRootElement(b)}this.executed("shape.create",function(v){var y=v.shape;f(y)&&d(v)},!0),this.postExecuted("shape.create",function(v){var y=v.shape,_=v.newRootElement;!_||!y.children||(u._showRecursively(y.children),u._moveChildrenToShape(y,_))},!0),this.reverted("shape.create",function(v){var y=v.shape;f(y)&&h(v)},!0),this.preExecuted("shape.delete",function(v){var y=v.shape;if(f(y)){var _=c.get(hr(y));_&&n.removeElements(_.children.slice())}},!0),this.executed("shape.delete",function(v){var y=v.shape;f(y)&&h(v)},!0),this.reverted("shape.delete",function(v){var y=v.shape;f(y)&&d(v)},!0),this.preExecuted("shape.replace",function(v){var y=v.oldShape,_=v.newShape;!f(y)||!f(_)||(v.oldRoot=e.removeRootElement(hr(y)))},!0),this.postExecuted("shape.replace",function(v){var y=v.newShape,_=v.oldRoot,b=e.findRoot(hr(y));if(!(!_||!b)){var w=_.children;n.moveElements(w,{x:0,y:0},b)}},!0),this.executed("element.updateProperties",function(v){var y=v.element;if(T(y,"bpmn:SubProcess")){var _=v.properties,b=v.oldProperties,w=b.id,S=_.id;if(w!==S){if(zf(y)){c.updateId(y,Xa(S)),c.updateId(w,S);return}var O=c.get(Xa(w));O&&c.updateId(Xa(w),Xa(S))}}},!0),this.reverted("element.updateProperties",function(v){var y=v.element;if(T(y,"bpmn:SubProcess")){var _=v.properties,b=v.oldProperties,w=b.id,S=_.id;if(w!==S){if(zf(y)){c.updateId(y,Xa(w)),c.updateId(S,w);return}var O=c.get(Xa(S));O&&c.updateId(O,Xa(w))}}},!0),t.on("element.changed",function(v){var y=v.element;if(zf(y)){var _=y,b=c.get(ex(_));!b||b===_||t.fire("element.changed",{element:b})}}),this.executed("shape.toggleCollapse",u1,function(v){var y=v.shape;T(y,"bpmn:SubProcess")&&(Ue(y)?h(v):(d(v),u._showRecursively(y.children)))},!0),this.reverted("shape.toggleCollapse",u1,function(v){var y=v.shape;T(y,"bpmn:SubProcess")&&(Ue(y)?h(v):(d(v),u._showRecursively(y.children)))},!0),this.postExecuted("shape.toggleCollapse",f4,function(v){var y=v.shape;if(T(y,"bpmn:SubProcess")){var _=v.newRootElement;_&&(Ue(y)?u._moveChildrenToShape(_,y):u._moveChildrenToShape(y,_))}},!0),t.on("copyPaste.createTree",function(v){var y=v.element,_=v.children;if(f(y)){var b=hr(y),w=c.get(b);w&&_.push.apply(_,w.children)}}),t.on("copyPaste.copyElement",function(v){var y=v.descriptor,_=v.element,b=v.elements,w=_.parent,S=T(qe(w),"bpmndi:BPMNPlane");if(S){var O=ex(w),N=We(b,function(A){return A.id===O});N&&(y.parent=N.id)}}),t.on("copyPaste.pasteElement",function(v){var y=v.descriptor;y.parent&&(f(y.parent)||y.parent.hidden)&&(y.hidden=!0)})}ve(ba,ce);ba.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,o;if(i){i=i.concat(i.reduce(function(d,h){return h.label&&h.label.parent!==e?d.concat(h.label):d},[]));var s=i.filter(function(d){return!d.hidden});if(!s.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var c=It(s);if(!t.x)o={x:f1.x-c.x,y:f1.y-c.y};else{var u=Ce(t),f=Ce(c);o={x:u.x-f.x,y:u.y-f.y}}n.moveElements(i,o,t,{autoResize:!1})}};ba.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(o){o.hidden=!!t,i=i.concat(o),o.children&&(i=i.concat(n._showRecursively(o.children,o.collapsed||t)))}),i};ba.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};ba.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),o=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=o;var s=n.createRoot({id:hr(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return s};ba.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=We(n,function(o){return o.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i};ba.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function Xg(e,t){e.invoke(ce,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,o=n.context.newShape;if(!(!T(o,"bpmn:SubProcess")||T(o,"bpmn:AdHocSubProcess")||!(T(i,"bpmn:Task")||T(i,"bpmn:CallActivity"))||!Ue(o))){var s=p4(o);t.createShape({type:"bpmn:StartEvent"},s,o)}})}Xg.$inject=["injector","modeling"];ve(Xg,ce);function p4(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function Kg(e){ce.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;T(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&T(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}ve(Kg,ce);Kg.$inject=["eventBus"];function Wg(e,t){ce.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(Ue(i))return;var o=hc(i);o.forEach(function(c){var u=c.incoming.slice(),f=c.outgoing.slice();z(u,function(d){s(d,!0)}),z(f,function(d){s(d,!1)})});function s(c,u){o.indexOf(c.source)!==-1&&o.indexOf(c.target)!==-1||(u?t.reconnectEnd(c,i,Ce(i)):t.reconnectStart(c,i,Ce(i)))}},!0)}ve(Wg,ce);Wg.$inject=["eventBus","modeling"];var Hm=500;function Zg(e,t,n){ce.call(this,e);function i(c){c.length&&c.forEach(function(u){u.type==="label"&&!u.businessObject.name&&(u.hidden=!0)})}function o(c,u){var f=c.children,d=u,h,v;return h=d4(f).concat([c]),v=eT(h),v?(d.width=Math.max(v.width,d.width),d.height=Math.max(v.height,d.height),d.x=v.x+(v.width-d.width)/2,d.y=v.y+(v.height-d.height)/2):(d.x=c.x+(c.width-d.width)/2,d.y=c.y+(c.height-d.height)/2),d}function s(c,u){return{x:c.x+(c.width-u.width)/2,y:c.y+(c.height-u.height)/2,width:u.width,height:u.height}}this.executed(["shape.toggleCollapse"],Hm,function(c){var u=c.context,f=u.shape;T(f,"bpmn:SubProcess")&&(f.collapsed?qe(f).isExpanded=!1:(i(f.children),qe(f).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],Hm,function(c){var u=c.context,f=u.shape;f.collapsed?qe(f).isExpanded=!1:qe(f).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],Hm,function(c){var u=c.context.shape,f=t.getDefaultSize(u),d;u.collapsed?d=s(u,f):d=o(u,f),n.resizeShape(u,d,null,{autoResize:u.collapsed?!1:"nwse"})})}ve(Zg,ce);Zg.$inject=["eventBus","elementFactory","modeling"];function d4(e){return e.filter(function(t){return!t.hidden})}function Qg(e,t,n,i){t.invoke(ce,this),this.preExecute("shape.delete",function(o){var s=o.context,c=s.shape,u=c.businessObject;Xe(c)||(T(c,"bpmn:Participant")&&Ue(c)&&n.ids.unclaim(u.processRef.id),i.unclaimId(u.id,u))}),this.preExecute("connection.delete",function(o){var s=o.context,c=s.connection,u=c.businessObject;i.unclaimId(u.id,u)}),this.preExecute("canvas.updateRoot",function(){var o=e.getRootElement(),s=o.businessObject;T(o,"bpmn:Collaboration")&&n.ids.unclaim(s.id)})}ve(Qg,ce);Qg.$inject=["canvas","injector","moddle","modeling"];function Jg(e,t){ce.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,o=i.connection,s=o.source;h4(o,s)&&t.updateProperties(s,{default:null})})}ve(Jg,ce);Jg.$inject=["eventBus","modeling"];function h4(e,t){if(!T(e,"bpmn:SequenceFlow"))return!1;var n=ue(t),i=ue(e);return n.get("default")===i}var m4=500,v4=5e3;function ey(e,t){ce.call(this,e);var n;function i(){return n=n||new g4,n.enter(),n}function o(){if(!n)throw new Error("out of bounds release");return n}function s(){if(!n)throw new Error("out of bounds release");var u=n.leave();return u&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),u}var c=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(c,v4,function(u){i()}),this.postExecuted(c,m4,function(u){s()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(u){var f=u.context,d=f.shape,h=o();d.labelTarget||(T(d,"bpmn:Lane")&&h.addLane(d),T(d,"bpmn:FlowNode")&&h.addFlowNode(d))})}ey.$inject=["eventBus","modeling"];ve(ey,ce);function g4(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function ty(e,t){ce.call(this,e),this.postExecuted("elements.create",function(n){const i=n.context,o=i.elements;for(const s of o)y4(s)&&!b4(s)&&t.updateProperties(s,{isForCompensation:void 0})})}ve(ty,ce);ty.$inject=["eventBus","modeling"];function y4(e){const t=ue(e);return t&&t.isForCompensation}function _4(e){return e&&T(e,"bpmn:BoundaryEvent")&&Cs(e,"bpmn:CompensateEventDefinition")}function b4(e){return e.incoming.filter(n=>_4(n.source)).length>0}const E4={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",_g],appendBehavior:["type",bg],associationBehavior:["type",Eg],attachEventBehavior:["type",Lp],boundaryEventBehavior:["type",xg],compensateBoundaryEventBehaviour:["type",Sg],createBehavior:["type",wg],createDataObjectBehavior:["type",Rg],createParticipantBehavior:["type",Tg],dataInputAssociationBehavior:["type",Cg],dataStoreBehavior:["type",Ag],deleteLaneBehavior:["type",Mg],detachEventBehavior:["type",jp],dropOnFlowBehavior:["type",Dg],eventBasedGatewayBehavior:["type",Og],fixHoverBehavior:["type",tT],groupBehavior:["type",Ng],importDockingFix:["type",nT],isHorizontalFix:["type",Pg],labelBehavior:["type",Bg],layoutConnectionBehavior:["type",Lg],messageFlowBehavior:["type",jg],nonInterruptingBehavior:["type",Hg],removeElementBehavior:["type",Ig],removeEmbeddedLabelBoundsBehavior:["type",$g],removeParticipantBehavior:["type",Ug],replaceConnectionBehavior:["type",Gg],replaceElementBehaviour:["type",Up],resizeBehavior:["type",dT],resizeLaneBehavior:["type",mT],rootElementReferenceBehavior:["type",Yg],spaceToolBehavior:["type",gT],subProcessPlaneBehavior:["type",ba],subProcessStartEventBehavior:["type",Xg],textAnnotationBehavior:["type",Kg],toggleCollapseConnectionBehaviour:["type",Wg],toggleElementCollapseBehaviour:["type",Zg],unclaimIdBehavior:["type",Qg],unsetDefaultFlowBehavior:["type",Jg],updateFlowNodeRefsBehavior:["type",ey],setCompensationActivityAfterPasteBehavior:["type",ty]};function yT(e,t){var n=vn(e,t,-15);return n!=="intersect"?n:null}function an(e){gi.call(this,e)}ve(an,gi);an.$inject=["eventBus"];an.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return x4(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},o=i.targetParent,s=i.targetAttach;if(s)return!1;o&&(n.parent=o);try{return Gf(t,n)}finally{o&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return Gf(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return CT(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return st(i)&&!sp(t,i)?!1:oo(t,function(o){return st(o)?Gf(o.source,o.target,o):o.host?tc(o,o.host,null,n):Av(o,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return tc(n,t,null,i)||RT(n,t,i)||TT(n,t)||sp(n,t)}),this.addRule("shape.create",function(e){return Av(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return tc(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return NT(n,t)})};an.prototype.canConnectMessageFlow=DT;an.prototype.canConnectSequenceFlow=OT;an.prototype.canConnectDataAssociation=iy;an.prototype.canConnectAssociation=AT;an.prototype.canConnectCompensationAssociation=MT;an.prototype.canMove=TT;an.prototype.canAttach=tc;an.prototype.canReplace=RT;an.prototype.canDrop=bs;an.prototype.canInsert=sp;an.prototype.canCreate=Av;an.prototype.canConnect=Gf;an.prototype.canResize=CT;an.prototype.canCopy=NT;function x4(e){return Rv(e)?null:He(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Rv(e){return!e||Xe(e)}function S4(e,t){return e===t}function p1(e){do{if(T(e,"bpmn:Process"))return ue(e);if(T(e,"bpmn:Participant"))return ue(e).processRef||ue(e)}while(e=e.parent)}function Tv(e){return T(e,"bpmn:TextAnnotation")}function ny(e){return T(e,"bpmn:Group")&&!e.labelTarget}function _T(e){return T(e,"bpmn:BoundaryEvent")&&Ui(e,"bpmn:CompensateEventDefinition")}function Gp(e){return ue(e).isForCompensation}function w4(e,t){var n=p1(e),i=p1(t);return n===i}function R4(e){return T(e,"bpmn:InteractionNode")&&!T(e,"bpmn:BoundaryEvent")&&(!T(e,"bpmn:Event")||T(e,"bpmn:ThrowEvent")&&ET(e,"bpmn:MessageEventDefinition"))}function T4(e){return T(e,"bpmn:InteractionNode")&&!Gp(e)&&(!T(e,"bpmn:Event")||T(e,"bpmn:CatchEvent")&&ET(e,"bpmn:MessageEventDefinition"))&&!(T(e,"bpmn:BoundaryEvent")&&!Ui(e,"bpmn:MessageEventDefinition"))}function d1(e){for(var t=e;t=t.parent;){if(T(t,"bpmn:FlowElementsContainer"))return ue(t);if(T(t,"bpmn:Participant"))return ue(t).processRef}return null}function bT(e,t){var n=d1(e),i=d1(t);return n===i}function Ui(e,t){var n=ue(e);return!!We(n.eventDefinitions||[],function(i){return T(i,t)})}function ET(e,t){var n=ue(e);return(n.eventDefinitions||[]).every(function(i){return T(i,t)})}function C4(e){return T(e,"bpmn:FlowNode")&&!T(e,"bpmn:EndEvent")&&!hn(e)&&!(T(e,"bpmn:IntermediateThrowEvent")&&Ui(e,"bpmn:LinkEventDefinition"))&&!_T(e)&&!Gp(e)}function A4(e){return T(e,"bpmn:FlowNode")&&!T(e,"bpmn:StartEvent")&&!T(e,"bpmn:BoundaryEvent")&&!hn(e)&&!(T(e,"bpmn:IntermediateCatchEvent")&&Ui(e,"bpmn:LinkEventDefinition"))&&!Gp(e)}function M4(e){return T(e,"bpmn:ReceiveTask")||T(e,"bpmn:IntermediateCatchEvent")&&(Ui(e,"bpmn:MessageEventDefinition")||Ui(e,"bpmn:TimerEventDefinition")||Ui(e,"bpmn:ConditionalEventDefinition")||Ui(e,"bpmn:SignalEventDefinition"))}function D4(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Cv(e,t){var n=D4(t);return n.indexOf(e)!==-1}function Gf(e,t,n){if(Rv(e)||Rv(t))return null;if(!T(n,"bpmn:DataAssociation")){if(DT(e,t))return{type:"bpmn:MessageFlow"};if(OT(e,t))return{type:"bpmn:SequenceFlow"}}var i=iy(e,t);return i||(MT(e,t)?{type:"bpmn:Association",associationDirection:"One"}:AT(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function bs(e,t){return Xe(e)||ny(e)?!0:T(t,"bpmn:Participant")&&!Ue(t)?!1:T(e,"bpmn:Participant")?T(t,"bpmn:Process")||T(t,"bpmn:Collaboration"):He(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:T(e,"bpmn:Lane")?T(t,"bpmn:Participant")||T(t,"bpmn:Lane"):T(e,"bpmn:BoundaryEvent")&&!O4(e)?!1:T(e,"bpmn:FlowElement")&&!T(e,"bpmn:DataStoreReference")?T(t,"bpmn:FlowElementsContainer")?Ue(t):He(t,["bpmn:Participant","bpmn:Lane"]):T(e,"bpmn:DataStoreReference")&&T(t,"bpmn:Collaboration")?fa(ue(t).get("participants"),function(n){return!!n.get("processRef")}):He(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?He(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):T(e,"bpmn:MessageFlow")?T(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function O4(e){return ue(e).cancelActivity&&(xT(e)||ST(e))}function N4(e){return!Xe(e)&&T(e,"bpmn:BoundaryEvent")}function P4(e){return T(e,"bpmn:Lane")}function B4(e){return N4(e)||T(e,"bpmn:IntermediateThrowEvent")&&xT(e)?!0:T(e,"bpmn:IntermediateCatchEvent")&&ST(e)}function xT(e){var t=ue(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function ST(e){return wT(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function wT(e,t){return t.some(function(n){return Ui(e,n)})}function L4(e){return T(e,"bpmn:ReceiveTask")&&We(e.incoming,function(t){return T(t.source,"bpmn:EventBasedGateway")})}function tc(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var o=e[0];return Xe(o)||!B4(o)||hn(t)||!T(t,"bpmn:Activity")||Gp(t)||i&&!yT(i,t)||L4(t)?!1:"attach"}function RT(e,t,n){if(!t)return!1;var i={replacements:[]};return z(e,function(o){hn(t)||T(o,"bpmn:StartEvent")&&o.type!=="label"&&bs(o,t)&&(MN(o)||i.replacements.push({oldElementId:o.id,newElementType:"bpmn:StartEvent"}),(DN(o)||ON(o)||NN(o))&&i.replacements.push({oldElementId:o.id,newElementType:"bpmn:StartEvent"}),wT(o,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&T(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:o.id,newElementType:"bpmn:StartEvent"})),T(t,"bpmn:Transaction")||Ui(o,"bpmn:CancelEventDefinition")&&o.type!=="label"&&(T(o,"bpmn:EndEvent")&&bs(o,t)&&i.replacements.push({oldElementId:o.id,newElementType:"bpmn:EndEvent"}),T(o,"bpmn:BoundaryEvent")&&tc(o,t,null,n)&&i.replacements.push({oldElementId:o.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function TT(e,t){return fa(e,P4)?!1:t?e.every(function(n){return bs(n,t)}):!0}function Av(e,t,n,i){return t?Xe(e)||ny(e)?!0:S4(n,t)||n&&Cv(n,t)?!1:bs(e,t)||sp(e,t):!1}function CT(e,t){return T(e,"bpmn:SubProcess")?Ue(e)&&(!t||t.width>=100&&t.height>=80):!!(T(e,"bpmn:Lane")||T(e,"bpmn:Participant")||Tv(e)||ny(e))}function k4(e,t){var n=Tv(e),i=Tv(t);return(n||i)&&n!==i}function AT(e,t){return Cv(t,e)||Cv(e,t)?!1:k4(e,t)?!0:!!iy(e,t)}function MT(e,t){return bT(e,t)&&_T(e)&&T(t,"bpmn:Activity")&&!j4(t,e)&&!hn(t)}function DT(e,t){return h1(e)&&!h1(t)?!1:R4(e)&&T4(t)&&!w4(e,t)}function OT(e,t){return C4(e)&&A4(t)&&bT(e,t)&&!(T(e,"bpmn:EventBasedGateway")&&!M4(t))}function iy(e,t){return He(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&He(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:He(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&He(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function sp(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:He(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Xe(t)&&T(e,"bpmn:FlowNode")&&!T(e,"bpmn:BoundaryEvent")&&bs(e,t.parent)}function z4(e,t){return e&&t&&e.indexOf(t)!==-1}function NT(e,t){return Xe(t)?!0:!(T(t,"bpmn:Lane")&&!z4(e,t.parent))}function h1(e){return ys(e,"bpmn:Process")||ys(e,"bpmn:Collaboration")}function j4(e,t){return e.attachers.includes(t)}const H4={__depends__:[Wi],__init__:["bpmnRules"],bpmnRules:["type",an]};var $4=2e3;function PT(e,t){e.on("saveXML.start",$4,n);function n(){var i=t.getRootElements();z(i,function(o){var s=qe(o),c,u;c=hc([o],!1),c=je(c,function(f){return f!==o&&!f.labelTarget}),u=mn(c,qe),s.set("planeElement",u)})}}PT.$inject=["eventBus","canvas"];const I4={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",PT]};function Vp(e){ce.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,o=i.shape||i.connection,s=i.parent,c=t.getOrdering(o,s);c&&(c.parent!==void 0&&(i.parent=c.parent),i.parentIndex=c.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,o=i.shape||i.connection,s=i.newParent||o.parent,c=t.getOrdering(o,s);c&&(c.parent!==void 0&&(i.newParent=c.parent),i.newParentIndex=c.index)})}Vp.prototype.getOrdering=function(e,t){return null};ve(Vp,ce);function ry(e,t){Vp.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(c){if(c.labelTarget)return{level:10};var u=We(n,function(f){return He(c,[f.type])});return u&&u.order||{level:1}}function o(c){var u=c.order;if(u||(c.order=u=i(c)),!u)throw new Error(`no order for <${c.id}>`);return u}function s(c,u,f){for(var d=u;d&&!He(d,f);)d=d.parent;if(!d)throw new Error(`no parent for <${c.id}> in <${u&&u.id}>`);return d}this.getOrdering=function(c,u){if(c.labelTarget||T(c,"bpmn:TextAnnotation"))return{parent:t.findRoot(u)||t.getRootElement(),index:-1};var f=o(c);f.containers&&(u=s(c,u,f.containers));var d=u.children.indexOf(c),h=DS(u.children,function(v){return!c.labelTarget&&v.labelTarget?!1:f.level<o(v).level});return h!==-1&&d!==-1&&d<h&&(h-=1),{index:h,parent:u}}}ry.$inject=["eventBus","canvas"];ve(ry,Vp);const U4={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",ry]};function Rc(){}Rc.prototype.get=function(){return this._data};Rc.prototype.set=function(e){this._data=e};Rc.prototype.clear=function(){var e=this._data;return delete this._data,e};Rc.prototype.isEmpty=function(){return!this._data};const G4={clipboard:["type",Rc]};var V4="drop-ok",m1="drop-not-ok",v1="attach-ok",g1="new-parent",y1="create",F4=2e3;function BT(e,t,n,i,o){function s(f,d,h,v,y){if(!d)return!1;f=je(f,function(N){var A=N.labelTarget;return!N.parent&&!(Xe(N)&&f.indexOf(A)!==-1)});var _=We(f,function(N){return!st(N)}),b=!1,w=!1,S=!1;b1(f)&&(b=o.allowed("shape.attach",{position:h,shape:_,target:d})),b||(b1(f)?S=o.allowed("shape.create",{position:h,shape:_,source:v,target:d}):S=o.allowed("elements.create",{elements:f,position:h,target:d}));var O=y.connectionTarget;return S||b?(_&&v&&(w=o.allowed("connection.create",{source:O===v?_:v,target:O===v?v:_,hints:{targetParent:d,targetAttach:b}})),{attach:b,connect:w}):S===null||b===null?null:!1}function c(f,d){[v1,V4,m1,g1].forEach(function(h){h===d?e.addMarker(f,h):e.removeMarker(f,h)})}n.on(["create.move","create.hover"],function(f){var d=f.context,h=d.elements,v=f.hover,y=d.source,_=d.hints||{};if(!v){d.canExecute=!1,d.target=null;return}_1(f);var b={x:f.x,y:f.y},w=d.canExecute=v&&s(h,v,b,y,_);v&&w!==null&&(d.target=v,w&&w.attach?c(v,v1):c(v,w?g1:m1))}),n.on(["create.end","create.out","create.cleanup"],function(f){var d=f.hover;d&&c(d,null)}),n.on("create.end",function(f){var d=f.context,h=d.source,v=d.shape,y=d.elements,_=d.target,b=d.canExecute,w=b&&b.attach,S=b&&b.connect,O=d.hints||{};if(b===!1||!_)return!1;_1(f);var N={x:f.x,y:f.y};S?v=i.appendShape(h,v,N,_,{attach:w,connection:S===!0?{}:S,connectionTarget:O.connectionTarget}):(y=i.createElements(y,N,_,I({},O,{attach:w})),v=We(y,function(A){return!st(A)})),I(d,{elements:y,shape:v}),I(f,{elements:y,shape:v})});function u(){var f=t.context();f&&f.prefix===y1&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",u),n.once(["create.cancel","create.end"],F4,function(){n.off("elements.changed",u)})}),this.start=function(f,d,h){Ae(d)||(d=[d]);var v=We(d,function(b){return!st(b)});if(v){h=I({elements:d,hints:{},shape:v},h||{}),z(d,function(b){Te(b.x)||(b.x=0),Te(b.y)||(b.y=0)});var y=je(d,function(b){return!b.hidden}),_=It(y);z(d,function(b){st(b)&&(b.waypoints=mn(b.waypoints,function(w){return{x:w.x-_.x-_.width/2,y:w.y-_.y-_.height/2}})),I(b,{x:b.x-_.x-_.width/2,y:b.y-_.y-_.height/2})}),t.init(f,y1,{cursor:"grabbing",autoActivate:!0,data:{shape:v,elements:d,context:h}})}}}BT.$inject=["canvas","dragging","eventBus","modeling","rules"];function _1(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function b1(e){return e&&e.length===1&&!st(e[0])}var Y4=750;function LT(e,t,n,i,o){function s(c){var u=Ee("g");he(u,o.cls("djs-drag-group",["no-events"]));var f=Ee("g");return c.forEach(function(d){var h;d.hidden||(d.waypoints?(h=n._createContainer("connection",f),n.drawConnection(to(h),d)):(h=n._createContainer("shape",f),n.drawShape(to(h),d),rn(h,d.x,d.y)),i.addDragger(d,u,h))}),u}t.on("create.move",Y4,function(c){var u=c.hover,f=c.context,d=f.elements,h=f.dragGroup;h||(h=f.dragGroup=s(d));var v;u?(h.parentNode||(v=e.getActiveLayer(),De(v,h)),rn(h,c.x,c.y)):$t(h)}),t.on("create.cleanup",function(c){var u=c.context,f=u.dragGroup;f&&$t(f)})}LT.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Fp={__depends__:[Rr,Ls,Wi,Di],__init__:["create","createPreview"],create:["type",BT],createPreview:["type",LT]};function ay(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var o=t._svg=i.svg;o.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}ay.$inject=["eventBus"];ay.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||q4(0,0)};function q4(e,t){var n=document.createEvent("MouseEvent"),i=e,o=t,s=e,c=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,o,s,c,!1,!1,!1,!1,0,null),n}const Tc={__init__:["mouse"],mouse:["type",ay]};function Oi(e,t,n,i,o,s,c,u){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=o,this._modeling=s,this._mouse=c,this._rules=u,o.on("copyPaste.copyElement",function(f){var d=f.descriptor,h=f.element,v=f.elements;d.priority=1,d.id=h.id;var y=We(v,function(_){return _===h.parent});y&&(d.parent=h.parent.id),X4(h)&&(d.priority=2,d.host=h.host.id),st(h)&&(d.priority=3,d.source=h.source.id,d.target=h.target.id,d.waypoints=K4(h)),Xe(h)&&(d.priority=4,d.labelTarget=h.labelTarget.id),z(["x","y","width","height"],function(_){Te(h[_])&&(d[_]=h[_])}),d.hidden=h.hidden,d.collapsed=h.collapsed}),o.on("copyPaste.pasteElements",function(f){var d=f.hints;I(d,{createElementsBehavior:!1})})}Oi.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Oi.prototype.copy=function(e){var t,n;return Ae(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(Ae(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Oi.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}};Oi.prototype._paste=function(e,t,n,i){z(e,function(s){Te(s.x)||(s.x=0),Te(s.y)||(s.y=0)});var o=It(e);return z(e,function(s){st(s)&&(s.waypoints=mn(s.waypoints,function(c){return{x:c.x-o.x-o.width/2,y:c.y-o.y-o.height/2}})),I(s,{x:s.x-o.x-o.width/2,y:s.y-o.y-o.height/2})}),this._modeling.createElements(e,n,t,I({},i))};Oi.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},o=[];return z(e,function(s,c){s=Fi(s,"priority"),z(s,function(u){var f=I({},qi(u,["priority"]));i[u.parent]?f.parent=i[u.parent]:delete f.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:f});var d;if(st(f)){f.source=i[u.source],f.target=i[u.target],d=i[u.id]=t.createConnection(f),o.push(d);return}if(Xe(f)){f.labelTarget=i[f.labelTarget],d=i[u.id]=t.createLabel(f),o.push(d);return}f.host&&(f.host=i[f.host]),d=i[u.id]=t.createShape(f),o.push(d)})}),o};Oi.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(qi(e,["id"]));return t};Oi.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(qi(e,["id"]));return t};Oi.prototype.createShape=function(e){var t=this._elementFactory.createShape(qi(e,["id"]));return t};Oi.prototype.hasRelations=function(e,t){var n,i,o;return!(st(e)&&(i=We(t,Ti({id:e.source.id})),o=We(t,Ti({id:e.target.id})),!i||!o)||Xe(e)&&(n=We(t,Ti({id:e.labelTarget.id})),!n))};Oi.prototype.createTree=function(e){var t=this._rules,n=this,i={},o=[],s=mp(e);function c(d,h){return t.allowed("element.copy",{element:d,elements:h})}function u(d,h){var v=We(o,function(y){return d===y.element});if(!v){o.push({element:d,depth:h});return}v.depth<h&&(o=f(v,o),o.push({element:v.element,depth:h}))}function f(d,h){var v=h.indexOf(d);return v!==-1&&h.splice(v,1),h}return lo(s,function(d,h,v){if(Xe(d))return;z(d.labels,function(b){u(b,v)});function y(b){b&&b.length&&z(b,function(w){z(w.labels,function(S){u(S,v)}),u(w,v)})}z([d.attachers,d.incoming,d.outgoing],y),u(d,v);var _=[];return d.children&&(_=d.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:d,children:_}),_}),e=mn(o,function(d){return d.element}),o=mn(o,function(d){return d.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:d.descriptor,element:d.element,elements:e}),d}),o=Fi(o,function(d){return d.descriptor.priority}),e=mn(o,function(d){return d.element}),z(o,function(d){var h=d.depth;if(!n.hasRelations(d.element,e)){x1(d.element,e);return}if(!c(d.element,e)){x1(d.element,e);return}i[h]||(i[h]=[]),i[h].push(d.descriptor)}),i};function X4(e){return!!e.host}function K4(e){return mn(e.waypoints,function(t){return t=E1(t),t.original&&(t.original=E1(t.original)),t})}function E1(e){return I({},e)}function x1(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const W4={__depends__:[G4,Fp,Tc,Wi],__init__:["copyPaste"],copyPaste:["type",Oi]};function $m(e,t,n){Ae(n)||(n=[n]),z(n,function(i){no(e[i])||(t[i]=e[i])})}var Im=750;function kT(e,t,n){function i(f,d){var h=e.create(f.$type);return n.copyElement(f,h,null,d)}t.on("copyPaste.copyElement",Im,function(f){var d=f.descriptor,h=f.element,v=ue(h);if(Xe(h))return d;var y=d.businessObject=i(v,!0),_=d.di=i(qe(h),!0);_.bpmnElement=y,$m(y,d,"name"),$m(_,d,"isExpanded"),v.default&&(d.default=v.default.id)});var o="-bpmn-js-refs";function s(f){return f[o]=f[o]||{}}function c(f,d){f[o]=d}function u(f,d,h){var v=ue(f);return f.default&&(h[f.default]={element:v,property:"default"}),f.host&&(ue(f).attachedToRef=ue(d[f.host])),qi(h,$n(h,function(y,_,b){var w=_.element,S=_.property;return b===f.id&&(w.set(S,v),y.push(f.id)),y},[]))}t.on("copyPaste.pasteElement",function(f){var d=f.cache,h=f.descriptor,v=h.businessObject,y=h.di;if(Xe(h)){h.businessObject=ue(d[h.labelTarget]),h.di=qe(d[h.labelTarget]);return}v=h.businessObject=i(v),y=h.di=i(y),y.bpmnElement=v,$m(h,v,["isExpanded","name"]),h.type=v.$type}),t.on("copyPaste.copyElement",Im,function(f){var d=f.descriptor,h=f.element;if(T(h,"bpmn:Participant")){var v=ue(h);v.processRef&&(d.processRef=i(v.processRef,!0))}}),t.on("copyPaste.pasteElement",function(f){var d=f.descriptor,h=d.processRef;h&&(d.processRef=i(h))}),t.on("copyPaste.pasteElement",Im,function(f){var d=f.cache,h=f.descriptor;c(d,u(h,d,s(d)))})}kT.$inject=["bpmnFactory","eventBus","moddleCopy"];const Z4=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],Q4=["errorRef","escalationRef","messageRef","signalRef"];function Cc(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",i=>{const{propertyNames:o}=i;if(!(!o||!o.length))return Fi(o,s=>s==="extensionElements")}),e.on("moddleCopy.canCopyProperty",i=>{const{parent:o,property:s,propertyName:c}=i,u=Zt(o)&&o.$descriptor;if(c&&Q4.includes(c))return s;if(c&&Z4.includes(c)||c&&u&&!We(u.properties,Ti({name:c})))return!1}),e.on("moddleCopy.canSetCopiedProperty",i=>{const{property:o}=i;if(T(o,"bpmn:ExtensionElements")&&(!o.values||!o.values.length))return!1})}Cc.$inject=["eventBus","bpmnFactory","moddle"];Cc.prototype.copyElement=function(e,t,n,i=!1){n&&!Ae(n)&&(n=[n]),n=n||Mv(e.$descriptor);const o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return o===!1||(Ae(o)&&(n=o),z(n,s=>{let c;Cn(e,s)&&(c=e.get(s));const u=this.copyProperty(c,t,s,i);!Wt(u)||this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:u,propertyName:s})===!1||t.set(s,u)})),t};Cc.prototype.copyProperty=function(e,t,n,i=!1){let o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(o===!1)return;if(o)return Zt(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;const s=this._moddle.getPropertyDescriptor(t,n);if(!s.isReference)return s.isId?e&&this._copyId(e,t,i):Ae(e)?$n(e,(c,u)=>{const f=this.copyProperty(u,t,n,i);return f?c.concat(f):c},[]):Zt(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=this._bpmnFactory.create(e.$type),o.$parent=t,o=this.copyElement(e,o,null,i),o):e};Cc.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Mv(e,t){return $n(e.properties,(n,i)=>t&&i.default?n:n.concat(i.name),[])}const zT={__depends__:[W4],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",kT],moddleCopy:["type",Cc]};var S1=Math.round;function oy(e,t){this._modeling=e,this._eventBus=t}oy.$inject=["modeling","eventBus"];oy.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,o=this._eventBus;o.fire("replace.start",{element:e,attrs:t,hints:n});var s=t.width||e.width,c=t.height||e.height,u=t.x||e.x,f=t.y||e.y,d=S1(u+s/2),h=S1(f+c/2),v=i.replaceShape(e,I({},t,{x:d,y:h,width:s,height:c}),n);return o.fire("replace.end",{element:e,newElement:v,hints:n}),v};function jT(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:o={}}=n;o.select!==!1&&e.select(i)})}jT.$inject=["selection","eventBus"];const J4={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",jT],replace:["type",oy]};function e6(e,t,n){Ae(n)||(n=[n]),z(n,function(i){no(e[i])||(t[i]=e[i])})}var t6=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function n6(e,t){var n=e&&Cn(e,"collapsed")?e.collapsed:!Ue(e),i;return t&&(Cn(t,"collapsed")||Cn(t,"isExpanded"))?i=Cn(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function HT(e,t,n,i,o,s){function c(u,f,d){d=d||{};var h=f.type,v=u.businessObject;if(Ef(v)&&(h==="bpmn:SubProcess"||h==="bpmn:AdHocSubProcess")&&n6(u,f))return i.toggleCollapse(u),u;var y=e.create(h),_={type:h,businessObject:y};_.di={},h==="bpmn:ExclusiveGateway"&&(_.di.isMarkerVisible=!0),e6(u.di,_.di,["fill","stroke","background-color","border-color","color"]);var b=Mv(v.$descriptor),w=Mv(y.$descriptor,!0),S=i6(b,w);I(y,Ai(f,t6));var O=je(S,function(C){return C==="eventDefinitions"?w1(u,f.eventDefinitionType):C==="loopCharacteristics"?!hn(y):Cn(y,C)||C==="processRef"&&f.isExpanded===!1||C==="triggeredByEvent"?!1:C==="isForCompensation"?!hn(y):!0});if(y=n.copyElement(v,y,O),f.eventDefinitionType&&(w1(y,f.eventDefinitionType)||(_.eventDefinitionType=f.eventDefinitionType,_.eventDefinitionAttrs=f.eventDefinitionAttrs)),T(v,"bpmn:Activity")){if(Ef(v))_.isExpanded=Ue(u);else if(f&&Cn(f,"isExpanded")){_.isExpanded=f.isExpanded;var N=t.getDefaultSize(y,{isExpanded:_.isExpanded});_.width=N.width,_.height=N.height,_.x=u.x-(_.width-u.width)/2,_.y=u.y-(_.height-u.height)/2}Ue(u)&&!T(v,"bpmn:Task")&&_.isExpanded&&(_.width=u.width,_.height=u.height)}if(Ef(v)&&!Ef(y)&&(d.moveChildren=!1),T(v,"bpmn:Participant")){f.isExpanded===!0?y.processRef=e.create("bpmn:Process"):d.moveChildren=!1;var A=Yt(u);qe(u).isHorizontal||(qe(_).isHorizontal=A),_.width=A?u.width:t.getDefaultSize(_).width,_.height=A?t.getDefaultSize(_).height:u.height}return s.allowed("shape.resize",{shape:y})||(_.height=t.getDefaultSize(_).height,_.width=t.getDefaultSize(_).width),y.name=v.name,He(v,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&He(y,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(y.default=v.default),f.host&&!T(v,"bpmn:BoundaryEvent")&&T(y,"bpmn:BoundaryEvent")&&(_.host=f.host),(_.type==="bpmn:DataStoreReference"||_.type==="bpmn:DataObjectReference")&&(_.x=u.x+(u.width-_.width)/2),o.replaceElement(u,_,{...d,targetElement:f})}this.replaceElement=c}HT.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function Ef(e){return T(e,"bpmn:SubProcess")}function w1(e,t){var n=ue(e);return t&&n.get("eventDefinitions").some(function(i){return T(i,t)})}function i6(e,t){return e.filter(function(n){return t.includes(n)})}const $T={__depends__:[zT,J4,Di],bpmnReplace:["type",HT]};var r6=250;function po(e){this._eventBus=e,this._tools=[],this._active=null}po.$inject=["eventBus"];po.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};po.prototype.isActive=function(e){return e&&this._active===e};po.prototype.length=function(e){return this._tools.length};po.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};po.prototype.bindEvents=function(e,t){var n=this._eventBus,i=[];n.on(t.tool+".init",function(o){var s=o.context;if(!s.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),z(t,function(o){i.push(o+".ended"),i.push(o+".canceled")}),n.on(i,r6,function(o){this._active&&(a6(o)||this.setActive(null))},this)};function a6(e){var t=e.originalEvent&&e.originalEvent.target;return t&&ws(t,'.group[data-group="tools"]')}const Yp={__depends__:[Rr],__init__:["toolManager"],toolManager:["type",po]};function o6(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function s6(e,t){var n=[];return z(e.concat(t),function(i){var o=i.incoming,s=i.outgoing;z(o.concat(s),function(c){var u=c.source,f=c.target;(ql(e,u)||ql(e,f)||ql(t,u)||ql(t,f))&&(ql(n,c)||n.push(c))})}),n}function ql(e,t){return e.indexOf(t)!==-1}function l6(e,t,n){var i=e.x,o=e.y,s=e.width,c=e.height,u=n.x,f=n.y;switch(t){case"n":return{x:i,y:o+f,width:s,height:c-f};case"s":return{x:i,y:o,width:s,height:c+f};case"w":return{x:i+u,y:o,width:s-u,height:c};case"e":return{x:i,y:o,width:s+u,height:c};default:throw new Error("unknown direction: "+t)}}var Um=Math.abs,c6=Math.round,dr={x:"width",y:"height"},IT="crosshair",ia={n:"top",w:"left",s:"bottom",e:"right"},u6=1500,xf={n:"s",w:"e",s:"n",e:"w"},Sf=20;function yi(e,t,n,i,o,s,c){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=o,this._toolManager=s,this._mouse=c;var u=this;s.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(f){n.once("spaceTool.selection.ended",function(){u.activateMakeSpace(f.originalEvent)})}),n.on("spaceTool.move",u6,function(f){var d=f.context,h=d.initialized;h||(h=d.initialized=u.init(f,d)),h&&T1(f)}),n.on("spaceTool.end",function(f){var d=f.context,h=d.axis,v=d.direction,y=d.movingShapes,_=d.resizingShapes,b=d.start;if(d.initialized){T1(f);var w={x:0,y:0};w[h]=c6(f["d"+h]),u.makeSpace(y,_,w,v,b),n.once("spaceTool.ended",function(S){u.activateSelection(S.originalEvent,!0,!0)})}})}yi.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];yi.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:IT,data:{context:{reactivate:n}},trapClick:!1})};yi.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:IT,data:{context:{}}})};yi.prototype.makeSpace=function(e,t,n,i,o){return this._modeling.createSpace(e,t,n,i,o)};yi.prototype.init=function(e,t){var n=Um(e.dx)>Um(e.dy)?"x":"y",i=e["d"+n],o=e[n]-i;if(Um(i)<5)return!1;i<0&&(i*=-1),sc(e)&&(i*=-1);var s=o6(n,i),c=this._canvas.getRootElement();!Jf(e)&&e.hover&&(c=e.hover);var u=[...hc(c,!0),...c.attachers||[]],f=this.calculateAdjustments(u,n,i,o),d=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:s,shapes:f.resizingShapes,start:o}),h=f6(f,n,s,o,d);return I(t,f,{axis:n,direction:s,spaceToolConstraints:h,start:o}),Cp("resize-"+(n==="x"?"ew":"ns")),!0};yi.prototype.calculateAdjustments=function(e,t,n,i){var o=this._rules,s=[],c=[],u=[],f=[];function d(y){s.includes(y)||s.push(y);var _=y.label;_&&!s.includes(_)&&s.push(_)}function h(y){c.includes(y)||c.push(y)}z(e,function(y){if(!(!y.parent||Xe(y))){if(st(y)){f.push(y);return}var _=y[t],b=_+y[dr[t]];if(p6(y)&&(n>0&&Ce(y)[t]>i||n<0&&Ce(y)[t]<i)){u.push(y);return}if(n>0&&_>i||n<0&&b<i){d(y);return}if(_<i&&b>i&&o.allowed("shape.resize",{shape:y})){h(y);return}}}),z(s,function(y){var _=y.attachers;_&&z(_,function(b){d(b)})});var v=s.concat(c);return z(u,function(y){var _=y.host;Ja(v,_)&&d(y)}),v=s.concat(c),z(f,function(y){var _=y.source,b=y.target,w=y.label;Ja(v,_)&&Ja(v,b)&&w&&d(w)}),{movingShapes:s,resizingShapes:c}};yi.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};yi.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function R1(e){return{top:e.top-Sf,right:e.right+Sf,bottom:e.bottom+Sf,left:e.left-Sf}}function T1(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,o;Te(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),Te(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),Te(n.top)&&(o=Math.max(e.y,n.top),e.dy=e.dy+o-e.y,e.y=o),Te(n.bottom)&&(o=Math.min(e.y,n.bottom),e.dy=e.dy+o-e.y,e.y=o)}}function f6(e,t,n,i,o){var s=e.movingShapes,c=e.resizingShapes;if(c.length){var u={},f,d;return z(c,function(h){var v=h.attachers,y=h.children,_=Se(h),b=je(y,function(J){return!st(J)&&!Xe(J)&&!Ja(s,J)&&!Ja(c,J)}),w=je(y,function(J){return!st(J)&&!Xe(J)&&Ja(s,J)}),S,O,N,A=[],C=[],D,B,F,j;b.length&&(O=R1(Se(It(b))),S=i-_[ia[n]]+O[ia[n]],n==="n"?u.bottom=d=Te(d)?Math.min(d,S):S:n==="w"?u.right=d=Te(d)?Math.min(d,S):S:n==="s"?u.top=f=Te(f)?Math.max(f,S):S:n==="e"&&(u.left=f=Te(f)?Math.max(f,S):S)),w.length&&(N=R1(Se(It(w))),S=i-N[ia[xf[n]]]+_[ia[xf[n]]],n==="n"?u.bottom=d=Te(d)?Math.min(d,S):S:n==="w"?u.right=d=Te(d)?Math.min(d,S):S:n==="s"?u.top=f=Te(f)?Math.max(f,S):S:n==="e"&&(u.left=f=Te(f)?Math.max(f,S):S)),v&&v.length&&(v.forEach(function(J){Ja(s,J)?A.push(J):C.push(J)}),A.length&&(D=Se(It(A.map(Ce))),B=_[ia[xf[n]]]-(D[ia[xf[n]]]-i)),C.length&&(F=Se(It(C.map(Ce))),j=F[ia[n]]-(_[ia[n]]-i)),n==="n"?(S=Math.min(B||1/0,j||1/0),u.bottom=d=Te(d)?Math.min(d,S):S):n==="w"?(S=Math.min(B||1/0,j||1/0),u.right=d=Te(d)?Math.min(d,S):S):n==="s"?(S=Math.max(B||-1/0,j||-1/0),u.top=f=Te(f)?Math.max(f,S):S):n==="e"&&(S=Math.max(B||-1/0,j||-1/0),u.left=f=Te(f)?Math.max(f,S):S));var Q=o&&o[h.id];Q&&(n==="n"?(S=i+h[dr[t]]-Q[dr[t]],u.bottom=d=Te(d)?Math.min(d,S):S):n==="w"?(S=i+h[dr[t]]-Q[dr[t]],u.right=d=Te(d)?Math.min(d,S):S):n==="s"?(S=i-h[dr[t]]+Q[dr[t]],u.top=f=Te(f)?Math.max(f,S):S):n==="e"&&(S=i-h[dr[t]]+Q[dr[t]],u.left=f=Te(f)?Math.max(f,S):S))}),u}}function Ja(e,t){return e.indexOf(t)!==-1}function p6(e){return!!e.host}var Gm="djs-dragging",C1="djs-resizing",d6=250,wf=Math.max;function UT(e,t,n,i,o){function s(c,u){z(c,function(f){o.addDragger(f,u),n.addMarker(f,Gm)})}e.on("spaceTool.selection.start",function(c){var u=n.getLayer("space"),f=c.context,d={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},h=Ee("g");he(h,i.cls("djs-crosshair-group",["no-events"])),De(u,h);var v=Ee("path");he(v,"d",d.x),Ye(v).add("djs-crosshair"),De(h,v);var y=Ee("path");he(y,"d",d.y),Ye(y).add("djs-crosshair"),De(h,y),f.crosshairGroup=h}),e.on("spaceTool.selection.move",function(c){var u=c.context.crosshairGroup;rn(u,c.x,c.y)}),e.on("spaceTool.selection.cleanup",function(c){var u=c.context,f=u.crosshairGroup;f&&$t(f)}),e.on("spaceTool.move",d6,function(c){var u=c.context,f=u.line,d=u.axis,h=u.movingShapes,v=u.resizingShapes;if(u.initialized){if(!u.dragGroup){var y=n.getLayer("space");f=Ee("path"),he(f,"d","M0,0 L0,0"),Ye(f).add("djs-crosshair"),De(y,f),u.line=f;var _=Ee("g");he(_,i.cls("djs-drag-group",["no-events"])),De(n.getActiveLayer(),_),s(h,_);var b=u.movingConnections=t.filter(function(C){var D=!1;z(h,function(Q){z(Q.outgoing,function(J){C===J&&(D=!0)})});var B=!1;z(h,function(Q){z(Q.incoming,function(J){C===J&&(B=!0)})});var F=!1;z(v,function(Q){z(Q.outgoing,function(J){C===J&&(F=!0)})});var j=!1;return z(v,function(Q){z(Q.incoming,function(J){C===J&&(j=!0)})}),st(C)&&(D||F)&&(B||j)});s(b,_),u.dragGroup=_}if(!u.frameGroup){var w=Ee("g");he(w,i.cls("djs-frame-group",["no-events"])),De(n.getActiveLayer(),w);var S=[];z(v,function(C){var D=o.addFrame(C,w),B=D.getBBox();S.push({element:D,initialBounds:B}),n.addMarker(C,C1)}),u.frameGroup=w,u.frames=S}var O={x:"M"+c.x+", -10000 L"+c.x+", 10000",y:"M -10000, "+c.y+" L 10000, "+c.y};he(f,{d:O[d]});var N={x:"y",y:"x"},A={x:c.dx,y:c.dy};A[N[u.axis]]=0,rn(u.dragGroup,A.x,A.y),z(u.frames,function(C){var D=C.element,B=C.initialBounds,F,j;u.direction==="e"?he(D,{width:wf(B.width+A.x,5)}):(F=wf(B.width-A.x,5),he(D,{width:F,x:B.x+B.width-F})),u.direction==="s"?he(D,{height:wf(B.height+A.y,5)}):(j=wf(B.height-A.y,5),he(D,{height:j,y:B.y+B.height-j}))})}}),e.on("spaceTool.cleanup",function(c){var u=c.context,f=u.movingShapes,d=u.movingConnections,h=u.resizingShapes,v=u.line,y=u.dragGroup,_=u.frameGroup;z(f,function(b){n.removeMarker(b,Gm)}),z(d,function(b){n.removeMarker(b,Gm)}),y&&($t(v),$t(y)),z(h,function(b){n.removeMarker(b,C1)}),_&&$t(_)})}UT.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const h6={__init__:["spaceToolPreview"],__depends__:[Rr,Wi,Yp,Ls,Tc],spaceTool:["type",yi],spaceToolPreview:["type",UT]};function qp(e,t){e.invoke(yi,this),this._canvas=t}qp.$inject=["injector","canvas"];ve(qp,yi);qp.prototype.calculateAdjustments=function(e,t,n,i){var o=this._canvas.getRootElement(),s=e[0]===o?null:e[0],c=[];s&&(c=up(FS(o.children.filter(d=>T(d,"bpmn:Artifact")),It(s))));const u=[...e,...c];var f=yi.prototype.calculateAdjustments.call(this,u,t,n,i);return f.resizingShapes=f.resizingShapes.filter(function(d){return!(T(d,"bpmn:TextAnnotation")||m6(d)&&(t==="y"&&Yt(d)||t==="x"&&!Yt(d)))}),f};function m6(e){return T(e,"bpmn:Participant")&&!ue(e).processRef}const GT={__depends__:[h6],spaceTool:["type",qp]};function Et(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Et.$inject=["eventBus","injector"];Et.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};Et.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let o=this._fire(e,"canExecute",n);if(o===void 0){if(!i)return!1;i.canExecute&&(o=i.canExecute(t))}return o};Et.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Et.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Et.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Et.prototype.register=function(e,t){this._setHandler(e,t)};Et.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Et.prototype.canUndo=function(){return!!this._getUndoAction()};Et.prototype.canRedo=function(){return!!this._getRedoAction()};Et.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Et.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Et.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Et.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let o;n=this._eventBus.createEvent(n);for(const s of i)if(o=this._eventBus.fire("commandStack."+s,n),n.cancelBubble)break;return o};Et.prototype._createId=function(){return this._uid++};Et.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Et.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,o=this._getHandler(n);if(!o)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),o.preExecute&&o.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),o.execute&&this._markDirty(o.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),o.postExecute&&o.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()};Et.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};Et.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:OS("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Et.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=Ae(e)?e:[e],t.dirty=t.dirty.concat(e))};Et.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Et.prototype._revertedAction=function(e){this._stackIdx--};Et.prototype._getHandler=function(e){return this._handlerMap[e]};Et.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const v6={commandStack:["type",Et]};function sa(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var g6=250,A1=1400;function sy(e,t,n){ce.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",A1,function(o){var s=o.context,c=s.shapes,u=s.validatedShapes;s.shapes=M1(c),s.validatedShapes=M1(u)}),i&&t.on("shape.move.start",g6,function(o){var s=o.context,c=s.shapes,u=[];z(c,function(f){z(f.labels,function(d){!d.hidden&&s.shapes.indexOf(d)===-1&&u.push(d),f.labelTarget&&u.push(f)})}),z(u,function(f){i.makeDraggable(s,f,!0)})}),this.preExecuted("elements.move",A1,function(o){var s=o.context,c=s.closure,u=c.enclosedElements,f=[];z(u,function(d){z(d.labels,function(h){u[h.id]||f.push(h)})}),c.addAll(f)}),this.preExecute(["connection.delete","shape.delete"],function(o){var s=o.context,c=s.connection||s.shape;sa(c.labels,function(u){n.removeShape(u,{nested:!0})})}),this.execute("shape.delete",function(o){var s=o.context,c=s.shape,u=c.labelTarget;u&&(s.labelTargetIndex=$v(u.labels,c),s.labelTarget=u,c.labelTarget=null)}),this.revert("shape.delete",function(o){var s=o.context,c=s.shape,u=s.labelTarget,f=s.labelTargetIndex;u&&(Ut(u.labels,c,f),c.labelTarget=u)})}ve(sy,ce);sy.$inject=["injector","eventBus","modeling"];function M1(e){return je(e,function(t){return e.indexOf(t.labelTarget)===-1})}const y6={__init__:["labelSupport"],labelSupport:["type",sy]};var _6=251,D1=1401,O1="attach-ok";function ly(e,t,n,i,o){ce.call(this,t);var s=e.get("movePreview",!1);t.on("shape.move.start",D1,function(c){var u=c.context,f=u.shapes,d=u.validatedShapes;u.shapes=b6(f),u.validatedShapes=E6(d)}),s&&t.on("shape.move.start",_6,function(c){var u=c.context,f=u.shapes,d=Dv(f);z(d,function(h){s.makeDraggable(u,h,!0),z(h.labels,function(v){s.makeDraggable(u,v,!0)})})}),s&&t.on("shape.move.start",function(c){var u=c.context,f=u.shapes;if(f.length===1){var d=f[0],h=d.host;h&&(n.addMarker(h,O1),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(h,O1)}))}}),this.preExecuted("elements.move",D1,function(c){var u=c.context,f=u.closure,d=u.shapes,h=Dv(d);z(h,function(v){f.add(v,f.topLevel[v.host.id])})}),this.postExecuted("elements.move",function(c){var u=c.context,f=u.shapes,d=u.newHost,h;d&&f.length!==1||(d?h=f:h=je(f,function(v){var y=v.host;return x6(v)&&!S6(f,y)}),z(h,function(v){o.updateAttachment(v,d)}))}),this.postExecuted("elements.move",function(c){var u=c.context.shapes;z(u,function(f){z(f.attachers,function(d){z(d.outgoing.slice(),function(h){var v=i.allowed("connection.reconnect",{connection:h,source:h.source,target:h.target});v||o.removeConnection(h)}),z(d.incoming.slice(),function(h){var v=i.allowed("connection.reconnect",{connection:h,source:h.source,target:h.target});v||o.removeConnection(h)})})})}),this.postExecute("shape.create",function(c){var u=c.context,f=u.shape,d=u.host;d&&o.updateAttachment(f,d)}),this.postExecute("shape.replace",function(c){var u=c.context,f=u.oldShape,d=u.newShape;sa(f.attachers,function(h){var v=i.allowed("elements.move",{target:d,shapes:[h]});v==="attach"?o.updateAttachment(h,d):o.removeShape(h)}),d.attachers.length&&z(d.attachers,function(h){var v=o1(h,f,d);o.moveShape(h,v,h.parent)})}),this.postExecute("shape.resize",function(c){var u=c.context,f=u.shape,d=u.oldBounds,h=u.newBounds,v=f.attachers,y=u.hints||{};y.attachSupport!==!1&&z(v,function(_){var b=o1(_,d,h);o.moveShape(_,b,_.parent),z(_.labels,function(w){o.moveShape(w,b,w.parent)})})}),this.preExecute("shape.delete",function(c){var u=c.context.shape;sa(u.attachers,function(f){o.removeShape(f)}),u.host&&o.updateAttachment(u,null)})}ve(ly,ce);ly.$inject=["injector","eventBus","canvas","rules","modeling"];function Dv(e){return Lv(mn(e,function(t){return t.attachers||[]}))}function b6(e){var t=Dv(e);return hM("id",e,t)}function E6(e){var t=Ss(e,"id");return je(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function x6(e){return!!e.host}function S6(e,t){return e.indexOf(t)!==-1}const w6={__depends__:[Wi],__init__:["attachSupport"],attachSupport:["type",ly]};function _i(e){this._model=e}_i.$inject=["moddle"];_i.prototype._needsId=function(e){return He(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};_i.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;T(e,"bpmn:Activity")?t="Activity":T(e,"bpmn:Event")?t="Event":T(e,"bpmn:Gateway")?t="Gateway":He(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};_i.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};_i.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};_i.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",I({bpmnElement:e,bounds:this.createDiBounds()},t))};_i.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};_i.prototype.createDiWaypoints=function(e){var t=this;return mn(e,function(n){return t.createDiWaypoint(n)})};_i.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Ai(e,["x","y"]))};_i.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",I({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};_i.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",I({bpmnElement:e},t))};function Un(e,t,n){ce.call(this,e),this._bpmnFactory=t;var i=this;function o(_){var b=_.context,w=b.hints||{},S;!b.cropped&&w.createElementsBehavior!==!1&&(S=b.connection,S.waypoints=n.getCroppedWaypoints(S),b.cropped=!0)}this.executed(["connection.layout","connection.create"],o),this.reverted(["connection.layout"],function(_){delete _.context.cropped});function s(_){var b=_.context;i.updateParent(b.shape||b.connection,b.oldParent)}function c(_){var b=_.context,w=b.shape||b.connection,S=b.parent||b.newParent;i.updateParent(w,S)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],kn(s)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],kn(c));function u(_){var b=_.context,w=b.oldRoot,S=w.children;z(S,function(O){T(O,"bpmn:BaseElement")&&i.updateParent(O)})}this.executed(["canvas.updateRoot"],u),this.reverted(["canvas.updateRoot"],u);function f(_){var b=_.context.shape;T(b,"bpmn:BaseElement")&&i.updateBounds(b)}this.executed(["shape.move","shape.create","shape.resize"],kn(function(_){_.context.shape.type!=="label"&&f(_)})),this.reverted(["shape.move","shape.create","shape.resize"],kn(function(_){_.context.shape.type!=="label"&&f(_)})),e.on("shape.changed",function(_){_.element.type==="label"&&f({context:{shape:_.element}})});function d(_){i.updateConnection(_.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],kn(d)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],kn(d));function h(_){i.updateConnectionWaypoints(_.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],kn(h)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],kn(h)),this.executed("connection.reconnect",kn(function(_){var b=_.context,w=b.connection,S=b.oldSource,O=b.newSource,N=ue(w),A=ue(S),C=ue(O);N.conditionExpression&&!He(C,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(b.oldConditionExpression=N.conditionExpression,delete N.conditionExpression),S!==O&&A.default===N&&(b.oldDefault=A.default,delete A.default)})),this.reverted("connection.reconnect",kn(function(_){var b=_.context,w=b.connection,S=b.oldSource,O=b.newSource,N=ue(w),A=ue(S),C=ue(O);b.oldConditionExpression&&(N.conditionExpression=b.oldConditionExpression),b.oldDefault&&(A.default=b.oldDefault,delete C.default)}));function v(_){i.updateAttachment(_.context)}this.executed(["element.updateAttachment"],kn(v)),this.reverted(["element.updateAttachment"],kn(v)),this.executed("element.updateLabel",kn(y)),this.reverted("element.updateLabel",kn(y));function y(_){const{element:b}=_.context,w=Mi(b),S=qe(b),O=S&&S.get("label");ro(b)||zf(b)||(w&&!O?S.set("label",t.create("bpmndi:BPMNLabel")):!w&&O&&S.set("label",void 0))}}ve(Un,ce);Un.$inject=["eventBus","bpmnFactory","connectionDocking"];Un.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};Un.prototype.updateParent=function(e,t){if(!Xe(e)&&!(T(e,"bpmn:DataStoreReference")&&e.parent&&T(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,o=qe(e),s=n&&n.businessObject,c=qe(n);T(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,s,t&&t.businessObject),T(e,"bpmn:DataOutputAssociation")&&(e.source?s=e.source.businessObject:s=null),T(e,"bpmn:DataInputAssociation")&&(e.target?s=e.target.businessObject:s=null),this.updateSemanticParent(i,s),T(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,s),this.updateDiParent(o,c)}};Un.prototype.updateBounds=function(e){var t=qe(e),n=T6(e);if(n){var i=Ci(n,t.get("bounds"));I(n,{x:e.x+i.x,y:e.y+i.y})}var o=Xe(e)?this._getLabel(t):t,s=o.bounds;s||(s=this._bpmnFactory.createDiBounds(),o.set("bounds",s)),I(s,{x:e.x,y:e.y,width:e.width,height:e.height})};Un.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,o;T(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),Nt(i,e)),T(t,"bpmn:Lane")&&(o=t.get("flowNodeRef"),Ut(o,e))}};Un.prototype.updateDiConnection=function(e,t,n){var i=qe(e),o=qe(t),s=qe(n);i.sourceElement&&i.sourceElement.bpmnElement!==ue(t)&&(i.sourceElement=t&&o),i.targetElement&&i.targetElement.bpmnElement!==ue(n)&&(i.targetElement=n&&s)};Un.prototype.updateDiParent=function(e,t){if(t&&!T(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Nt(n,e),e.$parent=null)}};function R6(e){for(;e&&!T(e,"bpmn:Definitions");)e=e.$parent;return e}Un.prototype.getLaneSet=function(e){var t,n;return T(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(T(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Un.prototype.updateSemanticParent=function(e,t,n){var i;if(e.$parent!==t&&!((T(e,"bpmn:DataInput")||T(e,"bpmn:DataOutput"))&&(T(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(T(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(T(e,"bpmn:FlowElement")){if(t){if(T(t,"bpmn:Participant"))t=t.processRef;else if(T(t,"bpmn:Lane"))do t=t.$parent.$parent;while(T(t,"bpmn:Lane"))}i="flowElements"}else if(T(e,"bpmn:Artifact")){for(;t&&!T(t,"bpmn:Process")&&!T(t,"bpmn:SubProcess")&&!T(t,"bpmn:Collaboration");)if(T(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(T(e,"bpmn:MessageFlow"))i="messageFlows";else if(T(e,"bpmn:Participant")){i="participants";var o=e.processRef,s;o&&(s=R6(e.$parent||t),e.$parent&&(Nt(s.get("rootElements"),o),o.$parent=null),t&&(Ut(s.get("rootElements"),o),o.$parent=s))}else T(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":T(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var c;if(e.$parent&&(c=e.$parent.get(i),Nt(c,e)),t?(c=t.get(i),c.push(e),e.$parent=t):e.$parent=null,n){var u=n.get(i);Nt(c,e),t&&(u||(u=[],t.set(i,u)),u.push(e))}}};Un.prototype.updateConnectionWaypoints=function(e){var t=qe(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Un.prototype.updateConnection=function(e){var t=e.connection,n=ue(t),i=t.source,o=ue(i),s=t.target,c=ue(t.target),u;if(T(n,"bpmn:DataAssociation"))T(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=o,u=e.parent||e.newParent||c,this.updateSemanticParent(n,c,u)):T(n,"bpmn:DataOutputAssociation")&&(u=e.parent||e.newParent||o,this.updateSemanticParent(n,o,u),n.targetRef=c);else{var f=T(n,"bpmn:SequenceFlow");n.sourceRef!==o&&(f&&(Nt(n.sourceRef&&n.sourceRef.get("outgoing"),n),o&&o.get("outgoing")&&o.get("outgoing").push(n)),n.sourceRef=o),n.targetRef!==c&&(f&&(Nt(n.targetRef&&n.targetRef.get("incoming"),n),c&&c.get("incoming")&&c.get("incoming").push(n)),n.targetRef=c)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,s)};Un.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function kn(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;T(i,"bpmn:BaseElement")&&e(t)}}function T6(e){if(T(e,"bpmn:Activity")){var t=qe(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function Ea(e,t){Er.call(this),this._bpmnFactory=e,this._moddle=t}ve(Ea,Er);Ea.$inject=["bpmnFactory","moddle"];Ea.prototype._baseCreate=Er.prototype.create;Ea.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,I({type:"label",di:n},ac,t))}return this.createElement(e,t)};Ea.prototype.createElement=function(e,t){t=I({},t||{});var n,i=t.businessObject,o=t.di;if(!i){if(!t.type)throw new Error("no shape type specified");i=this._bpmnFactory.create(t.type),ww(i)}if(!A6(o)){var s=I({},o||{},{id:i.id+"_di"});e==="root"?o=this._bpmnFactory.createDiPlane(i,s):e==="connection"?o=this._bpmnFactory.createDiEdge(i,s):o=this._bpmnFactory.createDiShape(i,s)}T(i,"bpmn:Group")&&(t=I({isFrame:!0},t)),t=C6(i,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Ov(o,t,"isExpanded")),He(i,["bpmn:Lane","bpmn:Participant"])&&(t=Ov(o,t,"isHorizontal")),T(i,"bpmn:SubProcess")&&(t.collapsed=!Ue(i,o)),T(i,"bpmn:ExclusiveGateway")&&(Cn(o,"isMarkerVisible")?o.isMarkerVisible===void 0&&(o.isMarkerVisible=!1):o.isMarkerVisible=!0),Wt(t.triggeredByEvent)&&(i.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Wt(t.cancelActivity)&&(i.cancelActivity=t.cancelActivity,delete t.cancelActivity);var c,u;return t.eventDefinitionType&&(c=i.get("eventDefinitions")||[],u=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(u.condition=this._bpmnFactory.create("bpmn:FormalExpression")),c.push(u),u.$parent=i,i.eventDefinitions=c,delete t.eventDefinitionType),n=this.getDefaultSize(i,o),t=I({id:i.id},n,t,{businessObject:i,di:o}),this._baseCreate(e,t)};Ea.prototype.getDefaultSize=function(e,t){var n=ue(e);if(t=t||qe(e),T(n,"bpmn:SubProcess"))return Ue(n,t)?{width:350,height:200}:{width:100,height:80};if(T(n,"bpmn:Task"))return{width:100,height:80};if(T(n,"bpmn:Gateway"))return{width:50,height:50};if(T(n,"bpmn:Event"))return{width:36,height:36};if(T(n,"bpmn:Participant")){var i=t.isHorizontal===void 0||t.isHorizontal===!0;return Ue(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return T(n,"bpmn:Lane")?{width:400,height:100}:T(n,"bpmn:DataObjectReference")?{width:36,height:50}:T(n,"bpmn:DataStoreReference")?{width:50,height:50}:T(n,"bpmn:TextAnnotation")?{width:100,height:30}:T(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Ea.prototype.createParticipantShape=function(e){return Zt(e)||(e={isExpanded:e}),e=I({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function C6(e,t,n){return z(n,function(i){t=Ov(e,t,i)}),t}function Ov(e,t,n){return t[n]===void 0?t:(e[n]=t[n],qi(t,[n]))}function A6(e){return He(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Xp(e,t){this._modeling=e,this._canvas=t}Xp.$inject=["modeling","canvas"];Xp.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;z(n,function(o){var s={x:0,y:0};Wt(i.left)?s.x=i.left-o.x:Wt(i.right)?s.x=i.right-o.width-o.x:Wt(i.center)?s.x=i.center-Math.round(o.width/2)-o.x:Wt(i.top)?s.y=i.top-o.y:Wt(i.bottom)?s.y=i.bottom-o.height-o.y:Wt(i.middle)&&(s.y=i.middle-Math.round(o.height/2)-o.y),t.moveElements([o],s,o.parent)})};Xp.prototype.postExecute=function(e){};function Kp(e){this._modeling=e}Kp.$inject=["modeling"];Kp.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,o=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:o.attach}),e.shape=i};Kp.prototype.postExecute=function(e){var t=e.hints||{};M6(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function M6(e,t){return fa(e.outgoing,function(n){return n.target===t})}function Wp(e,t){this._canvas=e,this._layouter=t}Wp.$inject=["canvas","layouter"];Wp.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,o=e.parent,s=e.parentIndex,c=e.hints;if(!n||!i)throw new Error("source and target required");if(!o)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,c)),this._canvas.addConnection(t,o,s),t};Wp.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Rf=Math.round;function cy(e){this._modeling=e}cy.$inject=["modeling"];cy.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,o=e.position,s=e.hints,c=this._modeling;z(t,function(v){Te(v.x)||(v.x=0),Te(v.y)||(v.y=0)});var u=je(t,function(v){return!v.hidden}),f=It(u);z(t,function(v){st(v)&&(v.waypoints=mn(v.waypoints,function(y){return{x:Rf(y.x-f.x-f.width/2+o.x),y:Rf(y.y-f.y-f.height/2+o.y)}})),I(v,{x:Rf(v.x-f.x-f.width/2+o.x),y:Rf(v.y-f.y-f.height/2+o.y)})});var d=mp(t),h={};z(t,function(v){if(st(v)){h[v.id]=Te(i)?c.createConnection(h[v.source.id],h[v.target.id],i,v,v.parent||n,s):c.createConnection(h[v.source.id],h[v.target.id],v,v.parent||n,s);return}var y=I({},s);d.indexOf(v)===-1&&(y.autoResize=!1),Xe(v)&&(y=qi(y,["attach"])),h[v.id]=Te(i)?c.createShape(v,Ai(v,["x","y","width","height"]),v.parent||n,i,y):c.createShape(v,Ai(v,["x","y","width","height"]),v.parent||n,y)}),e.elements=up(h)};var N1=Math.round;function xa(e){this._canvas=e}xa.$inject=["canvas"];xa.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,o=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?I(t,n):I(t,{x:n.x-N1(t.width/2),y:n.y-N1(t.height/2)}),this._canvas.addShape(t,i,o),t};xa.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function Ac(e){xa.call(this,e)}ve(Ac,xa);Ac.$inject=["canvas"];var D6=xa.prototype.execute;Ac.prototype.execute=function(e){var t=e.shape;return N6(t),t.labelTarget=e.labelTarget,D6.call(this,e)};var O6=xa.prototype.revert;Ac.prototype.revert=function(e){return e.shape.labelTarget=null,O6.call(this,e)};function N6(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Mc(e,t){this._canvas=e,this._modeling=t}Mc.$inject=["canvas","modeling"];Mc.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;sa(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),sa(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})};Mc.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=$v(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Mc.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,Ut(n.children,t,i),this._canvas.addConnection(t,n),t};function uy(e,t){this._modeling=e,this._elementRegistry=t}uy.$inject=["modeling","elementRegistry"];uy.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;z(i,function(o){n.get(o.id)&&(o.waypoints?t.removeConnection(o):t.removeShape(o))})};function Dc(e,t){this._canvas=e,this._modeling=t}Dc.$inject=["canvas","modeling"];Dc.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;sa(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),sa(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),sa(n.children,function(i){st(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};Dc.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=$v(i.children,n),t.removeShape(n),n};Dc.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,o=e.oldParentIndex;return Ut(i.children,n,o),t.addShape(n,i),n};function Zp(e){this._modeling=e}Zp.$inject=["modeling"];var P1={x:"y",y:"x"};Zp.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,o=e.dimension;function s(S,O){S.range.min=Math.min(O[i],S.range.min),S.range.max=Math.max(O[i]+O[o],S.range.max)}function c(S){return S[i]+S[o]/2}function u(S){return S.length-1}function f(S){return S.max-S.min}function d(S,O){var N={y:0};N[i]=S-c(O),N[i]&&(N[P1[i]]=0,t.moveElements([O],N,O.parent))}var h=n[0],v=u(n),y=n[v],_,b,w=0;z(n,function(S,O){var N,A,C;if(S.elements.length<2){O&&O!==n.length-1&&(s(S,S.elements[0]),w+=f(S.range));return}N=Fi(S.elements,i),A=N[0],O===v&&(A=N[u(N)]),C=c(A),S.range=null,z(N,function(D){if(d(C,D),S.range===null){S.range={min:D[i],max:D[i]+D[o]};return}s(S,D)}),O&&O!==n.length-1&&(w+=f(S.range))}),b=Math.abs(y.range.min-h.range.max),_=Math.round((b-w)/(n.length-1)),!(_<n.length-1)&&z(n,function(S,O){var N={},A;S===h||S===y||(A=n[O-1],S.range.max=0,z(S.elements,function(C,D){N[P1[i]]=0,N[i]=A.range.max-C[i]+_,S.range.min!==C[i]&&(N[i]+=C[i]-S.range.min),N[i]&&t.moveElements([C],N,C.parent),S.range.max=Math.max(C[i]+C[o],D?S.range.max:0)}))})};Zp.prototype.postExecute=function(e){};function Qp(e,t){this._layouter=e,this._canvas=t}Qp.$inject=["layouter","canvas"];Qp.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return I(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Qp.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function fy(){}fy.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,o=e.newParentIndex,s=t.parent;return e.oldParent=s,e.oldParentIndex=Nt(s.children,t),Ut(i.children,t,o),t.parent=i,z(t.waypoints,function(c){c.x+=n.x,c.y+=n.y,c.original&&(c.original.x+=n.x,c.original.y+=n.y)}),t};fy.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,o=e.oldParentIndex,s=e.delta;return Nt(n.children,t),Ut(i.children,t,o),t.parent=i,z(t.waypoints,function(c){c.x-=s.x,c.y-=s.y,c.original&&(c.original.x-=s.x,c.original.y-=s.y)}),t};function py(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}py.prototype.add=function(e,t){return this.addAll([e],t)};py.prototype.addAll=function(e,t){var n=rD(e,!!t,this);return I(this,n),this};function Oc(e){this._modeling=e}Oc.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Oc.prototype.moveClosure=function(e,t,n,i,o){var s=this._modeling,c=e.allShapes,u=e.allConnections,f=e.enclosedConnections,d=e.topLevel,h=!1;o&&o.parent===n&&(h=!0),z(c,function(v){s.moveShape(v,t,d[v.id]&&!h&&n,{recurse:!1,layout:!1})}),z(u,function(v){var y=!!c[v.source.id],_=!!c[v.target.id];f[v.id]&&y&&_?s.moveConnection(v,t,d[v.id]&&!h&&n):s.layoutConnection(v,{connectionStart:y&&kg(v,v.source,t),connectionEnd:_&&zg(v,v.target,t)})})};Oc.prototype.getClosure=function(e){return new py().addAll(e,!0)};function Jp(e){this._helper=new Oc(e)}Jp.$inject=["modeling"];Jp.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};Jp.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function ho(e){this._modeling=e,this._helper=new Oc(e)}ho.$inject=["modeling"];ho.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,o=e.newParentIndex,s=t.parent;return e.oldBounds=Ai(t,["x","y","width","height"]),e.oldParent=s,e.oldParentIndex=Nt(s.children,t),Ut(i.children,t,o),I(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};ho.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,o=this._modeling;i.layout!==!1&&(z(t.incoming,function(s){o.layoutConnection(s,{connectionEnd:zg(s,t,n)})}),z(t.outgoing,function(s){o.layoutConnection(s,{connectionStart:kg(s,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};ho.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,o=e.delta;return Ut(n.children,t,i),I(t,{parent:n,x:t.x-o.x,y:t.y-o.y}),t};ho.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};ho.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Nc(e){this._modeling=e}Nc.$inject=["modeling"];Nc.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,o=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return Ae(o)&&(e.oldWaypoints=i.waypoints,i.waypoints=o),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};Nc.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,o=e.dockingOrPoints,s=e.hints||{},c={};s.connectionStart&&(c.connectionStart=s.connectionStart),s.connectionEnd&&(c.connectionEnd=s.connectionEnd),s.layoutConnection!==!1&&(n&&(!i||s.docking==="source")&&(c.connectionStart=c.connectionStart||B1(Ae(o)?o[0]:o)),i&&(!n||s.docking==="target")&&(c.connectionEnd=c.connectionEnd||B1(Ae(o)?o[o.length-1]:o)),s.newWaypoints&&(c.waypoints=s.newWaypoints),this._modeling.layoutConnection(t,c))};Nc.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,o=e.connection;return t&&(o.source=t),n&&(o.target=n),i&&(o.waypoints=i),o};function B1(e){return e.original||e}function Cr(e,t){this._modeling=e,this._rules=t}Cr.$inject=["modeling","rules"];Cr.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,o=e.oldShape,s=e.newData,c=e.hints||{},u;function f(b,w,S){return i.allowed("connection.reconnect",{connection:S,source:b,target:w})}var d={x:s.x,y:s.y},h={x:o.x,y:o.y,width:o.width,height:o.height};u=e.newShape=e.newShape||t.createShape(s,d,o.parent,c),o.host&&n.updateAttachment(u,o.host);var v;c.moveChildren!==!1&&(v=o.children.slice(),n.moveElements(v,{x:0,y:0},u,c));var y=o.incoming.slice(),_=o.outgoing.slice();z(y,function(b){var w=b.source,S=f(w,u,b);S&&t.reconnectEnd(b,u,$p(b,u,h),c)}),z(_,function(b){var w=b.target,S=f(u,w,b);S&&t.reconnectStart(b,u,Hp(b,u,h),c)})};Cr.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Cr.prototype.execute=function(e){};Cr.prototype.revert=function(e){};Cr.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};Cr.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};Cr.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function Pc(e){this._modeling=e}Pc.$inject=["modeling"];Pc.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},I(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};Pc.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,o=e.hints||{};o.layout!==!1&&(z(n.incoming,function(s){t.layoutConnection(s,{connectionEnd:$p(s,n,i)})}),z(n.outgoing,function(s){t.layoutConnection(s,{connectionStart:Hp(s,n,i)})}))};Pc.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return I(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function Sa(e){this._modeling=e}Sa.$inject=["modeling"];Sa.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,o=e.resizingShapes,s=e.start,c={};this.moveShapes(i,t),z(o,function(u){c[u.id]=B6(u)}),this.resizeShapes(o,t,n),this.updateConnectionWaypoints(s6(i,o),t,n,s,i,o,c)};Sa.prototype.execute=function(){};Sa.prototype.revert=function(){};Sa.prototype.moveShapes=function(e,t){var n=this;z(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Sa.prototype.resizeShapes=function(e,t,n){var i=this;z(e,function(o){var s=l6(o,n,t);i._modeling.resizeShape(o,s,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Sa.prototype.updateConnectionWaypoints=function(e,t,n,i,o,s,c){var u=this,f=o.concat(s);z(e,function(d){var h=d.source,v=d.target,y=P6(d),_=VT(n),b={};ra(f,h)&&ra(f,v)?(y=mn(y,function(w){return k1(w,i,n)&&(w[_]=w[_]+t[_]),w.original&&k1(w.original,i,n)&&(w.original[_]=w.original[_]+t[_]),w}),u._modeling.updateWaypoints(d,y,{labelBehavior:!1})):(ra(f,h)||ra(f,v))&&(ra(o,h)?b.connectionStart=kg(d,h,t):ra(o,v)?b.connectionEnd=zg(d,v,t):ra(s,h)?b.connectionStart=Hp(d,h,c[h.id]):ra(s,v)&&(b.connectionEnd=$p(d,v,c[v.id])),u._modeling.layoutConnection(d,b))})};function L1(e){return I({},e)}function P6(e){return mn(e.waypoints,function(t){return t=L1(t),t.original&&(t.original=L1(t.original)),t})}function VT(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function k1(e,t,n){var i=VT(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function ra(e,t){return e.indexOf(t)!==-1}function B6(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function ed(e){this._modeling=e}ed.$inject=["modeling"];ed.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=FT(n),t.collapsed=!t.collapsed;var i=YT(n,t.collapsed);return[t].concat(i)};ed.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,o=qT(i,n);return t.collapsed=!t.collapsed,[t].concat(o)};function FT(e){var t={};return z(e,function(n){t[n.id]=n.hidden,n.children&&(t=I({},t,FT(n.children)))}),t}function YT(e,t){var n=[];return z(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(YT(i.children,i.collapsed||t)))}),n}function qT(e,t){var n=[];return z(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(qT(i.children,t)))}),n}function td(e){this._modeling=e}td.$inject=["modeling"];td.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=XT(i,t),KT(n,t),t.host=n,t};td.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,o=e.attacherIdx;return t.host=i,XT(n,t),KT(i,t,o),t};function XT(e,t){return Nt(e&&e.attachers,t)}function KT(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),Ut(i,t,n)}}function dy(){}dy.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};dy.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function lt(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}lt.$inject=["eventBus","elementFactory","commandStack"];lt.prototype.getHandlers=function(){return{"shape.append":Kp,"shape.create":xa,"shape.delete":Dc,"shape.move":ho,"shape.resize":Pc,"shape.replace":Cr,"shape.toggleCollapse":ed,spaceTool:Sa,"label.create":Ac,"connection.create":Wp,"connection.delete":Mc,"connection.move":fy,"connection.layout":Qp,"connection.updateWaypoints":dy,"connection.reconnect":Nc,"elements.create":cy,"elements.move":Jp,"elements.delete":uy,"elements.distribute":Zp,"elements.align":Xp,"element.updateAttachment":td}};lt.prototype.registerHandlers=function(e){z(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};lt.prototype.moveShape=function(e,t,n,i,o){typeof i=="object"&&(o=i,i=null);var s={shape:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("shape.move",s)};lt.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};lt.prototype.moveElements=function(e,t,n,i){i=i||{};var o=i.attach,s=n,c;o===!0?(c=n,s=n.parent):o===!1&&(c=null);var u={shapes:e,delta:t,newParent:s,newHost:c,hints:i};this._commandStack.execute("elements.move",u)};lt.prototype.moveConnection=function(e,t,n,i,o){typeof i=="object"&&(o=i,i=void 0);var s={connection:e,delta:t,newParent:n,newParentIndex:i,hints:o||{}};this._commandStack.execute("connection.move",s)};lt.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};lt.prototype.createConnection=function(e,t,n,i,o,s){typeof n=="object"&&(s=o,o=i,i=n,n=void 0),i=this._create("connection",i);var c={source:e,target:t,parent:o,parentIndex:n,connection:i,hints:s};return this._commandStack.execute("connection.create",c),c.connection};lt.prototype.createShape=function(e,t,n,i,o){typeof i!="number"&&(o=i,i=void 0),o=o||{};var s=o.attach,c,u;e=this._create("shape",e),s?(c=n.parent,u=n):c=n;var f={position:t,shape:e,parent:c,parentIndex:i,host:u,hints:o};return this._commandStack.execute("shape.create",f),f.shape};lt.prototype.createElements=function(e,t,n,i,o){Ae(e)||(e=[e]),typeof i!="number"&&(o=i,i=void 0),o=o||{};var s={position:t,elements:e,parent:n,parentIndex:i,hints:o};return this._commandStack.execute("elements.create",s),s.elements};lt.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var o={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",o),o.shape};lt.prototype.appendShape=function(e,t,n,i,o){o=o||{},t=this._create("shape",t);var s={source:e,position:n,target:i,shape:t,connection:o.connection,connectionParent:o.connectionParent,hints:o};return this._commandStack.execute("shape.append",s),s.shape};lt.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};lt.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};lt.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};lt.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};lt.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};lt.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};lt.prototype.resizeShape=function(e,t,n,i){var o={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",o)};lt.prototype.createSpace=function(e,t,n,i,o){var s={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:o};this._commandStack.execute("spaceTool",s)};lt.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};lt.prototype.reconnect=function(e,t,n,i,o){var s={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:o||{}};this._commandStack.execute("connection.reconnect",s)};lt.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,I(i,{docking:"source"}))};lt.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,I(i,{docking:"target"}))};lt.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};lt.prototype._create=function(e,t){return zD(t)?t:this._elementFactory.create(e,t)};lt.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Bc(e){this._elementRegistry=e}Bc.$inject=["elementRegistry"];Bc.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var o=e.changed||this._getVisualReferences(n).concat(t),s=e.oldProperties||L6(n,Yf(i));return WT(n,i),e.oldProperties=s,e.changed=o,o};Bc.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return WT(n,t),i};Bc.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return T(e,"bpmn:DataObject")?k6(e,t):[]};function L6(e,t){return $n(t,function(n,i){return n[i]=e.get(i),n},{})}function WT(e,t){z(t,function(n,i){e.set(i,n)})}function k6(e,t){return t.filter(function(n){return T(n,"bpmn:DataObjectReference")&&ue(n).dataObjectRef===e})}var Xl="default",_r="id",ZT="di",z6={width:0,height:0};function Lc(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}Lc.$inject=["elementRegistry","moddle","modeling","textRenderer"];Lc.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,o=this._moddle.ids,s=t.businessObject,c=U6(e.properties),u=e.oldProperties||j6(t,c);return QT(c,s)&&(o.unclaim(s[_r]),i.updateId(t,c[_r]),o.claim(c[_r],s)),Xl in c&&(c[Xl]&&n.push(i.get(c[Xl].id)),s[Xl]&&n.push(i.get(s[Xl].id))),JT(t,c),e.oldProperties=u,e.changed=n,n};Lc.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&ue(n).name;if(i){var o=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,o,z6)}};Lc.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,o=t.businessObject,s=this._elementRegistry,c=this._moddle.ids;return JT(t,i),QT(n,o)&&(c.unclaim(n[_r]),s.updateId(t,i[_r]),c.claim(i[_r],o)),e.changed};function QT(e,t){return _r in e&&e[_r]!==t[_r]}function j6(e,t){var n=Yf(t),i=e.businessObject,o=qe(e);return $n(n,function(s,c){return c!==ZT?s[c]=i.get(c):s[c]=H6(o,Yf(t.di)),s},{})}function H6(e,t){return $n(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function JT(e,t){var n=e.businessObject,i=qe(e);z(t,function(o,s){s!==ZT?n.set(s,o):i&&$6(i,o)})}function $6(e,t){z(t,function(n,i){e.set(i,n)})}var I6=["default"];function U6(e){var t=I({},e);return I6.forEach(function(n){n in e&&(t[n]=ue(t[n]))}),t}function nd(e,t){this._canvas=e,this._modeling=t}nd.$inject=["canvas","modeling"];nd.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,o=t.getRootElement(),s=o.businessObject,c=s.$parent,u=qe(o);return t.setRootElement(n),t.removeRootElement(o),Ut(c.rootElements,i),i.$parent=c,Nt(c.rootElements,s),s.$parent=null,o.di=null,u.bpmnElement=i,n.di=u,e.oldRoot=o,[]};nd.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,o=e.oldRoot,s=o.businessObject,c=i.$parent,u=qe(n);return t.setRootElement(o),t.removeRootElement(n),Nt(c.rootElements,i),i.$parent=null,Ut(c.rootElements,s),s.$parent=c,n.di=null,u.bpmnElement=s,o.di=u,[]};function hy(e,t){this._modeling=e,this._spaceTool=t}hy.$inject=["modeling","spaceTool"];hy.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,o=e.location,s=pi(i),c=s===i,u=c?i:i.parent,f=_a(u),d=Yt(i);if(d?o==="left"?o="top":o==="right"&&(o="bottom"):o==="top"?o="left":o==="bottom"&&(o="right"),!f.length){var h=d?{x:i.x+fi,y:i.y,width:i.width-fi,height:i.height}:{x:i.x,y:i.y+fi,width:i.width,height:i.height-fi};n.createShape({type:"bpmn:Lane",isHorizontal:d},h,u)}var v=[];lo(s,function(C){return v.push(C),C.label&&v.push(C.label),C===i?[]:je(C.children,function(D){return D!==i})});var y,_,b,w,S;o==="top"?(y=-120,_=i.y,b=_+10,w="n",S="y"):o==="left"?(y=-120,_=i.x,b=_+10,w="w",S="x"):o==="bottom"?(y=120,_=i.y+i.height,b=_-10,w="s",S="y"):o==="right"&&(y=120,_=i.x+i.width,b=_-10,w="e",S="x");var O=t.calculateAdjustments(v,S,y,b),N=d?{x:0,y}:{x:y,y:0};t.makeSpace(O.movingShapes,O.resizingShapes,N,w,b);var A=d?{x:i.x+(c?fi:0),y:_-(o==="top"?120:0),width:i.width-(c?fi:0),height:120}:{x:_-(o==="left"?120:0),y:i.y+(c?fi:0),width:120,height:i.height-(c?fi:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:d},A,u)};function my(e){this._modeling=e}my.$inject=["modeling"];my.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=e.count,o=_a(n),s=o.length;if(s>i)throw new Error(`more than <${i}> child lanes`);var c=Yt(n),u=c?n.height:n.width,f=Math.round(u/i),d,h,v,y;for(y=0;y<i;y++)y===i-1?d=u-f*y:d=f,h=c?{x:n.x+fi,y:n.y+y*f,width:n.width-fi,height:d}:{x:n.x+y*f,y:n.y+fi,width:d,height:n.height-fi},y<s?t.resizeShape(o[y],h):(v={type:"bpmn:Lane",isHorizontal:c},t.createShape(v,h,n))};function kc(e,t){this._modeling=e,this._spaceTool=t}kc.$inject=["modeling","spaceTool"];kc.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};kc.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=vB(e,t);n.resizeShape(e,t),i.forEach(function(o){n.resizeShape(o.shape,o.newBounds)})};kc.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=Se(e),o=Se(t),s=JR(o,i),c=pi(e),u=[],f=[];lo(c,function(b){return u.push(b),(T(b,"bpmn:Lane")||T(b,"bpmn:Participant"))&&f.push(b),b.children});var d,h,v,y,_;(s.bottom||s.top)&&(d=s.bottom||s.top,h=e.y+(s.bottom?e.height:0)+(s.bottom?-10:10),v=s.bottom?"s":"n",y=s.top>0||s.bottom<0?-d:d,_=n.calculateAdjustments(u,"y",y,h),n.makeSpace(_.movingShapes,_.resizingShapes,{x:0,y:d},v)),(s.left||s.right)&&(d=s.right||s.left,h=e.x+(s.right?e.width:0)+(s.right?-10:100),v=s.right?"e":"w",y=s.left>0||s.right<0?-d:d,_=n.calculateAdjustments(f,"x",y,h),n.makeSpace(_.movingShapes,_.resizingShapes,{x:d,y:0},v))};var fc="flowNodeRef",vy="lanes";function zc(e){this._elementRegistry=e}zc.$inject=["elementRegistry"];zc.prototype._computeUpdates=function(e,t){var n=[],i=[],o={},s=[];function c(h,v){var y=Se(v),_={x:h.x+h.width/2,y:h.y+h.height/2};return _.x>y.left&&_.x<y.right&&_.y>y.top&&_.y<y.bottom}function u(h){n.indexOf(h)===-1&&(s.push(h),n.push(h))}function f(h){var v=pi(h);return o[v.id]||(o[v.id]=zp(v)),o[v.id]}function d(h){if(!h.parent)return[];var v=f(h);return v.filter(function(y){return c(h,y)}).map(function(y){return y.businessObject})}return t.forEach(function(h){var v=pi(h);if(!(!v||n.indexOf(v)!==-1)){var y=v.children.filter(function(_){return T(_,"bpmn:FlowNode")});y.forEach(u),n.push(v)}}),e.forEach(u),s.forEach(function(h){var v=h.businessObject,y=v.get(vy),_=y.slice(),b=d(h);i.push({flowNode:v,remove:_,add:b})}),t.forEach(function(h){var v=h.businessObject;h.parent||v.get(fc).forEach(function(y){i.push({flowNode:y,remove:[v],add:[]})})}),i};zc.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,o=i.get(vy);n.remove.forEach(function(s){Nt(o,s),Nt(s.get(fc),i)}),n.add.forEach(function(s){Ut(o,s),Ut(s.get(fc),i)})}),[]};zc.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var i=n.flowNode,o=i.get(vy);n.add.forEach(function(s){Nt(o,s),Nt(s.get(fc),i)}),n.remove.forEach(function(s){Ut(o,s),Ut(s.get(fc),i)})}),[]};function id(e){this._moddle=e}id.$inject=["moddle"];id.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,o=e.claiming;return o?t.claim(n,i):t.unclaim(n),[]};id.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,o=e.claiming;return o?t.unclaim(n):t.claim(n,i),[]};var G6={fill:void 0,stroke:void 0};function gy(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(Hn(t)){var n=V6(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}gy.$inject=["commandStack"];gy.prototype.postExecute=function(e){var t=e.elements,n=e.colors||G6,i=this,o={};"fill"in n&&I(o,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&I(o,{"border-color":this._normalizeColor(n.stroke)}),z(t,function(s){var c=st(s)?Ai(o,["border-color"]):o,u=qe(s);if(F6(c),Xe(s))i._commandStack.execute("element.updateModdleProperties",{element:s,moddleElement:u.label,properties:{color:o["border-color"]}});else{if(!He(u,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:s,properties:{di:c}})}})};function V6(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function F6(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var Y6={width:0,height:0};function e2(e,t,n){function i(f,d){var h=f.label||f,v=f.labelTarget||f;return zN(h,d),[h,v]}function o(f){var d=f.element,h=d.businessObject,v=f.newLabel;if(!Xe(d)&&ro(d)&&!bp(d)&&!z1(v)){var y=7,_=Qv(d);_={x:_.x,y:_.y+y},e.createLabel(d,_,{id:h.id+"_label",businessObject:h,di:d.di})}}function s(f){return f.oldLabel=Mi(f.element),i(f.element,f.newLabel)}function c(f){return i(f.element,f.oldLabel)}function u(f){var d=f.element,h=d.label||d,v=f.newLabel,y=f.newBounds,_=f.hints||{};if(!(!Xe(h)&&!T(h,"bpmn:TextAnnotation"))){if(Xe(h)&&z1(v)){_.removeShape!==!1&&e.removeShape(h,{unsetLabel:!1});return}var b=Mi(d);typeof y>"u"&&(y=t.getExternalLabelBounds(h,b)),y&&e.resizeShape(h,y,Y6)}}this.preExecute=o,this.execute=s,this.revert=c,this.postExecute=u}e2.$inject=["modeling","textRenderer","bpmnFactory"];function z1(e){return!e||!e.trim()}function gn(e,t,n,i){lt.call(this,e,t,n),this._bpmnRules=i}ve(gn,lt);gn.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];gn.prototype.getHandlers=function(){var e=lt.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Bc,e["element.updateProperties"]=Lc,e["canvas.updateRoot"]=nd,e["lane.add"]=hy,e["lane.resize"]=kc,e["lane.split"]=my,e["lane.updateRefs"]=zc,e["id.updateClaim"]=id,e["element.setColor"]=gy,e["element.updateLabel"]=e2,e};gn.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};gn.prototype.connect=function(e,t,n,i){var o=this._bpmnRules;if(n||(n=o.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};gn.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};gn.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};gn.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};gn.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};gn.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};gn.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};gn.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};gn.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};gn.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};gn.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};gn.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function t2(){}t2.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Ce(t.source||e.source),t.connectionEnd||Ce(t.target||e.target)]};var Tf=20,q6=5,lp=Math.round,j1=20,X6={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function K6(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function W6(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function n2(e,t,n){var i=vn(t,e,q6),o=n.split(":")[0],s=lp((t.x-e.x)/2+e.x),c=lp((t.y-e.y)/2+e.y),u,f,d=W6(o,i),h=/h|r|l/.test(o),v=!1,y=!1;return d?(u=h?{x:s,y:e.y}:{x:e.x,y:c},f=h?"h:h":"v:v"):(v=K6(i,o),f=h?"h:v":"v:h",v?h?(y=c===e.y,u={x:e.x+Tf*(/l/.test(o)?-1:1),y:y?c+Tf:c}):(y=s===e.x,u={x:y?s+Tf:s,y:e.y+Tf*(/t/.test(o)?-1:1)}):u={x:s,y:c}),{waypoints:yy(e,u,f).concat(u),directions:f,turnNextDirections:y}}function Z6(e,t,n){return n2(e,t,n)}function Q6(e,t,n){var i=n2(t,e,H1(n));return{waypoints:i.waypoints.slice().reverse(),directions:H1(i.directions),turnNextDirections:i.turnNextDirections}}function J6(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var o=n+":"+i,s=yy(e.waypoints[e.waypoints.length-1],t.waypoints[0],o);return{waypoints:s,directions:o}}function H1(e){return e.split(":").reverse().join(":")}function eL(e,t,n){var i=lp((t.x-e.x)/2+e.x),o=lp((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:o},{x:t.x,y:o}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function yy(e,t,n){if(n=n||"h:h",!cL(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(i2(n)){var i=Z6(e,t,n),o=Q6(e,t,n),s=J6(i,o);return[].concat(i.waypoints,s.waypoints,o.waypoints)}return eL(e,t,n)}function tL(e,t,n){var i=yy(e,t,n);return i.unshift(e),i.push(t),r2(i)}function nL(e,t,n,i,o){var s=o&&o.preferredLayouts||[],c=pM(s,"straight")[0]||"h:h",u=X6[c]||0,f=vn(e,t,u),d=lL(f,c);n=n||Ce(e),i=i||Ce(t);var h=d.split(":"),v=I1(n,e,h[0],uL(f)),y=I1(i,t,h[1],f);return tL(v,y,d)}function iL(e,t,n,i,o,s){Ae(n)&&(o=n,s=i,n=Ce(e),i=Ce(t)),s=I({preferredLayouts:[]},s),o=o||[];var c=s.preferredLayouts,u=c.indexOf("straight")!==-1,f;return f=u&&aL(e,t,n,i,s),f||(f=s.connectionEnd&&sL(t,e,i,o),f)||(f=s.connectionStart&&oL(e,t,n,o),f)?f:!s.connectionStart&&!s.connectionEnd&&o&&o.length?o:nL(e,t,n,i,s)}function rL(e,t,n){return e>=t&&e<=n}function $1(e,t,n){var i={x:"width",y:"height"};return rL(t[e],n[e],n[e]+n[i[e]])}function aL(e,t,n,i,o){var s={},c,u;return u=vn(e,t),/^(top|bottom|left|right)$/.test(u)?(/top|bottom/.test(u)&&(c="x"),/left|right/.test(u)&&(c="y"),o.preserveDocking==="target"?$1(c,i,e)?(s[c]=i[c],[{x:s.x!==void 0?s.x:n.x,y:s.y!==void 0?s.y:n.y,original:{x:s.x!==void 0?s.x:n.x,y:s.y!==void 0?s.y:n.y}},{x:i.x,y:i.y}]):null:$1(c,n,t)?(s[c]=n[c],[{x:n.x,y:n.y},{x:s.x!==void 0?s.x:i.x,y:s.y!==void 0?s.y:i.y,original:{x:s.x!==void 0?s.x:i.x,y:s.y!==void 0?s.y:i.y}}]):null):null}function oL(e,t,n,i){return _y(e,t,n,i)}function sL(e,t,n,i){var o=i.slice().reverse();return o=_y(e,t,n,o),o?o.reverse():null}function _y(e,t,n,i){function o(h){return h.length<3?!0:h.length>4?!1:!!We(h,function(v,y){var _=h[y-1];return _&&mc(v,_)<3})}function s(h,v,y){var _=mr(v,h);switch(_){case"v":return{x:y.x,y:h.y};case"h":return{x:h.x,y:y.y}}return{x:h.x,y:h.y}}function c(h,v,y){var _;for(_=h.length-2;_!==0;_--)if(BE(h[_],v,j1)||BE(h[_],y,j1))return h.slice(_);return h}if(o(i))return null;var u=i[0],f=i.slice(),d;return f[0]=n,f[1]=s(f[1],u,n),d=c(f,e,t),d!==f&&(f=_y(e,t,n,d)),f&&mr(f)?null:f}function lL(e,t){if(i2(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function cL(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function i2(e){return e&&/t|r|b|l/.test(e)}function uL(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function I1(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function r2(e){return e.reduce(function(t,n,i){var o=t[t.length-1],s=e[i+1];return Iv(o,s,n,0)||t.push(n),t},[])}var fL=-10,pL=40,dL={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},hL={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},by={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Wl={top:"t",right:"r",bottom:"b",left:"l"};function rd(e){this._elementRegistry=e}ve(rd,t2);rd.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,o=t.waypoints||e.waypoints,s=t.connectionStart,c=t.connectionEnd,u=this._elementRegistry,f,d;if(s||(s=U1(o&&o[0],n)),c||(c=U1(o&&o[o.length-1],i)),(T(e,"bpmn:Association")||T(e,"bpmn:DataAssociation"))&&o&&!G1(n,i))return[].concat([s],o.slice(1,-1),[c]);var h=MR(n,u)?dL:hL;return T(e,"bpmn:MessageFlow")?f=vL(n,i,h):(T(e,"bpmn:SequenceFlow")||G1(n,i))&&(n===i?f={preferredLayouts:xL(n,e,h)}:T(n,"bpmn:BoundaryEvent")?f={preferredLayouts:SL(n,i,c,h)}:pc(n)||pc(i)?f={preferredLayouts:h.subProcess,preserveDocking:yL(n)}:T(n,"bpmn:Gateway")?f={preferredLayouts:h.fromGateway}:T(i,"bpmn:Gateway")?f={preferredLayouts:h.toGateway}:f={preferredLayouts:h.default}),f&&(f=I(f,t),d=r2(iL(n,i,s,c,o,f))),d||[s,c]};function mL(e){var t=e.host;return vn(Ce(e),t,fL)}function vL(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:gL(e,t)}}function gL(e,t){return T(t,"bpmn:Participant")?"source":T(e,"bpmn:Participant")?"target":pc(t)?"source":pc(e)||T(t,"bpmn:Event")?"target":T(e,"bpmn:Event")?"source":null}function yL(e){return pc(e)?"target":"source"}function U1(e,t){return e?e.original||e:Ce(t)}function G1(e,t){return T(t,"bpmn:Activity")&&T(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function pc(e){return T(e,"bpmn:SubProcess")&&Ue(e)}function eo(e,t){return e===t}function _L(e,t){return t.indexOf(e)!==-1}function Es(e){var t=/right|left/.exec(e);return t&&t[0]}function xs(e){var t=/top|bottom/.exec(e);return t&&t[0]}function V1(e,t){return by[e]===t}function bL(e,t){var n=Es(e),i=by[n];return t.indexOf(i)!==-1}function EL(e,t){var n=xs(e),i=by[n];return t.indexOf(i)!==-1}function a2(e){return e==="right"||e==="left"}function xL(e,t,n){var i=t.waypoints,o=i&&i.length&&vn(i[0],e);return o==="top"?n.loop.fromTop:o==="right"?n.loop.fromRight:o==="left"?n.loop.fromLeft:n.loop.fromBottom}function SL(e,t,n,i){var o=Ce(e),s=Ce(t),c=mL(e),u,f,d=eo(e.host,t),h=_L(c,["top","right","bottom","left"]),v=vn(s,o,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return d?wL(c,h,e,t,n,i):(u=RL(c,v,h,i.isHorizontal),f=TL(c,v,h,i.isHorizontal),[u+":"+f])}function wL(e,t,n,i,o,s){var c=t?e:s.isHorizontal?xs(e):Es(e),u=Wl[c],f;return t?a2(e)?f=F1("y",n,i,o)?"h":s.boundaryLoop.alternateHorizontalSide:f=F1("x",n,i,o)?"v":s.boundaryLoop.alternateVerticalSide:f=s.boundaryLoop.default,[u+":"+f]}function F1(e,t,n,i){var o=pL;return!(Vm(e,i,n,o)||Vm(e,i,{x:n.x+n.width,y:n.y+n.height},o)||Vm(e,i,Ce(t),o))}function Vm(e,t,n,i){return Math.abs(t[e]-n[e])<i}function RL(e,t,n,i){if(n)return Wl[e];var o=xs(e),s=Es(e),c=xs(t),u=Es(t);if(i){if(eo(o,c)||V1(s,u))return Wl[o]}else if(eo(s,u)||V1(o,c))return Wl[s];return Wl[i?s:o]}function TL(e,t,n,i){return n?a2(e)?bL(e,t)||eo(e,t)?"h":"v":EL(e,t)||eo(e,t)?"v":"h":i?eo(xs(e),xs(t))?"h":"v":eo(Es(e),Es(t))?"v":"h"}rd.$inject=["elementRegistry"];function Y1(e){return I({original:e.point.original||e.point},e.actual)}function wa(e,t){this._elementRegistry=e,this._graphicsFactory=t}wa.$inject=["elementRegistry","graphicsFactory"];wa.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),o=this.getDockingPoint(e,n),s=e.waypoints.slice(i.idx+1,o.idx);return s.unshift(Y1(i)),s.push(Y1(o)),s};wa.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,o,s,c;return o=n?0:i.length-1,s=i[o],c=this._getIntersection(t,e,n),{point:s,actual:c||s,idx:o}};wa.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),o=this._getConnectionPath(t);return rv(i,o,n)};wa.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};wa.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};wa.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const o2={__init__:["modeling","bpmnUpdater"],__depends__:[E4,H4,I4,U4,$T,v6,y6,w6,Di,Jv,GT],bpmnFactory:["type",_i],bpmnUpdater:["type",Un],elementFactory:["type",Ea],modeling:["type",gn],layouter:["type",rd],connectionDocking:["type",wa]},q1=Math.round;function ad(e,t,n,i,o,s){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=o,this._rules=s}ad.prototype.create=function(e,t,n){const i=this._complexPreview,o=this._connectionDocking,s=this._elementFactory,c=this._eventBus,u=this._layouter,f=this._rules,d=s.createShape(I({type:t},n)),h=c.fire("autoPlace",{source:e,shape:d});if(!h)return;I(d,{x:h.x-q1(d.width/2),y:h.y-q1(d.height/2)});const v=f.allowed("connection.create",{source:e,target:d,hints:{targetParent:e.parent}});let y=null;v&&(y=s.createConnection(v),y.waypoints=u.layoutConnection(y,{source:e,target:d}),y.waypoints=o.getCroppedWaypoints(y,e,d)),i.create({created:[d,y].filter(_=>!ic(_))})};ad.prototype.cleanUp=function(){this._complexPreview.cleanUp()};ad.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const CL={__depends__:[pg,WP,o2],__init__:["appendPreview"],appendPreview:["type",ad]};var X1=Math.min,K1=Math.max;function Fm(e){e.preventDefault()}function nc(e){e.stopPropagation()}function AL(e){return e.nodeType===Node.TEXT_NODE}function ML(e){return[].slice.call(e)}function Ni(e){this.container=e.container,this.parent=ht('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=ot("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=An(this.autoResize,this),this.handlePaste=An(this.handlePaste,this)}Ni.prototype.create=function(e,t,n,i){var o=this,s=this.parent,c=this.content,u=this.container;i=this.options=i||{},t=this.style=t||{};var f=Ai(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);I(s.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},f);var d=Ai(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return I(c.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},d),i.centerVertically&&I(c.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},d),c.innerText=n,Le.bind(c,"keydown",this.keyHandler),Le.bind(c,"mousedown",nc),Le.bind(c,"paste",o.handlePaste),i.autoResize&&Le.bind(c,"input",this.autoResize),i.resizable&&this.resizable(t),u.appendChild(s),this.setSelection(c.lastChild,c.lastChild&&c.lastChild.length),s};Ni.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var o=this.autoResize(n);o&&this.resizeHandler(o)}};Ni.prototype.insertText=function(e){e=DL(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Ni.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,o=t.startOffset,s=t.endOffset,c=t.commonAncestorContainer,u=ML(c.childNodes),f,d;if(AL(c)){var h=n.textContent;n.textContent=h.substring(0,o)+e+h.substring(s),f=n,d=o+e.length}else if(n===this.content&&i===this.content){var v=document.createTextNode(e);this.content.insertBefore(v,u[o]),f=v,d=v.textContent.length}else{var y=u.indexOf(n),_=u.indexOf(i);u.forEach(function(b,w){w===y?b.textContent=n.textContent.substring(0,o)+e+i.textContent.substring(s):w>y&&w<=_&&Yi(b)}),f=n,d=o+e.length}f&&d!==void 0&&setTimeout(function(){self.setSelection(f,d)})};Ni.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),o=t.scrollHeight;e.style.height=o+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:o-i.height})}};Ni.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,o=parseInt(this.style.minHeight)||0,s=parseInt(this.style.maxWidth)||1/0,c=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=ht('<div class="djs-direct-editing-resize-handle"></div>');var u,f,d,h,v=function(b){Fm(b),nc(b),u=b.clientX,f=b.clientY;var w=t.getBoundingClientRect();d=w.width,h=w.height,Le.bind(document,"mousemove",y),Le.bind(document,"mouseup",_)},y=function(b){Fm(b),nc(b);var w=X1(K1(d+b.clientX-u,i),s),S=X1(K1(h+b.clientY-f,o),c);t.style.width=w+"px",t.style.height=S+"px",e.resizeHandler({width:d,height:h,dx:b.clientX-u,dy:b.clientY-f})},_=function(b){Fm(b),nc(b),Le.unbind(document,"mousemove",y,!1),Le.unbind(document,"mouseup",_,!1)};Le.bind(n,"mousedown",v)}I(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Ni.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),Le.unbind(t,"keydown",this.keyHandler),Le.unbind(t,"mousedown",nc),Le.unbind(t,"input",this.autoResize),Le.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),Yi(n)),Yi(e)};Ni.prototype.getValue=function(){return this.content.innerText.trim()};Ni.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Ni.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function DL(e){return e.replace(/\r\n|\r|\n/g,`
`)}function bi(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new Ni({container:t.getContainer(),keyHandler:An(this._handleKey,this),resizeHandler:An(this._handleResize,this)})}bi.$inject=["eventBus","canvas"];bi.prototype.registerProvider=function(e){this._providers.push(e)};bi.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};bi.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};bi.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};bi.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};bi.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),o=this.getValue(),s=e.context.text;(o!==s||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,o,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};bi.prototype.getValue=function(){return this._textbox.getValue()};bi.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};bi.prototype._handleResize=function(e){this._fire("resize",e)};bi.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=We(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const s2={__depends__:[Rp],__init__:["directEditing"],directEditing:["type",bi]};function OL(e){return function(t){var n=t.target,i=ue(e),o=i.eventDefinitions&&i.eventDefinitions[0],s=i.$type===n.type,c=(o&&o.$type)===n.eventDefinitionType,u=!!n.triggeredByEvent==!!i.triggeredByEvent,f=n.isExpanded===void 0||n.isExpanded===Ue(e);return!s||!c||!u||!f}}var NL=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],PL=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],BL=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],LL=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],kL=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],zL=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],jL=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],l2=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],HL=l2,W1=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],$L=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],IL=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],UL=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],GL=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],VL=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],FL=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],YL={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]};const Z1={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function Ei(e,t,n,i,o,s,c,u){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=o,this._rules=s,this._translate=c,this._moddleCopy=u,this._register()}Ei.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];Ei.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};Ei.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,i=[],o,s=[];if(Ae(e)||!n.allowed("shape.replace",{element:e}))return{};var c=OL(e);return T(t,"bpmn:DataObjectReference")?this._createEntries(e,$L):T(t,"bpmn:DataStoreReference")&&!T(e.parent,"bpmn:Collaboration")?this._createEntries(e,IL):(T(t,"bpmn:Event")&&!T(t,"bpmn:BoundaryEvent")&&(o=t.get("eventDefinitions")[0]?.$type,i=YL[o]||[],!hn(t.$parent)&&T(t.$parent,"bpmn:SubProcess")&&(i=je(i,function(u){return u.target.type!=="bpmn:StartEvent"}))),T(t,"bpmn:StartEvent")&&!T(t.$parent,"bpmn:SubProcess")?(s=je(NL.concat(i),c),this._createEntries(e,s)):T(t,"bpmn:Participant")?(s=je(FL,function(u){return Ue(e)!==u.target.isExpanded}),this._createEntries(e,s)):T(t,"bpmn:StartEvent")&&hn(t.$parent)?(s=je(GL.concat(i),function(u){var f=u.target,d=f.isInterrupting!==!1,h=t.isInterrupting===d;return c(u)||!c(u)&&!h}),this._createEntries(e,s)):T(t,"bpmn:StartEvent")&&!hn(t.$parent)&&T(t.$parent,"bpmn:SubProcess")?(s=je(PL.concat(i),c),this._createEntries(e,s)):T(t,"bpmn:EndEvent")?(s=je(LL.concat(i),function(u){var f=u.target;return f.eventDefinitionType=="bpmn:CancelEventDefinition"&&!T(t.$parent,"bpmn:Transaction")?!1:c(u)}),this._createEntries(e,s)):T(t,"bpmn:BoundaryEvent")?(s=je(UL,function(u){var f=u.target;if(f.eventDefinitionType=="bpmn:CancelEventDefinition"&&!T(t.attachedToRef,"bpmn:Transaction"))return!1;var d=f.cancelActivity!==!1,h=t.cancelActivity==d;return c(u)||!c(u)&&!h}),this._createEntries(e,s)):T(t,"bpmn:IntermediateCatchEvent")||T(t,"bpmn:IntermediateThrowEvent")?(s=je(BL.concat(i),c),this._createEntries(e,s)):T(t,"bpmn:Gateway")?(s=je(kL,c),this._createEntries(e,s)):T(t,"bpmn:Transaction")?(s=je(l2,c),this._createEntries(e,s)):hn(t)&&Ue(e)?(s=je(HL,c),this._createEntries(e,s)):T(t,"bpmn:AdHocSubProcess")&&Ue(e)?(s=je(jL,c),this._createEntries(e,s)):T(t,"bpmn:SubProcess")&&Ue(e)?(s=je(zL,c),this._createEntries(e,s)):T(t,"bpmn:SubProcess")&&!Ue(e)?(s=je(W1,function(u){var f=u.target.type===e.type,d=u.target.isExpanded===!0;return f===d}),this._createEntries(e,s)):T(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,VL):T(t,"bpmn:FlowNode")?(s=je(W1,c),this._createEntries(e,s)):{})};Ei.prototype.getPopupMenuHeaderEntries=function(e){var t={};return T(e,"bpmn:Activity")&&!hn(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),T(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),T(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),cT(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};Ei.prototype._createEntries=function(e,t){var n={},i=this;return z(t,function(o){n[o.actionName]=i._createEntry(o,e)}),n};Ei.prototype._createSequenceFlowEntries=function(e,t){var n=ue(e),i={},o=this._modeling,s=this._moddle,c=this;return z(t,function(u){switch(u.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(T(n.sourceRef,"bpmn:ExclusiveGateway")||T(n.sourceRef,"bpmn:InclusiveGateway")||T(n.sourceRef,"bpmn:ComplexGateway")||T(n.sourceRef,"bpmn:Activity"))&&(i={...i,[u.actionName]:c._createEntry(u,e,function(){o.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&T(n.sourceRef,"bpmn:Activity")&&(i={...i,[u.actionName]:c._createEntry(u,e,function(){var f=s.create("bpmn:FormalExpression",{body:""});o.updateProperties(e,{conditionExpression:f})})});break;default:T(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[u.actionName]:c._createEntry(u,e,function(){o.updateProperties(e,{conditionExpression:void 0})})}),(T(n.sourceRef,"bpmn:ExclusiveGateway")||T(n.sourceRef,"bpmn:InclusiveGateway")||T(n.sourceRef,"bpmn:ComplexGateway")||T(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[u.actionName]:c._createEntry(u,e,function(){o.updateProperties(e.source,{default:void 0})})})}}),i};Ei.prototype._createEntry=function(e,t,n){var i=this._translate,o=this._bpmnReplace.replaceElement,s=function(){return o(t,e.target)},c=e.label;return c&&typeof c=="function"&&(c=c(t)),n=n||s,{label:i(c),className:e.className,action:n}};Ei.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(d,h){if(h.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}var v=e.businessObject.get("loopCharacteristics");v&&T(v,h.options.loopCharacteristics)?t._modeling.updateModdleProperties(e,v,{isSequential:h.options.isSequential}):(v=t._moddle.create(h.options.loopCharacteristics,{isSequential:h.options.isSequential}),t._modeling.updateProperties(e,{loopCharacteristics:v}))}var o=ue(e),s=o.loopCharacteristics,c,u,f;return s&&(c=s.isSequential,u=s.isSequential===void 0,f=s.isSequential!==void 0&&!s.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:f,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:c,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:u,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};Ei.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};function o(c,u){t._modeling.updateModdleProperties(e,i,{isCollection:!u.active})}var s=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:s,action:o}}};Ei.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function o(c,u){var f=u.active,d;f||(d=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:d})}var s=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!s,action:o}}};Ei.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=ue(e),i=this,o=uT(e),s=T(e,"bpmn:BoundaryEvent")?Z1["intermediate-event-non-interrupting"]:Z1["start-event-non-interrupting"],c=!n[o];return{"toggle-non-interrupting":{imageHtml:s,title:t("Toggle non-interrupting"),active:c,action:function(){i._modeling.updateProperties(e,{[o]:!!c})}}}};const qL={__depends__:[cg,$T,pg],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",Ei]};function jc(e,t,n,i,o,s,c,u,f,d,h,v,y){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=o,this._elementFactory=s,this._connect=c,this._create=u,this._popupMenu=f,this._canvas=d,this._rules=h,this._translate=v,this._eventBus=n,this._appendPreview=y,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(_){var b=_.context,w=b.shape;if(!(!sc(_)||!i.isOpen(w))){var S=i.getEntries(w);S.replace&&S.replace.action.click(_,w)}}),n.on("contextPad.close",function(){y.cleanUp()})}jc.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];jc.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&I(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(i,o){t.removeElements(o.slice())}}}}),n};jc.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return Ae(t)?oo(e,n=>t.includes(n)):t};jc.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,o=this._connect,s=this._create,c=this._popupMenu,u=this._autoPlace,f=this._translate,d=this._appendPreview,h={};if(e.type==="label")return this._isDeleteAllowed([e])&&I(h,b()),h;var v=e.businessObject;function y(A,C){o.start(A,C)}function _(A,C){n.removeElements([C])}function b(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:f("Delete"),action:{click:_}}}}function w(A){var C=5,D=t.getPad(A).html,B=D.getBoundingClientRect(),F={x:B.left,y:B.bottom+C};return F}function S(A,C,D,B){function F(J,le){var ee=i.createShape(I({type:A},B));s.start(J,ee,{source:le})}var j=u?function(J,le){var ee=i.createShape(I({type:A},B));u.append(le,ee)}:F,Q=u?function(J,le){return d.create(le,A,B),()=>{d.cleanUp()}}:null;return{group:"model",className:C,title:D,action:{dragstart:F,click:j,hover:Q}}}function O(A){return function(C,D){n.splitLane(D,A),t.open(D,!0)}}if(He(v,["bpmn:Lane","bpmn:Participant"])&&Ue(e)){var N=_a(e);I(h,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:f("Add lane above"),action:{click:function(A,C){n.addLane(C,"top")}}}}),N.length<2&&((Yt(e)?e.height>=120:e.width>=120)&&I(h,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:f("Divide into two lanes"),action:{click:O(2)}}}),(Yt(e)?e.height>=180:e.width>=180)&&I(h,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:f("Divide into three lanes"),action:{click:O(3)}}})),I(h,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:f("Add lane below"),action:{click:function(A,C){n.addLane(C,"bottom")}}}})}return T(v,"bpmn:FlowNode")&&(T(v,"bpmn:EventBasedGateway")?I(h,{"append.receive-task":S("bpmn:ReceiveTask","bpmn-icon-receive-task",f("Append receive task")),"append.message-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",f("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",f("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",f("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",f("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Q1(v,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?I(h,{"append.compensation-activity":S("bpmn:Task","bpmn-icon-task",f("Append compensation activity"),{isForCompensation:!0})}):!T(v,"bpmn:EndEvent")&&!v.isForCompensation&&!Q1(v,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!hn(v)&&I(h,{"append.end-event":S("bpmn:EndEvent","bpmn-icon-end-event-none",f("Append end event")),"append.gateway":S("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",f("Append gateway")),"append.append-task":S("bpmn:Task","bpmn-icon-task",f("Append task")),"append.intermediate-event":S("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",f("Append intermediate/boundary event"))})),c.isEmpty(e,"bpmn-replace")||I(h,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:f("Change element"),action:{click:function(A,C){var D=I(w(C),{cursor:{x:A.x,y:A.y}});c.open(C,"bpmn-replace",D,{title:f("Change element"),width:300,search:!0})}}}}),T(v,"bpmn:SequenceFlow")&&I(h,{"append.text-annotation":S("bpmn:TextAnnotation","bpmn-icon-text-annotation",f("Add text annotation"))}),T(v,"bpmn:MessageFlow")&&I(h,{"append.text-annotation":S("bpmn:TextAnnotation","bpmn-icon-text-annotation",f("Add text annotation"))}),He(v,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&I(h,{"append.text-annotation":S("bpmn:TextAnnotation","bpmn-icon-text-annotation",f("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect to other element"),action:{click:y,dragstart:y}}}),T(v,"bpmn:TextAnnotation")&&I(h,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using association"),action:{click:y,dragstart:y}}}),He(v,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&I(h,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using data input association"),action:{click:y,dragstart:y}}}),T(v,"bpmn:Group")&&I(h,{"append.text-annotation":S("bpmn:TextAnnotation","bpmn-icon-text-annotation",f("Add text annotation"))}),this._isDeleteAllowed([e])&&I(h,b()),h};function Q1(e,t,n){var i=e.$instanceOf(t),o=!1,s=e.eventDefinitions||[];return z(s,function(c){c.$type===n&&(o=!0)}),i&&o}const XL={__depends__:[CL,s2,iR,Di,gg,Fp,qL],__init__:["contextPadProvider"],contextPadProvider:["type",jc]};var KL={horizontal:["x","width"],vertical:["y","height"]},J1=5;function Ar(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return Ae(i)?i:i?n:[]})}Ar.$inject=["modeling","rules"];Ar.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Ar.prototype.trigger=function(e,t){var n=this._modeling,i,o;if(!(e.length<3)&&(this._setOrientation(t),o=this._filterElements(e),i=this._createGroups(o),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};Ar.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,o=[].concat(e);return t.length?(z(t,function(s){o=s(o,n,i)}),o):e};Ar.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,o=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var s=Fi(e,i);return z(s,function(c,u){var f=n._findRange(c,i,o),d,h=t[t.length-1];h&&n._hasIntersection(h.range,f)?t[t.length-1].elements.push(c):(d={range:f,elements:[c]},t.push(d))}),t};Ar.prototype._setOrientation=function(e){var t=KL[e];this._axis=t[0],this._dimension=t[1]};Ar.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Ar.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+J1,max:t+n-J1}};const WL={__init__:["distributeElements"],distributeElements:["type",Ar]};function od(e){gi.call(this,e)}od.$inject=["eventBus"];ve(od,gi);od.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=je(t,function(n){var i=He(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=mp(t),t.length<3?!1:t})};var eS={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},ZL=900;function Hc(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",ZL,this)}Hc.$inject=["popupMenu","distributeElements","translate","rules"];Hc.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&I(t,this._getEntries(e)),t};Hc.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Hc.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,o={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:eS.horizontal,action:function(s,c){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:eS.vertical,action:function(s,c){t.trigger(e,"vertical"),i.close()}}};return o};const QL={__depends__:[cg,WL],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",od],distributeElementsMenuProvider:["type",Hc]};var c2="is not a registered action",JL="is already registered";function xi(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}xi.$inject=["eventBus","injector"];xi.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),o=e.get("zoomScroll",!1),s=e.get("copyPaste",!1),c=e.get("canvas",!1),u=e.get("rules",!1),f=e.get("keyboardMove",!1),d=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),s&&i&&this.register("copy",function(){var h=i.get();if(h.length)return s.copy(h)}),s&&this.register("paste",function(){s.paste()}),o&&this.register("stepZoom",function(h){o.stepZoom(h.value)}),c&&this.register("zoom",function(h){c.zoom(h.value)}),n&&i&&u&&this.register("removeSelection",function(){var h=i.get();if(h.length){var v=u.allowed("elements.delete",{elements:h}),y;v!==!1&&(Ae(v)?y=v:y=h,y.length&&n.removeElements(y.slice()))}}),f&&this.register("moveCanvas",function(h){f.moveCanvas(h)}),d&&this.register("moveSelection",function(h){d.moveSelection(h.direction,h.accelerated)})};xi.prototype.trigger=function(e,t){if(!this._actions[e])throw Ey(e,c2);return this._actions[e](t)};xi.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);z(e,function(i,o){n._registerAction(o,i)})};xi.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw Ey(e,JL);this._actions[e]=t};xi.prototype.unregister=function(e){if(!this.isRegistered(e))throw Ey(e,c2);this._actions[e]=void 0};xi.prototype.getActions=function(){return Object.keys(this._actions)};xi.prototype.isRegistered=function(e){return!!this._actions[e]};function Ey(e,t){return new Error(e+" "+t)}const ek={__init__:["editorActions"],editorActions:["type",xi]};function sd(e){e.invoke(xi,this)}ve(sd,xi);sd.$inject=["injector"];sd.prototype._registerDefaultActions=function(e){xi.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),o=e.get("spaceTool",!1),s=e.get("lassoTool",!1),c=e.get("handTool",!1),u=e.get("globalConnect",!1),f=e.get("distributeElements",!1),d=e.get("alignElements",!1),h=e.get("directEditing",!1),v=e.get("searchPad",!1),y=e.get("modeling",!1),_=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var b=t.getRootElement(),w=n.filter(function(S){return S!==b});return i.select(w),w}),o&&this._registerAction("spaceTool",function(){o.toggle()}),s&&this._registerAction("lassoTool",function(){s.toggle()}),c&&this._registerAction("handTool",function(){c.toggle()}),u&&this._registerAction("globalConnectTool",function(){u.toggle()}),i&&f&&this._registerAction("distributeElements",function(b){var w=i.get(),S=b.type;w.length&&f.trigger(w,S)}),i&&d&&this._registerAction("alignElements",function(b){var w=i.get(),S=[],O=b.type;w.length&&(S=je(w,function(N){return!T(N,"bpmn:Lane")}),d.trigger(S,O))}),i&&y&&this._registerAction("setColor",function(b){var w=i.get();w.length&&y.setColor(w,b)}),i&&h&&this._registerAction("directEditing",function(){var b=i.get();b.length&&h.activate(b[0])}),v&&this._registerAction("find",function(){v.toggle()}),t&&y&&this._registerAction("moveToOrigin",function(){var b=t.getRootElement(),w,S;T(b,"bpmn:Collaboration")?S=n.filter(function(O){return T(O.parent,"bpmn:Collaboration")}):S=n.filter(function(O){return O!==b&&!T(O.parent,"bpmn:SubProcess")}),w=It(S),y.moveElements(S,{x:-w.x,y:-w.y},b)}),i&&_&&this._registerAction("replaceElement",function(b){_.triggerEntry("replace","click",b)})};const tk={__depends__:[ek],editorActions:["type",sd]};function u2(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;He(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}u2.$inject=["eventBus"];var Vf=10;function Ym(e,t,n){return n||(n="round"),Math[n](e/t)*t}var nk=1200,ik=800;function Ra(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var o=this;t.on("diagram.init",ik,function(){o.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],nk,function(s){var c=s.originalEvent;if(!(!o.active||c&&hi(c))){var u=s.context,f=u.gridSnappingContext;f||(f=u.gridSnappingContext={}),["x","y"].forEach(function(d){var h={},v=ak(s,d,e);v&&(h.offset=v);var y=rk(s,d);y&&I(h,y),_s(s,d)||o.snapEvent(s,d,h)})}})}Ra.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);Ot(e,t,i)};Ra.prototype.getGridSpacing=function(){return Vf};Ra.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=Ym(e,Vf);var i,o;return t&&t.min&&(i=t.min,Te(i)&&(i=Ym(i+n,Vf,"ceil"),e=Math.max(e,i))),t&&t.max&&(o=t.max,Te(o)&&(o=Ym(o+n,Vf,"floor"),e=Math.min(e,o))),e-=n,e};Ra.prototype.isActive=function(){return this.active};Ra.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};Ra.prototype.toggleActive=function(){this.setActive(!this.active)};Ra.$inject=["elementRegistry","eventBus","config.gridSnapping"];function rk(e,t){var n=e.context,i=n.createConstraints,o=n.resizeConstraints||{},s=n.gridSnappingContext,c=s.snapConstraints;if(c&&c[t])return c[t];c||(c=s.snapConstraints={}),c[t]||(c[t]={});var u=n.direction;i&&(Ff(t)?(c.x.min=i.left,c.x.max=i.right):(c.y.min=i.top,c.y.max=i.bottom));var f=o.min,d=o.max;return f&&(Ff(t)?nS(u)?c.x.max=f.left:c.x.min=f.right:tS(u)?c.y.max=f.top:c.y.min=f.bottom),d&&(Ff(t)?nS(u)?c.x.min=d.left:c.x.max=d.right:tS(u)?c.y.min=d.top:c.y.max=d.bottom),c[t]}function ak(e,t,n){var i=e.context,o=e.shape,s=i.gridSnappingContext,c=s.snapLocation,u=s.snapOffset;return u&&Te(u[t])||(u||(u=s.snapOffset={}),Te(u[t])||(u[t]=0),!o)||(n.get(o.id)||(Ff(t)?u[t]+=o[t]+o.width/2:u[t]+=o[t]+o.height/2),!c)||(t==="x"?/left/.test(c)?u[t]-=o.width/2:/right/.test(c)&&(u[t]+=o.width/2):/top/.test(c)?u[t]-=o.height/2:/bottom/.test(c)&&(u[t]+=o.height/2)),u[t]}function Ff(e){return e==="x"}function tS(e){return e.indexOf("n")!==-1}function nS(e){return e.indexOf("w")!==-1}function mo(e,t){ce.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var o=i.context,s=o.hints||{},c=s.autoResize;if(c){var u=o.shape,f=o.newBounds;Hn(c)?o.newBounds=n.snapComplex(f,c):o.newBounds=n.snapSimple(u,f)}})}mo.$inject=["eventBus","gridSnapping","modeling"];ve(mo,ce);mo.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};mo.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};mo.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),o=/e/.test(t),s={};return s.width=n.snapValue(e.width,{min:e.width}),o&&(i?(s.x=n.snapValue(e.x,{max:e.x}),s.width+=n.snapValue(e.x-s.x,{min:e.x-s.x})):e.x=e.x+e.width-s.width),I(e,s),e};mo.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),o=/s/.test(t),s={};return s.height=n.snapValue(e.height,{min:e.height}),i&&(o?(s.y=n.snapValue(e.y,{max:e.y}),s.height+=n.snapValue(e.y-s.y,{min:e.y-s.y})):e.y=e.y+e.height-s.height),I(e,s),e};var ok=2e3;function f2(e,t){e.on(["spaceTool.move","spaceTool.end"],ok,function(n){var i=n.context;if(i.initialized){var o=i.axis,s;o==="x"?(s=t.snapValue(n.dx),n.x=n.x+s-n.dx,n.dx=s):(s=t.snapValue(n.dy),n.y=n.y+s-n.dy,n.dy=s)}})}f2.$inject=["eventBus","gridSnapping"];const sk={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",mo],gridSnappingSpaceToolBehavior:["type",f2]},lk={__depends__:[sk],__init__:["gridSnapping"],gridSnapping:["type",Ra]};var ck=2e3;function p2(e,t,n){e.on("autoPlace",ck,function(i){var o=i.source,s=Ce(o),c=i.shape,u=DR(o,c,n);return["x","y"].forEach(function(f){var d={};u[f]!==s[f]&&(u[f]>s[f]?d.min=u[f]:d.max=u[f],T(c,"bpmn:TextAnnotation")&&(uk(f)?d.offset=-c.width/2:d.offset=-c.height/2),u[f]=t.snapValue(u[f],d))}),u})}p2.$inject=["eventBus","gridSnapping","elementRegistry"];function uk(e){return e==="x"}var fk=1750;function d2(e,t,n){t.on(["create.start","shape.move.start"],fk,function(i){var o=i.context,s=o.shape,c=e.getRootElement();if(!(!T(s,"bpmn:Participant")||!T(c,"bpmn:Process")||!c.children.length)){var u=o.createConstraints;u&&(s.width=n.snapValue(s.width,{min:s.width}),s.height=n.snapValue(s.height,{min:s.height}))}})}d2.$inject=["canvas","eventBus","gridSnapping"];var pk=3e3;function ld(e,t,n){ce.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],pk,function(o){var s=o.context,c=s.connection,u=s.hints||{},f=c.waypoints;u.connectionStart||u.connectionEnd||u.createElementsBehavior===!1||dk(f)&&n.updateWaypoints(c,i.snapMiddleSegments(f))})}ld.$inject=["eventBus","gridSnapping","modeling"];ve(ld,ce);ld.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=vk(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function dk(e){return e.length>3}function hk(e){return e==="h"}function mk(e){return e==="v"}function vk(e,t,n){var i=mr(t,n),o={};return hk(i)&&(o.y=e.snapValue(t.y)),mk(i)&&(o.x=e.snapValue(t.x)),("x"in o||"y"in o)&&(t=I({},t,o),n=I({},n,o)),[t,n]}const gk={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",p2],gridSnappingParticipantBehavior:["type",d2],gridSnappingLayoutConnectionBehavior:["type",ld]},yk={__depends__:[lk,gk],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",u2]};var _k=30,h2=30;function $c(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var o=i.element,s=i.gfx;if(T(o,"bpmn:Lane"))return n._createParticipantHit(o,s);if(T(o,"bpmn:Participant"))return Ue(o)?n._createParticipantHit(o,s):n._createDefaultHit(o,s);if(T(o,"bpmn:SubProcess"))return Ue(o)?n._createSubProcessHit(o,s):n._createDefaultHit(o,s)})}$c.$inject=["eventBus","interactionEvents"];$c.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};$c.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=Yt(e)?{width:_k,height:e.height}:{width:e.width,height:h2};return this._interactionEvents.createBoxHit(t,"all",n),!0};$c.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:h2}),!0};const bk={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",$c]};function cd(e){e.invoke(Ds,this)}ve(cd,Ds);cd.$inject=["injector"];cd.prototype.registerBindings=function(e,t){Ds.prototype.registerBindings.call(this,e,t);function n(i,o){t.isRegistered(i)&&e.addListener(o)}n("selectElements",function(i){var o=i.keyEvent;if(e.isKey(["a","A"],o)&&e.isCmd(o))return t.trigger("selectElements"),!0}),n("find",function(i){var o=i.keyEvent;if(e.isKey(["f","F"],o)&&e.isCmd(o))return t.trigger("find"),!0}),n("spaceTool",function(i){var o=i.keyEvent;if(!e.hasModifier(o)&&e.isKey(["s","S"],o))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var o=i.keyEvent;if(!e.hasModifier(o)&&e.isKey(["l","L"],o))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var o=i.keyEvent;if(!e.hasModifier(o)&&e.isKey(["h","H"],o))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var o=i.keyEvent;if(!e.hasModifier(o)&&e.isKey(["c","C"],o))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var o=i.keyEvent;if(!e.hasModifier(o)&&e.isKey(["e","E"],o))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var o=i.keyEvent;if(!e.hasModifier(o)&&e.isKey(["r","R"],o))return t.trigger("replaceElement",o),!0})};const Ek={__depends__:[ng],__init__:["keyboardBindings"],keyboardBindings:["type",cd]};var xk={moveSpeed:1,moveSpeedAccelerated:10},Sk=1500,iS="left",rS="up",aS="right",oS="down",wk={ArrowLeft:iS,Left:iS,ArrowUp:rS,Up:rS,ArrowRight:aS,Right:aS,ArrowDown:oS,Down:oS},Rk={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function m2(e,t,n,i,o){var s=this;this._config=I({},xk,e||{}),t.addListener(Sk,function(c){var u=c.keyEvent,f=wk[u.key];if(f&&!t.isCmd(u)){var d=t.isShift(u);return s.moveSelection(f,d),!0}}),this.moveSelection=function(c,u){var f=o.get();if(f.length){var d=this._config[u?"moveSpeedAccelerated":"moveSpeed"],h=Rk[c](d),v=i.allowed("elements.move",{shapes:f});v&&n.moveElements(f,h)}}}m2.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const Tk={__depends__:[ng,Di],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",m2]};var sS=10;function Ic(e,t,n,i){this._dragging=i,this._rules=t;var o=this;function s(f,d){var h=f.shape,v=f.direction,y=f.resizeConstraints,_;f.delta=d,_=lB(h,v,d),f.newBounds=uB(_,y),f.canExecute=o.canResize(f)}function c(f){var d=f.resizeConstraints,h=f.minBounds;d===void 0&&(h===void 0&&(h=o.computeMinResizeBox(f)),f.resizeConstraints={min:Se(h)})}function u(f){var d=f.shape,h=f.canExecute,v=f.newBounds;if(h){if(v=ZS(v),!Ck(d,v))return;n.resizeShape(d,v)}}e.on("resize.start",function(f){c(f.context)}),e.on("resize.move",function(f){var d={x:f.dx,y:f.dy};s(f.context,d)}),e.on("resize.end",function(f){u(f.context)})}Ic.prototype.canResize=function(e){var t=this._rules,n=Ai(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};Ic.prototype.activate=function(e,t,n){var i=this._dragging,o,s;if(typeof n=="string"&&(n={direction:n}),o=I({shape:t},n),s=o.direction,!s)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,v2(t,s),"resize",{autoActivate:!0,cursor:Ak(s),data:{shape:t,context:o}})};Ic.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,o;return i=e.minDimensions||{width:sS,height:sS},o=eT(t,e.childrenBoxPadding),fB(n,t,i,o)};Ic.$inject=["eventBus","rules","modeling","dragging"];function Ck(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function v2(e,t){var n=Ce(e),i=Se(e),o={x:n.x,y:n.y};return t.indexOf("n")!==-1?o.y=i.top:t.indexOf("s")!==-1&&(o.y=i.bottom),t.indexOf("e")!==-1?o.x=i.right:t.indexOf("w")!==-1&&(o.x=i.left),o}function Ak(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var lS="djs-resizing",cS="resize-not-ok",Mk=500;function g2(e,t,n){function i(s){var c=s.shape,u=s.newBounds,f=s.frame;f||(f=s.frame=n.addFrame(c,t.getActiveLayer()),t.addMarker(c,lS)),u.width>5&&he(f,{x:u.x,width:u.width}),u.height>5&&he(f,{y:u.y,height:u.height}),s.canExecute?Ye(f).remove(cS):Ye(f).add(cS)}function o(s){var c=s.shape,u=s.frame;u&&$t(s.frame),t.removeMarker(c,lS)}e.on("resize.move",Mk,function(s){i(s.context)}),e.on("resize.cleanup",function(s){o(s.context)})}g2.$inject=["eventBus","canvas","previewSupport"];var Cf=-6,Af=8,Mf=20,Kl="djs-resizer",Dk=["n","w","s","e","nw","ne","se","sw"];function Ta(e,t,n,i){this._resize=i,this._canvas=t;var o=this;e.on("selection.changed",function(s){var c=s.newSelection;o.removeResizers(),c.length===1&&z(c,An(o.addResizer,o))}),e.on("shape.changed",function(s){var c=s.element;n.isSelected(c)&&(o.removeResizers(),o.addResizer(c))})}Ta.prototype.makeDraggable=function(e,t,n){var i=this._resize;function o(s){va(s)&&i.activate(s,e,n)}Le.bind(t,"mousedown",o),Le.bind(t,"touchstart",o)};Ta.prototype._createResizer=function(e,t,n,i){var o=this._getResizersParent(),s=Ok(i),c=Ee("g");Ye(c).add(Kl),Ye(c).add(Kl+"-"+e.id),Ye(c).add(Kl+"-"+i),De(o,c);var u=Ee("rect");he(u,{x:-Af/2+s.x,y:-Af/2+s.y,width:Af,height:Af}),Ye(u).add(Kl+"-visual"),De(c,u);var f=Ee("rect");return he(f,{x:-Mf/2+s.x,y:-Mf/2+s.y,width:Mf,height:Mf}),Ye(f).add(Kl+"-hit"),De(c,f),Pf(c,t,n),c};Ta.prototype.createResizer=function(e,t){var n=v2(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};Ta.prototype.addResizer=function(e){var t=this;st(e)||!this._resize.canResize({shape:e})||z(Dk,function(n){t.createResizer(e,n)})};Ta.prototype.removeResizers=function(){var e=this._getResizersParent();dp(e)};Ta.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};Ta.$inject=["eventBus","canvas","selection","resize"];function Ok(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-Cf:e.indexOf("w")!==-1&&(t.x=Cf),e.indexOf("s")!==-1?t.y=-Cf:e.indexOf("n")!==-1&&(t.y=Cf),t}const y2={__depends__:[Wi,Rr,Ls],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Ic],resizePreview:["type",g2],resizeHandles:["type",Ta]};var Nk=2e3;function Uc(e,t,n,i,o,s,c){this._bpmnFactory=t,this._canvas=n,this._modeling=o,this._textRenderer=c,i.registerProvider(this),e.on("element.dblclick",function(f){u(f.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],Nk,function(f){i.isActive(f.element)&&i.cancel()}),e.on(["commandStack.changed"],function(f){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(f){s.removeResizers()}),e.on("create.end",500,function(f){var d=f.context,h=d.shape,v=f.context.canExecute,y=f.isTouch;y||v&&(d.hints&&d.hints.createElementsBehavior===!1||u(h))}),e.on("autoPlace.end",500,function(f){u(f.shape)});function u(f,d){(d||He(f,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||xy(f))&&i.activate(f)}}Uc.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];Uc.prototype.activate=function(e){var t=Mi(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);I(n,i);var o={},s=n.style||{};return I(s,{backgroundColor:null,border:null}),(He(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||xy(e))&&I(o,{centerVertically:!0}),ro(e)&&(I(o,{autoResize:!0}),I(s,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),T(e,"bpmn:TextAnnotation")&&(I(o,{resizable:!0,autoResize:!0}),I(s,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),I(n,{options:o,style:s}),n}};Uc.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),o={x:i.x+i.width/2,y:i.y+i.height/2},s={x:i.x,y:i.y},c=t.zoom(),u=this._textRenderer.getDefaultStyle(),f=this._textRenderer.getExternalStyle(),d=f.fontSize*c,h=f.lineHeight,v=u.fontSize*c,y=u.lineHeight,_={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(T(e,"bpmn:Lane")||Lk(e)){var b=Yt(e),w=b?{width:i.height,height:30*c,x:i.x-i.height/2+15*c,y:o.y-30*c/2}:{width:i.width,height:30*c};I(s,w),I(_,{fontSize:v+"px",lineHeight:y,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:b?"rotate(-90deg)":null})}if(Bk(e)){var S=Yt(e),O=S?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:o.x-i.height/2,y:o.y-i.width/2};I(s,O),I(_,{fontSize:v+"px",lineHeight:y,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:S?null:"rotate(-90deg)"})}(He(e,["bpmn:Task","bpmn:CallActivity"])||xy(e))&&(I(s,{width:i.width,height:i.height}),I(_,{fontSize:v+"px",lineHeight:y,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"})),Pk(e)&&(I(s,{width:i.width,x:i.x}),I(_,{fontSize:v+"px",lineHeight:y,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"}));var N=90*c,A=7*c,C=4*c;if(n.labelTarget&&(I(s,{width:N,height:i.height+A+C,x:o.x-N/2,y:i.y-A}),I(_,{fontSize:d+"px",lineHeight:h,paddingTop:A+"px",paddingBottom:C+"px"})),ro(n)&&!bp(n)&&!Xe(n)){var D=Qv(e),B=t.getAbsoluteBBox({x:D.x,y:D.y,width:0,height:0}),F=d+A+C;I(s,{width:N,height:F,x:B.x-N/2,y:B.y-F/2}),I(_,{fontSize:d+"px",lineHeight:h,paddingTop:A+"px",paddingBottom:C+"px"})}return T(e,"bpmn:TextAnnotation")&&(I(s,{width:i.width,height:i.height,minWidth:30*c,minHeight:10*c}),I(_,{textAlign:"left",paddingTop:5*c+"px",paddingBottom:7*c+"px",paddingLeft:7*c+"px",paddingRight:5*c+"px",fontSize:v+"px",lineHeight:y})),{bounds:s,style:_}};Uc.prototype.update=function(e,t,n,i){var o,s;T(e,"bpmn:TextAnnotation")&&(s=this._canvas.getAbsoluteBBox(e),o={x:e.x,y:e.y,width:e.width/s.width*i.width,height:e.height/s.height*i.height}),kk(t)&&(t=null),this._modeling.updateLabel(e,t,o)};function xy(e){return T(e,"bpmn:SubProcess")&&!Ue(e)}function Pk(e){return T(e,"bpmn:SubProcess")&&Ue(e)}function Bk(e){return T(e,"bpmn:Participant")&&!Ue(e)}function Lk(e){return T(e,"bpmn:Participant")&&Ue(e)}function kk(e){return!e||!e.trim()}var uS="djs-element-hidden",fS="djs-label-hidden";function _2(e,t,n){var i=this,o=t.getDefaultLayer(),s,c,u;e.on("directEditing.activate",function(f){var d=f.active;if(s=d.element.label||d.element,T(s,"bpmn:TextAnnotation")){c=t.getAbsoluteBBox(s),u=Ee("g");var h=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:0}}),v=i.path=Ee("path");he(v,{d:h,strokeWidth:2,stroke:zk(s)}),De(u,v),De(o,u),rn(u,s.x,s.y)}T(s,"bpmn:TextAnnotation")||s.labelTarget?t.addMarker(s,uS):(T(s,"bpmn:Task")||T(s,"bpmn:CallActivity")||T(s,"bpmn:SubProcess")||T(s,"bpmn:Participant")||T(s,"bpmn:Lane"))&&t.addMarker(s,fS)}),e.on("directEditing.resize",function(f){if(T(s,"bpmn:TextAnnotation")){var d=f.height,h=f.dy,v=Math.max(s.height/c.height*(d+h),0),y=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:v,position:{mx:0,my:0}});he(i.path,{d:y})}}),e.on(["directEditing.complete","directEditing.cancel"],function(f){var d=f.active;d&&(t.removeMarker(d.element.label||d.element,uS),t.removeMarker(s,fS)),s=void 0,c=void 0,u&&($t(u),u=void 0)})}_2.$inject=["eventBus","canvas","pathMap"];function zk(e,t){var n=qe(e);return n.get("stroke")||t||"black"}const jk={__depends__:[Jv,y2,s2],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",Uc],labelEditingPreview:["type",_2]};var Hk=new Ec("tt");function $k(e){var t=ht('<div class="djs-tooltip-container" />');return fn(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function Ik(e,t,n){fn(e,{left:t+"px",top:n+"px"})}function Sy(e,t){e.style.display=t===!1?"none":""}var b2="djs-tooltip",qm="."+b2;function Mn(e,t){this._eventBus=e,this._canvas=t,this._ids=Hk,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=$k(t.getContainer());var n=this;jn.bind(this._tooltipRoot,qm,"mousedown",function(i){i.stopPropagation()}),jn.bind(this._tooltipRoot,qm,"mouseover",function(i){n.trigger("mouseover",i)}),jn.bind(this._tooltipRoot,qm,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}Mn.$inject=["eventBus","canvas"];Mn.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=I({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Mn.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(pn(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};Mn.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Mn.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Mn.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Mn.prototype.remove=function(e){var t=this.get(e);t&&(Yi(t.html),Yi(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Mn.prototype.show=function(){Sy(this._tooltipRoot)};Mn.prototype.hide=function(){Sy(this._tooltipRoot,!1)};Mn.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};Mn.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,o=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),Hn(n)&&(n=ht(n)),i=ht('<div data-tooltip-id="'+t+'" class="'+b2+'">'),fn(i,{position:"absolute"}),i.appendChild(n),e.type&&St(i).add("djs-tooltip-"+e.type),e.className&&St(i).add(e.className),e.htmlContainer=i,o.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};Mn.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;Ik(n,t.x,t.y)};Mn.prototype._updateTooltipVisibilty=function(e){z(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,o=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(o=!1),Sy(i,o))})};Mn.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const Uk={__init__:["tooltips"],tooltips:["type",Mn]};var Gk="flow elements must be children of pools/participants",Vk="Data object must be placed within a pool/participant.";function E2(e,t,n){function i(o,s,c){t.add({position:{x:o.x+5,y:o.y+5},type:"error",timeout:2e3,html:"<div>"+s+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(o){var s=o.context,c=s.shape,u=s.target;T(u,"bpmn:Collaboration")&&(T(c,"bpmn:FlowNode")?i(o,n(Gk)):T(c,"bpmn:DataObjectReference")&&i(o,n(Vk)))})}E2.$inject=["eventBus","tooltips","translate"];const Fk={__depends__:[Uk],__init__:["modelingFeedback"],modelingFeedback:["type",E2]};var Yk=500,qk=1e3;function vo(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function o(s){var c=Ee("rect");return he(c,I({x:0,y:0,rx:4,width:100,height:100},n)),c}e.on(["shape.added","shape.changed"],Yk,function(s){var c=s.element,u=s.gfx,f=ot(".djs-outline",u);f||(f=i.getOutline(c)||o(),De(u,f)),i.updateShapeOutline(f,c)}),e.on(["connection.added","connection.changed"],function(s){var c=s.element,u=s.gfx,f=ot(".djs-outline",u);f||(f=o(),De(u,f)),i.updateConnectionOutline(f,c)})}vo.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&z(i,function(o){n=n||o.updateOutline(t,e)}),n||he(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};vo.prototype.updateConnectionOutline=function(e,t){var n=It(t);he(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};vo.prototype.registerProvider=function(e,t){t||(t=e,e=qk),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};vo.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};vo.prototype.getOutline=function(e){var t,n=this._getProviders();return z(n,function(i){Ft(i.getOutline)&&(t=t||i.getOutline(e))}),t};vo.$inject=["eventBus","styles","elementRegistry"];var Df=6;function wy(e,t,n){this._canvas=t;var i=this;e.on("element.changed",function(o){n.isSelected(o.element)&&i._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(o){var s=o.newSelection;i._updateMultiSelectionOutline(s)})}wy.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");dp(t);var n=e.length>1,i=this._canvas.getContainer();if(Ye(i)[n?"add":"remove"]("djs-multi-select"),!!n){var o=Xk(It(e)),s=Ee("rect");he(s,I({rx:3},o)),Ye(s).add("djs-selection-outline"),De(t,s)}};wy.$inject=["eventBus","canvas","selection"];function Xk(e){return{x:e.x-Df,y:e.y-Df,width:e.width+Df*2,height:e.height+Df*2}}const x2={__depends__:[Di],__init__:["outline","multiSelectionOutline"],outline:["type",vo],multiSelectionOutline:["type",wy]};var Kk=500,Wk=1250,Zk=1500,cp=Math.round;function Qk(e){return{x:e.x+cp(e.width/2),y:e.y+cp(e.height/2)}}function S2(e,t,n,i,o){function s(u,f,d,h){return o.allowed("elements.move",{shapes:u,delta:f,position:d,target:h})}e.on("shape.move.start",Zk,function(u){var f=u.context,d=u.shape,h=i.get().slice();h.indexOf(d)===-1&&(h=[d]),h=Jk(h),I(f,{shapes:h,validatedShapes:h,shape:d})}),e.on("shape.move.start",Wk,function(u){var f=u.context,d=f.validatedShapes,h;if(h=f.canExecute=s(d),!h)return!1}),e.on("shape.move.move",Kk,function(u){var f=u.context,d=f.validatedShapes,h=u.hover,v={x:u.dx,y:u.dy},y={x:u.x,y:u.y},_;if(_=s(d,v,y,h),f.delta=v,f.canExecute=_,_===null){f.target=null;return}f.target=h}),e.on("shape.move.end",function(u){var f=u.context,d=f.delta,h=f.canExecute,v=h==="attach",y=f.shapes;if(h===!1)return!1;d.x=cp(d.x),d.y=cp(d.y),!(d.x===0&&d.y===0)&&n.moveElements(y,d,f.target,{primaryShape:f.shape,attach:v})}),e.on("element.mousedown",function(u){if(va(u)){var f=As(u);if(!f)throw new Error("must supply DOM mousedown event");return c(f,u.element)}});function c(u,f,d,h){if(Zt(d)&&(h=d,d=!1),!(f.waypoints||!f.parent)&&!Ye(u.target).has("djs-hit-no-move")){var v=Qk(f);return t.init(u,v,"shape.move",{cursor:"grabbing",autoActivate:d,data:{shape:f,context:h||{}}}),!0}}this.start=c}S2.$inject=["eventBus","dragging","modeling","selection","rules"];function Jk(e){var t=Ss(e,"id");return je(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var pS=499,Xm="djs-dragging",dS="drop-ok",hS="drop-not-ok",mS="new-parent",vS="attach-ok";function w2(e,t,n,i){function o(f){var d=s(f),h=e9(d);return h}function s(f){var d=hc(f,!0),h=d.flatMap(_=>(_.incoming||[]).concat(_.outgoing||[])),v=d.concat(h),y=[...new Set(v)];return y}function c(f,d){[vS,dS,hS,mS].forEach(function(h){h===d?t.addMarker(f,h):t.removeMarker(f,h)})}function u(f,d,h){i.addDragger(d,f.dragGroup),h&&t.addMarker(d,Xm),f.allDraggedElements?f.allDraggedElements.push(d):f.allDraggedElements=[d]}e.on("shape.move.start",pS,function(f){var d=f.context,h=d.shapes,v=d.allDraggedElements,y=o(h);if(!d.dragGroup){var _=Ee("g");he(_,n.cls("djs-drag-group",["no-events"]));var b=t.getActiveLayer();De(b,_),d.dragGroup=_}y.forEach(function(w){i.addDragger(w,d.dragGroup)}),v?v=Lv([v,s(h)]):v=s(h),z(v,function(w){t.addMarker(w,Xm)}),d.allDraggedElements=v,d.differentParents=t9(h)}),e.on("shape.move.move",pS,function(f){var d=f.context,h=d.dragGroup,v=d.target,y=d.shape.parent,_=d.canExecute;v&&(_==="attach"?c(v,vS):d.canExecute&&y&&v.id!==y.id?c(v,mS):c(v,d.canExecute?dS:hS)),rn(h,f.dx,f.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(f){var d=f.context,h=d.target;h&&c(h,null)}),e.on("shape.move.cleanup",function(f){var d=f.context,h=d.allDraggedElements,v=d.dragGroup;z(h,function(y){t.removeMarker(y,Xm)}),v&&$t(v)}),this.makeDraggable=u}w2.$inject=["eventBus","canvas","styles","previewSupport"];function e9(e){var t=je(e,function(n){return st(n)?We(e,Ti({id:n.source.id}))&&We(e,Ti({id:n.target.id})):!0});return t}function t9(e){return dM(Ss(e,function(t){return t.parent&&t.parent.id}))!==1}const n9={__depends__:[Rp,Di,x2,Wi,Rr,Ls],__init__:["move","movePreview"],move:["type",S2],movePreview:["type",w2]};var R2=".djs-palette-toggle",T2=".entry",i9=R2+", "+T2,Nv="djs-palette-",r9="shown",Pv="open",gS="two-column",a9=1e3;function Pt(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var o=i.tool;n.updateToolHighlight(o)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Pt.$inject=["eventBus","canvas"];Pt.prototype.registerProvider=function(e,t){t||(t=e,e=a9),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};Pt.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(s9,{})};Pt.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};Pt.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=ht(Pt.HTML_MARKUP);n.appendChild(i),St(n).add(Nv+r9),jn.bind(i,i9,"click",function(o){var s=o.delegateTarget;if(kS(s,R2))return e.toggle();e.trigger("click",o)}),Le.bind(i,"mousedown",function(o){o.stopPropagation()}),jn.bind(i,T2,"dragstart",function(o){e.trigger("dragstart",o)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};Pt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Pt.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,o,s=St(n),c=St(t);"twoColumn"in e?o=e.twoColumn:o=this._needsCollapse(t.clientHeight,this._entries||{}),s.toggle(gS,o),c.toggle(Nv+gS,o),"open"in e&&(s.toggle(Pv,e.open),c.toggle(Nv+Pv,e.open)),i.fire("palette.changed",{twoColumn:o,open:this.isOpen()})};Pt.prototype._update=function(){var e=ot(".djs-palette-entries",this._container),t=this._entries=this.getEntries();pp(e),z(t,function(n,i){var o=n.group||"default",s=ot("[data-group="+oc(o)+"]",e);s||(s=ht('<div class="group"></div>'),pn(s,"data-group",o),e.appendChild(s));var c=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),u=ht(c);if(s.appendChild(u),!n.separator&&(pn(u,"data-action",i),n.title&&pn(u,"title",n.title),n.className&&o9(u,n.className),n.imageUrl)){var f=ht("<img>");pn(f,"src",n.imageUrl),u.appendChild(f)}}),this.open()};Pt.prototype.trigger=function(e,t,n){var i,o,s=t.delegateTarget||t.target;return s?(i=pn(s,"data-action"),o=t.originalEvent||t,this.triggerEntry(i,e,o,n)):t.preventDefault()};Pt.prototype.triggerEntry=function(e,t,n,i){var o=this._entries,s,c;if(s=o[e],!!s&&(c=s.action,this._eventBus.fire("palette.trigger",{entry:s,event:n})!==!1)){if(Ft(c)){if(t==="click")return c(n,i)}else if(c[t])return c[t](n,i);n.preventDefault()}};Pt.prototype._layoutChanged=function(){this._toggleState({})};Pt.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};Pt.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Pt.prototype.open=function(){this._toggleState({open:!0})};Pt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Pt.prototype.isActiveTool=function(e){return e&&this._activeTool===e};Pt.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=ot(".djs-palette-entries",this._container),this._toolsContainer=ot("[data-group=tools]",t)),n=this._toolsContainer,z(n.children,function(i){var o=i.getAttribute("data-action");if(o){var s=St(i);o=o.replace("-tool",""),s.contains("entry")&&o===e?s.add("highlighted-entry"):s.remove("highlighted-entry")}})};Pt.prototype.isOpen=function(){return St(this._container).has(Pv)};Pt.prototype._getParentContainer=function(){return this._canvas.getContainer()};Pt.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function o9(e,t){var n=St(e),i=Ae(t)?t:t.split(/\s+/g);i.forEach(function(o){n.add(o)})}function s9(e,t){var n=t.getPaletteEntries();return Ft(n)?n(e):(z(n,function(i,o){e[o]=i}),e)}const l9={__init__:["palette"],palette:["type",Pt]};var C2="crosshair";function go(e,t,n,i,o,s,c){this._selection=o,this._dragging=n,this._mouse=c;var u=this,f={create:function(d){var h=t.getActiveLayer(),v;v=d.frame=Ee("rect"),he(v,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),De(h,v)},update:function(d){var h=d.frame,v=d.bbox;he(h,{x:v.x,y:v.y,width:v.width,height:v.height})},remove:function(d){d.frame&&$t(d.frame)}};s.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(d){var h=d.originalEvent.target;!d.hover&&!(h instanceof SVGElement)||e.once("lasso.selection.ended",function(){u.activateLasso(d.originalEvent,!0)})}),e.on("lasso.end",0,function(d){var h=d.context,v=Km(d),y=i.filter(function(b){return b}),_=Jf(d);u.select(y,v,_?h.selection:[])}),e.on("lasso.start",function(d){var h=d.context;h.bbox=Km(d),f.create(h),h.selection=o.get()}),e.on("lasso.move",function(d){var h=d.context;h.bbox=Km(d),f.update(h)}),e.on("lasso.cleanup",function(d){var h=d.context;f.remove(h)}),e.on("element.mousedown",1500,function(d){if(Jf(d))return u.activateLasso(d.originalEvent),!0})}go.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];go.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:C2,data:{context:{}}})};go.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:C2,data:{context:{}},keepSelection:!0})};go.prototype.select=function(e,t,n=[]){var i=FS(e,t);this._selection.select([...n,...up(i)])};go.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};go.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Km(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const c9={__depends__:[Yp,Tc],__init__:["lassoTool"],lassoTool:["type",go]};var Wm=1500,A2="grab";function ks(e,t,n,i,o,s){this._dragging=n,this._mouse=s;var c=this,u=i.get("keyboard",!1);o.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Wm,function(f){if(sc(f))return c.activateMove(f.originalEvent,!0),!1}),u&&u.addListener(Wm,function(f){if(!(!yS(f.keyEvent)||c.isActive())){var d=c._mouse.getLastMoveEvent();c.activateMove(d,!!d)}},"keyboard.keydown"),u&&u.addListener(Wm,function(f){!yS(f.keyEvent)||!c.isActive()||c.toggle()},"keyboard.keyup"),e.on("hand.end",function(f){var d=f.originalEvent.target;if(!f.hover&&!(d instanceof SVGElement))return!1;e.once("hand.ended",function(){c.activateMove(f.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(f){var d=t.viewbox().scale;t.scroll({dx:f.dx*d,dy:f.dy*d})}),e.on("hand.move.end",function(f){var d=f.context,h=d.reactivate;return!sc(f)&&h&&e.once("hand.move.ended",function(v){c.activateHand(v.originalEvent,!0,!0)}),!1})}ks.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];ks.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:A2,data:{context:n||{}}})};ks.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:A2,data:{context:{reactivate:n}}})};ks.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};ks.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function yS(e){return Kt("Space",e)}const u9={__depends__:[Yp,Tc],__init__:["handTool"],handTool:["type",ks]};var _S="connect-ok",bS="connect-not-ok";function zs(e,t,n,i,o,s,c){var u=this;this._dragging=t,this._rules=s,this._mouse=c,o.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(f){var d=f.context,h=f.hover,v=d.canStartConnect=u.canStartConnect(h);v!==null&&(d.startTarget=h,i.addMarker(h,v?_S:bS))}),e.on(["global-connect.out","global-connect.cleanup"],function(f){var d=f.context.startTarget,h=f.context.canStartConnect;d&&i.removeMarker(d,h?_S:bS)}),e.on(["global-connect.ended"],function(f){var d=f.context,h=d.startTarget,v={x:f.x,y:f.y},y=u.canStartConnect(h);if(y)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,h,v)}),!1})}zs.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];zs.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};zs.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};zs.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};zs.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const f9={__depends__:[gg,Wi,Rr,Yp,Tc],globalConnect:["type",zs]};function Ry(e,t,n,i,o,s,c,u){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=o,this._handTool=s,this._globalConnect=c,this._translate=u,e.registerProvider(this)}Ry.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Ry.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,o=this._lassoTool,s=this._handTool,c=this._globalConnect,u=this._translate;function f(v,y,_,b,w){function S(O){var N=n.createShape(I({type:v},w));t.start(O,N)}return{group:y,className:_,title:b,action:{dragstart:S,click:S}}}function d(v){var y=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),_=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:y});t.start(v,[y,_],{hints:{autoSelect:[y]}})}function h(v){t.start(v,n.createParticipantShape())}return I(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:u("Activate hand tool"),action:{click:function(v){s.activateHand(v)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:u("Activate lasso tool"),action:{click:function(v){o.activateSelection(v)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:u("Activate create/remove space tool"),action:{click:function(v){i.activateSelection(v)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:u("Activate global connect tool"),action:{click:function(v){c.start(v)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":f("bpmn:StartEvent","event","bpmn-icon-start-event-none",u("Create start event")),"create.intermediate-event":f("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",u("Create intermediate/boundary event")),"create.end-event":f("bpmn:EndEvent","event","bpmn-icon-end-event-none",u("Create end event")),"create.exclusive-gateway":f("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",u("Create gateway")),"create.task":f("bpmn:Task","activity","bpmn-icon-task",u("Create task")),"create.data-object":f("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",u("Create data object reference")),"create.data-store":f("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",u("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:u("Create expanded sub-process"),action:{dragstart:d,click:d}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:u("Create pool/participant"),action:{dragstart:h,click:h}},"create.group":f("bpmn:Group","artifact","bpmn-icon-group",u("Create group"))}),e};const p9={__depends__:[l9,Fp,GT,c9,u9,f9,xp],__init__:["paletteProvider"],paletteProvider:["type",Ry]};var d9=250;function Ty(e,t,n,i,o){ce.call(this,e);function s(u){var f=u.canExecute.replacements;z(f,function(d){var h=d.oldElementId,v={type:d.newElementType};if(!u.visualReplacements[h]){var y=t.get(h);I(v,{x:y.x,y:y.y});var _=n.createShape(v);i.addShape(_,y.parent);var b=ot('[data-element-id="'+oc(y.id)+'"]',u.dragGroup);b&&he(b,{display:"none"});var w=o.addDragger(_,u.dragGroup);u.visualReplacements[h]=w,i.removeShape(_)}})}function c(u){var f=u.visualReplacements;z(f,function(d,h){var v=ot('[data-element-id="'+oc(h)+'"]',u.dragGroup);v&&he(v,{display:"inline"}),d.remove(),f[h]&&delete f[h]})}e.on("shape.move.move",d9,function(u){var f=u.context,d=f.canExecute;f.visualReplacements||(f.visualReplacements={}),d&&d.replacements?s(f):c(f)})}Ty.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];ve(Ty,ce);const h9={__depends__:[Ls],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Ty]};var m9=1250,Zm=40,v9=20,g9=10,ES=20,M2=["x","y"],y9=Math.abs;function D2(e){e.on(["connect.hover","connect.move","connect.end"],m9,function(t){var n=t.context,i=n.canExecute,o=n.start,s=n.hover,c=n.source,u=n.target;t.originalEvent&&hi(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&s&&_9(t,s,S9(s)),s&&x9(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=di(o),He(s,["bpmn:Event","bpmn:Gateway"])&&xS(t,di(s)),He(s,["bpmn:Task","bpmn:SubProcess"])&&b9(t,s),T(c,"bpmn:BoundaryEvent")&&u===c.host&&E9(t)):O2(i,"bpmn:MessageFlow")?(T(o,"bpmn:Event")&&(n.connectionStart=di(o)),T(s,"bpmn:Event")&&xS(t,di(s))):n.connectionStart=n.initialConnectionStart)})}D2.$inject=["eventBus"];function _9(e,t,n){M2.forEach(function(i){var o=N2(i,t);e[i]<t[i]+n?Ot(e,i,t[i]+n):e[i]>t[i]+o-n&&Ot(e,i,t[i]+o-n)})}function b9(e,t){var n=di(t);M2.forEach(function(i){w9(e,t,i)&&Ot(e,i,n[i])})}function E9(e){var t=e.context,n=t.source,i=t.target;if(!R9(t)){var o=di(n),s=vn(o,i,-10),c=[];/top|bottom/.test(s)&&c.push("x"),/left|right/.test(s)&&c.push("y"),c.forEach(function(u){var f=e[u],d;y9(f-o[u])<Zm&&(f>o[u]?d=o[u]+Zm:d=o[u]-Zm,Ot(e,u,d))})}}function xS(e,t){Ot(e,"x",t.x),Ot(e,"y",t.y)}function O2(e,t){return e&&e.type===t}function x9(e,t){return fa(t,function(n){return O2(e,n)})}function N2(e,t){return e==="x"?t.width:t.height}function S9(e){return T(e,"bpmn:Task")?g9:v9}function w9(e,t,n){return e[n]>t[n]+ES&&e[n]<t[n]+N2(n,t)-ES}function R9(e){var t=e.hover,n=e.source;return t&&n&&t===n}function Ca(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Ca.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Ca.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Ca.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Ca.prototype.getSnapLocations=function(){return this._snapLocations};Ca.prototype.setSnapLocations=function(e){this._snapLocations=e};Ca.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new ud,n.initDefaults(this._defaultSnaps)),n};function ud(){this._snapValues={}}ud.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};ud.prototype.snap=function(e,t,n,i){var o=this._snapValues[t];return o&&PP(e[n],o[n],i)};ud.prototype.initDefaults=function(e){var t=this;z(e||{},function(n,i){z(n,function(o){t.add(i,o)})})};var T9=1250;function Zi(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(o){i.initSnap(o)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],T9,function(o){var s=o.context,c=s.shape,u=s.snapContext,f=s.target;if(!(o.originalEvent&&hi(o.originalEvent))&&!(_s(o)||!f)){var d=u.pointsForTarget(f);d.initialized||(d=i.addSnapTargetPoints(d,c,f),d.initialized=!0),n.snap(o,d)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}Zi.$inject=["elementRegistry","eventBus","snapping"];Zi.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,o=n.snapContext;o||(o=n.snapContext=new Ca);var s;t.get(i.id)?s=di(i,e):s={x:e.x+di(i).x,y:e.y+di(i).y};var c={x:s.x-i.width/2,y:s.y-i.height/2},u={x:s.x+i.width/2,y:s.y+i.height/2};return o.setSnapOrigin("mid",{x:s.x-e.x,y:s.y-e.y}),Xe(i)||(o.setSnapOrigin("top-left",{x:c.x-e.x,y:c.y-e.y}),o.setSnapOrigin("bottom-right",{x:u.x-e.x,y:u.y-e.y})),o};Zi.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return z(i,function(o){if(Xe(o)){Xe(t)&&e.add("mid",di(o));return}if(st(o)){if(o.waypoints.length<3)return;var s=o.waypoints.slice(1,-1);z(s,function(c){e.add("mid",c)});return}e.add("mid",di(o))}),!Te(t.x)||!Te(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",di(t)),e};Zi.prototype.getSnapTargets=function(e,t){return YR(t).filter(function(n){return!C9(n)})};function C9(e){return!!e.hidden}var SS=1500;function js(e,t){t.invoke(Zi,this),e.on(["create.move","create.end"],SS,O9),e.on(["create.move","create.end","shape.move.move","shape.move.end"],SS,function(n){var i=n.context,o=i.canExecute,s=i.target,c=o&&(o==="attach"||o.attach);c&&!_s(n)&&A9(n,s)})}ve(js,Zi);js.$inject=["eventBus","injector"];js.prototype.initSnap=function(e){var t=Zi.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return z(n.outgoing,function(o){var s=o.waypoints[0];s=s.original||s,t.setSnapOrigin(o.id+"-docking",RS(s,i,e))}),z(n.incoming,function(o){var s=o.waypoints[o.waypoints.length-1];s=s.original||s,t.setSnapOrigin(o.id+"-docking",RS(s,i,e))}),T(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};js.prototype.addSnapTargetPoints=function(e,t,n){Zi.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);z(i,function(s){(D9(s)||M9([t,s],"bpmn:TextAnnotation"))&&(e.add("top-left",VR(s)),e.add("bottom-right",FR(s)))});var o=this._elementRegistry;return z(t.incoming,function(s){if(o.get(t.id)){wS(i,s.source)||e.add("mid",Ce(s.source));var c=s.waypoints[0];e.add(s.id+"-docking",c.original||c)}}),z(t.outgoing,function(s){if(o.get(t.id)){wS(i,s.target)||e.add("mid",Ce(s.target));var c=s.waypoints[s.waypoints.length-1];e.add(s.id+"-docking",c.original||c)}}),T(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};js.prototype.getSnapTargets=function(e,t){return Zi.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!T(n,"bpmn:Lane")})};function A9(e,t){var n=Se(t),i=yT(e,t),o=e.context,s=o.shape,c;s.parent?c={x:0,y:0}:c=Ce(s),/top/.test(i)?Ot(e,"y",n.top-c.y):/bottom/.test(i)&&Ot(e,"y",n.bottom-c.y),/left/.test(i)?Ot(e,"x",n.left-c.x):/right/.test(i)&&Ot(e,"x",n.right-c.x)}function M9(e,t){return e.every(function(n){return T(n,t)})}function D9(e){return T(e,"bpmn:SubProcess")&&Ue(e)?!0:T(e,"bpmn:Participant")}function O9(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,o=n.right,s=n.bottom,c=n.left;(c&&c>=e.x||o&&o<=e.x)&&Ot(e,"x",e.x),(i&&i>=e.y||s&&s<=e.y)&&Ot(e,"y",e.y)}}function wS(e,t){return e.indexOf(t)!==-1}function RS(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var N9=1250;function Gc(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],N9,function(i){var o=i.context,s=o.shape,c=s.parent,u=o.direction,f=o.snapContext;if(!(i.originalEvent&&hi(i.originalEvent))&&!_s(i)){var d=f.pointsForTarget(c);d.initialized||(d=n.addSnapTargetPoints(d,s,c,u),d.initialized=!0),L9(u)&&Ot(i,"x",i.x),k9(u)&&Ot(i,"y",i.y),t.snap(i,d)}}),e.on(["resize.cleanup"],function(){t.hide()})}Gc.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,o=t.snapContext;o||(o=t.snapContext=new Ca);var s=P2(n,i);return o.setSnapOrigin("corner",{x:s.x-e.x,y:s.y-e.y}),o};Gc.prototype.addSnapTargetPoints=function(e,t,n,i){var o=this.getSnapTargets(t,n);return z(o,function(s){e.add("corner",FR(s)),e.add("corner",VR(s))}),e.add("corner",P2(t,i)),e};Gc.$inject=["eventBus","snapping"];Gc.prototype.getSnapTargets=function(e,t){return YR(t).filter(function(n){return!P9(n,e)&&!st(n)&&!B9(n)&&!Xe(n)})};function P2(e,t){var n=Ce(e),i=Se(e),o={x:n.x,y:n.y};return t.indexOf("n")!==-1?o.y=i.top:t.indexOf("s")!==-1&&(o.y=i.bottom),t.indexOf("e")!==-1?o.x=i.right:t.indexOf("w")!==-1&&(o.x=i.left),o}function P9(e,t){return e.host===t}function B9(e){return!!e.hidden}function L9(e){return e==="n"||e==="s"}function k9(e){return e==="e"||e==="w"}var z9=7,j9=1e3;function Aa(e){this._canvas=e,this._asyncHide=NS(An(this.hide,this),j9)}Aa.$inject=["canvas"];Aa.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,o=i.getSnapLocations(),s={x:_s(e,"x"),y:_s(e,"y")};z(o,function(c){var u=i.getSnapOrigin(c),f={x:e.x+u.x,y:e.y+u.y};if(z(["x","y"],function(d){var h;s[d]||(h=t.snap(f,c,d,z9),h!==void 0&&(s[d]={value:h,originValue:h-u[d]}))}),s.x&&s.y)return!1}),this.showSnapLine("vertical",s.x&&s.x.value),this.showSnapLine("horizontal",s.y&&s.y.value),z(["x","y"],function(c){var u=s[c];Zt(u)&&Ot(e,c,u.originValue)})};Aa.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Ee("path");return he(n,{d:"M0,0 L0,0"}),Ye(n).add("djs-snap-line"),De(t,n),{update:function(i){Te(i)?e==="horizontal"?he(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):he(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):he(n,{display:"none"})}}};Aa.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Aa.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};Aa.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Aa.prototype.hide=function(){z(this._snapLines,function(e){e.update()})};const H9={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",Zi],resizeSnapping:["type",Gc],snapping:["type",Aa]},$9={__depends__:[H9],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",D2],createMoveSnapping:["type",js]};var B2=300;function Pe(e,t,n,i){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=i,this._container=this._getBoxHtml(),this._searchInput=ot(Pe.INPUT_SELECTOR,this._container),this._resultsContainer=ot(Pe.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}Pe.$inject=["canvas","eventBus","selection","translate"];Pe.prototype._bindEvents=function(){var e=this;function t(n,i,o,s){e._eventMaps.push({el:n,type:o,listener:jn.bind(n,i,o,s)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,Pe.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Pe.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Pe.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Pe.INPUT_SELECTOR,"keydown",function(n){Kt("ArrowUp",n)&&n.preventDefault(),Kt("ArrowDown",n)&&n.preventDefault()}),t(this._container,Pe.INPUT_SELECTOR,"keyup",function(n){if(Kt("Escape",n))return e.close();if(Kt("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close(!1)}if(Kt("ArrowUp",n))return e._scrollToDirection(!0);if(Kt("ArrowDown",n))return e._scrollToDirection();Kt(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};Pe.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){jn.unbind(e.el,e.type,e.listener)})};Pe.prototype._search=function(e){var t=this;if(this._clearResults(),!!e.trim()){var n=this._searchProvider.find(e);if(n=n.filter(function(o){return!t._canvas.getRootElements().includes(o.element)}),!n.length){this._selection.select(null);return}n.forEach(function(o){var s=o.element.id,c=t._createResultNode(o,s);t._results[s]={element:o.element,node:c}});var i=ot(Pe.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}};Pe.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Pe.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};Pe.prototype._clearResults=function(){pp(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};Pe.prototype._getCurrentResult=function(){return ot(Pe.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Pe.prototype._createResultNode=function(e,t){var n=ht(Pe.RESULT_HTML);return e.primaryTokens.length>0&&TS(n,e.primaryTokens,Pe.RESULT_PRIMARY_HTML),TS(n,e.secondaryTokens,Pe.RESULT_SECONDARY_HTML),pn(n,Pe.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};Pe.prototype.registerProvider=function(e){this._searchProvider=e};Pe.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._selection.select(null),this._bindEvents(),this._open=!0,St(this._canvas.getContainer()).add("djs-search-open"),St(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Pe.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,St(this._canvas.getContainer()).remove("djs-search-open"),St(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"),this._canvas.restoreFocus())};Pe.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Pe.prototype.isOpen=function(){return this._open};Pe.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&St(t).remove(Pe.RESULT_SELECTED_CLASS);var n=pn(e,Pe.RESULT_ID_ATTRIBUTE),i=this._results[n].element;St(e).add(Pe.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(i,{top:B2}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}};Pe.prototype._select=function(e){var t=pn(e,Pe.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:B2}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Pe.prototype._getBoxHtml=function(){const e=ht(Pe.BOX_HTML),t=ot(Pe.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function TS(e,t,n){var i=I9(t),o=ht(n);o.innerHTML=i,e.appendChild(o)}function I9(e){var t="";return e.forEach(function(n){var i=Lw(n.value||n.matched||n.normal),o=n.match||n.matched;o?t+='<b class="'+Pe.RESULT_HIGHLIGHT_CLASS+'">'+i+"</b>":t+=i}),t!==""?t:null}Pe.CONTAINER_SELECTOR=".djs-search-container";Pe.INPUT_SELECTOR=".djs-search-input input";Pe.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Pe.RESULT_SELECTOR=".djs-search-result";Pe.RESULT_SELECTED_CLASS="djs-search-result-selected";Pe.RESULT_SELECTED_SELECTOR="."+Pe.RESULT_SELECTED_CLASS;Pe.RESULT_ID_ATTRIBUTE="data-result-id";Pe.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Pe.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;Pe.RESULT_HTML='<div class="djs-search-result"></div>';Pe.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Pe.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const U9={__depends__:[xp,wp,Di],searchPad:["type",Pe]};function Cy(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._search=i,t.registerProvider(this)}Cy.$inject=["elementRegistry","searchPad","canvas","search"];Cy.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(i){return!Xe(i)&&!t.includes(i)});return this._search(n.map(i=>({element:i,label:Mi(i),id:i.id})),e,{keys:["label","id"]}).map(G9)};function G9(e){const{item:{element:t},tokens:n}=e;return{element:t,primaryTokens:n.label,secondaryTokens:n.id}}const V9={__depends__:[U9,wR],__init__:["bpmnSearch"],bpmnSearch:["type",Cy]},F9="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",Y9="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",q9={width:36,height:50},X9={width:50,height:50};function CS(e,t,n){return Ee("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const aa=5;function fd(e,t){this._styles=t,e.registerProvider(this)}fd.$inject=["outline","styles"];fd.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Xe(e))return T(e,"bpmn:Gateway")?(n=Ee("rect"),I(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),he(n,I({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):He(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Ee("rect"),he(n,I({x:-aa,y:-aa,rx:14,width:e.width+aa*2,height:e.height+aa*2},t))):T(e,"bpmn:EndEvent")?(n=Ee("circle"),he(n,I({cx:e.width/2,cy:e.height/2,r:e.width/2+aa+1},t))):T(e,"bpmn:Event")?(n=Ee("circle"),he(n,I({cx:e.width/2,cy:e.height/2,r:e.width/2+aa},t))):T(e,"bpmn:DataObjectReference")&&AS(e,"bpmn:DataObjectReference")?n=CS(F9,{x:-6,y:-6},t):T(e,"bpmn:DataStoreReference")&&AS(e,"bpmn:DataStoreReference")&&(n=CS(Y9,{x:-6,y:-6},t)),n};fd.prototype.updateOutline=function(e,t){if(!Xe(e))return He(e,["bpmn:SubProcess","bpmn:Group"])?(he(t,{width:e.width+aa*2,height:e.height+aa*2}),!0):!!He(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function AS(e,t){var n;return t==="bpmn:DataObjectReference"?n=q9:t==="bpmn:DataStoreReference"&&(n=X9),e.width===n.width&&e.height===n.height}const K9={__depends__:[x2],__init__:["outlineProvider"],outlineProvider:["type",fd]};var W9='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Gi(e){bc.call(this,e)}ve(Gi,bc);Gi.Viewer=ga;Gi.NavigatedViewer=lc;Gi.prototype.createDiagram=function(){return this.importXML(W9)};Gi.prototype._interactionModules=[Kw,Jw,nR];Gi.prototype._modelingModules=[Y5,pg,mP,cP,LP,gg,IP,XL,zT,Fp,QL,tk,yk,bk,Ek,Tk,jk,o2,Fk,n9,p9,h9,y2,$9,V9,K9];Gi.prototype._modules=[].concat(ga.prototype._modules,Gi.prototype._interactionModules,Gi.prototype._modelingModules);function Ay(e,t,n,i,o,s,c,u){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=o,this._handTool=s,this._globalConnect=c,this._translate=u,e.registerProvider(this)}Ay.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Ay.prototype.getPaletteEntries=function(){const{_create:e,_elementFactory:t,_spaceTool:n,_lassoTool:i,_handTool:o,_globalConnect:s,_translate:c}=this;function u(f,d,h,v,y={}){function _(b){const w=t.createShape({type:f,...y});e.start(b,w)}return{group:d,className:h,title:c(v),action:{dragstart:_,click:_}}}return{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate the hand tool"),action:{click:function(f){o.activateHand(f)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate the lasso tool"),action:{click:function(f){i.activateSelection(f)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate the create/remove space tool"),action:{click:function(f){n.activateSelection(f)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate the global connect tool"),action:{click:function(f){s.start(f)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":u("bpmn:StartEvent","event","bpmn-icon-start-event-none","Create StartEvent"),"create.intermediate-event":u("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none","Create Intermediate/Boundary Event"),"create.end-event":u("bpmn:EndEvent","event","bpmn-icon-end-event-none","Create EndEvent"),"event-separator":{group:"event",separator:!0},"create.exclusive-gateway":u("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-xor","Create Exclusive Gateway (XOR)"),"create.parallel-gateway":u("bpmn:ParallelGateway","gateway","bpmn-icon-gateway-parallel","Create Parallel Gateway (AND)"),"create.inclusive-gateway":u("bpmn:InclusiveGateway","gateway","bpmn-icon-gateway-or","Create Inclusive Gateway (OR)"),"create.complex-gateway":u("bpmn:ComplexGateway","gateway","bpmn-icon-gateway-complex","Create Complex Gateway"),"create.event-based-gateway":u("bpmn:EventBasedGateway","gateway","bpmn-icon-gateway-eventbased","Create Event-based Gateway"),"gateway-separator":{group:"gateway",separator:!0},"create.task":u("bpmn:Task","activity","bpmn-icon-task","Create Task"),"create.user-task":u("bpmn:UserTask","activity","bpmn-icon-user-task","Create User Task"),"create.service-task":u("bpmn:ServiceTask","activity","bpmn-icon-service-task","Create Service Task"),"create.script-task":u("bpmn:ScriptTask","activity","bpmn-icon-script-task","Create Script Task"),"create.manual-task":u("bpmn:ManualTask","activity","bpmn-icon-manual-task","Create Manual Task"),"create.subprocess-expanded":u("bpmn:SubProcess","activity","bpmn-icon-subprocess-expanded","Create expanded SubProcess",{isExpanded:!0}),"activity-separator":{group:"activity",separator:!0},"create.data-object":u("bpmn:DataObjectReference","data","bpmn-icon-data-object","Create DataObjectReference"),"create.data-store":u("bpmn:DataStoreReference","data","bpmn-icon-data-store","Create DataStoreReference"),"data-separator":{group:"data",separator:!0},"create.participant-expanded":u("bpmn:Participant","collaboration","bpmn-icon-participant","Create Pool/Participant",{isExpanded:!0})}};const MS=`<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" 
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" 
  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" 
  xmlns:di="http://www.omg.org/spec/DD/20100524/DI" 
  id="Definitions_1" 
  targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:collaboration id="Collaboration_1">
    <bpmn:participant id="Participant_1" name="Sample Process" processRef="Process_1" />
  </bpmn:collaboration>
  <bpmn:process id="Process_1" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_User" name="User">
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_1</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="StartEvent_1" name="Start">
      <bpmn:outgoing>Flow_1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Task_1" name="Complete Task">
      <bpmn:incoming>Flow_1</bpmn:incoming>
      <bpmn:outgoing>Flow_2</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="EndEvent_1" name="End">
      <bpmn:incoming>Flow_2</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="Task_1" />
    <bpmn:sequenceFlow id="Flow_2" sourceRef="Task_1" targetRef="EndEvent_1" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1">
      <bpmndi:BPMNShape id="Participant_1_di" bpmnElement="Participant_1" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="400" height="180" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_User_di" bpmnElement="Lane_User" isHorizontal="true">
        <dc:Bounds x="190" y="80" width="370" height="180" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <dc:Bounds x="242" y="152" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="248" y="195" width="24" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_1_di" bpmnElement="Task_1">
        <dc:Bounds x="330" y="130" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1_di" bpmnElement="EndEvent_1">
        <dc:Bounds x="482" y="152" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="490" y="195" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1">
        <di:waypoint x="278" y="170" />
        <di:waypoint x="330" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2">
        <di:waypoint x="430" y="170" />
        <di:waypoint x="482" y="170" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>`,L2=un.forwardRef(({onXmlChange:e},t)=>{const n=un.useRef(null),i=un.useRef(null);return un.useImperativeHandle(t,()=>({importXml:async o=>{if(i.current)try{await i.current.importXML(o),i.current.get("canvas").zoom("fit-viewport"),e&&e(o)}catch(s){console.error("Error importing XML:",s)}},exportSVG:async()=>{if(i.current)try{const{svg:o}=await i.current.saveSVG(),s=new Blob([o],{type:"image/svg+xml"}),c=URL.createObjectURL(s),u=document.createElement("a");u.href=c,u.download="bpmn-diagram.svg",u.click(),URL.revokeObjectURL(c)}catch(o){console.error("Error exporting SVG:",o)}},exportPNG:async()=>{if(i.current)try{const{svg:o}=await i.current.saveSVG(),c=new DOMParser().parseFromString(o,"image/svg+xml");c.querySelectorAll("rect").forEach(S=>{S.setAttribute("fill","none")}),c.querySelectorAll("path").forEach(S=>{const O=S.getAttribute("fill");(O==="white"||O==="#ffffff"||O==="#fff"||O==="rgb(255,255,255)")&&S.setAttribute("fill","none")}),c.querySelectorAll("circle, ellipse").forEach(S=>{const O=S.getAttribute("fill");(O==="white"||O==="#ffffff"||O==="#fff"||O==="rgb(255,255,255)")&&S.setAttribute("fill","none")});const v=new XMLSerializer().serializeToString(c),y=document.createElement("canvas"),_=y.getContext("2d"),b=new Image,w=3;return new Promise((S,O)=>{b.onload=()=>{y.width=b.width*w,y.height=b.height*w,_.scale(w,w),_.imageSmoothingEnabled=!1,_.imageSmoothingQuality="high",_.clearRect(0,0,b.width,b.height),_.drawImage(b,0,0),y.toBlob(C=>{const D=URL.createObjectURL(C),B=document.createElement("a");B.href=D,B.download="bpmn-diagram-hq.png",B.click(),URL.revokeObjectURL(D),S()},"image/png",1)},b.onerror=O;const N=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(N);b.src=A})}catch(o){console.error("Error exporting PNG:",o)}},exportXML:async()=>{if(i.current)try{const{xml:o}=await i.current.saveXML({format:!0}),s=new Blob([o],{type:"text/xml"}),c=URL.createObjectURL(s),u=document.createElement("a");u.href=c,u.download="bpmn-diagram.xml",u.click(),URL.revokeObjectURL(c)}catch(o){console.error("Error exporting XML:",o)}},zoomFit:()=>{if(i.current)try{i.current.get("canvas").zoom("fit-viewport")}catch(o){console.error("Error zooming:",o)}},getXml:async()=>{if(i.current)try{const{xml:o}=await i.current.saveXML({format:!0});return o}catch(o){return console.error("Error getting XML:",o),null}return null}})),un.useEffect(()=>(n.current&&!i.current&&(i.current=new Gi({container:n.current,additionalModules:[{__init__:["customPalette"],customPalette:["type",Ay]}]}),i.current.on("commandStack.changed",async()=>{if(e&&i.current)try{const{xml:o}=await i.current.saveXML({format:!0});e(o)}catch(o){console.error("Error getting XML on change:",o)}}),setTimeout(()=>{i.current&&i.current.importXML(MS).then(()=>{i.current.get("canvas").zoom("fit-viewport"),e&&e(MS)}).catch(o=>{console.error("Error loading initial diagram:",o)})},100)),()=>{i.current&&(i.current.destroy(),i.current=null)}),[e]),ye.jsx("div",{ref:n,className:"bpmn-modeler-container"})});L2.displayName="BpmnModeler";function Z9({onGenerate:e}){const[t,n]=un.useState(""),[i,o]=un.useState(!1),[s,c]=un.useState([]),[u,f]=un.useState("claude"),d=un.useRef(null),h=un.useRef(null),v=["HR manager reviews application, HR assistant creates employee record, then manager assigns mentor","Customer submits order, sales representative validates order, warehouse fulfills order, customer receives confirmation","User reports issue, support agent analyzes problem, if complex then escalate to specialist, otherwise resolve directly","Employee requests vacation, manager reviews request, if approved then HR updates system, otherwise notify employee"],y=async(N,A)=>{console.log("Claude Sonnet 4 BPMN Generation...");const D=await fetch("https://nimab.app.n8n.cloud/webhook/bpmn-generator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process_description:N,process_name:_(N),complexity:"standard"}),signal:A});if(!D.ok)throw new Error(`HTTP error! status: ${D.status} - Check if endpoint is available`);const B=await D.json();if(console.log(" Claude Response:",B),!B.bpmn_xml)throw new Error("No BPMN XML returned from Claude");let F=B.bpmn_xml.trim();F.startsWith("```xml")?F=F.replace(/^```xml\s*/,"").replace(/\s*```$/,""):F.startsWith("```")&&(F=F.replace(/^```\s*/,"").replace(/\s*```$/,""));const j=F.indexOf("</bpmn:definitions>");if(j!==-1&&(F=F.substring(0,j+19).trim(),console.log(" Extracted clean XML, length:",F.length)),!F.endsWith("</bpmn:definitions>"))throw console.warn(" XML appears to be truncated or incomplete"),console.log("Raw response length:",B.bpmn_xml.length),console.log("XML ending:",F.substring(F.length-100)),new Error("AI generated incomplete BPMN XML - probeer een kortere beschrijving");if(!F.includes("<bpmn:definitions")||!F.includes("<bpmn:collaboration"))throw new Error("AI generated invalid BPMN structure - probeer opnieuw");return F},_=N=>N.toLowerCase().includes("hr")||N.toLowerCase().includes("employee")?"HR Process":N.toLowerCase().includes("order")||N.toLowerCase().includes("sales")?"Sales Process":N.toLowerCase().includes("support")||N.toLowerCase().includes("issue")?"Support Process":"Business Process",b=async()=>{if(t.trim()){h.current=new AbortController,o(!0);try{const N=await y(t,h.current.signal);e(N),c(A=>[{prompt:t,timestamp:new Date().toLocaleTimeString()},...A.slice(0,4)]),n("")}catch(N){console.error("Error generating BPMN:",N),N.name==="AbortError"?alert("Request geannuleerd door gebruiker."):alert(`Fout bij genereren BPMN: ${N.message}`)}finally{o(!1),h.current=null}}},w=()=>{h.current&&h.current.abort()},S=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),b())},O=N=>{n(N),d.current?.focus()};return ye.jsxs("div",{style:{padding:"20px",height:"100%",display:"flex",flexDirection:"column",backgroundColor:"#f8f9fa",position:"relative"},children:[ye.jsx("div",{style:{marginBottom:"20px"},children:ye.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"},children:[ye.jsx("h3",{style:{margin:0,color:"#2c3e50"},children:"AI BPMN Generator"}),ye.jsx("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:ye.jsx("span",{style:{fontSize:"14px",color:"#666",fontWeight:"500"},children:"Claude Sonnet 4"})})]})}),ye.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"15px",minHeight:0},children:[ye.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",flex:1},children:[ye.jsx("textarea",{ref:d,value:t,onChange:N=>n(N.target.value),onKeyDown:S,placeholder:"Bijv: 'HR manager reviews application, HR assistant creates employee record, then manager assigns mentor'",style:{flex:1,minHeight:"120px",padding:"12px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px",fontFamily:"system-ui, sans-serif",resize:"vertical"}}),ye.jsx("button",{onClick:b,disabled:!t.trim()||i,style:{padding:"12px 20px",backgroundColor:i?"#95a5a6":"#27ae60",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"600",cursor:i?"not-allowed":"pointer",transition:"background-color 0.2s"},children:i?"AI Processing...":"Generate BPMN"})]}),ye.jsxs("div",{style:{borderTop:"1px solid #e0e0e0",paddingTop:"15px"},children:[ye.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"14px",color:"#555"},children:"AI voorbeelden:"}),ye.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:v.map((N,A)=>ye.jsx("button",{onClick:()=>O(N),style:{padding:"8px 12px",backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px",fontSize:"13px",textAlign:"left",cursor:"pointer",color:"#555"},children:N},A))})]}),s.length>0&&ye.jsxs("div",{style:{borderTop:"1px solid #e0e0e0",paddingTop:"15px"},children:[ye.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"14px",color:"#555"},children:"AI Geschiedenis:"}),ye.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:s.map((N,A)=>ye.jsxs("div",{onClick:()=>O(N.prompt),style:{padding:"6px 10px",backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"3px",fontSize:"12px",cursor:"pointer",color:"#666"},children:[ye.jsx("div",{style:{fontWeight:"500"},children:N.prompt}),ye.jsx("div",{style:{fontSize:"11px",color:"#999",marginTop:"2px"},children:N.timestamp})]},A))})]})]}),i&&ye.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e3},children:[ye.jsx("div",{style:{width:"80px",height:"80px",border:"8px solid #f3f3f3",borderTop:"8px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"20px"}}),ye.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"bold",textAlign:"center",marginBottom:"10px"},children:"AI Processing..."}),ye.jsx("div",{style:{color:"#bdc3c7",fontSize:"14px",textAlign:"center",marginBottom:"20px"},children:"Claude genereert professionele BPMN diagrammen"}),ye.jsx("button",{onClick:w,style:{padding:"8px 16px",backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",fontWeight:"bold"},children:" Cancel Request"})]}),ye.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})}function Q9({xml:e,isOpen:t,onToggle:n}){const[i,o]=un.useState(!1),s=()=>{e&&(navigator.clipboard.writeText(e),o(!0),setTimeout(()=>o(!1),2e3))},c=u=>{if(!u)return"";try{let f=u,d=0;const h="  ";return f=f.replace(/(>)(<)(\/*)/g,`$1
$2$3`),f=f.split(`
`).map(v=>{let y="";return v.match(/.+<\/\w[^>]*>$/)?y=h.repeat(d):v.match(/^<\/\w/)?(d=Math.max(0,d-1),y=h.repeat(d)):v.match(/^<\w[^>]*[^\/]>.*$/)?(y=h.repeat(d),d++):y=h.repeat(d),y+v}).join(`
`),f}catch{return u}};return ye.jsxs(ye.Fragment,{children:[ye.jsx("button",{className:"xml-toggle-btn",onClick:n,title:t?"Hide XML Code":"Show XML Code",children:"</>"}),ye.jsxs("div",{className:`xml-sidebar ${t?"open":""}`,children:[ye.jsxs("div",{className:"sidebar-header",children:[ye.jsx("h3",{children:"XML Code"}),ye.jsxs("div",{className:"sidebar-actions",children:[ye.jsx("button",{className:"copy-btn",onClick:s,disabled:!e,title:"Copy XML",children:i?" Copied":" Copy"}),ye.jsx("button",{className:"close-btn",onClick:n,title:"Close",children:""})]})]}),ye.jsx("div",{className:"xml-content",children:e?ye.jsx("pre",{children:ye.jsx("code",{children:c(e)})}):ye.jsxs("div",{className:"no-xml",children:[ye.jsx("p",{children:"No XML content yet"}),ye.jsx("p",{className:"hint",children:"Create or edit a BPMN diagram to see the XML code"})]})})]})]})}function J9(){const[e,t]=un.useState(!1),[n,i]=un.useState(""),[o,s]=un.useState(!1),c=un.useRef(null),u=y=>{c.current&&c.current.importXml(y)},f=()=>{c.current&&c.current.exportSVG()},d=()=>{c.current&&c.current.exportPNG()},h=()=>{c.current&&c.current.exportXML()},v=()=>{c.current&&c.current.zoomFit()};return ye.jsxs("div",{className:`app ${e?"dark":""}`,children:[ye.jsxs("header",{className:"header",children:[ye.jsxs("div",{className:"header-brand",children:[ye.jsx("h1",{children:"BPMN AI Studio"}),ye.jsx("p",{children:"Professional Business Process Modeling"})]}),ye.jsx("div",{className:"header-controls",children:ye.jsx("button",{className:"dark-mode-toggle",onClick:()=>t(!e),title:"Toggle dark mode",children:e?"":""})})]}),ye.jsxs("div",{className:"main-layout",children:[ye.jsx("div",{className:"chat-panel",children:ye.jsx(Z9,{onGenerate:u})}),ye.jsxs("div",{className:"preview-panel",children:[ye.jsxs("div",{className:"preview-header",children:[ye.jsx("h2",{children:"BPMN Diagram"}),ye.jsxs("div",{className:"preview-controls",children:[ye.jsx("button",{className:"control-button",onClick:v,children:"Zoom Fit"}),ye.jsx("button",{className:"control-button",onClick:f,children:"Export SVG"}),ye.jsx("button",{className:"control-button",onClick:d,children:"Export PNG"}),ye.jsx("button",{className:"control-button",onClick:h,children:"Export XML"})]})]}),ye.jsx("div",{className:"modeler-container",children:ye.jsx(L2,{ref:c,onXmlChange:i})})]})]}),ye.jsx(Q9,{xml:n,isOpen:o,onToggle:()=>s(!o)})]})}sM.createRoot(document.getElementById("root")).render(ye.jsx(un.StrictMode,{children:ye.jsx(J9,{})}));
